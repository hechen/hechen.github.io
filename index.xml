<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>I make stuff</title>
    <link>https://hechen.xyz/</link>
    <description>Recent content on I make stuff</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 08 Aug 2019 19:00:20 +0800</lastBuildDate>
    
        <atom:link href="https://hechen.xyz/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>About</title>
      <link>https://hechen.xyz/about/</link>
      <pubDate>Sun, 20 Aug 2017 21:38:52 +0800</pubDate>
      
      <guid>https://hechen.xyz/about/</guid>
      
        <description>&lt;p&gt;åšè¿‡ C++ å¼€å‘&lt;/p&gt;

&lt;p&gt;ç›®å‰åš iOS å¼€å‘ï¼Œå¶å°”åšä¸ª Mac å¼€å‘&lt;/p&gt;

&lt;p&gt;æ‰“æ‚ä¸­&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Protocol Extension</title>
      <link>https://hechen.xyz/post/protocol-extension/</link>
      <pubDate>Thu, 08 Aug 2019 19:00:20 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/protocol-extension/</guid>
      
        <description>&lt;p&gt;Protocol ä½œä¸º Swift ç”Ÿæ€çš„æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ï¼Œå…¶æ­å»ºèµ·äº†æ•´ä¸ªè¯­è¨€ç”Ÿæ€çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;p&gt;ç›¸å¯¹äºç»§æ‰¿è€Œè¨€ï¼ŒProtocol çš„å‡ ä¸ªæ¯”è¾ƒç›´è§‚çš„ä¼˜åŠ¿ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æ— éœ€å¿…é¡»å»å¼ºåˆ¶ç»§æ‰¿æŸä¸ªç±»ï¼›&lt;/li&gt;
&lt;li&gt;é€šè¿‡åè®®å¯ä»¥æ”¹é€ å·²ç»å­˜åœ¨çš„ç±»å‹ï¼›&lt;/li&gt;
&lt;li&gt;é€‚ç”¨èŒƒå›´æ›´å¤§ä¸€äº›ï¼Œä½¿å¾— struct å’Œ enum è¿™äº›å€¼ç±»å‹ä¹Ÿèƒ½å¤Ÿç»§æ‰¿èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;Swift è¯­è¨€æœ¬èº«æ˜¯ä¸æ”¯æŒå¤šç»§æ‰¿çš„ï¼Œä½ éœ€è¦èŠ±è´¹ç²¾åŠ›å»çº ç»“ç»§æ‰¿å“ªä¸ª classï¼Œä¸€æ—¦å‡ºç°ä¸åŒçš„èƒ½åŠ›åˆ†æ•£åœ¨ä¸åŒçˆ¶ç±»çš„æƒ…å†µï¼Œå°±æ›´åŠ çº ç»“äº†ï¼Œä½ ç”šè‡³éœ€è¦å»ä¿®æ”¹åŸæœ‰çš„çˆ¶ç±»ï¼›&lt;/li&gt;
&lt;li&gt;ç»§æ‰¿çš„è¯ï¼Œè¿˜éœ€è¦è€ƒè™‘ override çˆ¶ç±»æ–¹æ³•çš„é—®é¢˜ï¼Œæ¯”å¦‚è°ƒç”¨ super æ–¹æ³•çš„æ—¶æœºé—®é¢˜ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿™ç¯‡æ–‡ç« æƒ³è®°å½•ä¸‹ Protocol Extension ä¸­çš„ä¸€ç‚¹åŒºåˆ«ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ Swift Protocol ä¸­æ˜¯æ²¡æœ‰ optional å…³é”®å­—çš„ï¼Œå› æ­¤åªè¦æ˜¯åœ¨ Protocol å®šä¹‰çš„æ–¹æ³•ï¼Œå³ä¸º Protocol Requirementsï¼Œç¬¦åˆè¯¥åè®®çš„ç±»å‹å°±å¿…é¡»å®ç°ï¼Œå¦åˆ™æ˜¯ä¸å®Œæ•´çš„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è‡ªå·±å®ç°äº† TableViewï¼Œå®šä¹‰äº†è¿™ä¹ˆå¤š delegate åè®®æ–¹æ³•ï¼Œè¦æ±‚è°ƒç”¨æ–¹å…¨éƒ½æä¾›ï¼Œå°±å¤ªä¸äººé“äº†ğŸ˜¢&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yA76SiN.png&#34; alt=&#34;Protocol&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡å¯¹ Protocol è¿›è¡Œæ‰©å±•ï¼Œç»™è¯¥åè®®æ–¹æ³•å¢åŠ ç¼ºçœå®ç°ï¼Œå‰©ä½™çš„æ–¹æ³•åˆ™æ˜¯ä½ éœ€è¦è°ƒç”¨æ–¹å¿…é¡»å®ç°çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/MRA0k6z.png&#34; alt=&#34;Optional Protocol&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœé’ˆå¯¹æŸä¸ªåè®® Pï¼Œæˆ‘ä»¬æ‰©å±• P ç»™å…¶å¢åŠ æŸä¸ªåè®®æ–¹æ³•æœ‰ä¸¤ç§å½¢å¼ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç›´æ¥åœ¨ Protocol å®šä¹‰é‡Œå®šä¹‰æ–°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æˆä¸ºå®ç°è¯¥åè®®å¿…é¡»å®ç°çš„æ–¹æ³•ï¼›&lt;/li&gt;
&lt;li&gt;ä¸º Protocol å¢åŠ æ‰©å±•æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¹¶ä¸ä¸€å®šè¦æ±‚ç¬¦åˆè¯¥åè®®çš„ç±»å‹è¿›è¡Œå®ç°ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿™ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ æˆ‘ä»¬çœ‹ä»£ç &lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/T3filbG.png&#34; alt=&#34;Static Dispatch&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å‘ç° s è°ƒç”¨çš„æ˜¯æˆ‘ä»¬ä¸º S ç»“æ„ä½“å¢åŠ çš„æ‰©å±•æ–¹æ³•ï¼Œè€Œ s2 è°ƒç”¨çš„æ˜¯ P åè®®çš„æ‰©å±•æ–¹æ³•ï¼Œå°½ç®¡å®ä½“å¯¹è±¡çš„åŠ¨æ€ç±»å‹æ˜¯ Sï¼Œä½†æ˜¯å› ä¸ºå£°æ˜çš„é™æ€ç±»å‹ä¸ä¸€æ ·ï¼Œè°ƒç”¨ç»“æœä¹Ÿä¸åŒã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äº 1 ä¸­çš„æ–¹æ³•ï¼Œè¿è¡Œæ—¶è¿›è¡ŒåŠ¨æ€æ´¾å‘ï¼Œä¹Ÿå°±æ˜¯çœŸå®æ ¹æ®å…¶å…·ä½“ç±»å‹æ¥åšå†³è®®ï¼Œ2 ä¸­çš„æ–¹æ³•æ˜¯è¿›è¡Œé™æ€æ´¾å‘ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å£°æ˜çš„è¯¥å¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå°±è°ƒç”¨è¯¥ç±»å‹çš„æ–¹æ³•ã€‚ ä»¥ä¸Šè¿°çš„ä»£ç ä¸ºä¾‹ï¼Œs1 çš„é™æ€ç±»å‹ç”±ç¼–è¯‘å™¨æ¨å¯¼ä¸º Sï¼Œè€Œ s2 çš„é™æ€ç±»å‹å£°æ˜ä¸º P ï¼Œå› æ­¤äºŒè€…åœ¨è°ƒç”¨æ‰©å±•åè®®æ–¹æ³•æ—¶å€™çš„è¡¨ç°ä¸ä¸€è‡´ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæƒ³ç¡®ä¿è°ƒç”¨æ–¹æ³•æ—¶å€™ä¸å› ä¸ºé™æ€ç±»å‹ä¸åŒè€Œå¯¼è‡´ä¸åŒçš„ç»“æœï¼Œå¯ä»¥å°†åè®®æ‰©å±•æ–¹æ³•åœ¨ P åè®®å®šä¹‰çš„åœ°æ–¹åŠ å…¥ï¼Œè‡ªæ­¤æ‰€æœ‰ç¬¦åˆè¯¥åè®®çš„ç±»å‹å°±å¿…é¡»å¼ºåˆ¶å®ç°è¯¥åè®®ï¼Œæ­¤æ—¶è¯¥æ–¹æ³•åˆ™æ˜¯é€šè¿‡åŠ¨æ€å†³è®®æ¥æ´¾å‘äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LzDWuWp.png&#34; alt=&#34;Dynamic Dispatch&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œæˆ‘ä»¬äº†è§£å®Œè¿™äº›ä¹‹åï¼Œå¯¹ä¸Šé¢ TableView çš„æ —å­å°±æœ‰äº†æ›´æ·±åˆ»çš„ç†è§£ï¼ŒProtocol ä¸­çš„æ–¹æ³•å®šä¹‰ä½¿å¾—æ‰€æœ‰ç¬¦åˆè¯¥åè®®çš„ç±»å‹åœ¨è¿è¡Œæ—¶è¿›è¡Œå†³è®®ï¼ˆä¹Ÿå°±æ˜¯å¯¹è±¡çš„åŠ¨æ€ç±»å‹ï¼‰ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœå‘ç°è¯¥å¯¹è±¡å·²ç»å®ç°äº†ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>LetsMove ä¸­çš„å‡ ä¸ªç‚¹</title>
      <link>https://hechen.xyz/post/letsmove/</link>
      <pubDate>Thu, 04 Jul 2019 01:19:10 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/letsmove/</guid>
      
        <description>

&lt;p&gt;å½“æˆ‘ä»¬ä»ç½‘ç»œä¸Šä¸‹è½½æŸä¸ª mac app ä¹‹åï¼Œä¸€èˆ¬éƒ½ä¼šé»˜è®¤åœ¨ Downloads ç›®å½•é‡Œï¼Œä½†æ˜¯æŸä¸€äº› App æ˜¯éœ€è¦æ”¾ç½®åˆ° Application ç›®å½•æ‰è¡Œï¼Œæœ€å¸¸è§çš„å°±æ˜¯è‡ªæ›´æ–°åŠŸèƒ½æ˜¯å—åˆ°å½“å‰æ‰€å¤„ç›®å½•çš„é™åˆ¶çš„ï¼Œè¿™æ—¶å€™å¾ˆå¤šä¸‹è½½åˆ°æœ¬åœ°çš„ .app æ–‡ä»¶æ‰“å¼€ä¹‹åéƒ½ä¼šå¼¹å‡ºæç¤ºæ¡†ï¼Œè®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦ç§»åŠ¨åˆ° Applications ç›®å½•ï¼ŒLetsMove å°±æ˜¯å¤§éƒ¨åˆ† mac app å‚è€ƒæˆ–è€…é›†æˆçš„å¼€æºåº“ï¼Œå°è£…äº†è¿™å¥—é€»è¾‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/99z1BQf.png&#34; alt=&#34;LetsMove&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªåº“å·²ç»å¥½å¤šå¹´äº†ï¼Œæœ€è¿‘çš„ä¸€æ¬¡ Commit æ˜¯ 2017å¹´ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªç‚¹å¯ä»¥å­¦ä¹ å€Ÿé‰´ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å¤§è‡´æ€è·¯&#34;&gt;å¤§è‡´æ€è·¯&lt;/h3&gt;

&lt;p&gt;è™½ç„¶å« Moveï¼Œå®é™…ä¸Šæ˜¯å…ˆè¡Œ Copy ä¸€ä»½å½“å‰çš„ App Bundle åˆ° Application ç›®å½•ï¼Œç„¶åæ€æ‰è‡ªå·±å¹¶åˆ é™¤æºç›®å½•çš„ App æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Move to Applications Folder ç¡®è®¤ä¹‹å&lt;/li&gt;
&lt;li&gt;å¤åˆ¶å½“å‰ App æ–‡ä»¶åˆ° /Applications ç›®å½•ä¸­&lt;/li&gt;
&lt;li&gt;åˆ é™¤å½“å‰å·²ç»æ‰“å¼€ App ï¼ˆMac ä¸Šæ˜¯å¯è¡Œçš„ï¼Œä¸åŒäº Windowsï¼Œä¸å­˜åœ¨å ç”¨æ–‡ä»¶å¥æŸ„çš„æƒ…å†µï¼‰&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå­è¿›ç¨‹æ‰§è¡Œé‡å¯è¿‡ç¨‹ï¼Œå…·ä½“åæ–‡ä¼šè®²ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;æƒé™è·å–-ææƒ&#34;&gt;æƒé™è·å–ï¼ˆææƒï¼‰&lt;/h3&gt;

&lt;p&gt;æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦å¯ä»¥å†™å…¥çš„æ–¹æ³•æ˜¯ NSFileManager çš„ isWritableFileAtPath ï¼Œå¦‚æœè¿”å› falseï¼ŒLetsMove ä¼šä¸»åŠ¨è¿›è¡Œæƒé™è·å–ã€‚&lt;/p&gt;

&lt;p&gt;è·å–æƒé™æ‰€ä½¿ç”¨çš„æ¥å£æ˜¯ AuthorizationExecuteWithPrivilegesï¼Œè¯¥æ¥å£å®é™…åœ¨ OSX 10.7 Lion ä¹‹åå°±å·²ç»æ ‡è®°åºŸå¼ƒäº†ï¼Œä½†æ˜¯ä¸€ç›´åˆ°ç›®å‰çš„ macOS 10.14 è¿˜ä¸€ç›´å¯ä»¥ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;è€Œä½œè€…ä¸ºäº†é¿å…è‹¹æœç›´æ¥ç§»é™¤è¯¥ä»£ç å¯¼è‡´ææƒæ¥å£ä¸å¯ç”¨ï¼Œä½¿ç”¨äº†åŠ¨æ€æŸ¥æ‰¾æ–¹æ³•çš„å½¢å¼ï¼Œåˆ©ç”¨ dlsym æŸ¥æ‰¾æ–¹æ³•æŒ‡é’ˆæ¥è·å–ï¼Œä»è€Œé¿å…å¦‚æœå®Œå…¨ç§»é™¤è¯¥æ–¹æ³•å¯¼è‡´åŠŸèƒ½ä¸ç¨³å®šçš„æƒ…å†µå‘ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LPQw1VR.png&#34; alt=&#34;Privileges Acquirement&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é€šè¿‡è¯¥æ–¹æ³•è·å–äº† rm å’Œ cp å‘½ä»¤åœ¨æŒ‡å®šç›®å½•çš„æƒé™ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ç”¨æˆ·ä¼šæ”¶åˆ°è¾“å…¥ Admin Password  çš„æç¤ºçš„ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ç°æœ‰çš„ææƒå®˜æ–¹æœ‰å»ºè®®ä½¿ç”¨ä¸€ä¸ª helper ç¨‹åºæ¥è´Ÿè´£æˆ–è€…ä½¿ç”¨ Service Management framework æ¥åšï¼Œè¿™ä¸¤è€…åœ¨åš App è‡ªå¯åŠ¨çš„æ—¶å€™å·²ç»äº†è§£è¿‡äº†ï¼Œç¡®å®ä¸å¦‚è¿™ä¸€ä¸ªæ–¹æ³•æ¥çš„ç®€å•ã€‚æœ‰å…´è¶£å¯ä»¥å»çœ‹ä¸‹ LaunchdDaemon è¿™ä¸ªä¸œä¸œã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Use a launchd-launched helper tool and/or the Service Mangement framework
for this functionality.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;relaunch&#34;&gt;Relaunch&lt;/h3&gt;

&lt;p&gt;Relaunch æ–¹æ³•æ˜¯å°†åº”ç”¨ç§»åŠ¨åˆ° /Applications ç›®å½•åçš„åç»­åŠ¨ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/VnRvggh.png&#34; alt=&#34;Relaunch Code&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ NSTask é‡å¯è¿›ç¨‹çš„ Shell è„šæœ¬å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/hBftQB9.png&#34; alt=&#34;Relaunch Shell Script&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¯¥æ–¹æ³•æ¶‰åŠä¸¤ä¸ªä¸»è¦èŒèƒ½ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å°†æ‹·è´åˆ° /Applications ç›®å½•ä¸‹çš„ App æ–‡ä»¶å¢åŠ æ‰©å±•å±æ€§&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œ Shell è„šæœ¬ï¼Œæ€æ‰å½“å‰çˆ¶è¿›ç¨‹ï¼Œå¹¶é‡å¯åˆšåˆš Copy åˆ° /Applications ç›®å½•ä¸‹çš„ App æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…³äºç¬¬ä¸€ç‚¹ï¼Œä½¿ç”¨ kill å‘½ä»¤æ¥æ€æ‰å½“å‰ä¸»è¿›ç¨‹ï¼Œä½†æ˜¯ä½¿ç”¨çš„æ˜¯ kill -0ï¼Œä¸æ˜¯ä»»ä½•æœ‰æ•ˆçš„ signalï¼Œå…³äºè¯¥å‘½ä»¤åªæ˜¯æŸ¥è¯¢å½“å‰ä½ æ˜¯å¦æœ‰æƒé™æ¥åš kill è¿™ä»¶äº‹æƒ…ï¼Œè¿™ä¸€å—ä¹Ÿæ²¡çœ‹æ˜ç™½è¯¥æ–¹æ³•çš„æ„ä¹‰åœ¨å“ªé‡Œï¼ŒçŸ¥é“çš„åŒå­¦å¯ä»¥å‘ŠçŸ¥ä¸‹ï¼›&lt;/p&gt;

&lt;p&gt;å…³äºç¬¬äºŒç‚¹ï¼Œç”¨åˆ°äº† xattr å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ˜¯ç”¨æ¥é’ˆå¯¹æ–‡ä»¶çš„æ‰©å±•å±æ€§åšæ“ä½œçš„ã€‚ä¸Šæ–¹çš„å‘½ä»¤å°±æ˜¯ä¸ºå½“å‰å·²ç»ç§»åŠ¨åˆ° /Applications ç›®å½•ä¸‹çš„ App æ–‡ä»¶å»é™¤ com.apple.quarantine å±æ€§ã€‚ä¸çŸ¥é“å¤§å®¶è®°å¾—ä¸ï¼Œä»æŸäº›ç½‘ç«™ä¸‹å®Œ App ä¹‹åï¼Œæ¯”å¦‚ Github Desktop å®¢æˆ·ç«¯ï¼Œæ‰“å¼€ä¼šæç¤ºå¦‚ä¸‹çª—å£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/i9qfEtf.png&#34; alt=&#34;Download from Web&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ˜¯ macOS è‡ªèº«çš„å®‰å…¨æ ¡éªŒæç¤ºï¼Œå½“ç„¶ä¸€èˆ¬ä» web ä¸‹è½½çš„ App æœ¬èº«éƒ½ä¼šè¢«åŠ ä¸Š com.apple.quarantine çš„æ‰©å±•å±æ€§ï¼Œè¿™é‡Œæ˜¯ç§»é™¤äº†è¯¥å±æ€§ï¼Œé˜²æ­¢æ‰§è¡Œäº† open ä¹‹åå¼¹å‡ºè¯¥æç¤ºå¨æ‰°ç”¨æˆ·ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯åœ¨éæ²™ç›’åº”ç”¨ä¸­æ‰èƒ½å¤Ÿå®ç°ï¼Œå…³é”®åŸå› åœ¨äºæ²™ç›’ç¯å¢ƒä¸‹æˆæƒç›¸å…³çš„ API éƒ½æ˜¯å—åˆ°ä¸¥æ ¼é™åˆ¶çš„ã€‚å¦‚æœæƒ³é’ˆå¯¹æ²™ç›’åº”ç”¨åšï¼Œä¸€èˆ¬ä¼šåˆ¶ä½œæˆ dmg æ–‡ä»¶æ ¼å¼æ¥ä¾›ç”¨æˆ·æ˜¾å¼æ“ä½œã€‚&lt;/p&gt;

&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://unix.stackexchange.com/questions/169898/what-does-kill-0-do&#34;&gt;What does &lt;code&gt;kill -0&lt;/code&gt; do?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Extended_file_attributes&#34;&gt;Extended file attributes - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/potionfactory/LetsMove/issues/41&#34;&gt;Doesn&amp;rsquo;t work with sandboxed apps&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>XPC Services</title>
      <link>https://hechen.xyz/post/xpcservice/</link>
      <pubDate>Thu, 04 Jul 2019 01:01:10 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/xpcservice/</guid>
      
        <description>

&lt;h2 id=&#34;å…³äº-xpc&#34;&gt;å…³äº XPC&lt;/h2&gt;

&lt;p&gt;å› ä¸ºæœ€è¿‘åœ¨åšçš„å·¥ä½œæ¶‰åŠåˆ°è¿™ä¸€å—ï¼Œå°±å¤§è‡´çš„è®°å½•ä¸€ä¸‹ï¼Œé’ˆå¯¹ XPC æŠ€æœ¯ä¹Ÿåšä¸ªæ€»ç»“ã€‚&lt;/p&gt;

&lt;p&gt;XPC æ˜¯ macOS ä¸Šä¸€ç§è¿›ç¨‹é—´é€šä¿¡çš„æŠ€æœ¯ç»Ÿç§°ï¼Œå…¶ä½¿å¾—æˆ‘ä»¬å¯ä»¥å°† Mac åº”ç”¨çš„åŠŸèƒ½æ¨¡å—æ‹†åˆ†æˆä¸åŒçš„å¤šè¿›ç¨‹æ¨¡å¼ï¼Œå…³äºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¹Ÿè¢«ç³»ç»Ÿå°è£…å®Œæ•´äº†ï¼Œä½ åªéœ€è¦æŒ‰ç…§æ—¢å®šçš„æ¨¡å¼åšå³å¯ã€‚å…¶å¸¦æ¥çš„æœ€å¤§çš„å¥½å¤„æ˜¯&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æé«˜ App è‡ªèº«çš„ç¨³å®šæ€§&lt;/li&gt;
&lt;li&gt;è¿›è¡Œæƒé™éš”ç¦»&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‹¿æˆ‘ç›®å‰åœ¨åšçš„å·¥ä½œæ¥è®²ï¼Œç¡®å®æœ‰é’ˆå¯¹ä»¥ä¸Šè¿™ä¸¤ç‚¹çš„éœ€æ±‚ã€‚ä¸Šå±‚ä¸šåŠ¡é€šè¿‡æ‰§è¡Œè„šæœ¬å‘½ä»¤è·å–æ‰§è¡Œç»“æœï¼Œæ‰§è¡Œè„šæœ¬å‘½ä»¤ä½¿ç”¨çš„å°±æ˜¯ NSTaskï¼Œå¤§æ¦‚ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/8glAV2u.png&#34; alt=&#34;shared-42f9e747-a47b-46fd-b445-0c7615b41020&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¯¹äºæ‰§è¡Œ NSTask çš„è¿™å±‚å‘½ä»¤è¡Œæ‰§è¡Œæ¨¡å—æ¥è®²ï¼Œæ‹†åˆ†åˆ°ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ä½¿å¾—å®‰å…¨æ€§å¾—ä»¥æé«˜ï¼Œå³ä½¿ XPC è¿›ç¨‹æŒ‚æ‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å†æ¬¡å‘ XPC é€šä¿¡ï¼Œç³»ç»Ÿä¼šè‡ªè¡Œæ¢å¤å¯ç”¨æ–°çš„ XPC è¿›ç¨‹ï¼Œè€Œä¸»åº”ç”¨æ— æ„ŸçŸ¥ã€‚&lt;/p&gt;

&lt;h2 id=&#34;xpc-æ¶æ„&#34;&gt;XPC æ¶æ„&lt;/h2&gt;

&lt;p&gt;åœ¨ Apple å®˜æ–¹æ–‡æ¡£ä¸­æœ‰å¦‚ä¸‹å›¾ï¼Œå¾ˆæ¸…æ¥šçš„å±•ç¤ºäº†æ•´ä¸ª NSXPC çš„æ¶æ„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸»åº”ç”¨å’Œ XPC Service ä¹‹é—´æ˜¯é€šè¿‡ NSXPCConnection å¯¹è±¡ä¿æŒé€šä¿¡çš„ï¼Œå…¶é€šä¿¡æ¥å£ç”± Protocol å®šä¹‰ï¼Œç„¶åæš´éœ²ç»™å¤–ç•Œä¸€ä¸ªç¬¦åˆäº†è¯¥åè®®çš„å¯¹è±¡ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€æœ‰çš„ XPC Service æœ¬èº«æ˜¯ç”±ç³»ç»Ÿçº§åˆ«ç¨‹åº launchd æ¥ç®¡ç†å’Œç»´æŠ¤çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/OdvfZk4.png&#34; alt=&#34;NSXPC_intro_2x-337fb6a3-4df5-47b3-a322-e52c48905753&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å¼€å‘è¿‡ç¨‹&#34;&gt;å¼€å‘è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;æ•´ä½“ä¸Šä¸»åº”ç”¨å’Œ XPC é€šä¿¡æ˜¯æ ‡å‡†çš„ Client-Server æ¨¡å¼ã€‚å®¢æˆ·ç«¯è¯¢é—® Server ç«¯æ•°æ®ï¼ŒServer ç«¯åº”ç­”å³å¯ã€‚è¿™ä¹‹é—´çš„æ•°æ®åºåˆ—åŒ–å®Œå…¨äº¤ç”±ç³»ç»Ÿç®¡ç†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å…·ä½“æ­¥éª¤&#34;&gt;å…·ä½“æ­¥éª¤&lt;/h3&gt;

&lt;h4 id=&#34;æ–°å»º-xpc-service-çš„-target&#34;&gt;æ–°å»º XPC Service çš„ Target&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BNFRaG7.png&#34; alt=&#34;Add New XPC Service Target&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/AyEq9Iv.png&#34; alt=&#34;Input Target Info&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œè¦è¯´ä¸€ç‚¹ï¼ŒXcode æä¾›çš„ XPC Service åˆ›å»ºçš„æ—¶å€™æ˜¯æ²¡æœ‰è¯­è¨€é€‰é¡¹çš„ï¼Œé»˜è®¤éƒ½æ˜¯åˆ›å»ºçš„ Objective-C çš„æ ·æ¿æ–‡ä»¶ï¼Œä½†æ˜¯ä½ æ˜¯å¯ä»¥æŠŠæ‰€æœ‰çš„ä»£ç æ–‡ä»¶åˆ é™¤ï¼Œç„¶åå»ºç«‹ main.swift æ¥å†™çš„ï¼Œä¸€æ ·èƒ½å¤Ÿå¼€å‘ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å»ºç«‹-listener-ç›‘å¬è¿æ¥&#34;&gt;å»ºç«‹ Listenerï¼Œç›‘å¬è¿æ¥&lt;/h4&gt;

&lt;p&gt;å®é™…ä¸Šï¼Œå½“ä½ å»ºç«‹å®Œæ¯• Targe ä¹‹åï¼Œç³»ç»Ÿé»˜è®¤ç”Ÿæˆçš„æ–‡ä»¶é‡Œå·²ç»å°†å¯¹åº”çš„ä»£ç å¤§è‡´è¿‡ç¨‹å·²ç»é€šè¿‡æ³¨é‡Šå’Œä»£ç åˆ—å‡ºæ¥äº†ã€‚æˆ‘å°†è¿™éƒ¨åˆ†é€»è¾‘åœ¨ Swift æ–‡ä»¶é‡Œä¹Ÿå†™äº†å‡ºæ¥ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/o3gCND7.png&#34; alt=&#34;NSXCListener&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä¸ª Service ä¼šå¯åŠ¨ NSConnectionListenerï¼Œå…¶ä»£ç†æ–¹æ³•æ˜¯ NSXPCListenerDelegateï¼Œä¸€æ—¦ä¸»åº”ç”¨å‘èµ·è¿æ¥ï¼Œè¯¥ä»£ç†æ–¹æ³•å°±ä¼šå¯åŠ¨æ¥åšè¿æ¥å‰çš„å‡†å¤‡ï¼Œè€Œä»£ç†æ–¹æ³•ä¸­çš„ä¸»è¦é€»è¾‘å°±ä¸‰ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å‘Šè¯‰ Connection å¯¹è±¡ï¼ŒService æš´éœ²çš„æ¥å£ï¼ˆåè®®ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;ä¼ é€’ç»™ Connection å¯¹è±¡ä¸€ä¸ªç¬¦åˆäº†å‰é¢åè®®çš„å¯¹è±¡ï¼›&lt;/li&gt;
&lt;li&gt;å¯åŠ¨è¿æ¥ï¼›&lt;/li&gt;
&lt;li&gt;è¿”å›æ˜¯å¦å…è®¸æœ¬æ¬¡è¿æ¥å»ºç«‹ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…¶ä¸­ ServiceDemo å°±æ˜¯å…·ä½“å®ç°æ¥å£çš„å¯¹è±¡ã€‚&lt;/p&gt;

&lt;h4 id=&#34;ä¸»åº”ç”¨å‘èµ·è¿æ¥&#34;&gt;ä¸»åº”ç”¨å‘èµ·è¿æ¥&lt;/h4&gt;

&lt;p&gt;ä¸€èˆ¬ä¼šåœ¨ App å¯åŠ¨ä¹‹åå¯åŠ¨è¿æ¥ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼Œ&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;åˆ›å»º NSXPCConnection å¯¹è±¡ï¼ŒæŒ‡å®šè¿æ¥å“ªä¸ª Service&lt;/li&gt;
&lt;li&gt;æŒ‡å®šä½¿ç”¨å“ªä¸ªåè®®æ¥å£ï¼ˆProtocol çš„ Membership éœ€è¦ä¸»åº”ç”¨å’Œ XPC Service çš„Targe å…±äº«ï¼‰&lt;/li&gt;
&lt;li&gt;resume&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/3UTQgK6.png&#34; alt=&#34;Main Application&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æ­¤æ—¶ Service é‡Œçš„ç›‘å¬å®é™…ä¸Šè¿˜æœªæ‰§è¡Œï¼Œç›´åˆ°ä½ å‘èµ·ç¬¬ä¸€æ¬¡ Requestã€‚å‘ XPC Service å‘èµ·åŠ¨ä½œçš„å…·ä½“å°±æ˜¯ä»åˆšåˆšåˆ›å»ºçš„ NSXPCConnection ä¸­è·å–å¯¹åº”çš„æ¥å£ä»¥åŠæ‰§è¡Œè¯¥æ¥å£æ¥å’Œ Service äº¤äº’ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/9vACIeA.png&#34; alt=&#34;Request&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ•´ä½“è¿‡ç¨‹å¦‚ Apple æ–‡æ¡£é‡Œçš„å›¾ç¤ºè¿‡ç¨‹ï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BWf2G3l.png&#34; alt=&#34;NSXPC_connection_2x-38a1e530-7c34-400b-a39b-eca9eaadbe22&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;éœ€è¦æ³¨æ„çš„å‡ ç‚¹&#34;&gt;éœ€è¦æ³¨æ„çš„å‡ ç‚¹&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;NSXPCInterface å®šä¹‰çš„æ–¹æ³•å›è°ƒåªèƒ½æœ‰ä¸€ä¸ª Blockï¼Œå¦‚æœå¤šäºä¸€ä¸ªå°±ä¼šæŠ¥å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;XPCDemo[46250:3466789] NSXPCInterface: Only one reply block is allowed per selector (XPCDemo.DragonServiceProtocol / fireWithTimes:withSuccess:withFailure:)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å…³äºä¸€æ¬¡ Request é€šä¿¡å¤šæ¬¡ Response&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç±»ä¼¼äºä¸‹è½½ä»»åŠ¡è¦è·å–ä¸‹è½½è¿›åº¦çš„é—®é¢˜ï¼Œåœ¨è¿ç§» NSTask æ‰§è¡Œå±‚çš„è¿‡ç¨‹ä¸­ï¼Œé¢ä¸´çš„ä¸€ä¸ªéœ€æ±‚æ˜¯é’ˆå¯¹ XPCService ç«¯ NSTask æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŒç»­æ€§çš„è¾“å‡ºéƒ½è¦èƒ½å¤Ÿå›è°ƒç»™ Client ç«¯ï¼Œè€Œ Reply å›è°ƒåªèƒ½å“åº”ä¸€æ¬¡ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨ä¸»åº”ç”¨ç«¯å¸Œæœ›èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ª Block ä¸æ–­è·å–å½“å‰æœ€æ–°çš„æ•°æ®ï¼Œå¯æ˜¯ï¼Œä¸å¹¸çš„æ˜¯ï¼ŒXPC å¹¶ä¸æ”¯æŒå¦‚æ­¤ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé€šè¿‡å›è°ƒå®æ—¶è·å–çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/x2qwpVP.png&#34; alt=&#34;Run Command with multiple replies&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…·ä½“å¯ä»¥å‚è€ƒ &lt;a href=&#34;https://forums.developer.apple.com/thread/35731&#34;&gt;https://forums.developer.apple.com/thread/35731&lt;/a&gt; è®ºå›ä¸­ Apple äººå‘˜çš„å›å¤ï¼Œæ€»ç»“èµ·æ¥ä¸¤ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Client ä»¥åŠ Service è‡ªè¡Œç»´æŠ¤çŠ¶æ€ï¼Œå°†ä¸€æ¬¡è¯·æ±‚å¤šæ¬¡å›è°ƒï¼Œæ‹†åˆ†ä¸ºå¤šæ¬¡è¯·æ±‚å¤šæ¬¡å›è°ƒå³å¯ï¼›&lt;/li&gt;
&lt;li&gt;Client è½¬ç§»è¦äº¤ä»˜çš„ç¬¬ä¸‰æ–¹ç»™ Service ç›´æ¥äº¤äº’ï¼ˆä¸€èˆ¬æ¯”å¦‚ API ï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;references&#34;&gt;References&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html&#34;&gt;Creating XPC Services&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.objc.io/issues/14-mac/xpc/&#34;&gt;XPC Â· objc.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://forums.developer.apple.com/thread/35731&#34;&gt;XPC&amp;hellip;Can&amp;rsquo;t call a reply block multiple times? |Apple Developer Forums&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>Codable &amp;&amp; Tuple</title>
      <link>https://hechen.xyz/post/tuple-codable/</link>
      <pubDate>Mon, 10 Jun 2019 23:50:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/tuple-codable/</guid>
      
        <description>

&lt;p&gt;During my learning of Swift, many interesting things I will find. Codable is one of them.&lt;/p&gt;

&lt;p&gt;Today, I defined a model with a tuple type, then Xcode told me some error. Codes may like as below.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/c67KrA8.png&#34; alt=&#34;Codable Person&#34; /&gt;&lt;/p&gt;

&lt;p&gt;You may want Xcode automatically complete all the codable stuff. However, life is hard. Codes like these can even not be compiled. Xcode will tell you name cannot be synthesize the Person because of the FullName.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;error: default.playground:5:8: error: type &amp;#39;Person&amp;#39; does not conform to protocol &amp;#39;Decodable&amp;#39;
struct Person: Codable {
       ^

Swift.Decodable:2:12: note: protocol requires initializer &amp;#39;init(from:)&amp;#39; with type &amp;#39;Decodable&amp;#39;
    public init(from decoder: Decoder) throws
           ^

default.playground:6:9: note: cannot automatically synthesize &amp;#39;Decodable&amp;#39; because &amp;#39;FullName&amp;#39; (aka &amp;#39;(firstName: String, secondName: String)&amp;#39;) does not conform to &amp;#39;Decodable&amp;#39;
    var name: FullName
        ^

error: default.playground:5:8: error: type &amp;#39;Person&amp;#39; does not conform to protocol &amp;#39;Encodable&amp;#39;
struct Person: Codable {
       ^

Swift.Encodable:2:17: note: protocol requires function &amp;#39;encode(to:)&amp;#39; with type &amp;#39;Encodable&amp;#39;
    public func encode(to encoder: Encoder) throws
                ^

default.playground:6:9: note: cannot automatically synthesize &amp;#39;Encodable&amp;#39; because &amp;#39;FullName&amp;#39; (aka &amp;#39;(firstName: String, secondName: String)&amp;#39;) does not conform to &amp;#39;Encodable&amp;#39;
    var name: FullName
        ^&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;So, We know that if a struct or class is codable implicitly, it must not contain properties which are not codable. Tuple is one of them.&lt;/p&gt;

&lt;p&gt;Some people argue that why tuple cannot be designed as a codable type? Yeah, the hope is that tuples could conform to protocols in future. This is covered in the generics manifesto as &amp;ldquo;Extensions of Structural Types 28&amp;rdquo;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Extensions of structural types
Currently, only nominal types (classes, structs, enums, protocols) can be extended. One could imagine extending structural types&amp;ndash;particularly tuple types&amp;ndash;to allow them to, e.g., conform to protocols. For example, pulling together variadic generics, parameterized extensions, and conditional conformances, one could express &amp;ldquo;a tuple type is Equatable if all of its element types are Equatable&amp;rdquo;:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;extension&amp;lt;...Elements : Equatable&amp;gt; (Elements...) : Equatable {   // extending the tuple type &amp;#34;(Elements...)&amp;#34; to be Equatable
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;There are some natural bounds here: one would need to have actual structural types. One would not be able to extend every type:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;extension&amp;lt;T&amp;gt; T { // error: neither a structural nor a nominal type
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;And before you think you&amp;rsquo;re cleverly making it possible to have a conditional conformance that makes every type T that conforms to protocol P also conform to protocol Q, see the section &amp;ldquo;Conditional conformances via protocol extensions&amp;rdquo;, below:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;extension&amp;lt;T : P&amp;gt; T : Q { // error: neither a structural nor a nominal type
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;So for now, you have to synthesize the tuple type by yourself.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/CsXtVWP.png&#34; alt=&#34;Synthesize Properties by youself&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://forums.swift.org/t/codable-tuples/14174&#34;&gt;Codable Tuples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/apple/swift/blob/master/docs/GenericsManifesto.md#extensions-of-structural-types&#34;&gt;Swift GenericsManifesto.md&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>How to generate a NSViewController without a Nib?</title>
      <link>https://hechen.xyz/post/create-nsviewcontroller-without-nib/</link>
      <pubDate>Mon, 03 Jun 2019 20:55:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/create-nsviewcontroller-without-nib/</guid>
      
        <description>

&lt;p&gt;In the last days, I created all the ViewControllers through the storyboard or the Nib (for views). Today, when I created a demo project without any Nib file, the ViewController did not show as I expected.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;WTF, Can you believe that? I cannot even create a ViewController now.&lt;/p&gt;

&lt;p&gt;There exist some differences between iOS and macOS.&lt;/p&gt;

&lt;h2 id=&#34;ios&#34;&gt;iOS&lt;/h2&gt;

&lt;p&gt;In the previous development on the iOS platform, create a ViewController, specifically UIViewController instance, is dead simple as below.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UIKit&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;vc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;vc.view.frame = &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;You can create a UIViewController without a nib file, and customize the view&amp;rsquo;s properties as you like. Nothing unexpected happen and ViewController has a default view.&lt;/p&gt;

&lt;h2 id=&#34;macos-cocoa&#34;&gt;macOS (Cocoa)&lt;/h2&gt;

&lt;p&gt;However, when you want to create a NSViewController in the same way, something wrong occur.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Cocoa&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;viewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;vc.view.frame = &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It looks like the same as what we do for UIViewController. And it should work like UIViewController.&lt;/p&gt;

&lt;p&gt;However, an exception is thrown, which shows that &amp;lsquo;could not load the nibName&amp;rsquo;. Why?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;[General] -[NSNib _initWithNibNamed:bundle:options:] could not load the nibName: Demo.ViewController in bundle (null).&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;So, It looks like that NSViewController will not create a default rootView for us. We must create one by ourselves. The key is the &lt;code&gt;loadView&lt;/code&gt;. Just override the loadView() method, then create a NSView instance.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Cocoa&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kr&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;loadView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;That&amp;rsquo;s it.&lt;/p&gt;

&lt;p&gt;Now, I have found that macOS development has many differences with iOS. You may encounter many fundamental pitfalls, and when you indeed stumble, be patient. To read the Apple&amp;rsquo;s documentations is you top priority, then Google please.&lt;/p&gt;

&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/37526411/instantiate-uiviewcontroller-programmatically-without-nib&#34;&gt;Instantiate a UIViewController without Nib&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/hyperoslo/how-to-write-an-nsviewcontroller-without-interface-builder-on-macos-760283648f12&#34;&gt;Instantiate a NSViewController without Nib&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>ä¸€é“ Swift Quiz</title>
      <link>https://hechen.xyz/post/a-swift-quiz/</link>
      <pubDate>Tue, 14 May 2019 16:01:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/a-swift-quiz/</guid>
      
        <description>

&lt;p&gt;è¿™ä¸¤å¤©åœ¨ &lt;a href=&#34;https://twitter.com/krzyzanowskim/status/1127875626579288064?s=12&#34;&gt;Twitter&lt;/a&gt; ä¸Šçœ‹åˆ°ä¸€é“é¢˜ç›®ï¼Œä¸»è¦æ˜¯è€ƒå¯Ÿ overload å’Œ type(of:) çš„çŸ¥è¯†ç‚¹ï¼Œæœ¬æ–‡ä»…åšè®°å½•ï¼Œå…³äº MetaType ä¼šå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« æ¥æ€»ç»“ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;// Swift Quiz

class View {}
class A: View {}
class B: View {}

func add(_ v: View) { print(type(of: v)) }
func add(_ v: A) { print(type(of: v)) }
func add(_ v: B) { print(type(of: v)) }

func build() -&amp;gt; View { return B() }
add(build())

// What is the output?

&amp;#34;View&amp;#34;
&amp;#34;A&amp;#34;
&amp;#34;B&amp;#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™é‡Œä½¿ç”¨å¤šä¸ª add å‡½æ•°ï¼Œå®é™…ä¸Šæ˜¯èµ·åˆ°äº†ä¸€å®šçš„è¿·æƒ‘ä½œç”¨ï¼Œé‚£é’ˆå¯¹å…·å¤‡ä¸åŒé™æ€ç±»å‹çš„ add å‡½æ•°æ¥è®²ï¼Œå…¶é‡è½½å“ªä¸ªå‡½æ•°å°±æ˜¯ä¾æ®å…¶ä¼ å…¥å‚æ•°çš„é™æ€ç±»å‹è€Œå†³å®šï¼Œå› æ­¤åœ¨æœ¬ Quiz ä¸­ build å‡½æ•°è¿”å›äº†å®ä¾‹çš„é™æ€ç±»å‹å³ä¸º Viewï¼Œæ‰€ä»¥ä¸€å®šæ˜¯ä¼šé‡è½½å…·å¤‡ View ç±»å‹å‚æ•°çš„å‡½æ•°ã€‚
è€Œè¿›å…¥å‡½æ•°ä½“å†…éƒ¨ï¼Œä¸»è¦å°±æ˜¯ &lt;code&gt;type(of:)&lt;/code&gt; æ–¹æ³•çš„æ‰§è¡Œç»“æœäº†ï¼Œè€Œè¯¥æ–¹æ³•çš„å®˜æ–¹å®šä¹‰é‡Œæœ‰å¦‚ä¸‹è¯´æ˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;func type&amp;lt;T, Metatype&amp;gt;(of value: T) -&amp;gt; Metatype&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;You can use the type(of:) function to find the dynamic type of a value, particularly when the dynamic type is different from the static type. The static type of a value is the known, compile-time type of the value. The dynamic type of a value is the valueâ€™s actual type at run-time, which can be a subtype of its concrete type.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code&gt;type(of:)&lt;/code&gt; å¯ä»¥è·å–åˆ°å½“å‰æ‰€ä¼ å€¼çš„åŠ¨æ€ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å…¶åŸå§‹çš„å®¿ä¸»ç±»å‹ã€‚å¯¹äºæœ¬ä¾‹æ¥è®²ï¼Œä¼ å…¥åˆ°è¯¥æ–¹æ³•çš„å€¼å®è´¨ä¸Šæ˜¯ç”± B ç±»å‹å®ä¾‹åŒ–è€Œæ¥ï¼Œå› æ­¤å…¶åŠ¨æ€ç±»å‹åº”è¯¥æ˜¯ Bã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/vB7DuWI.png&#34; alt=&#34;Quiz&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/documentation/swift/2885064-type&#34;&gt;type(of:)&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äº Library å’Œ Framework</title>
      <link>https://hechen.xyz/post/library_framework/</link>
      <pubDate>Fri, 26 Apr 2019 00:35:30 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/library_framework/</guid>
      
        <description>

&lt;p&gt;Library å’Œ Framework çš„æ¦‚å¿µå¤§å®¶åº”è¯¥è„‘æµ·é‡Œéƒ½æœ‰ä¸€äº›ï¼Œæœ¬æ–‡æ—¨åœ¨è®²è¿°ä¸‹åŸºæœ¬æ¦‚å¿µï¼Œæ²¡æœ‰å¯¹æ¯ä¸ªå­—èŠ‚éƒ½äº†å¦‚æŒ‡æŒã€‚å…³äºåŸºæœ¬çš„ç¼–è¯‘è¿‡ç¨‹åœ¨ &lt;a href=&#34;https://hechen.xyz/post/xcode-build-system/&#34;&gt;Build Process&lt;/a&gt; ä¸€æ–‡ä¸­ä¹Ÿå¤§æ¦‚è®²è¿°äº†ä¸€äº›ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨é“¾æ¥ Library ä»¥åŠ Framework ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ Machâ€”Oã€‚&lt;/p&gt;

&lt;p&gt;æåˆ° Mach-O ï¼Œéœ€è¦æ˜ç¡®ä¸‹ object fileï¼ˆç›®æ ‡æ–‡ä»¶ï¼‰çš„æ¦‚å¿µï¼Œå…¶å®è´¨ä¸Šæ˜¯æŒ‡é‚£äº›ç”±æºä»£ç ç¼–è¯‘ä¹‹åç”Ÿæˆçš„ï¼Œè¿˜æœªè¿›è¡Œé“¾æ¥çš„ä¸­é—´æ–‡ä»¶ï¼ˆæ¯”å¦‚ Linux ä¸‹çš„ .o ä»¥åŠ Windows ä¸‹çš„ .objï¼‰ï¼Œå®ƒå’Œå¯æ‰§è¡Œæ–‡ä»¶çš„å†…å®¹å’Œç»“æ„å¾ˆç›¸ä¼¼ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸Šä¼šè·Ÿå¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼é‡‡ç”¨ä¸€æ ·çš„æ ¼å¼å­˜å‚¨ã€‚&lt;/p&gt;

&lt;p&gt;é‚£åœ¨ Unix ç³»ç»Ÿä¸Šçš„ COFF æ˜¯å½“æ—¶å‘æ˜çš„åœ¨ Unix è¡¨ç¤ºä¸€ä¸ªç›®æ ‡æ–‡ä»¶çš„å­˜å–æ ¼å¼ï¼Œåæ¥ Linux åŸºäº COFF å‘æ˜äº† ELFï¼Œè€Œ Windows åŸºäº COFF å‘æ˜äº† PE æ ¼å¼ã€‚å¹¿ä¹‰ä¸Šæ¥è¯´ï¼Œç›®æ ‡æ–‡ä»¶ä¸å¯æ‰§è¡Œæ–‡ä»¶å‡ ä¹ä¸€æ ·ã€‚åœ¨ Linux ä¸‹ç»Ÿç§°ä¸º ELF æ–‡ä»¶ï¼ŒWindows ä¸Šç»Ÿç§°ä¸º PE-COFF æ–‡ä»¶ï¼Œè€Œåœ¨ iOS/macOS ä¸Šæˆ‘ä»¬çš„ç›®æ ‡æ–‡ä»¶å°±æ˜¯ Mach-O æ ¼å¼ï¼Œå…¶åœ¨ç›®æ ‡æ–‡ä»¶çš„å¤§ä½“ç»„æˆä¸Šå’Œå…¶ä»–ä¸¤ç§å¾ˆç›¸ä¼¼ã€‚è€Œ Mach-O çš„å…¨ç§°å°±æ˜¯ Mach Object çš„ç¼©å†™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/CUrWruq.png&#34; alt=&#34;ç›®æ ‡æ–‡ä»¶&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä»¥ Linux ä¸Š ELF ç»“æ„çš„ä¸€å¼ å›¾æ¥å¤§æ¦‚è¯´æ˜ä¸€ä¸‹æƒ…å†µï¼Œä¸åŒçš„æºæ–‡ä»¶é€šè¿‡åˆ†ç±»ï¼Œå°†ä»£ç å’Œæ•°æ®ï¼Œä»¥åŠå˜é‡æ”¾å…¥ä¸åŒçš„èŒè´£æ®µï¼Œä»£ç æ®µ _TEXTï¼Œæ•°æ®æ®µ _DATA ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ozMscrW.jpg&#34; alt=&#34;ELF&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œ Mach-O æ–‡ä»¶æ ¼å¼å¦‚ä¸‹å›¾ï¼ˆæºè‡ªäº Apple æ–‡æ¡£ï¼‰, å’Œ ELF æ ¼å¼ç±»ä¼¼ï¼Œå…¶ä¹Ÿæ˜¯å°†ä¸åŒèŒè´£çš„ä»£ç å’Œæ•°æ®æ”¾ç½®äºä¸åŒçš„ Section æ®µï¼Œç„¶åå†é›†ä¸­æˆä¸€ä¸ªä¸€ä¸ªçš„ Segmentï¼Œè€Œ Load Commands æ˜¯ç”¨æ¥æ§åˆ¶æ¯ä¸€ä¸ª Segment æ˜¯å¦‚ä½•è¢«åŠ è½½çš„ï¼Œæ•°æ®æ˜¯ä»å“ªé‡Œå–çš„ï¼Œç­‰ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/8p9pwgn.png&#34; alt=&#34;Mach-O&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬é€šè¿‡å°†å¦‚ä¸‹ä»£ç ç¼–è¯‘è¾“å‡ºæˆå¯æ‰§è¡Œæ–‡ä»¶æ¥çœ‹ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  main.m
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  MachO
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  Created by chen he on 2019/4/22.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  Copyright Â© 2019 chen he. All rights reserved.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;stdio.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World.&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é€šè¿‡ clang å·¥å…·å¥—ä»¶ç¼–è¯‘æºæ–‡ä»¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;// output the main.o
clang -c main.m
// link main.o with c lib
// default output file is a.out, you can specify another name with -o
clang main.o -Wl,&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;xcrun --show-sdk-path&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;/usr/lib/libSystem.B.tbd&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ¥ç€å¯ä»¥ä½¿ç”¨ MachOView æ¥æŸ¥çœ‹åˆšæ‰ a.out ä»¥åŠ main.o æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;MachOView æ˜¯ä¸€æ¬¾å¼€æºè½¯ä»¶ï¼Œç”¨ä»¥æŸ¥çœ‹ç›®æ ‡æ–‡ä»¶æ ¼å¼çš„ï¼Œä¸è¿‡å·²ç»å¥½å‡ å¹´æ²¡æœ‰æ›´æ–°äº†ï¼Œæ‰€æœ‰æœ‰çš„ Load Command è¯†åˆ«ä¸å‡ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ehG4guP.png&#34; alt=&#34;a.out çš„å†…å®¹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å†çœ‹çœ‹ main.o è¿™ä¸ªç›®æ ‡æ–‡ä»¶çš„ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/tOzXqC1.png&#34; alt=&#34;main.o çš„å†…å®¹&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;library&#34;&gt;Library&lt;/h3&gt;

&lt;p&gt;åœ¨ &lt;a href=&#34;https://hechen.xyz/post/xcode-build-system/&#34;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt; ä¸­è¯´æ˜äº†ï¼Œæ¯ä¸ªæºæ–‡ä»¶æœ€ç»ˆéƒ½ä¼šç”Ÿæˆå¯¹åº”çš„ç›®æ ‡æ–‡ä»¶ï¼Œå½“å·¥ç¨‹é¡¹ç›®å˜å¤§ä¹‹åï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå°†å…·ä½“ååŒå·¥ä½œçš„å•ä¸€ç»„ä»¶å†…çš„ç›®æ ‡æ–‡ä»¶ä¸€èµ·è¿›è¡Œäº¤ä»˜ï¼Œå¯¹äºåŠŸèƒ½ç¨³å®šçš„ä»£ç æ— éœ€å‚ä¸å†æ¬¡ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦å°†åŒä¸€ä¸ªç»„ä»¶å†…éƒ¨çš„æ‰€æœ‰ç›®æ ‡æ–‡ä»¶å½’æ‹¢åˆ°ä¸€èµ·ï¼Œè¿™ä¹Ÿæ˜¯åˆæœŸåº“ï¼ˆLibraryï¼‰ å‡ºç°çš„ç”±æ¥ã€‚ç®€å•è€Œè¨€ï¼Œåº“å°±æ˜¯ä¸€å †ç›®æ ‡æ–‡ä»¶çš„é›†åˆã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡ç®€å•çš„ ar å‘½ä»¤å³å¯å°†å¤šä¸ª .o æ–‡ä»¶æ•´åˆæˆä¸€ä¸ª .a æ–‡ä»¶ï¼ŒåŒæ—¶ä½¿ç”¨ ranlib å‘½ä»¤æ›´æ–°é™æ€åº“ .a çš„ç¬¦å·ç´¢å¼•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;ar -r libfoo.a foo.o bar.o baz.o
ranlib libfoo.a&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;static-library&#34;&gt;Static Library&lt;/h3&gt;

&lt;p&gt;å…³äºé™æ€å’ŒåŠ¨æ€çš„ç”±æ¥ï¼Œæ˜¯å› ä¸ºé“¾æ¥è¿‡ç¨‹çš„ä¸åŒè€Œäº§ç”Ÿï¼ŒåŸºäºé™æ€é“¾æ¥çš„åº“è¢«ç§°ä½œé™æ€åº“ï¼ŒåŸºäºåŠ¨æ€é“¾æ¥çš„åº“è¢«ç§°ä½œåŠ¨æ€åº“ï¼ˆå…±äº«åº“ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;é™æ€åº“å®è´¨ä¸Šæ˜¯ç›®æ ‡æ–‡ä»¶çš„é›†åˆã€‚å®ƒæ˜¯æŠŠå¾ˆå¤šç›®æ ‡æ–‡ä»¶æ†ç»‘åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå†åŠ ä¸Šä¸€äº›ç´¢å¼•ï¼Œä½ å¯ä»¥ç®€å•åœ°æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªåŒ…å«æœ‰å¾ˆå¤šç›®æ ‡æ–‡ä»¶çš„æ–‡ä»¶åŒ…ã€‚ä¹Ÿå°±æ˜¯ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„ .a æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;é™æ€åº“çš„å­˜åœ¨å½¢å¼ä½¿å¾—ä¸åŒçš„æˆå‘˜å¼€å‘è€…å’Œéƒ¨é—¨éƒ½èƒ½å¤Ÿç‹¬ç«‹çš„è‡ªè¡Œå¼€å‘è‡ªå·±çš„åŠŸèƒ½åŠŸèƒ½å’Œç¨‹åºæ¨¡å—ï¼Œåœ¨ä¸€å®šé˜¶æ®µå’Œç¨‹åº¦ä¸Šæ˜¯å¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡çš„ï¼Œä½†æ˜¯é™æ€åº“ä¹Ÿæœ‰ä¸€äº›é—®é¢˜ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æµªè´¹å†…å­˜å’Œç£ç›˜ç©ºé—´&lt;/li&gt;
&lt;li&gt;æ¨¡å—æ›´æ–°éš¾&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä»¥ä¸Šæ–¹çš„ HelloWorld ç¨‹åºä¸ºä¾‹ï¼Œå…¶ä¸­ printf çš„ç¬¦å·æ˜¯å®šä¹‰åœ¨ C çš„æ ‡å‡†åº“æ–‡ä»¶ä¸­çš„ï¼Œå¦‚æœè¦è¿›è¡Œé™æ€é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯ C çš„æ ‡å‡†åº“è¦ä»¥é™æ€åº“çš„æ–¹å¼å‚ä¸é“¾æ¥åˆ°ç¨‹åºå†…éƒ¨ï¼Œå‡å¦‚å¹³å‡ä¸€ä¸ª C ç¨‹åºä¼šä½¿ç”¨åˆ°å¤§æ¦‚ 1MB çš„ç©ºé—´ï¼ˆç£ç›˜ä»¥åŠå†…å­˜ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬æ“ä½œç³»ç»Ÿè¿è¡Œ 100 ä¸ªè¿™æ ·ç®€å•çš„ç¨‹åºå°±éœ€è¦è¿‘ 100MB çš„ç©ºé—´ï¼Œè¿™ä¸ªä¸å¤ªå¯å–ï¼Œè€Œä¸”è¿™äº›æ ‡å‡†åº“æœ¬èº«æ‰€æœ‰çš„ç¨‹åºéƒ½éœ€è¦ä¸€äººå¸¦ä¸€ä»½ï¼Œä¸å¤ªå¯å–ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯æ¨¡å—æ›´æ–°é—®é¢˜ï¼Œå› ä¸ºæœ€ç»ˆè¦åœ¨é“¾æ¥é˜¶æ®µç›´æ¥é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå› æ­¤ä¸€æ—¦æŸä¸ªæ¨¡å—å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥é™æ€åº“é‡æ–°è¿›è¡Œç¼–è¯‘ï¼Œé“¾æ¥ï¼Œå‘å¸ƒï¼Œè€Œä¸”æ•´ä¸ªå¯æ‰§è¡Œæ–‡ä»¶éƒ½åšäº†å˜æ›´ï¼Œå› æ­¤éœ€è¦å®Œæ•´çš„æ›¿æ¢æ‰å½“ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚ä¸€ä¸ªç¨‹åºå¦‚æœåŒ…å« 20 ä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å— 1 MBï¼Œæ¯æ¬¡æ›´æ–°ä»»ä½•ä¸€ä¸ªæ¨¡å—ï¼Œç”¨æˆ·éœ€è¦é‡æ–°è·å– 20MB çš„ç¨‹åºã€‚&lt;/p&gt;

&lt;p&gt;è¦æƒ³è§£å†³ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å°†ç¨‹åºçš„æ¯ä¸ªæ¨¡å—éš”ç¦»å¼€ï¼Œå½¢æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œè€Œä¸å†å°†å…¶éƒ½æ··åˆåœ¨ä¸€èµ·ã€‚ç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯ä¸å†å¯¹é‚£äº›ç»„æˆç¨‹åºçš„ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œè€Œæ˜¯ç­‰åˆ°ç¨‹åºç”¨çš„æ—¶å€™å†å®æ—¶çš„è¿›è¡Œé“¾æ¥ï¼Œè¿™ä¸ªä¹Ÿæ˜¯åŠ¨æ€é“¾æ¥çš„åŸºæœ¬æ€æƒ³ï¼Œè€ŒåŸºäºåŠ¨æ€é“¾æ¥äº§ç”Ÿçš„ Library æ”¯æŒï¼Œå³ä¸ºå…±äº«åº“ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰&lt;/p&gt;

&lt;h3 id=&#34;dynamic-library&#34;&gt;Dynamic Library&lt;/h3&gt;

&lt;p&gt;åŠ¨æ€é“¾æ¥æœ€å¤§çš„å˜åŒ–åœ¨äºå¯æ‰§è¡Œç¨‹åºå’ŒåŠ¨æ€é“¾æ¥çš„ç›®æ ‡æ–‡ä»¶æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œåªæ˜¯åœ¨ç¨‹åºåˆå§‹æ‰§è¡Œçš„ç›®æ ‡æ–‡ä»¶ï¼ˆæ¯”å¦‚ main å…¥å£æ‰€åœ¨çš„æ–‡ä»¶ï¼‰å†…éƒ¨æŒæœ‰åŠ¨æ€é“¾æ¥åº“çš„ç¬¦å·ï¼Œå½“çœŸæ­£è¿è¡Œèµ·æ¥ï¼Œéœ€è¦ç”¨åˆ°å¯¹åº”çš„ç¬¦å·æ—¶ï¼Œé“¾æ¥å™¨æ‰å»æŸ¥æ‰¾å¯¹åº”ç›®æ ‡æ–‡ä»¶ï¼Œç„¶åé“¾æ¥æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;å½“è¿è¡Œç¨‹åºéœ€è¦æ›´æ–°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®Œæ•´çš„ç¼–è¯‘äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œåªéœ€è¦åœ¨åŠ¨æ€åº“çš„æ¥å£ä¸å˜çš„å‰æä¸‹ï¼Œä»…ä»…æ›´æ–°é‚£éƒ¨åˆ†åŒ…å«äº†æ‰€éœ€å‡çº§åŠŸèƒ½çš„åŠ¨æ€åº“è€Œå·²ã€‚è¿™ä¸€ç‚¹ï¼Œåœ¨ Windows ç³»ç»Ÿä¸Šä½“ç°çš„å°¤ä¸ºæ˜æ˜¾ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶åŠ¨æ€é“¾æ¥ä¹Ÿå­˜åœ¨è‡ªèº«çš„é—®é¢˜ï¼Œå¾ˆå¸¸è§çš„ä¸€ä¸ªé—®é¢˜ï¼Œå½“ç¨‹åºæ‰€ä½¿ç”¨çš„å…¶ä¸­ä¸€ä¸ªæ¨¡å—å‘ç”Ÿæ›´æ–°ä¹‹åï¼Œå¾ˆå®¹æ˜“é€ æˆåº“æ¥å£ä¸å…¼å®¹å¯¼è‡´ç¨‹åºæ— æ³•è¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™ä½ æ›´æ–°å®Œç³»ç»Ÿï¼ŒåŸæ¥ä½¿ç”¨å¥½å¥½çš„ App æ‰“å¼€å‘ç”Ÿé—ªé€€æˆ–è€…æŸä¸ªåŠŸèƒ½æ— æ³•ä½¿ç”¨äº†çš„ç¼˜æ•…ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼Œç”±äºæ‰€éœ€è°ƒç”¨çš„ç¬¦å·ä¸å†å’Œå¯æ‰§è¡Œæ–‡ä»¶åœ¨ä¸€èµ·ï¼Œåœ¨è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œè¿‡ç¨‹è¦æ¯”ä¹‹å‰å¤æ‚çš„å¤šï¼Œè¦å…ˆæ‰¾å¯¹åº”çš„åŠ¨æ€åº“æ–‡ä»¶ï¼Œå¦‚æœåœ¨å†…å­˜ä¸­ä¸å­˜åœ¨ï¼Œè¿˜éœ€è¦å†å»ç£ç›˜ä¸­å®æ—¶åŠ è½½ï¼Œå¯¼è‡´åŠ¨æ€åº“çš„æ–¹æ³•è°ƒç”¨æ—¶é—´è¦æ¯”é™æ€é“¾æ¥çš„æƒ…å†µä¸‹æ…¢ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Mac / iOS ä¸Šæ‰€æœ‰çš„åŠ¨æ€åº“éƒ½æ˜¯é€šè¿‡ dyld æ¥è¿›è¡ŒåŠ¨æ€åŠ è½½çš„ï¼Œè¿™é‡Œä¸è¯¦ç»†è¯´æ˜äº†ï¼Œå¤§æ¦‚åˆ—ä¸€ä¸‹åŠ¨æ€åº“çš„åŠ è½½é¡ºåºï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;é¦–å…ˆä¼šåŠ è½½ç³»ç»Ÿçº§åˆ«çš„dylib, ç›®å½•åœ¨è®¾å¤‡çš„&lt;code&gt;/usr/lib/&lt;/code&gt;, æ–‡ä»¶:&lt;code&gt;libsqlite3.dylibã€libc++.1.dylib...&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç„¶ååŠ è½½ç³»ç»Ÿçº§åˆ«çš„framework, ç›®å½•åœ¨è®¾å¤‡çš„&lt;code&gt;/System/Library/Frameworks&lt;/code&gt;, æ–‡ä»¶:&lt;code&gt;Foundation.framework&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å†å¼•å…¥runtimeã€gcdå­˜æ”¾çš„dylib, ç›®å½•åœ¨è®¾å¤‡çš„&lt;code&gt;/usr/lib/&lt;/code&gt;, æ–‡ä»¶:&lt;code&gt;libSystem.B.dylibã€libobjc.A.dylib&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å†å¼•å…¥è‡ªå·±æ³¨å…¥çš„dylib, &lt;code&gt;@executable_path/&lt;/code&gt;(ç›®å½•å­˜æ”¾åœ¨å½“å‰å¯æ‰§è¡Œæ–‡ä»¶åº•ä¸‹)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è€Œå¯¹äº App æ¥è®²ï¼Œå®é™…ä¸Šçš„è·¯å¾„æ˜¯é€šè¿‡ @rpath æ¥æŒ‡å®šçš„ï¼Œè¯¥ç¬¦å·è¯´ç™½äº†å°±æ˜¯å ä½ç¬¦ï¼Œå½“ä½ çš„ App æˆåŠŸå®‰è£…åˆ° iOS ç³»ç»Ÿä¹‹åï¼Œ@rpath å°±æ˜¯è¯¥ App çš„å®‰è£…è·¯å¾„ï¼Œä»¥æŸä¸ª iap æ–‡ä»¶å†…éƒ¨çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ºä¾‹ï¼Œä½¿ç”¨ otool æŸ¥çœ‹å…¶ä¾èµ–çš„åŠ¨æ€åº“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;90
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;    otool -L osee2unifiedRelease.app/osee2unifiedRelease
    
    
    osee2unifiedRelease.app/osee2unifiedRelease:
    	/usr/lib/libbz2.1.0.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.5&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libc++.1.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;400&lt;/span&gt;.9.4&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libiconv.2.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libicucore.A.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;62&lt;/span&gt;.1.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libresolv.9.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libsqlite3.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;9&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;274&lt;/span&gt;.20.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libxml2.2.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.9.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libz.1.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.2.11&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/AVFoundation.framework/AVFoundation &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Accelerate.framework/Accelerate &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/AdSupport.framework/AdSupport &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;492&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CFNetwork.framework/CFNetwork &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;975&lt;/span&gt;.0.3&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;150&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1560&lt;/span&gt;.10.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;64&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1245&lt;/span&gt;.9.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreLocation.framework/CoreLocation &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;2245&lt;/span&gt;.8.12&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreMotion.framework/CoreMotion &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;2245&lt;/span&gt;.8.12&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreSpotlight.framework/CoreSpotlight &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreText.framework/CoreText &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/ExternalAccessory.framework/ExternalAccessory &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Foundation.framework/Foundation &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;300&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1560&lt;/span&gt;.10.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/GLKit.framework/GLKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;103&lt;/span&gt;.2.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/ImageIO.framework/ImageIO &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/MediaPlayer.framework/MediaPlayer &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;935&lt;/span&gt;.2.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/OpenGLES.framework/OpenGLES &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Photos.framework/Photos &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/QuartzCore.framework/QuartzCore &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.2.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.11.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Security.framework/Security &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;58286&lt;/span&gt;.222.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;963&lt;/span&gt;.200.27&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/UIKit.framework/UIKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;61000&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/VideoEdit.framework/VideoEdit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/VideoPlayer.framework/VideoPlayer &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/VideoToolbox.framework/VideoToolbox &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/ZmFFmpeg.framework/ZmFFmpeg &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/du.framework/du &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Metal.framework/Metal &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreMedia.framework/CoreMedia &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/WebKit.framework/WebKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;606&lt;/span&gt;.2.104&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Social.framework/Social &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;87&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Accounts.framework/Accounts &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/MessageUI.framework/MessageUI &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;3445&lt;/span&gt;.100.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/AddressBook.framework/AddressBook &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/StoreKit.framework/StoreKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libobjc.A.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;228&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/usr/lib/libSystem.B.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1252&lt;/span&gt;.200.5&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/AssetsLibrary.framework/AssetsLibrary &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/Contacts.framework/Contacts &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreData.framework/CoreData &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;866&lt;/span&gt;.2.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreImage.framework/CoreImage &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/CoreVideo.framework/CoreVideo &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.2.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.5.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/EventKit.framework/EventKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/LocalAuthentication.framework/LocalAuthentication &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;425&lt;/span&gt;.222.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/MapKit.framework/MapKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/MetalKit.framework/MetalKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;113&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/NetworkExtension.framework/NetworkExtension &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/PassKit.framework/PassKit &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/SafariServices.framework/SafariServices &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/UserNotifications.framework/UserNotifications &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	/System/Library/Frameworks/iAd.framework/iAd &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftAVFoundation.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftAccelerate.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftContacts.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCore.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCoreAudio.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCoreData.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCoreFoundation.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCoreGraphics.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCoreImage.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCoreLocation.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftCoreMedia.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftDarwin.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftDispatch.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftFoundation.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftGLKit.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftMapKit.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftMediaPlayer.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftMetal.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftModelIO.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftObjectiveC.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftPhotos.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftQuartzCore.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftUIKit.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftos.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    	@rpath/libswiftsimd.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;.11.42&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;dyld æ˜¯å¼€æºçš„ï¼Œæ„Ÿå…´è¶£å¯ä»¥ä¸€çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/opensource-apple/dyld&#34;&gt;opensource-apple/dyld&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;framework&#34;&gt;Framework&lt;/h3&gt;

&lt;p&gt;åœ¨åº“åˆšå‡ºç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†è‡ªå·±åˆ›å»ºçš„ Library æä¾›ç»™å¯¹æ–¹çš„æ—¶å€™ï¼Œä¸ä»…éœ€è¦å°† .a æ–‡ä»¶æä¾›ç»™å¯¹æ–¹ï¼Œè¿˜éœ€è¦åŒæ—¶æä¾› Headerï¼Œç”¨ä»¥å¼€å‘äººå‘˜åœ¨é«˜çº§è¯­è¨€å±‚é¢èƒ½å¤Ÿç›´è§‚çš„ä½¿ç”¨è¯¥åº“æä¾›çš„åŠŸèƒ½ã€‚åæ¥ï¼Œæˆ‘ä»¬çš„æ¨¡å—è¶Šæ¥è¶Šå¤§ï¼Œä¸ä»…ä»…åŒ…å«ä»£ç æ–‡ä»¶ï¼Œè¿˜åŠ å…¥äº†èµ„æºæ–‡ä»¶ï¼ŒApple å¼•å…¥äº† framework çš„æ¦‚å¿µç”¨æ¥å°†ä¸€ä¸ªç‹¬ç«‹åŠŸèƒ½æ¨¡å—æ‰€éœ€æä¾›çš„å†…å®¹æ‰“åŒ…æä¾›ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A framework is a bundle (a structured directory) that contains a dynamic shared library along with associated resources, such as nib files, image files, and header files.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œä½ è¦æ˜ç™½ï¼Œframework æœ¬è´¨ä¸Šåªæ˜¯ä¸€ç§ Bundle å­˜åœ¨çš„å½¢å¼ï¼Œç±»ä¼¼äºä¸€ç§ç›®å½•ç»“æ„ï¼Œå…¶å¹¶æ— åŠ¨é™ä¹‹åˆ†ã€‚ å†…éƒ¨åŒ…å«çš„åº“æ–‡ä»¶ï¼Œå¦‚æœæ˜¯é™æ€åº“ï¼Œå…¶è¢«ç§°ä½œä¸ºé™æ€ Frameworkï¼Œå¦‚æœå†…éƒ¨ä¸ºåŠ¨æ€åº“ï¼Œå°±è¢«ç§°ä½œåŠ¨æ€ Frameworkã€‚ç”±äºå®˜æ–¹åœ¨ iOS ä¸Šæ¨å‡º Framework çš„æ—¶å€™ç›´æ¥ä»¥ Dynamic Framework çš„å½¢å¼æ¨å‡ºï¼Œé€šè¿‡ Xcode åˆ›å»ºçš„ Target æˆ‘ä»¬ä¹Ÿå¯ä»¥äº†è§£ã€‚&lt;/p&gt;

&lt;h3 id=&#34;text-based-dylib-stubs&#34;&gt;Text Based .dylib Stubs&lt;/h3&gt;

&lt;p&gt;è‡ª Xcode 7 å¼•å…¥ï¼Œç›®å‰æœªæŸ¥æ‰¾åˆ°å®˜æ–¹æ­£å¼æ–‡æ¡£è¯´æ˜ï¼Œä½†æ˜¯åœ¨å®˜æ–¹è®ºå›ä¸­æœ‰ Apple å®˜æ–¹äººå‘˜é’ˆå¯¹ .tbd æ–‡ä»¶çš„å›åº”å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For those who are curious, the .tbd files are new &amp;ldquo;text-based stub libraries&amp;rdquo;, that provide a much more compact version of the stub libraries for use in the SDK, and help to significantly reduce its download size.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»¥  libc++ ä¸ºä¾‹ï¼Œåœ¨æˆ‘ä»¬ iOS å¼€å‘è¿‡ç¨‹ä¸­é“¾æ¥çš„ libc++ çš„åŠ¨æ€åº“æ˜¯é€šè¿‡ libc++.tbd å¼•å…¥çš„ï¼Œå¯ä»¥æŸ¥åˆ°å…¶åŸå§‹è·¯å¾„ä½äºæ¯ä¸ª SDK æ–‡ä»¶å¤¹ä¸‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/libc++.tbd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å³å¯æ‰“å¼€æŸ¥çœ‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;--- !tapi-tbd-v3

   archs:           &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; i386, x86_64 &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
    uuids:           &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;i386: A9FCC99A-209C-348E-BB79-0A29A5FCB82B&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;x86_64: 66B692F1-FA7E-3CBB-817A-73A7FE29A765&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
    platform:        ios
    install-name:    &lt;span class=&#34;s1&#34;&gt;&amp;#39;/usr/lib/libc++.1.dylib&amp;#39;&lt;/span&gt;
    current-version: &lt;span class=&#34;m&#34;&gt;400&lt;/span&gt;.9.4
    objc-constraint: none
    exports:         
      - archs:           &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; i386 &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
        symbols:         &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; __ZNKSt3__18messagesIcE6do_getEiiiRKNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE, 
                           __ZNKSt3__18messagesIcE8do_closeEi, __ZNKSt3__18messagesIwE6do_getEiiiRKNS_12basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEEE, 
                           __ZNKSt3__18messagesIwE8do_closeEi, __ZNSt3__111this_thread9sleep_forERKNS_6chrono8durationIxNS_5ratioILx1ELx1000000000EEEEE, 
                           __ZNSt3__112strstreambuf6__initEPciS1_, __ZNSt3__112strstreambufC1EPKai, 
                           __ZNSt3__112strstreambufC1EPKci, __ZNSt3__112strstreambufC1EPKhi, 
                           __ZNSt3__112strstreambufC1EPaiS1_, __ZNSt3__112strstreambufC1EPciS1_, 
                           __ZNSt3__112strstreambufC1EPhiS1_, __ZNSt3__112strstreambufC1Ei, 
                           __ZNSt3__112strstreambufC2EPKai, __ZNSt3__112strstreambufC2EPKci, 
                           __ZNSt3__112strstreambufC2EPKhi, __ZNSt3__112strstreambufC2EPaiS1_, 
                           __ZNSt3__112strstreambufC2EPciS1_, __ZNSt3__112strstreambufC2EPhiS1_, 
                           __ZNSt3__112strstreambufC2Ei, __ZNSt3__113basic_istreamIcNS_11char_traitsIcEEE3getEPci, 
                           __ZNSt3__113basic_istreamIcNS_11char_traitsIcEEE3getEPcic, 
                           __ZNSt3__113basic_istreamIcNS_11char_traitsIcEEE4readEPci, 
                           __ZNSt3__113basic_istreamIcNS_11char_traitsIcEEE6ignoreEii, 
                           __ZNSt3__113basic_istreamIcNS_11char_traitsIcEEE7getlineEPci, 
                           __ZNSt3__113basic_istreamIcNS_11char_traitsIcEEE7getlineEPcic, 
                           __ZNSt3__113basic_istreamIcNS_11char_traitsIcEEE8readsomeEPci, 
                           __ZNSt3__113basic_istreamIwNS_11char_traitsIwEEE3getEPwi, 
                           __ZNSt3__113basic_istreamIwNS_11char_traitsIwEEE3getEPwiw,&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­å°†æœ¬èº«çš„åŠ¨æ€é“¾æ¥åº“æ‰€æä¾›å‡ºçš„ç¬¦å·ï¼ˆå‡½æ•°ï¼Œå…¨å±€å˜é‡ç­‰ï¼‰åˆ—å‡ºï¼Œå› ä¸ºåœ¨ macOS ä»¥åŠ iOS ä¸­ç³»ç»Ÿç›®å½•ä¸‹å·²ç»é›†æˆäº†è¿™äº›åŠ¨æ€åº“ï¼Œå› ä¸ºä¸ºäº†é¿å…ä¸å¿…è¦çš„ä¸‹è½½å’Œæä¾›é‡å¤çš„åŠ¨æ€é“¾æ¥åº“ï¼Œå› è€Œæä¾›äº† tbd è¿™ç§æ ¼å¼æ–‡ä»¶ç”¨æ¥åšæ¡¥æ¥ã€‚å®è´¨ä¸Šå½“çœŸæ­£å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œé“¾æ¥çš„æ—¶å€™ï¼Œä¼šåŠ è½½ç³»ç»ŸåŸæœ‰çš„åŠ¨æ€é“¾æ¥åº“ï¼Œè¿™ä¸ªå…·ä½“çš„åŠ¨æ€é“¾æ¥åº“ä½ç½®ç”± &lt;code&gt;install-name&lt;/code&gt; ç»™å‡ºã€‚&lt;/p&gt;

&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œtbd æ˜¯ Apple ç”¨æ¥å‡å° SDK ä½“ç§¯å¤§å°æ‰€æä¾›çš„ä¸­é—´æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œå½“ä½ ä¸‹è½½ Xcode çš„æ—¶å€™ï¼Œå…¶è‡ªå¸¦çš„ SDK ä¸­åŒ…å«çš„åŠ¨æ€é“¾æ¥åº“å¤§éƒ¨åˆ†å‡ä¸º tbd æ ¼å¼ï¼Œè€ŒçœŸæ­£æˆ‘ä»¬è¿è¡Œèµ·æ¥å¯æ‰§è¡Œæ–‡ä»¶ä¹‹ååŠ è½½çš„åŠ¨æ€é“¾æ¥åº“ä¼šç›´æ¥ä½¿ç”¨ç³»ç»Ÿç›®å½•ä¸‹çš„ï¼ˆæ— è®ºæ˜¯ iOS è¿˜æ˜¯ macOSï¼‰ã€‚&lt;/p&gt;

&lt;h1 id=&#34;å‚è€ƒé“¾æ¥&#34;&gt;å‚è€ƒé“¾æ¥&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/gdbinit/MachOView&#34;&gt;MachOView&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.objc.io/issues/6-build-tools/mach-o-executables/&#34;&gt;Mach-O Executables&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lowlevelbits.org/parsing-mach-o-files/&#34;&gt;PARSING MACH-O FILES&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
      
    </item>
    
    <item>
      <title>Build Process</title>
      <link>https://hechen.xyz/post/xcode-build-system/</link>
      <pubDate>Thu, 25 Apr 2019 11:30:30 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/xcode-build-system/</guid>
      
        <description>

&lt;p&gt;ç¼–ç¨‹è¯­è¨€çš„å¤„ç†è¿‡ç¨‹å¤§è‡´ä¼šæœ‰äº”ä¸ªé˜¶æ®µï¼Œå…¶æ¯ä¸ªé˜¶æ®µå‡æœ‰å¯¹åº”çš„å·¥å…·ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;é¢„å¤„ç†å™¨ Preprocessor&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘å™¨ Compiler&lt;/li&gt;
&lt;li&gt;æ±‡ç¼–å™¨ Assembler&lt;/li&gt;
&lt;li&gt;é“¾æ¥å™¨ Linker&lt;/li&gt;
&lt;li&gt;åŠ è½½å™¨ Loader&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä»¥ä¸‹ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„æºæ–‡ä»¶ï¼Œæ¥çœ‹çœ‹å…·ä½“è¿™å‡ ä¸ªæ­¥éª¤éƒ½åšäº†å“ªäº›äº‹æƒ…ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  main.m
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  MachO
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  Created by chen he on 2019/4/22.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//  Copyright Â© 2019 chen he. All rights reserved.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;stdio.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World.&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;é¢„å¤„ç†å™¨-preprocessor&#34;&gt;é¢„å¤„ç†å™¨ Preprocessor&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;ç¬¦å·åŒ–&lt;/li&gt;
&lt;li&gt;å®å®šä¹‰å±•å¼€&lt;/li&gt;
&lt;li&gt;å¤´æ–‡ä»¶å¼•å…¥å±•å¼€&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œæˆ‘ä»¬å¯¼å‡ºè¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;n&#34;&gt;xcrun&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;clang&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preprocessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;txt&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ‰“å¼€ preprocessed.txt çœ‹è¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;helloworld.c&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 1
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 3
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 361 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 3
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;command line&amp;gt;&amp;#34; 1
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 2
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;helloworld.c&amp;#34; 2
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;/stdio.h&amp;#34; 1 3 4&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 64 &amp;#34;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;/stdio.h&amp;#34; 3 4&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;/_stdio.h&amp;#34; 1 3 4&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 68 &amp;#34;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;/_stdio.h&amp;#34; 3 4&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;/sys/cdefs.h&amp;#34; 1 3 4&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// çœç•¥ä¸€ä¸‡å­—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__vsnprintf_chk&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;restrict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;restrict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;va_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;# 412 &amp;#34;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;/stdio.h&amp;#34; 2 3 4&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 2 &amp;#34;helloworld.c&amp;#34; 2
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World!&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°é¢„ç¼–è¯‘å¤„ç†ä¹‹åçš„æºæ–‡ä»¶ï¼Œä»…ä»…åªæœ‰å‡ è¡Œçš„æºæ–‡ä»¶è¿›è¡Œå¤´æ–‡ä»¶å±•å¼€ä¹‹åèƒ½å¢åŠ åˆ°å‡ ç™¾è¡Œï¼Œè€Œæˆ‘ä»¬ä»…ä»…åªå¼•å…¥äº† &lt;code&gt;stdio.h&lt;/code&gt; ä¸€ä¸ªå¤´æ–‡ä»¶ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Xcode æ¥æ‰§è¡Œé¢„å¤„ç†å‘½ä»¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/vmwexNC.png&#34; alt=&#34;xcode_preprocess&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œåœ¨ Swift æå‡ºçš„åŒæ—¶ï¼ŒModule çš„æ¦‚å¿µè¢«åŒæ—¶å¼•å…¥ C ç³»è¯­è¨€ä¸­ï¼Œåœ¨ Xcode çš„ &lt;code&gt;build settings&lt;/code&gt; ä¸­èƒ½æ‰¾åˆ°å…¶å¼€å…³ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/lUGiInP.png&#34; alt=&#34;enable_module&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Modules é»˜è®¤æ˜¯å¼€å¯çš„ï¼ˆå½“ç„¶è¿™ä¸ªå¼€å…³ä¹Ÿåªæ˜¯é’ˆå¯¹ C ç³»è¯­è¨€ï¼ŒSwift åŸç”Ÿå°±æ˜¯ä»¥ Module å½¢å¼å­˜åœ¨çš„ï¼‰ï¼Œå¤§å®¶å¯ä»¥åœ¨å¼€å¯çš„æƒ…å†µä¸‹å†è¿›è¡Œé¢„å¤„ç†å‘½ä»¤çœ‹ç»“æœï¼Œå·²ç»ç”±åŸæ¥çš„ 548 è¡Œå‡å°‘åˆ°äº† 14 è¡Œï¼Œè¿™ä¹Ÿæ˜¯ &lt;code&gt;LLVM&lt;/code&gt; æåŠ›æ¨è Module çš„å…¶ä¸­ä¸€ä¸ªåŸå› ï¼Œå¤§å¤§å‡å°‘äº†é¢„ç¼–è¯‘å¤„ç†æ—¶é—´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;/Users/chen/Desktop/Share/Code/MachO/MachO/1/helloworld.m&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 1
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 3
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 374 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 3
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;command line&amp;gt;&amp;#34; 1
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34; 2
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 1 &amp;#34;/Users/chen/Desktop/Share/Code/MachO/MachO/1/helloworld.m&amp;#34; 2
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;# 10 &amp;#34;/Users/chen/Desktop/Share/Code/MachO/MachO/1/helloworld.m&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Darwin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;libc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World.&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“è¿›è¡Œé¢„å¤„ç†å®Œæˆä¹‹åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯åŸºäºå±•å¼€çš„æºç è¿›è¡Œ AST è¯­æ³•æ ‘è§£æï¼Œç”Ÿæˆä¸­é—´ä»£ç ï¼Œå¹¶ä¸”è¾“å‡ºç›®æ ‡æœºå™¨ä»£ç çš„è¿‡ç¨‹ã€‚è¿™å°±æ˜¯ç¼–è¯‘å™¨åšçš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¼–è¯‘å™¨-compiler&#34;&gt;ç¼–è¯‘å™¨ Compiler&lt;/h2&gt;

&lt;p&gt;ç¼–è¯‘å™¨è‡ªèº«å°±æ˜¯ä¸ªäºŒè¿›åˆ¶ç¨‹åºï¼Œç”¨æ¥å°†ä»£ç æºæ–‡ä»¶è½¬æ¢æˆè¯­ä¹‰ä¸Šå®Œå…¨ä¸€è‡´çš„ç­‰ä»·è¯­è¨€çš„ï¼Œè¯¥ç­‰ä»·è¯­è¨€å°±æ˜¯æœºå™¨ç ï¼ˆmachine codeï¼‰ã€‚ç›®å‰åœ¨ Apple çš„ç”Ÿæ€é‡Œå®Œæˆè¿™ä»¶äº‹æƒ…çš„å°±æ˜¯ LLVMï¼ˆå‡ºç°å°±æ˜¯ä¸ºäº†æ›¿æ¢æ‰ GCCï¼‰ã€‚æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„ç¼–è¯‘å™¨å®è´¨ä¸Šæ˜¯ä¸€ä¸ªå¹¿ä¹‰ä¸Šçš„æ¦‚å¿µï¼Œå…¶è¿˜åŒ…æ‹¬ç¼–è¯‘å™¨å‰ç«¯ï¼Œä¸­é—´ä»£ç ç”Ÿæˆå™¨ï¼Œä»£ç ä¼˜åŒ–å™¨ï¼Œç¼–è¯‘å™¨åç«¯ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ç›®å‰ Apple ç”Ÿæ€ä¸‹ç¼–è¯‘å™¨ï¼ˆæ ¸å¿ƒæ˜¯ LLVM å¥—ä»¶ï¼‰è¿›è¡Œç»†åŒ–ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°è¯¦ç»†çš„åˆ’åˆ†é˜¶æ®µå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fTwjs0q.png&#34; alt=&#34;LLVM&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ Clang ä»¥åŠ swiftc / swift å®è´¨ä¸Šæ˜¯ LLVM ç¼–è¯‘é“¾æ¡ä¸­çš„å‰ç«¯ï¼Œè™½ç„¶æ˜¯å‰ç«¯ï¼Œä½†æ˜¯ç›®å‰å·¥å…·é›†æœ¬èº«å·²ç»å†…ç½®äº†ä¸€äº›æ³¨å…¥æ±‡ç¼–å™¨ï¼Œä»£ç ä¼˜åŒ–ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;æ— è®ºæ˜¯ Clang è¿˜æ˜¯ swiftc æœ€ç»ˆéƒ½ä¼šåœ¨ç¼–è¯‘å‰ç«¯å°†æºæ–‡ä»¶ç”Ÿæˆä¸­é—´ä»£ç  LLVM Intermediate representation ï¼ˆLLVM IRï¼‰ï¼Œç„¶åä¼šç»å†ä¸­é—´ä»£ç ä¼˜åŒ–ç­‰é˜¶æ®µï¼Œæœ€åäº¤ç”±æ±‡ç¼–å™¨ç”Ÿæˆå¯¹åº”ç›®æ ‡æŒ‡ä»¤é›†çš„ç›®æ ‡æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;Xcode ä½¿ç”¨ä¸¤ç§ä¸åŒçš„ç¼–è¯‘å™¨å‰ç«¯ï¼Œä¸€ç§æ˜¯é’ˆå¯¹ Objective-C/Objective-C++ æˆ–è€… C/C++ ä»£ç ä½¿ç”¨çš„ï¼Œå¦ä¸€ç§å°±æ˜¯åœ¨ Swift å‡ºç°ä¹‹åé’ˆå¯¹ Swift è¯­è¨€ä½¿ç”¨çš„ã€‚å‰è€…å°±æ˜¯ clangï¼Œåè€…æ˜¯ swiftc / swiftã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/kN76TgI.png&#34; alt=&#34;Clang-Swiftc&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å› ä¸º swift è¯­è¨€æœ¬èº«æ˜¯æ²¡æœ‰é¢„å¤„ç†å™¨çš„ï¼Œå› æ­¤å¿½ç•¥å‰ä¸€æ­¥ã€‚åœ¨é¢„ç¼–è¯‘é˜¶æ®µï¼Œæˆ‘ä½¿ç”¨äº† Clang ä½œä¸ºæ¼”ç¤ºï¼Œè€Œ Swift æ–‡ä»¶æ˜¯æ— éœ€è¿›è¡Œé¢„ç¼–è¯‘å¤„ç†çš„ã€‚æœ€ç»ˆç¼–è¯‘å™¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œç§°ä¹‹ä¸ºç›®æ ‡æ–‡ä»¶ï¼Œåœ¨ Apple å¹³å°ä¸­ä»¥ç‰¹æ®Šçš„æ ¼å¼å­˜åœ¨ï¼Œè¿™ç§æ ¼å¼å°±æ˜¯ &lt;code&gt;Mach-O&lt;/code&gt; æ ¼å¼ï¼Œä¸‹æ–‡ä¼šè®²ã€‚
è€Œæ¯ä¸ªç›®æ ‡æ–‡ä»¶ä¸­éƒ½æœ‰æš´éœ²ç»™å…¶ä»–ç›®æ ‡æ–‡ä»¶æ‰€ä½¿ç”¨çš„ç¬¦å·ï¼Œè¿™äº›ä¹Ÿå°±æ˜¯å¤–éƒ¨ç¬¦å·ï¼Œè¿™äº›ç¬¦å·è¢«ç®¡ç†èµ·æ¥ï¼Œä»¥ä¸€ä¸ªç¬¦å·è¡¨çš„å½¢å¼å­˜åœ¨ï¼Œå¯¹äºå˜é‡å’Œå‡½æ•°æ¥è¯´ï¼Œå…¶ç¬¦å·è¡¨ä¸­çš„ Key å°±æ˜¯è¿™äº›å˜é‡å’Œå‡½æ•°çš„åå­—ï¼Œè€Œ Value å°±æ˜¯å…¶åœ¨ç›®æ ‡æ–‡ä»¶ä¸­çš„åœ°å€ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ±‡ç¼–å™¨-assembler&#34;&gt;æ±‡ç¼–å™¨ Assembler&lt;/h2&gt;

&lt;p&gt;æ±‡ç¼–å™¨å®é™…ä¸Šæ˜¯å°†ä¸­é—´è¿‡ç¨‹ç”Ÿæˆçš„ä¸­é—´ä»£ç ç¿»è¯‘æˆæŒ‡å®šæœºå™¨æŒ‡ä»¤é›†çš„æ±‡ç¼–ä»£ç ï¼Œå…¶å® Clang å·¥å…·é›†ä¸­å·²ç»é›†æˆäº†&lt;/p&gt;

&lt;h2 id=&#34;é“¾æ¥å™¨-linker&#34;&gt;é“¾æ¥å™¨ Linker&lt;/h2&gt;

&lt;p&gt;æ¯ä¸ªæºæ–‡ä»¶å°±æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ï¼Œç”Ÿæˆäº†ä¸€ä¸ªä¸€ä¸ªæˆ‘ä»¬ç§°ä¹‹ä¸ºç›®æ ‡æ–‡ä»¶çš„äºŒè¿›åˆ¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰çš„ç›®æ ‡æ–‡ä»¶æ•´åˆæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼ŒFoo.o ä»¥åŠ main.o æ–‡ä»¶ï¼Œå½“ç„¶è¿˜æœ‰ä¾èµ–çš„å…¶ä»–åº“ï¼ŒLinker è¯¥å‡ºåœºäº†ã€‚æ•´ä¸ªé“¾æ¥è¿‡ç¨‹æ­£æ˜¯åŸºäºæ¯ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·æ‰èƒ½æ­£ç¡®å®Œæˆï¼Œé“¾æ¥è¿‡ç¨‹ä¸­å¾ˆå…³é”®çš„ä¸€éƒ¨åˆ†å°±æ˜¯ç¬¦å·çš„ç®¡ç†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BN3Tr47.png&#34; alt=&#34;Linker&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ main.mï¼ŒFoo.m ä»¥åŠå…¶å¯¹åº”çš„å¤´æ–‡ä»¶ Foo.hã€‚åˆ†åˆ«ç»å†é¢„å¤„ç†ï¼Œç¼–è¯‘ç”Ÿæˆå¯¹åº”ç›®æ ‡æ–‡ä»¶ï¼Œç»™ clang ä¼ é€’ -c æ˜¯ç”¨æ¥å®Œæˆä»¥ä¸Šæ‰€æœ‰å·¥ä½œé›†åˆï¼Œç›´æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;xcrun clang -c main.m
xcrun clang -c Foo.m&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç”Ÿæˆäº§ç‰©ä¸ºä¸¤ä¸ªå¯¹åº”çš„ç›®æ ‡æ–‡ä»¶ï¼Œmain.o ä»¥åŠ Foo.o ï¼Œä½¿ç”¨é“¾æ¥å™¨è¿›è¡Œé“¾æ¥ï¼Œä¼ ç»Ÿçš„é“¾æ¥å™¨ï¼Œæ— è®ºæ˜¯ Mac è¿˜æ˜¯ Linux ä¸Šéƒ½ä¼šæœ‰ ld è¿™ä¸ªå·¥å…·ï¼Œåœ¨ /usr/bin/ ä¸‹ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨ ld å°†å¯¹åº”ä¸¤ä¸ªç›®æ ‡æ–‡ä»¶é“¾æ¥èµ·æ¥ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;n&#34;&gt;ld&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;o&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;o&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯æŠ¥é”™ï¼Œå¦‚ä¸‹æ‰€ç¤º:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;ld: warning: No version-min specified on &lt;span class=&#34;nb&#34;&gt;command&lt;/span&gt; line
Undefined symbols &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; architecture x86_64:
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;_OBJC_CLASS_&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$_NSObject&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;, referenced from:
      _OBJC_CLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt; in Foo.o
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;_OBJC_METACLASS_&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$_NSObject&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;, referenced from:
      _OBJC_METACLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt; in Foo.o
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;__objc_empty_cache&amp;#34;&lt;/span&gt;, referenced from:
      _OBJC_METACLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt; in Foo.o
      _OBJC_CLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt; in Foo.o
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;_objc_msgSend&amp;#34;&lt;/span&gt;, referenced from:
      _main in main.o
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;_printf&amp;#34;&lt;/span&gt;, referenced from:
      -&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Foo hello&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; in Foo.o
ld: symbol&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;s&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; not found &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; inferred architecture x86_64&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­ï¼ŒæŠ¥äº†ä¸€å † OBJC åº“æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼Œå› ä¸ºæ˜¯é™æ€é“¾æ¥ï¼Œæˆ‘ä»¬å†…éƒ¨ä½¿ç”¨äº† Foundation çš„ä¸€äº›å†…å®¹ï¼Œè¿™é‡Œä¹Ÿåœ¨ä¾§é¢è¯æ˜äº†ï¼Œæƒ³è¦å®Œæˆé™æ€é“¾æ¥ï¼Œæ‰€æœ‰æœªå®šä¹‰çš„ç¬¦å·éƒ½éœ€è¦åœ¨é™æ€é“¾æ¥é˜¶æ®µè¿›è¡Œä¿®æ­£ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦å°†è¿™äº›åº“ä¹Ÿé“¾è¿›æ¥ï¼Œå½“ç„¶ï¼Œè¿˜æœ‰ &lt;code&gt;_printf&lt;/code&gt; ä¹Ÿæ‰¾ä¸åˆ°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠ C++ ç›¸å…³çš„åº“ä¹ŸåŒæ—¶ä¸€å¹¶é“¾æ¥ï¼Œæœ€åçš„é“¾æ¥å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;ld main.o Foo.o &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;xcrun --show-sdk-path&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;/System/Library/Frameworks/Foundation.framework/Foundation &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;xcrun --show-sdk-path&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;/usr/lib/libSystem.B.tbd&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ ·å°±èƒ½å¤Ÿé¡ºåˆ©çš„ç”Ÿæˆæˆ‘ä»¬æ‰€éœ€è¦çš„ç›®æ ‡æ–‡ä»¶äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦æ˜¯ä½¿ç”¨ clang æä¾›çš„é»˜è®¤å‘½ä»¤æ¥åšï¼Œå¦‚ä¸‹ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;xcrun clang main.o Foo.o -Wl,&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;xcrun --show-sdk-path&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;/System/Library/Frameworks/Foundation.framework/Foundation&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¼šçœ‹åˆ°ä½ ä¸éœ€è¦æŠŠä¸€äº›åŸºç¡€çš„ C åº“å¼•å…¥ï¼Œæ˜¯å› ä¸º clang æœ¬èº«å·¥å…·å¸®ä½ åšäº†ä¸€å †ç¯å¢ƒè·¯å¾„æŸ¥æ‰¾çš„äº‹æƒ…ï¼Œæ„Ÿå…´è¶£å¯ä»¥åŠ ä¸Š -v æŒ‡ä»¤æ¥çœ‹å®Œæ•´çš„è¾“å‡ºï¼Œa.out æ˜¯é“¾æ¥å™¨é»˜è®¤ç”Ÿæˆçš„æ–‡ä»¶åç§°ã€‚&lt;/p&gt;

&lt;h3 id=&#34;nm&#34;&gt;nm&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;nm - display name list (symbol table)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå¼•å…¥ä¸€ä¸ªæ–°çš„å‘½ä»¤ nmï¼Œå…¶æ˜¯ç”¨æ¥å±•ç¤ºç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ä¿¡æ¯çš„ã€‚æˆ‘ä»¬ä½¿ç”¨ nm å‘½ä»¤æ¥æŸ¥çœ‹è¯¥å¯æ‰§è¡Œæ–‡ä»¶çš„ç¬¦å·è¡¨ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;xcrun nm -nm Foo.o


&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_CLASS_&lt;span class=&#34;nv&#34;&gt;$_NSObject&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_METACLASS_&lt;span class=&#34;nv&#34;&gt;$_NSObject&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external __objc_empty_cache
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _printf
&lt;span class=&#34;m&#34;&gt;0000000000000000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__TEXT,__text&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; non-external -&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Foo hello&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;0000000000000040&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__DATA,__objc_const&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; non-external l_OBJC_METACLASS_RO_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;0000000000000088&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__DATA,__objc_const&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; non-external l_OBJC_&lt;span class=&#34;nv&#34;&gt;$_INSTANCE_METHODS_Foo&lt;/span&gt;
00000000000000a8 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__DATA,__objc_const&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; non-external l_OBJC_CLASS_RO_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt;
00000000000000f0 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__DATA,__objc_data&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_METACLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;0000000000000118&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__DATA,__objc_data&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_CLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åŒæ—¶ï¼Œæˆ‘ä»¬å†æŸ¥çœ‹ä¸‹ main.o è¿™ä¸ªç›®æ ‡æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;xcrun nm -nm main.o

&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_CLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _objc_msgSend
&lt;span class=&#34;m&#34;&gt;0000000000000000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__TEXT,__text&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _main&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å†æŸ¥çœ‹ä¸‹æœ€ç»ˆçš„ç›®æ ‡è¾“å‡ºæ–‡ä»¶çš„ç¬¦å·ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;xcun nm -nm a.out

&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_CLASS_&lt;span class=&#34;nv&#34;&gt;$_NSObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;from libobjc&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_METACLASS_&lt;span class=&#34;nv&#34;&gt;$_NSObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;from libobjc&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external __objc_empty_cache &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;from libobjc&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _objc_msgSend &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;from libobjc&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _printf &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;from libSystem&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;undefined&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external dyld_stub_binder &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;from libSystem&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;0000000000001000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__TEXT,__text&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;referenced dynamically&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; external __mh_execute_header
0000000000001ef0 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__TEXT,__text&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _main
0000000000001f50 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__TEXT,__text&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; non-external -&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Foo hello&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;0000000000002100&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__DATA,__objc_data&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_METACLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;0000000000002128&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;__DATA,__objc_data&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; external _OBJC_CLASS_&lt;span class=&#34;nv&#34;&gt;$_Foo&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¤§å®¶ä¼šçœ‹åˆ°æ¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ç¬¦å·è¡¨ä¿¡æ¯ä¸­ä¼šå­˜å‚¨ç€ undefined å­—æ ·çš„ç¬¦å·ï¼Œåå­—å‡ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨ä»£ç ä¸­æ‰€ä½“ç°å‡ºæ¥çš„å‡½æ•°åå­—æˆ–è€…å­—ç¬¦å˜é‡ï¼ˆæœ¬ä¾‹æ²¡æœ‰å¼•å…¥å˜é‡ï¼‰åç§°ï¼Œåœ¨ç”Ÿæˆå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œé“¾æ¥å™¨ä¼šæŸ¥æ‰¾æ‰€æœ‰è¾“å…¥çš„ç›®æ ‡æ–‡ä»¶ä¸­æ¯ä¸€ä¸ªçš„ç¬¦å·è¡¨ï¼Œç„¶åç»„æˆå…¨å±€ç¬¦å·è¡¨ï¼Œç›¸äº’æ‰¾æ‰€éœ€è¦çš„ç¬¦å·ï¼Œå¹¶ä¸”å¯¹éåŠ¨æ€åº“æ–‡ä»¶çš„ç¬¦å·è¿›è¡Œå®šä½ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¿›è¡Œé“¾æ¥ä¹‹åï¼Œæ‰€æœ‰åŸæ¥æ ‡è®°ä¸º undefined çš„ç¬¦å·ä¾ç„¶æ˜¯ undefinedï¼Œä½†æ˜¯ä¼šå‘ç°åœ¨å¯¹åº”ç¬¦å·åæ–¹ä¼šæ ‡è®°å‡ºè¯¥ç¬¦å·æ¥è‡ªäºå“ªé‡Œã€‚è¿™ä¸ªä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦ä½¿ç”¨è¯¥ç¬¦å·çš„æ—¶å€™ï¼Œå¯¹åº”å»å“ªé‡ŒåŠ è½½å¯¹åº”çš„ dylibã€‚&lt;/p&gt;

&lt;h3 id=&#34;otool&#34;&gt;otool&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;llvm-otool - the otool-compatible command line parser for llvm-objdump.
The  command  line  shim  llvm-otool  takes all the same options as the original otool(1) command and executes an  equivalent  objdump(1) command.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ¥ä¸‹æ¥å†ä»‹ç»ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· otool(object file displaying tool)ï¼Œå…¶åº•å±‚æ˜¯å¯¹ objdump çš„å°è£…ï¼Œè€Œ objdump æ˜¯ Linux ä¸‹æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶çš„å·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å°±ç”¨ otool æ¥æŸ¥çœ‹ç›®æ ‡æ–‡ä»¶æ‰€éœ€è¦ä½¿ç”¨çš„åº“çš„åœ°å€åœ¨å“ªé‡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;// -L print shared libraries used
xcrun otool -L a.out


a.out:
        /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;300&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1560&lt;/span&gt;.12.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
        /usr/lib/libSystem.B.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1252&lt;/span&gt;.200.5&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
        /usr/lib/libobjc.A.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;228&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹å…¶ä¸­çš„ libSystem.B.dylib çš„æƒ…å†µï¼Œå…¶å® macOS ä¸Šçš„ C åŸºç¡€åº“ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;xcrun otool -L /usr/lib/libSystem.B.dylib
    
    /usr/lib/libSystem.B.dylib:
            /usr/lib/libSystem.B.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1252&lt;/span&gt;.250.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libcache.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;81&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libcommonCrypto.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;60118&lt;/span&gt;.250.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libcompiler_rt.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;63&lt;/span&gt;.4.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libcopyfile.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libcorecrypto.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;602&lt;/span&gt;.250.23&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libdispatch.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1008&lt;/span&gt;.250.7&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libdyld.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;655&lt;/span&gt;.1.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libkeymgr.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/liblaunch.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1336&lt;/span&gt;.251.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libmacho.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;927&lt;/span&gt;.0.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libquarantine.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;86&lt;/span&gt;.220.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libremovefile.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;45&lt;/span&gt;.200.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_asl.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;356&lt;/span&gt;.200.4&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_blocks.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;73&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_c.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1272&lt;/span&gt;.250.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_configuration.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;963&lt;/span&gt;.250.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_coreservices.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;66&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_darwin.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_dnssd.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;878&lt;/span&gt;.250.4&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_info.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_m.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;3158&lt;/span&gt;.200.7&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_malloc.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;166&lt;/span&gt;.251.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_networkextension.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_notify.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.200.21&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_sandbox.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;851&lt;/span&gt;.250.12&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_secinit.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;.220.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_kernel.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;4903&lt;/span&gt;.251.3&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_platform.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;177&lt;/span&gt;.250.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_pthread.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;330&lt;/span&gt;.250.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_symptoms.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libsystem_trace.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;906&lt;/span&gt;.250.5&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libunwind.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;35&lt;/span&gt;.4.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
            /usr/lib/system/libxpc.dylib &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;compatibility version &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.0.0, current version &lt;span class=&#34;m&#34;&gt;1336&lt;/span&gt;.251.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç”šè‡³æŸ¥çœ‹ a.out å¯æ‰§è¡Œæ–‡ä»¶åœ¨æ‰§è¡Œæ—¶æ‰€éœ€è¦ä¾èµ–çš„æ‰€æœ‰ä¾èµ–ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;DYLD_PRINT_LIBRARIES&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; ./a.out &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ç»“æœçœ‹åˆ°ï¼Œä¸€ä¸ªç®€å•çš„ç¨‹åºæ‰€éœ€è¦é“¾æ¥çš„ &lt;code&gt;dylib&lt;/code&gt; æœ‰å¤šå°‘ï¼Œå°±æ˜¯å› ä¸ºæœ‰è¿™ä¹ˆå¤šåŠ¨æ€åº“è¦åŠ è½½ï¼Œåœ¨å¯æ‰§è¡Œç¨‹åºåŠ è½½åˆ°å†…å­˜ä¸­æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸æ–­çš„éœ€è¦è£…è½½åŠ¨æ€åº“è¿›å…¥å†…å­˜ï¼Œæ‰€éœ€è¦èŠ±è´¹çš„æ—¶é—´å…¶å®å¾ˆå¯è§‚ï¼Œæ‰€ä»¥ç³»ç»Ÿå±‚é¢æä¾›äº†å…±äº«ç¼“å­˜ï¼Œä¹Ÿå³ä¼šæå‰åŠ è½½åˆ°å†…å­˜ä¸­çš„åŠ¨æ€é“¾æ¥åº“é›†åˆï¼Œå½“éœ€è¦é“¾æ¥åˆ°å¯¹åº”åŠ¨æ€åº“çš„æ—¶å€™å°±çœç•¥äº†ä»ç£ç›˜å†™å…¥å†…å­˜çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“ä¸€å¥è¯&#34;&gt;æ€»ç»“ä¸€å¥è¯&lt;/h2&gt;

&lt;p&gt;æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹å¯ä»¥å½’ç»“ä¸ºï¼š
å¤´æ–‡ä»¶çº¦å®šï¼Œç¼–è¯‘å™¨ä¿¡ä»»å½¼æ­¤ï¼Œé“¾æ¥å™¨éªŒè¯&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å†™ä¸ªå°å·¥å…· Swwwitch</title>
      <link>https://hechen.xyz/post/swwwitch/</link>
      <pubDate>Sat, 30 Mar 2019 11:29:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/swwwitch/</guid>
      
        <description>

&lt;p&gt;æœ€è¿‘çœ‹åˆ°å¼€å‘åœˆæŸçƒ­ç‚¹ï¼Œåšäº†ä¸ªå°å·¥å…·ï¼Œæ€»ç»“ä¸‹æœ€è¿‘çš„å‡ ä¸ª CocoaApp ä¸Šçš„åŠŸèƒ½ï¼Œä»…åšç»ƒæ‰‹ã€‚ç°åœ¨åªåŒ…å«äº†ä¸¤ä¸ªå¼€å…³ï¼šåˆ‡æ¢ç³»ç»Ÿä¸»é¢˜å’Œéšè—æ¡Œé¢ icon çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/U9RTmVU.png&#34; alt=&#34;Swwwitch-c500&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;åŠŸèƒ½ç‚¹&#34;&gt;åŠŸèƒ½ç‚¹&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;åˆ‡æ¢ç³»ç»Ÿä¸»é¢˜&lt;/li&gt;
&lt;li&gt;æ˜¾å¼æˆ–è€…å°è±¡æ¡Œé¢å›¾æ ‡&lt;/li&gt;
&lt;li&gt;å®Œå…¨çš„ Menu Only åº”ç”¨&lt;/li&gt;
&lt;li&gt;å¼€æœºè‡ªå¯åŠ¨&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…³äºç¬¬ä¸‰ç‚¹çš„å®ç°åœ¨&lt;a href=&#34;https://hechen.xyz/post/dockless-cocoaapps/&#34;&gt;å¦å¤–ä¸€ç¯‡æ–‡ç« &lt;/a&gt;æœ‰è®²è¿‡ï¼Œç¬¬å››ç‚¹çš„å®ç°åœ¨ &lt;a href=&#34;https://hechen.xyz/post/autostartwhenlogin/&#34;&gt;è¿™ä¸€ç¯‡&lt;/a&gt; ä¸­æœ‰è®²ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç³»ç»Ÿä¸»é¢˜åˆ‡æ¢&#34;&gt;ç³»ç»Ÿä¸»é¢˜åˆ‡æ¢&lt;/h3&gt;

&lt;p&gt;å…³äºç³»ç»Ÿä¸»é¢˜åˆ‡æ¢ä¸»è¦æ˜¯åŸºäº AppleScript æ‰€å†™ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;System Events&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;appearance&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;preferences&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;dark&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;dark&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mode&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½ å®Œå…¨å¯ä»¥è‡ªè¡Œæ‰§è¡Œè¿™æ®µ Apple Script æ¥åˆ‡æ¢ä¸»é¢˜ï¼Œä½ å¯ä»¥ç‚¹å‡»ä¸‹é¢é“¾æ¥å°è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;applescript://com.apple.scripteditor?action=new&amp;amp;name=Change%20Theme&amp;amp;script=tell%20application%20%22System%20Events%22%0D%09tell%20appearance%20preferences%0D%09%09set%20dark%20mode%20to%20not%20dark%20mode%0D%09end%20tell%0Dend%20tell&#34;&gt;Click Here to run&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;æ˜¾å¼-éšè—æ¡Œé¢å›¾æ ‡&#34;&gt;æ˜¾å¼/éšè—æ¡Œé¢å›¾æ ‡&lt;/h3&gt;

&lt;p&gt;å…³äºéšè—æ¡Œé¢å›¾æ ‡ï¼Œå®é™…ä¸Šæ˜¯æ‰§è¡Œç³»ç»Ÿçš„ Command æ¥å®ç°çš„ï¼ŒCocoa åº”ç”¨å¯ä»¥æ˜¾å¼ä½¿ç”¨ Processï¼ˆä¹Ÿå°±æ˜¯ NSTaskï¼‰æ¥æ‰§è¡Œä»»åŠ¡ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡ NSTask æ‰§è¡Œäº†ä¸€æ®µå¦‚ä¸‹çš„å‘½ä»¤è¡Œè¾¾åˆ°çš„ç›®çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;defaults write com.apple.finder CreateDesktop &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;
killall Finder&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½ å¯ä»¥è‡ªè¡Œç‚¹å‡»ä»¥ä¸‹é“¾æ¥å°è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;applescript://com.apple.scripteditor?action=new&amp;amp;name=Hide%20Desktop%20Icons&amp;amp;script=tell%20application%20%22Terminal%22%0D%20%20%20%20do%20script%20%22defaults%20write%20com.apple.finder%20CreateDesktop%20false%3b%20killall%20Finder%22%0Dend%20tell&#34;&gt;Click here to hide Desktop Icons&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;applescript://com.apple.scripteditor?action=new&amp;amp;name=Hide%20Desktop%20Icons&amp;amp;script=tell%20application%20%22Terminal%22%0D%20%20%20%20do%20script%20%22defaults%20write%20com.apple.finder%20CreateDesktop%20true%3b%20killall%20Finder%22%0Dend%20tell&#34;&gt;Click here to show Desktop Icons&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ„Ÿå…´è¶£å¯ä»¥å»çœ‹ä¸‹ä»£ç ï¼Œé¢†ä¼šæ„æ€å³å¯ã€‚
&lt;a href=&#34;https://github.com/hechen/Swwwitch/releases&#34;&gt;Releases&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;todo&#34;&gt;TODO&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Add more switch&lt;/li&gt;
&lt;li&gt;Add User-Customized switch setting&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;links&#34;&gt;Links&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://ss64.com/osx/&#34;&gt;Checkout all command lines macOS Support&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äº Mac åº”ç”¨çš„è‡ªå¯åŠ¨æ˜¯å¦‚ä½•åšåˆ°çš„</title>
      <link>https://hechen.xyz/post/autostartwhenlogin/</link>
      <pubDate>Mon, 18 Mar 2019 17:29:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/autostartwhenlogin/</guid>
      
        <description>

&lt;p&gt;å¼€æœºè‡ªå¯åŠ¨æ˜¯ Cocoa åº”ç”¨æœ€å¸¸è§çš„ä¸€ç§åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹éœ€è¦å¸¸é©» Menu çš„æœåŠ¡æ¥è¯´æ›´æ˜¯å¦‚æ­¤ï¼Œä»Šå¤©æˆ‘ä»¬å¯¹å¼€æœºå¯åŠ¨é¡¹çš„åŠŸèƒ½åŠ å…¥åšä¸ªæ¢³ç†ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;åœ¨ &lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-SW1&#34;&gt;Daemons and Services Programming Guide&lt;/a&gt; ä¸­æˆ‘ä»¬èƒ½æ‰¾åˆ°å…³äºè‡ªå¯åŠ¨é¡¹çš„å¼€å‘è¯´æ˜ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Applications can contain a helper application as a full application bundle, stored inside the main application bundle in the Contents/Library/LoginItems directory. Set either the LSUIElement or LSBackgroundOnly key in the Info.plist file of the helper applicationâ€™s bundle.&lt;/p&gt;

&lt;p&gt;Use the SMLoginItemSetEnabled function (available in OS X v10.6.6 and later) to enable a helper application. It takes two arguments, a CFStringRef containing the bundle identifier of the helper application, and a Boolean specifying the desired state. Pass true to start the helper application immediately and indicate that it should be started every time the user logs in. Pass false to terminate the helper application and indicate that it should no longer be launched when the user logs in. This function returns true if the requested change has taken effect; otherwise, it returns false. This function can be used to manage any number of helper applications.&lt;/p&gt;

&lt;p&gt;If multiple applications (for example, several applications from the same company) contain a helper application with the same bundle identifier, only the one with the greatest bundle version number is launched. Any of the applications that contain a copy of the helper application can enable and disable it.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æ–‡æ¡£ä¸­æè¿°çš„é‚£æ ·ï¼Œä½ å¯ä»¥åœ¨ä¸»åº”ç”¨ä¸­åŒ…å«ä¸€ä¸ªè¾…åŠ©åº”ç”¨ï¼Œå¹¶ä¸”è·¯å¾„å›ºå®šä¸º &lt;code&gt;Contents/Library/LoginItems&lt;/code&gt;ï¼Œ&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨ &lt;code&gt;Shared File List&lt;/code&gt;ï¼Œå…¶ç›¸å…³ API åœ¨ &lt;a href=&#34;https://developer.apple.com/documentation/coreservices/launch_services&#34;&gt;Launch Services Reference&lt;/a&gt; èƒ½æ‰¾åˆ°ï¼Œå…¶å®å…·ä½“çš„ API å°±åœ¨ &lt;code&gt;LSSharedFileList.h&lt;/code&gt; ä¸­ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ²™ç›’åº”ç”¨&#34;&gt;æ²™ç›’åº”ç”¨&lt;/h2&gt;

&lt;p&gt;åœ¨å®˜æ–¹æ–‡æ¡£ &lt;a href=&#34;http://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html#//apple_ref/doc/uid/TP40011183-CH4-SW3&#34;&gt;App Sandbox Design Guide&lt;/a&gt; ä¸­æœ‰å¦‚ä¸‹é’ˆå¯¹å¼€æœºè‡ªå¯åŠ¨çš„æè¿°ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;To create a login item for your sandboxed app, use the SMLoginItemSetEnabled function (declared in ServiceManagement/SMLoginItem.h) as described in Adding Login Items Using the Service Management Framework.&lt;/p&gt;

&lt;p&gt;(With App Sandbox, you cannot create a login item using functions in the LSSharedFileList.h header file. For example, you cannot use the function LSSharedFileListInsertItemURL. Nor can you manipulate the state of Launch Services, such as by using the function LSRegisterURL.)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å…¶å®ä¸Šé¢æåŠçš„æ–¹å¼ä¹Ÿå°±æ˜¯åœ¨ç¬¬ä¸€å°èŠ‚ä¸­æåˆ°çš„ä¸¤ç§æ–¹å¼ä¸­çš„ç¬¬ä¸€ç§ï¼Œè€Œä¸”ç¬¬äºŒç§å…±äº«æ–‡ä»¶åˆ—è¡¨çš„ API æ˜¯æ— æ³•é’ˆå¯¹æ²™ç›’åº”ç”¨ä½¿ç”¨çš„ï¼Œè€Œä¸” &lt;code&gt;LSSharedFileList.h&lt;/code&gt; å·²ç»åœ¨ 10.10 ç³»ç»Ÿç‰ˆæœ¬ä¹‹åæ ‡è®°ä¸ºåºŸå¼ƒäº†ã€‚&lt;/p&gt;

&lt;p&gt;ç»¼åˆä¸Šé¢çš„è¯´æ˜ï¼Œç›®å‰åœ¨ macOS ä¸ŠåŠ å…¥è‡ªå¯åŠ¨é¡¹çš„æ–¹å¼ä¹Ÿæœ‰ä¸”ä»…æœ‰ä¸€ç§æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åŠ å…¥è¾…åŠ©åº”ç”¨æ¥å¼•å¯¼ä¸»åº”ç”¨å¯åŠ¨ã€‚æ•´ä¸ªæ€è·¯åº”è¯¥æ˜¯å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å°†è¾…åŠ©åº”ç”¨åŠ å…¥ç³»ç»Ÿå¯åŠ¨é¡¹ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿå¯åŠ¨ï¼Œè¿›è€Œè‡ªå¯åŠ¨è¾…åŠ©åº”ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;è¾…åŠ©åº”ç”¨å¼•å¯¼ä¸»åº”ç”¨å¯åŠ¨ï¼›&lt;/li&gt;
&lt;li&gt;ä¸»åº”ç”¨å¯åŠ¨å®Œæˆï¼Œå¹²æ‰è¾…åŠ©åº”ç”¨&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ˜¯çš„ï¼Œå°±æ˜¯è¿™ä¹ˆç»•ï¼Œå…·ä½“è¦æ€ä¹ˆåšå‘¢ï¼Ÿ ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;åˆ›å»ºè¾…åŠ©åº”ç”¨ï¼Œå…¶ä½œä¸ºä¸»åº”ç”¨çš„ Target æ–°å»ºå‡ºæ¥&lt;/li&gt;
&lt;li&gt;å°†è¾…åŠ©åº”ç”¨çš„ Info.plist æ–‡ä»¶ä¸­æŒ‡å®šå±æ€§ &lt;code&gt;LSBackgroundOnly&lt;/code&gt; ä¸º &lt;code&gt;YES&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨è¾…åŠ©åº”ç”¨ Target çš„ build setting ä¸­è®¾ç½® &lt;code&gt;Skip Install&lt;/code&gt; ä¸º &lt;code&gt;YES&lt;/code&gt;ï¼ˆå…³äºå…¶ä½œç”¨ä¸»è¦æ˜¯ä¸éœ€è¦ Xcode archive æ‰§è¡Œå°† Product æ‹·è´åˆ°æœ€ç»ˆçš„åŒ…é‡Œï¼Œå› ä¸ºæˆ‘ä»¬æ‰§è¡ŒåŠ å…¥äº†æ­¥éª¤ 4ï¼‰;&lt;/li&gt;
&lt;li&gt;åœ¨ä¸»åº”ç”¨çš„ build phase ä¸­åŠ å…¥ &lt;code&gt;Copy Files&lt;/code&gt; é˜¶æ®µï¼Œ

&lt;ul&gt;
&lt;li&gt;æŒ‡å®š destination ä¸º Wrapper&lt;/li&gt;
&lt;li&gt;æŒ‡å®š subpath ä¸º &lt;code&gt;Contents/Library/LoginItems&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŠ å…¥è¾…åŠ©åº”ç”¨çš„ Product&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¤§å®¶ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™äº›æ­¥éª¤çš„æ—¶å€™æ˜¯ä¸æ˜¯å¤´éƒ½å¤§äº†ï¼Œæ²¡é”™ï¼Œè¿™ä»…ä»…æ˜¯å†™ä»£ç ä¹‹å‰çš„å‚æ•°é…ç½®å·¥ä½œã€‚&lt;/p&gt;

&lt;h2 id=&#34;å¯åŠ¨é¡¹æ”¯æŒ&#34;&gt;å¯åŠ¨é¡¹æ”¯æŒ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fJUpG26.png&#34; alt=&#34;Add New Target&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æŒ‡å®š CocoaApp&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/tXJDr1Y.png&#34; alt=&#34;Specify Cocoa App&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æŒ‡å®š Product ID ä¸º &lt;code&gt;StartAtLoginLauncher&lt;/code&gt;,è¯¥ Target çš„ BundleID ä¸º &lt;code&gt;app.chen.osx.demo.StartAtLoginLauncher&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/uj2yhht.png&#34; alt=&#34;Modify BundleID&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åï¼Œä¿®æ”¹ StartAtLoginLauncher çš„ Info.plist æ–‡ä»¶ï¼ŒæŒ‡å®š &lt;code&gt;LSBackgroundOnly&lt;/code&gt; ä¸º YES
&lt;img src=&#34;https://i.imgur.com/BqNsFm7.png&#34; alt=&#34;BackgroundOnly&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¿®æ”¹ StartAtLoginLauncher Target çš„ Build Setting ä¸­ &lt;code&gt;Skip Install&lt;/code&gt; ä¸º &lt;code&gt;YES&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qKZzECK.png&#34; alt=&#34;Skill Install&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç´§æ¥ç€æ˜¯è®¾ç½®ä¸»åº”ç”¨ StartAtLogin Targetï¼Œä¸ºå…¶åŠ å…¥ Copy Files Build Phaseï¼Œå¦‚ä¸‹è®¾ç½®ï¼Œè·¯å¾„æ˜¯å›ºå®šçš„ &lt;code&gt;Contents/Library/LoginItems&lt;/code&gt;ï¼ŒCopy å¯¹è±¡ä¸º &lt;code&gt;StartAtLoginLauncher&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wfaxgmZ.png&#34; alt=&#34;Copy files Build Phase&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è‡³æ­¤ï¼Œæ‰€æœ‰è®¾ç½®å‡å·²å®Œæˆï¼Œä½ å¯ä»¥ Command+B äº§å‡ºä¸€ä¸ª Product çœ‹çœ‹ï¼Œåœ¨ä¸»åº”ç”¨é‡Œæ˜¯å¦å·²ç»å°†å¯åŠ¨é¡¹ç›®åŒ…å«è¿›å»äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/XfyYMG1.png&#34; alt=&#34;Build Product&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/OGXYmxw.png&#34; alt=&#34;Reveal Package Content&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿˜æ²¡æœ‰ç»“æŸï¼Œå› ä¸º StartAtLoginLauncher åº”ç”¨æ˜¯æŒ‡åœ¨åå°è¿è¡Œï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¾…åŠ©åº”ç”¨å¯åŠ¨çš„æ—¶å€™å¼¹å‡º UIï¼Œå› æ­¤è¿˜éœ€è¦åˆ é™¤ç›¸å…³çš„ UI ä»£ç ï¼Œåœ¨ Main.storyboard ä¸­ï¼Œåˆ é™¤ Window ä»¥åŠ ViewControllerï¼Œåªä¿ç•™ Application Scene å³å¯&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/poclDG1.png&#34; alt=&#34;Demo Start When Login&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è‡³æ­¤ï¼Œæ‰€æœ‰å†™ä»£ç ä¹‹å‰çš„å·¥ä½œå·²ç»å®Œæˆï¼Œæˆ‘ä»¬å·²ç»ä¸ºä¸»åº”ç”¨ç”Ÿæˆäº†å¯¹åº”çš„è¾…åŠ©åº”ç”¨ï¼Œå¸®åŠ©å…¶å¯åŠ¨ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åŠ å…¥å¯åŠ¨é¡¹&#34;&gt;åŠ å…¥å¯åŠ¨é¡¹&lt;/h3&gt;

&lt;p&gt;ä»£ç æ ¸å¿ƒé€»è¾‘åŒ…å«ä¸¤éƒ¨åˆ†ï¼š
1. ä¸»åº”ç”¨å¯åŠ¨ä¹‹åæ€æ‰è¾…åŠ©åº”ç”¨ï¼Œå› ä¸ºå…¶å·²ç»å®Œæˆäº†ä½¿å‘½ï¼›
2. åŠ©åº”ç”¨å¯åŠ¨ä¹‹åå°†ä¸»åº”ç”¨å”¤é†’&lt;/p&gt;

&lt;h4 id=&#34;ä¸»åº”ç”¨&#34;&gt;ä¸»åº”ç”¨&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;extension&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;killLauncher&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;killLauncher&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;applicationDidFinishLaunching&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aNotification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Insert code here to initialize your application&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;launcherAppId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLoginLauncher&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;runningApps&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSWorkspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApplications&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundleIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;launcherAppId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;isEmpty&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;DistributedNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;killLauncher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                         &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundleIdentifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;!)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸»åº”ç”¨åœ¨å®Œæˆå¯åŠ¨ä¹‹åï¼Œæ£€æŸ¥å½“å‰æ­£åœ¨æ‰§è¡Œçš„ Application åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«äº†æˆ‘ä»¬çš„è¾…åŠ©åº”ç”¨ï¼Œå¦‚æœåŒ…å«ï¼Œå‘é€é€šçŸ¥ï¼Œè®©å…¶ Terminate&lt;/p&gt;

&lt;h4 id=&#34;è¾…åŠ©åº”ç”¨&#34;&gt;è¾…åŠ©åº”ç”¨&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;applicationDidFinishLaunching&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aNotification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mainAppIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLogin&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;runningApps&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSWorkspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApplications&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundleIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mainAppIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;isEmpty&lt;/span&gt;
        
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;DistributedNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addObserver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                                &lt;span class=&#34;n&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;#selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;terminate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
                                                                &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;killLauncher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                                &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mainAppIdentifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundlePath&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;components&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pathComponents&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;removeLast&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;removeLast&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;removeLast&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;MacOS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;StartAtLogin&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//main app name&lt;/span&gt;
            
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newPath&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;withComponents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;            
            &lt;span class=&#34;n&#34;&gt;NSWorkspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;launchApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;terminate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¾…åŠ©åº”ç”¨å¯åŠ¨ä¹‹åï¼ŒæŸ¥è¯¢ä¸»åº”ç”¨æ˜¯å¦å·²ç»è¿è¡Œï¼Œå¦‚æœå·²ç»è¿è¡Œï¼Œå°±è‡ªè§‰å¹²æ‰è‡ªå·±ã€‚å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œæˆ‘ä»¬å”¤é†’ä¸» Appï¼Œåœ¨æ­¤ä¹‹å‰è®¾ç½®ç›‘å¬ï¼Œç­‰åˆ°ä¸»åº”ç”¨å¯åŠ¨ä¹‹åä¼šå‘ç»™è‡ªå·±é€šçŸ¥ï¼Œç„¶åå†è‡ªæ€ ğŸ˜‚&lt;/p&gt;

&lt;p&gt;è¿™å…¶ä¸­æˆ‘ä»¬ä½¿ç”¨äº† DistributedNotificationCenterï¼Œå’Œå¹³æ—¶æˆ‘ä»¬ä½¿ç”¨çš„ NotificationCenter ä¸åŒï¼Œå…¶å‘å‡ºçš„é€šçŸ¥æ˜¯è·¨ä»»åŠ¡ï¼ˆè¿›ç¨‹é—´ï¼‰çš„ï¼Œä¹Ÿå°±æ˜¯å…¶ä»–è¿›ç¨‹å¦‚æœæ³¨å†Œäº†åŒæ ·çš„é€šçŸ¥ï¼Œä¹Ÿæ˜¯èƒ½å¤Ÿæ”¶åˆ°ç›‘å¬é€šçŸ¥çš„ã€‚ ç³»ç»Ÿçš„æ—¥å¤œé—´é€šçŸ¥å°±æ˜¯è¿™ç§ç±»å‹ï¼Œå…¶ä¼šåœ¨æ‰€æœ‰ Task ä¹‹é—´è¿›è¡Œå¹¿æ’­ï¼Œè¯¥é€šçŸ¥çš„ NotificationName æ˜¯ &lt;code&gt;AppleInterfaceThemeChangedNotification&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;notificationName&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSNotification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;AppleInterfaceThemeChangedNotification&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;reigsterThemeChangedNotification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;DistributedNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addObserver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;#selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;selectorHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;notificationName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kr&#34;&gt;@objc&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;selectorHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Theme Changed!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;		
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å› æ­¤ Demo ä¸­çš„é€šçŸ¥åå­—åªæ˜¯ç¤ºä¾‹ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå°½å¯èƒ½çš„ç¡®ä¿é€šçŸ¥çš„å”¯ä¸€æ€§ã€‚&lt;/p&gt;

&lt;h4 id=&#34;åˆ‡æ¢è‡ªå¯åŠ¨çŠ¶æ€&#34;&gt;åˆ‡æ¢è‡ªå¯åŠ¨çŠ¶æ€&lt;/h4&gt;

&lt;p&gt;å…³äºè‡ªå¯åŠ¨çŠ¶æ€çš„è®¾ç½®åŒ…å«ä¸¤ä¸ªä¸»è¦çš„ APIï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;SMCopyAllJobDictionaries&lt;/li&gt;
&lt;li&gt;SMLoginItemSetEnabled&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&#34;smcopyalljobdictionaries&#34;&gt;SMCopyAllJobDictionaries&lt;/h5&gt;

&lt;p&gt;è·å–å½“å‰æˆ‘ä»¬çš„å¯åŠ¨é¡¹è®¾ç½®æƒ…å†µæ˜¯é€šè¿‡ &lt;code&gt;SMCopyAllJobDictionaries&lt;/code&gt; æ–¹æ³•ï¼Œå¦‚ä¸‹å®šä¹‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*!
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @function SMCopyAllJobDictionaries
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @abstract
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Copy the job description dictionaries for all jobs in the given domain.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @param domain
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * The job&amp;#39;s domain (e.g. {@link kSMDomainSystemLaunchd} or
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * {@link kSMDomainUserLaunchd}).
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @result
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * A new array containing all job dictionaries, or NULL if an error occurred. 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Must be released by the caller.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @discussion
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * SMCopyAllJobDictionaries returns an array of the job description dictionaries
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * for all jobs in the given domain, or NULL if an error occurred. This routine
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * is deprecated and will be removed in a future release. There will be no
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * provided replacement.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * For the specific use of testing the state of a login item that may have been
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * enabled with SMLoginItemSetEnabled() in order to show that state to the
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * user, this function remains the recommended API. A replacement API for this
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * specific use will be provided before this function is removed.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;__OSX_AVAILABLE_BUT_DEPRECATED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__MAC_10_6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__MAC_10_10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__IPHONE_3_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__IPHONE_8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;XPC_EXPORT&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;CFArrayRef&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;SMCopyAllJobDictionaries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CFStringRef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¯¥æ–¹æ³•è™½ç„¶æ ‡è®° 10.10 ç³»ç»Ÿå¼€å§‹åºŸå¼ƒï¼Œä½†æ˜¯åˆ°ç›®å‰çš„ 10.14 ç‰ˆæœ¬è¿˜æœªæä¾›æ›¿æ¢çš„ APIï¼Œæ‰€ä»¥è¿˜æ˜¯å¯ä»¥ç»§ç»­ä½¿ç”¨çš„ï¼ˆæ–‡æ¡£æ‰€è¯´ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ å…¥çš„å‚æ•°å¯ä»¥ç†è§£å°±æ˜¯æŒ‡å®šè·å–ä»»åŠ¡ç±»å‹çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ kSMDomainUserLaunchd æ¥è·å–æ‰€æœ‰åŠ å…¥åˆ°ç”¨æˆ·å¯åŠ¨é¡¹åˆ—è¡¨ä¸­çš„ä»»åŠ¡ï¼Œå…¶ä¸­æ¯ä¸€ä¸ª Job éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼Œå†…å®¹å¤§æ¦‚ç±»ä¼¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/KDLqn9a.png&#34; alt=&#34;Launch Job-c500&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ Label æ¥æŸ¥æ‰¾æˆ‘ä»¬éœ€è¦çš„ Jobï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLoginLauncher&amp;#34;&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;jobs&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SMCopyAllJobDictionaries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kSMDomainUserLaunchd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;takeRetainedValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;AnyObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;autoLaunchRegistered&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jobs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;contains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;where&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Label&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h5 id=&#34;smloginitemsetenabled&#34;&gt;SMLoginItemSetEnabled&lt;/h5&gt;

&lt;p&gt;è®¾ç½®å¯åŠ¨é¡¹æ˜¯é€šè¿‡ &lt;code&gt;SMLoginItemSetEnabled&lt;/code&gt; æ–¹æ³•ï¼Œå‚æ•°ä¸ºè¦è‡ªå¯åŠ¨çš„åº”ç”¨çš„ BundleID ä»¥åŠè‡ªå¯åŠ¨çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;è¦è®°ä½ï¼Œè¿™é‡Œæˆ‘ä»¬è¿›è¡Œæ›´æ”¹çš„æ˜¯é’ˆå¯¹ Launch Helper çš„è®¾ç½®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;startAtLogin&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// ....&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLoginLauncher&amp;#34;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;SMLoginItemSetEnabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CFString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;startAtLogin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;

&lt;p&gt;è‡³æ­¤ï¼Œå…³äºè‡ªå¯åŠ¨é¡¹çš„å·¥ä½œå·²ç»å®Œæˆï¼Œæƒ³è¦æµ‹è¯•ï¼Œå¯ä»¥å…ˆ Archive å‡ºä¸€ä¸ªå®‰è£…åŒ…ï¼Œç„¶åå°† Demo App æ‹–åˆ° /Applications ç›®å½•ï¼Œå¯åŠ¨ä¹‹åï¼Œè®¾ç½® Start At Login é€‰é¡¹ checked çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/szvqHoG.png&#34; alt=&#34;StartAtLogin&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸æ”¾å¿ƒï¼Œé€€å‡ºç™»å½•ä¹‹å‰ï¼ŒQuit æ‰æµ‹è¯•åº”ç”¨ï¼Œå¹¶ä¸”å–æ¶ˆ Reopen é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/5KrpAuU.png&#34; alt=&#34;Not Reopen&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åï¼ŒLog Out å½“å‰ç”¨æˆ·ï¼Œä¹‹åå†æ¬¡ç™»å½•è¿›æ¥ï¼Œçœ‹ Demo åº”ç”¨æ˜¯å¦è¢«å¯åŠ¨äº†ã€‚åœ¨æˆ‘çš„ç”µè„‘ä¸Šæµ‹è¯•å†æ¬¡å¯åŠ¨ä¹‹å Demo åº”ç”¨å°±ä¼šè¢«é¡ºåˆ©å¯åŠ¨äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/XJsUmVS.png&#34; alt=&#34;Desktop&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­è¿˜æœ‰ä¸€ç‚¹æ˜¯å…³äº Target çš„ Sandbox å±æ€§ï¼Œä½œä¸ºç›®å‰å”¯ä¸€å¯è¡Œçš„è‡ªå¯åŠ¨å®˜æ–¹æ–¹æ¡ˆï¼Œå…¶åŒæ—¶é€‚ç”¨äºæ²™ç›’åº”ç”¨å’Œéæ²™ç›’åº”ç”¨çš„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å·¥å…·æ¨è&#34;&gt;å·¥å…·æ¨è&lt;/h2&gt;

&lt;p&gt;æ¨èä¸‹ Github ä¸Š &lt;a href=&#34;https://github.com/sindresorhus&#34;&gt;sindresorhus&lt;/a&gt;
å†™çš„å°å·¥å…· &lt;a href=&#34;https://github.com/sindresorhus/LaunchAtLogin&#34;&gt;LaunchAtLogin&lt;/a&gt;ï¼Œç®€åŒ–äº†ä¸Šè¿°çš„æ­¥éª¤ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒé“¾æ¥&#34;&gt;å‚è€ƒé“¾æ¥&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/Security/Conceptual/AppSandboxDesignGuide/AboutAppSandbox/AboutAppSandbox.html#//apple_ref/doc/uid/TP40011183-CH1-SW1&#34;&gt;App Sandbox Design Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/Introduction.html#//apple_ref/doc/uid/10000172i-SW1-SW1&#34;&gt;Daemons and Services Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/Carbon/Conceptual/LaunchServicesConcepts/LSCIntro/LSCIntro.html#//apple_ref/doc/uid/TP30000999&#34;&gt;Launch Services Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Notifications/Articles/NotificationCenters.html&#34;&gt;NSDistributedNotificationCenter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/16374851/xcode-4-target-build-setting-skip-install-what-is-it&#34;&gt;What the Skip-Install mean?&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>Mac å¹³å°ä¸Šé‚£äº› Dockless çš„ App éƒ½æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</title>
      <link>https://hechen.xyz/post/dockless-cocoaapps/</link>
      <pubDate>Wed, 13 Mar 2019 17:29:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/dockless-cocoaapps/</guid>
      
        <description>

&lt;p&gt;Menu Only ç®—æ˜¯ Cocoa App ä¸­æœ€å¸¸è§çš„ä¸€é¡¹ï¼Œå®ƒä½¿å¾— App ä¸å ç”¨ä½ çš„ Dock æ ï¼Œåœ¨å¤š workspace çš„æ—¶å€™ä¹Ÿä¸å½±å“æ­£å¸¸ä½¿ç”¨ï¼Œéšæ—¶éƒ½å¯ä»¥åœ¨å±å¹•çš„èœå•æ ä¸­æ‰§è¡Œå¿«æ·æ“ä½œã€‚å°¤å…¶æ˜¯é’ˆå¯¹ä¸€äº›éœ€è¦ä¾¿æ·æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åº”ç”¨æ¥è®²ï¼ŒMenu bar çš„åŠŸèƒ½å¿…ä¸å¯å°‘ã€‚æœ¬æ–‡å°±ç®€å•ä»‹ç»ä¸€ä¸‹å…³äº Menu App ä¸­å…³é”®çš„å‡ ä¸ªå¼€å‘æ­¥éª¤ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h1 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h1&gt;

&lt;p&gt;ä»¥ &lt;a href=&#34;https://www.shimovpn.com/&#34;&gt;Shimo&lt;/a&gt; è¿™ä¸ª App ä¸¾ä¾‹ï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/vT7EEVK.png&#34; alt=&#34;Shimo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨å…¶è®¾ç½®é€‰é¡¹å¡ä¸­èƒ½çœ‹åˆ° Show Shimo in çš„é€‰é¡¹èœå•ï¼Œå…¶ä¸­æœ‰ä¸‰é¡¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Menubar only&lt;/li&gt;
&lt;li&gt;Dock only&lt;/li&gt;
&lt;li&gt;Menubar &amp;amp; Dock&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/WywIVkV.png&#34; alt=&#34;Shimo Menu&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¹Ÿæ˜¯å¸¸è§çš„ Cocoa åº”ç”¨çš„æ¨¡å¼æ”¯æŒï¼Œå¾ˆå¤šå¸¸è§çš„ App éƒ½æ”¯æŒï¼Œæ¯”å¦‚ DayOneï¼ŒDashï¼ŒTodoist ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ioUvpNw.png&#34; alt=&#34;Dash&#34; /&gt;
&lt;img src=&#34;https://i.imgur.com/ORYAEcZ.png&#34; alt=&#34;Todoist&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶å®æ ¸å¿ƒåŠŸèƒ½æœ‰ä¸¤ç‚¹ï¼š
1. å¯ä»¥æ˜¾ç¤ºæˆ–è€…éšè— Dock å›¾æ ‡ï¼›
2. å¯ä»¥æ˜¾ç¤ºæˆ–è€…éšè— Menu èœå•è¿™ä¸¤è€…çš„ç»„åˆã€‚&lt;/p&gt;

&lt;h1 id=&#34;æ ¸å¿ƒæ­¥éª¤&#34;&gt;æ ¸å¿ƒæ­¥éª¤&lt;/h1&gt;

&lt;h2 id=&#34;dock&#34;&gt;Dock&lt;/h2&gt;

&lt;p&gt;æ™®é€šçš„ Cocoa Application åˆ›å»ºä¹‹åï¼Œé»˜è®¤éƒ½æ˜¯ Dock ä¸Šå±•ç¤ºçš„ï¼Œå¦‚æœæƒ³éšè— Dock å›¾æ ‡ï¼Œé¦–å…ˆå®ƒéœ€è¦æœ‰è¿™ä¸ªèƒ½åŠ›ï¼Œè¿™ä¸ªèƒ½åŠ›æ˜¯é€šè¿‡ info.plist æ–‡ä»¶ä¸­çš„ Key æ¥æŒ‡å®šçš„ï¼Œè¿™ä¸ª Key å°±æ˜¯ &lt;code&gt;LSUIElement&lt;/code&gt;ï¼Œæˆ‘ä»¬å°†å…¶å€¼è®¾ç½®ä¸º true&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plist&#34; data-lang=&#34;plist&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plist&#34; data-lang=&#34;plist&#34;&gt;	&amp;lt;key&amp;gt;LSUIElement&amp;lt;/key&amp;gt;
	&amp;lt;true/&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨å¯è§†åŒ–å±•ç¤º plist çš„æ—¶å€™èƒ½çœ‹åˆ°é’ˆå¯¹è¯¥ Key çš„æè¿°æ˜¯æ ‡è¯† Application is agent(UIElement)&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ef3w8TR.png&#34; alt=&#34;plist&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹‹åï¼Œå†æ¬¡æ‰“å¼€ Appï¼Œä¼šå‘ç° Dock ä¸Šå·²ç»çœ‹ä¸åˆ°è¯¥åº”ç”¨çš„å›¾æ ‡äº†ï¼Œè¿™å°±æ˜¯ UIElement çš„ä½œç”¨ï¼Œå…¶å®é™…ä¸Šå°±æ˜¯å£°æ˜æˆ‘ä»¬çš„ Cocoa App æ˜¯ UIElementï¼ˆä¹Ÿå³ agentï¼‰ applicationï¼ŒDock ä¸æ˜¾ç¤ºï¼Œå…è®¸æœ‰ä¸€å®šçš„ç”¨æˆ·ç•Œé¢ã€‚åœ¨æ–¹æ³• &lt;code&gt;TransformProcessType&lt;/code&gt; çš„å¤´æ–‡ä»¶ä¸­èƒ½çœ‹åˆ° Cocoa Application çš„å‡ ç§å¸¸è§ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  TransformProcessType()
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  Summary:
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    Changes the &amp;#39;type&amp;#39; of the process specified in the psn parameter.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *     The type is specified in the transformState parameter.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  Discussion:
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    Given a psn for an application, this call transforms that
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application into the given type.  Foreground applications have a
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    menu bar and appear in the Dock.  Background applications do not
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    appear in the Dock, do not have a menu bar ( and should not have
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    windows or other user interface ).  UIElement applications do not
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    have a menu bar, do not appear in the dock, but may in limited
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    circumstances present windows and user interface. If a foreground
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application is frontmost when transformed into a background
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application, it is first hidden and another application is made
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    frontmost.  A UIElement or background-only application which is
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    transformed into a foreground application is not brought to the
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    front (use SetFrontProcess() after the transform if this is
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    required) nor will it be shown if it is hidden ( even if hidden
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    automatically by being transformed into a background-only
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application ), so the caller should use ShowHideProcess() to show
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    the application after it is transformed into a foreground
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application. Applications can only transform themselves; this
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    call cannot change the type of another application.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;extern OSStatus 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;TransformProcessType(
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;  const ProcessSerialNumber *        psn,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;  ProcessApplicationTransformState   transformState)          AVAILABLE_MAC_OS_X_VERSION_10_3_AND_LATER;  &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸Šæ–¹çš„æ³¨é‡Šå†™çš„éå¸¸æ¸…æ¥šï¼Œæˆ‘ä»¬æ—¥å¸¸çš„ Cocoa Application ä¸»è¦åŒ…å«ä¸‰ç§ç±»å‹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Foreground applicationsï¼Œ æ‹¥æœ‰ä¸€ä¸ª menu barï¼Œå¹¶ä¸”ä¼šåœ¨ Dock ä¸Šå‡ºç°ï¼›&lt;/li&gt;
&lt;li&gt;Background applicationsï¼ŒDock ä¸Šä¸å­˜åœ¨å¹¶ä¸”æ²¡æœ‰ menu barï¼Œå¹¶ä¸”ä¸åº”è¯¥å­˜åœ¨ä»»ä½• UI äº¤äº’ç•Œé¢ï¼ˆå»ºè®®ï¼‰&lt;/li&gt;
&lt;li&gt;UIElement applications æœ‰å’Œ Background applications ç›¸åŒçš„æƒ…å†µï¼Œä½†æ˜¯å…è®¸åœ¨æŸäº›æƒ…å†µä¸‹å±•ç¤ºç”¨æˆ·ç•Œé¢ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;é‚£ä¸Šæ–¹è¿™ä¸ªæ–¹æ³• &lt;code&gt;TransformProcessType&lt;/code&gt; å°±æ˜¯è¿›è¡Œè¿™å‡ ç§æ¨¡å¼åˆ‡æ¢çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;toggleDock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// ProcessApplicationTransformState&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;transformState&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;show&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;?&lt;/span&gt; 
    &lt;span class=&#34;c1&#34;&gt;// show to foreground application &lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// or not show to background application&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ProcessApplicationTransformState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kProcessTransformToForegroundApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
    &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ProcessApplicationTransformState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kProcessTransformToUIElementApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// transform current application type.&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;psn&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ProcessSerialNumber&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;highLongOfPSN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lowLongOfPSN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;UInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kCurrentProcess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TransformProcessType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;psn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transformState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™é‡Œå®é™…ä¸Šè¿˜æœ‰ä¸€ç§æ–¹æ¡ˆä¹Ÿæ˜¯å¾ˆå¤šå¼€å‘è€…é€‰ç”¨çš„æ–¹æ¡ˆï¼Œé€šè¿‡æŒ‡å®š App çš„&lt;code&gt;ActivationPolicy&lt;/code&gt;æ¥å®ç°çš„ï¼Œæ ¸å¿ƒçš„ API æ˜¯ &lt;code&gt;setActivationPolicy&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* Attempts to modify the application&amp;#39;s activation policy.  In OS X 10.9, any policy may be set; prior to 10.9, the activation policy may be changed to NSApplicationActivationPolicyProhibited or NSApplicationActivationPolicyRegular, but may not be changed to NSApplicationActivationPolicyAccessory.  This returns YES if setting the activation policy is successful, and NO if not.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     */&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;available&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OSX&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;10.6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;open&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;setActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;activationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è€Œé’ˆå¯¹ ActivationPolicy çš„è¯¦ç»†è§£é‡Šä¹Ÿå¯ä»¥åœ¨å…¶å¤´æ–‡ä»¶æ³¨é‡Šä¸­çœ‹åˆ°ä¸åŒçš„ activation policy æ„å‘³ç€ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;   &lt;span class=&#34;cm&#34;&gt;/* The following activation policies control whether and how an application may be activated.  They are determined by the Info.plist. */&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ActivationPolicy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;cm&#34;&gt;/* The application is an ordinary app that appears in the Dock and may have a user interface.  This is the default for bundled apps, unless overridden in the Info.plist. */&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;regular&lt;/span&gt;

        &lt;span class=&#34;cm&#34;&gt;/* The application does not appear in the Dock and does not have a menu bar, but it may be activated programmatically or by clicking on one of its windows.  This corresponds to LSUIElement=1 in the Info.plist. */&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessory&lt;/span&gt;
        
        &lt;span class=&#34;cm&#34;&gt;/* The application does not appear in the Dock and may not create windows or be activated.  This corresponds to LSBackgroundOnly=1 in the Info.plist.  This is also the default for unbundled executables that do not have Info.plists. */&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prohibited&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®é™…ä¸Šä¸åŒçš„ activation policy å’Œ Info.plist æ–‡ä»¶ä¸­å†™å…¥ä¸åŒå…ƒç´ çš„æ•ˆæœæ˜¯å¯¹ç­‰çš„ã€‚regular policy çš„åº”ç”¨å°±æ˜¯å¸¸è§„å¼•ç”¨çš„å½¢å¼ï¼Œä¼šå‡ºç°åœ¨ Dock ä¸Šï¼Œaccessory policy çš„åº”ç”¨å°±æ˜¯æŒ‡å®šå½“å‰åº”ç”¨ä¸º agentï¼Œä¸å† Dock å‡ºç°ã€‚&lt;/p&gt;

&lt;p&gt;æ˜¾ç¤ºæˆ–è€…éšè— Dock çš„åŠŸèƒ½å°±å¯ä»¥é€šè¿‡åˆ‡æ¢å½“å‰çš„æ¿€æ´»ç­–ç•¥ï¼ˆactivation policyæ¥å®ç°ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;toggleDock2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;show&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;
               &lt;span class=&#34;n&#34;&gt;NSApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;regular&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
             &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accessory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;menu-bar&#34;&gt;Menu bar&lt;/h2&gt;

&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸Šå½¢å¼éšè— Dock å›¾æ ‡ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºåº”ç”¨åŠ ä¸Šèœå•æ æŒ‰é’®ï¼Œå…·ä½“åšæ³•æ˜¯é€šè¿‡ &lt;code&gt;NSStatusItem&lt;/code&gt; è¿™ä¸ªç±»ï¼Œå…¶ä»£è¡¨ä¸€ä¸ªç³»ç»Ÿèœå•æ ä¸Šçš„æ¡ç›®ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;statusItem&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSStatusBar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;statusItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;withLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStatusItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;squareLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¹‹åç³»ç»Ÿä¼šåœ¨ Menu bar ä¸Šåˆ›å»ºä¸€ä¸ªé€‰é¡¹æŒ‰é’®ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜éœ€è¦è®¾ç½®è¯¥èœå•é€‰é¡¹çš„ UIï¼Œå¦‚ä¸‹è®¾ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;statusItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;named&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ic_dock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;action&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;#selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;doWhatYouWantToDo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:))&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ­¤æ—¶åº”ç”¨å¯åŠ¨ä¹‹åèœå•æ å°±ä¼šæœ‰å›¾æ ‡å±•ç¤ºäº†ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒ Raywenderlich å®¶çš„æ•™ç¨‹ï¼Œä¸å†èµ˜è¿°ã€‚ [&lt;a href=&#34;https://www.raywenderlich.com/450-menus-and-popovers-in-menu-bar-apps-for-macos&#34;&gt;Menus and Popovers in Menu Bar Apps for macOS&lt;/a&gt;]&lt;/p&gt;

&lt;p&gt;æœ‰ä¸ªå…³äºèœå•æ æŒ‰é’®çš„åº“ &lt;a href=&#34;https://github.com/phranck/CCNStatusItem&#34;&gt;CCNStatusItem&lt;/a&gt; æä¾›äº†æ¯”è¾ƒå®Œæ•´çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬æ”¯æŒ menu æŒ‰é’®å®šåˆ¶ï¼Œç‚¹å‡»å¼¹çª—ä»¥åŠ Dragging and Drop ç­‰æ”¯æŒã€‚ ä¸è¿‡è¯¥åº“å·²ç»å¾ˆä¹…æ²¡æœ‰ç»´æŠ¤äº†ï¼Œä»…åšå‚è€ƒå§ã€‚&lt;/p&gt;

&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/@jackymelb/show-hide-dock-icon-on-macos-app-3a59f7df282d&#34;&gt;Show/Hide dock icon on macOS App&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/appkit/nsstatusitem&#34;&gt;NSStatusItem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.raywenderlich.com/450-menus-and-popovers-in-menu-bar-apps-for-macos&#34;&gt;Menus and Popovers in Menu Bar Apps for macOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/phranck/CCNStatusItem&#34;&gt;CCNStatusItem&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>åœ¨è‹±æ–‡è¯­è¨€ç³»ç»Ÿçš„ Safari ä¸­ä½¿ç”¨å°è±¡ç¬”è®°</title>
      <link>https://hechen.xyz/post/using-yinxiangbiji-system-english/</link>
      <pubDate>Wed, 13 Mar 2019 00:30:49 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/using-yinxiangbiji-system-english/</guid>
      
        <description>&lt;blockquote&gt;
&lt;p&gt;å› ä¸º Evernote åœ¨å›½å†…ä½¿ç”¨äº†ä¸åŒçš„è´¦æˆ·ä½“ç³»ï¼Œå»å¹´å›¢é˜Ÿä¹Ÿå½»åº•ç‹¬ç«‹å‡ºæ¥ï¼Œä½†æ˜¯ Safari çš„å‰ªè—æ’ä»¶æ˜¯åŒä¸€ä¸ªï¼Œ&lt;a href=&#34;https://safari-extensions.apple.com/details/?id=com.evernote.safari.clipper-Q79WDW8YH9&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;ï¼Œä½†æ˜¯å½“ä½ ç³»ç»Ÿæ˜¯è‹±æ–‡ç³»ç»Ÿçš„æ—¶å€™ï¼Œä½¿ç”¨ Safari å‰ªè—æœ‰ç‚¹å°´å°¬ï¼Œå°±æ˜¯æ ¹æœ¬æ‰¾ä¸åˆ°å°è±¡ç¬”è®°çš„ç™»å½•å…¥å£ï¼Œè¯¥æ–‡åšä¸ªè®°å½•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;p&gt;é¦–å…ˆ Safari é»˜è®¤æ˜¯æ²¡æœ‰ Develop èœå•çš„ï¼Œå› æ­¤å…ˆå¼€å¯ Develop æ¨¡å¼ï¼Œè¿›å…¥ Safari çš„é€‰é¡¹è®¾ç½®é¢æ¿ä¸­ï¼Œæœ€å Advanced é€‰é¡¹å¡æœ€ä¸‹æ–¹å¦‚å›¾å‹¾é€‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/J5HvXn1.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-39-08_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶ï¼Œåœ¨ Safari çš„é¡¶éƒ¨èœå•ä¸­ä¼šå¤šå‡º Develop èœå•å…¥å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/OxPf4Ji.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-40-57_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å®‰è£…å°è±¡ç¬”è®°çš„æ’ä»¶ä¹‹åï¼Œç‚¹å‡» Safari ä¸Šçš„å°è±¡ç¬”è®°å‰ªè—æŒ‰é’®ï¼Œä½ ä¼šå‘ç°ç›´æ¥å¸¦åˆ° Evernote çš„ç™»å½•ç•Œé¢ï¼Œæ²¡æœ‰æ¸ é“è®©æˆ‘ç™»å½•å°è±¡ç¬”è®°ï¼Œå³ä½¿ä½  Safari å·²ç»ç™»å½•äº†å°è±¡ç¬”è®°ï¼Œç™»å½•çš„ Session å’Œ Cookie ä¿¡æ¯å¹¶æ²¡æœ‰ä»»ä½•ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/gVTWCOc.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-50-48_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ—¶ï¼Œä½ å°±ç™»å½•å›½é™…ç‰ˆ Evernote è´¦æˆ·ï¼Œå¦‚æœä½ æ²¡æœ‰ï¼Œé‚£å°±æ³¨å†Œä¸€ä¸ªã€‚æ€»ä¹‹ï¼Œä½ éœ€è¦å…ˆç™»å½•è¿›å»ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»è®©å‰ªè—èœå•å±•ç¤ºå‡ºæ¥æ‰è¡Œã€‚&lt;/p&gt;

&lt;p&gt;ç™»å½• Evernote ä¹‹åï¼Œæ‰“å¼€ä¸€ä¸ªé¡µé¢è¿›è¡Œå‰ªè£ï¼Œä¹‹åå¦‚å›¾ï¼Œæˆ‘ä»¬ç»ˆäºçœ‹åˆ°äº†å‰ªè—èœå•ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/VtvROcP.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-52-36_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LsitsxG.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-53-45_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»ä¸‹æ–¹çš„ Optionsï¼Œæ‰“å¼€è®¾ç½®é€‰é¡¹&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/KpQefZc.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-56-16_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶ï¼Œå› ä¸ºåˆšæ‰å¼€å¯äº† Develop èœå•é€‰é¡¹å¡ï¼Œæ­¤æ—¶å³é”®ç‚¹å‡»è¯¥çª—å£ï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ylecnyS.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-58-02_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡» Inspect Element æ‰“å¼€é¡µé¢å…ƒç´ æŸ¥çœ‹å™¨ï¼Œåœ¨ä¸‹æ–¹å…ƒç´ å±•ç¤ºåŒºä¸ºç„¦ç‚¹çš„å‰æä¸‹ï¼ŒCommand +F æœç´¢ &lt;strong&gt;DeveloperContainer&lt;/strong&gt; å…³é”®å­—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/0DSMO39.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-59-28_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/t3uqMa4.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-02-18_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å¤§æ¦‚çŒœå¾—å‡ºæ¥ï¼Œè¿™ä¸ªé¢æ¿å®é™…ä¸Šéšè—äº†ä¸€äº›å¼€å‘è€…é€‰é¡¹ï¼Œè¿™é‡Œé€šè¿‡ display:none æ‰§è¡Œéšè—äº†ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠ &lt;code&gt;display:none&lt;/code&gt; åˆ æ‰ï¼ŒåŒå‡»å°±èƒ½é€‰ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ª div ä¸‹é¢åŒ…å«å¾ˆå¤š divï¼ˆæ˜¯ä¸€äº›å¼€å‘è€…åŠŸèƒ½é€‰é¡¹ï¼Œå°±åƒå¾ˆå¤šç¨‹åºä¸€æ ·ï¼Œè¿™äº›åŠŸèƒ½éƒ½è¢«éšè—äº†ï¼Œå¹³æ—¶çœ‹ä¸åˆ°ï¼‰ï¼Œå‘ç°åé¢æœ‰ä¸€ä¸ª style =â€œdisplay:none;â€è¿™æ˜¯å‰ç«¯é‡Œé¢ç»å¸¸çœ‹åˆ°çš„ä¸€ä¸ªæ ·å¼è¯­å¥ï¼Œä½œç”¨å°±æ˜¯éšè—ä¸‹é¢è¿™ä¸ªè¡¨é‡Œé¢çš„å†…å®¹ï¼Œç„¶åæŒ‰å›è½¦ç¡®å®šã€‚&lt;/p&gt;

&lt;p&gt;ä½ ä¼šå‘ç°ä¸Šæ–¹å°è±¡ç¬”è®°çš„å‰ªè—æ’ä»¶åˆ·æ–°äº†ï¼Œä¹‹åä½ ä¼šå‘ç°ä¹‹å‰è¢«éšè—çš„é€‰é¡¹å‡ºç°äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/95qql8h.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-05-31_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Developer Options è¿™ä¸ªé€‰é¡¹è¡¨å•å‡ºç°äº†ï¼Œå°±åœ¨ä¸è¿œå¤„çœ‹åˆ°äº†é€‰é¡¹ &lt;code&gt;Simulate Simplified Chinese&lt;/code&gt;ï¼Œé€‰ä¸­åé¢å¤é€‰æ¡†ã€‚ä¹‹åå‰ªè—æ’ä»¶ä¼šè‡ªåŠ¨é€€ç™»å½“å‰çš„ Evernote è´¦æˆ·ï¼Œè¿™æ—¶å€™å†æ¬¡ç‚¹å‡»å‰ªè—æŒ‰é’®ï¼Œå°±ä¼šè§¦å‘å°è±¡ç¬”è®°çš„ç™»å½•äº†ï¼Œåœ°å€ä¼šè¢«å¸¦å…¥åœ°å€ &lt;code&gt;https://app.yinxiang.com&lt;/code&gt; åŸŸä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DH2DdLa.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-10-22_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç™»å½•å®Œæˆä¹‹åï¼Œä½ çš„å‰ªè—æ’ä»¶å·²ç»æ˜¯å°è±¡ç¬”è®°çš„è´¦æˆ·äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/PXCjU4U.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-11-52_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Enjoy it.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ä¸º NSView å¢åŠ  backgroundColor</title>
      <link>https://hechen.xyz/post/nsview&#43;backgroundcolor/</link>
      <pubDate>Mon, 11 Mar 2019 15:19:49 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/nsview&#43;backgroundcolor/</guid>
      
        <description>&lt;p&gt;NSView ä½œä¸º Cocoa ä¸­æœ€åŸºæœ¬çš„æ„æˆå…ƒç´ ï¼Œæ˜¯æ„æˆæ•´ä¸ª Mac App è§†å›¾ä½“ç³»çš„åŸºç¡€ï¼Œå’Œ UIView åœ¨ iOS ä¸–ç•Œä¸­çš„ä½ç½®ä¸€æ ·é‡è¦ï¼Œå¯æ˜¯åœ¨ UIView é‡Œå¸ç©ºè§æƒ¯çš„èƒŒæ™¯è‰²è®¾ç½®ï¼Œåœ¨ NSView ä¸­å´ä¸è§èº«å½±ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ iOS ä¸­ï¼Œè®¾ç½® UIView çš„èƒŒæ™¯è‰²å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UIKit&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGRect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;origin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;view&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;backgroundColor&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blue&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è€Œåœ¨ macOS ä¸Šï¼Œä½¿ç”¨ NSView èƒŒæ™¯è‰²éœ€è¦å¦‚ä¸‹è®¾ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Cocoa&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGRect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;origin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;view&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wantsLayer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;backgroundColor&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgColor&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;UIView è‡ªèº«æœ‰ä¸€ä¸ª backgroundColor çš„å±æ€§ï¼Œè€Œåœ¨ NSView ä¸­æ˜¯æ²¡æœ‰çš„ï¼Œä½ éœ€è¦åšçš„æ˜¯è®¾ç½® View æ‰€åŒ…å«çš„ layer çš„èƒŒæ™¯è‰²ã€‚è€Œä¸” layer æ˜¯ Optional çš„ï¼Œä¹Ÿå°±æ„å‘³ç€ NSView é»˜è®¤æ˜¯ä¸åŒ…å« layer çš„ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦è®¾ç½® wantsLayer ä¸º true è®© NSView åˆ›å»º layer å‡ºæ¥ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Apple çš„&lt;a href=&#34;https://developer.apple.com/documentation/appkit/nsview/1483695-wantslayer&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt; æœ‰é’ˆå¯¹ wantsLayer çš„ä¸€äº›è¯´æ˜&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Setting the value of this property to true turns the view into a layer-backed viewâ€”that is, the view uses a CALayer object to manage its rendered content. Creating a layer-backed view implicitly causes the entire view hierarchy under that view to become layer-backed. Thus, the view and all of its subviews (including subviews of subviews) become layer-backed. The default value of this property is false.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      
    </item>
    
    <item>
      <title>RxSwift ä¸­çš„å‡ ç§ Subject</title>
      <link>https://hechen.xyz/post/rxswift-subjects/</link>
      <pubDate>Tue, 26 Feb 2019 10:24:38 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/rxswift-subjects/</guid>
      
        <description>

&lt;blockquote&gt;
&lt;p&gt;æ–‡ä¸­æ‰€ç”¨æ’å›¾å‡å‡ºè‡ªä¹¦ç± ã€ŠRxSwift - Reactive Programming with Swiftã€‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Subject åœ¨ Rx çš„ä¸–ç•Œé‡Œæ˜¯è¿™ä¹ˆä¸€ç§å­˜åœ¨ï¼Œå…¶æ—¢å¯ä»¥ä½œä¸ºè§‚æµ‹è€…ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¢«è§‚æµ‹è€…ã€‚è‡ªç„¶è€Œç„¶æƒ³åˆ°çš„æ˜¯ Subject æœ¬èº«å°±å¯ä»¥ä½œä¸ºä¸€ç§è¿‡æ¸¡æ¡¥æ¥ä¿¡å·çš„æ‰‹æ®µï¼Œå®ƒè®¢é˜…æŸä¸ªä¿¡å·ï¼Œä¸€æ—¦ä¿¡å·æ”¶åˆ°åºåˆ—ï¼Œè½¬å¤´å®ƒå°±åˆæŠŠä¿¡å·æ•£å‘ç»™è‡ªå·±çš„è§‚æµ‹è€…äº†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ RxSwift çš„ä¸–ç•Œé‡Œæ¶‰åŠå‡ ç§ Subjectï¼Œè¿™é‡Œå…ˆè¡Œåšä¸ªè®°å½•ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;PublishSubject&lt;/li&gt;
&lt;li&gt;BehaviorSubject&lt;/li&gt;
&lt;li&gt;ReplaySubject&lt;/li&gt;
&lt;li&gt;Variable ï¼ˆé¢„è®¡åœ¨ 5.0 åºŸå¼ƒï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;publishsubject&#34;&gt;PublishSubject&lt;/h2&gt;

&lt;p&gt;PublishSubject åªç»™è®¢é˜…è€…å‘é€æ–°å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è®¢é˜…è€…åªèƒ½æ¥å—åˆ°è®¢é˜…ä¹‹åå‘å‡ºçš„ä¿¡å·ã€‚ä¸€å›¾èƒœåƒè¨€ï¼Œçœ‹ğŸ‘‡&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Cw4FjCT.png&#34; alt=&#34;publishSubject&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ç¬¬ä¸€æ’æ˜¯æŸä¸ªä½œä¸º Observable è§’è‰²çš„ Subjectï¼Œè‡ªå·¦è‡³å³ä¸ºä¸¥æ ¼æ—¶é—´çº¿ï¼Œ 2 å’Œ 3 æ’å‡ä¸ºè®¢é˜…äº†è¯¥ Subject çš„è§‚æµ‹è€…ï¼Œå‘ä¸Šçš„è™šçº¿è¡¨æ˜è®¢é˜…çš„æ—¶æœºï¼Œå¯ä»¥çœ‹åˆ°è§‚æµ‹è€…åªèƒ½æ¥æ”¶åˆ°è®¢é˜…ä¹‹åç”± Subject æ–°å‘å°„å‡ºçš„ä¿¡å·ã€‚&lt;/p&gt;

&lt;h2 id=&#34;behaviorsubject&#34;&gt;BehaviorSubject&lt;/h2&gt;

&lt;p&gt;BehaviorSubject ä¼šåœ¨è®¢é˜…è€…è®¢é˜…ä¹‹åå‘é€æœ€æ–°çš„ä¸€ä¸ªä¿¡å·å…ƒç´ ï¼Œè‡ªç„¶éœ€è¦ä½ åœ¨åˆå§‹åŒ–è¯¥å¯¹è±¡çš„æ—¶å€™ç»™å…¶è®¾å®šåˆå§‹åŒ–å€¼ï¼ˆå¦åˆ™å¯¹äºç¬¬ä¸€æ¬¡è®¢é˜…çš„è§‚æµ‹è€…æ¥è¯´ï¼Œå“ªæ¥çš„æœ€æ–°å‘å°„çš„å…ƒç´ å‘¢ï¼Ÿï¼‰ã€‚å¦‚æœåˆå§‹åŒ–çš„æ—¶å€™æ— æ³•æä¾›é»˜è®¤å€¼ï¼Œé‚£å¯èƒ½ä½ å°±éœ€è¦ç”¨åˆ°ä¸Šé¢çš„ PublishSubject äº†ã€‚å…¶ä¸­å¸¸ç”¨çš„ Variable å’Œ BehaviorRelay éƒ½æ˜¯å¯¹å…¶çš„å°è£…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ei6pCwT.png&#34; alt=&#34;BehaviorSubject&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°å’Œä¸Šæ–¹ Publish åŒºåˆ«çš„æ˜¯å…¶åœ¨è§‚æµ‹è€…è®¢é˜…ä¹‹åä¼šæ”¶åˆ°æœ€æ–°çš„æœ€åä¸€ä¸ªä¿¡å·ã€‚&lt;/p&gt;

&lt;h2 id=&#34;replaysubject&#34;&gt;ReplaySubject&lt;/h2&gt;

&lt;p&gt;é¡¾åæ€ä¹‰ï¼ŒReplaySubject ä¼šé‡æ–°å‘å°„åœ¨è®¢é˜…è€…è®¢é˜…ä¹‹é—´å‘å‡ºçš„ä¿¡å·ï¼Œå…·ä½“å‘å¤šå°‘æ˜¯ç”± bufferSize å†³å®šçš„ï¼Œå…¶æŒ‡å®šéœ€è¦ cache å¤šå°‘ä¸ªä¿¡å·ï¼Œå¦‚ä¸‹å›¾ä¸­æ‰€ç¤ºï¼ŒBuffer Size ä¸º 2ï¼Œå› æ­¤å½“ç¬¬äºŒä¸ªè®¢é˜…è€…è®¢é˜… Subject ä¹‹åï¼Œå…¶ä¼šæ”¶åˆ°æœ€æ–°çš„ 1 å’Œ 2 ä¸¤ä¸ªä¿¡å·ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;c1&#34;&gt;/// æŒ‡å®šå‘å°„å¤šå°‘æœ€æ–°ä¿¡å·&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;subject&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ReplaySubject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bufferSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/uuHAQ9c.png&#34; alt=&#34;replaySubject&#34; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šæ‰€æœ‰è¢« Cache çš„ä¿¡å·æœ¬èº«éƒ½æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œå› æ­¤éœ€è¦è€ƒè™‘åˆ°ç¼“å­˜ä¿¡å·çš„æœ€å¤§ä¸ªæ•°ä»¥åŠæ¯ä¸ªä¿¡å·çš„è´Ÿè½½ï¼Œæ¯”å¦‚ä½ çš„æ¯ä¸ªä¿¡å·æœ¬èº«æ˜¯ Image æ•°æ®ï¼Œç„¶ååˆ Cache äº†æ¯”è¾ƒå¤šçš„æ•°ç›®ï¼Œè¿™æ—¶å€™å†…å­˜å‹åŠ›å°±ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ª ReplaySubject çš„æ—¶å€™éœ€è¦æ³¨æ„å†…å­˜é—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;variable&#34;&gt;Variable&lt;/h2&gt;

&lt;p&gt;Variable è‡ªèº«å®è´¨ä¸Šæ˜¯ BehaviorSubject çš„å°è£…ï¼Œæ‰€ä»¥å®ƒå…·å¤‡ Behavior æ¯æ¬¡è®¢é˜…å°±ä¼šæ¥æ”¶åˆ°æœ€æ–°ä¿¡å·å…ƒç´ çš„å±æ€§ï¼Œä½†æ˜¯å’Œ BehaviorSubject ä¸åŒåœ¨äºå…¶ä¸ä¼šå› ä¸ºæ”¶åˆ° Error äº‹ä»¶å¯¼è‡´æ•´ä¸ªåºåˆ—åœæ­¢ï¼ˆä¹Ÿå°±æ˜¯è¯´åªæœ‰ completion ä¿¡å·æ‰ä¼šè®©è¯¥ä¿¡å·ç»ˆç»“ï¼‰ï¼Œè€Œå®ƒçš„ä¿¡å·å®Œæˆæ˜¯åœ¨å…¶ deinit æ–¹æ³•ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å–œæ¬¢ Variable çš„ä¸€ä¸ªæœ€å¤§åŸå› å¯èƒ½å°±æ˜¯ç›´æ¥è·å–å®ƒçš„å€¼ï¼Œè€Œä¸éœ€è¦åƒå¸¸è§„ä¿¡å·ä¸€èˆ¬éœ€è¦è¿›è¡Œè®¢é˜…æ‰èƒ½å–å¾—å®ƒçš„å€¼ï¼Œè€Œä¸”ä¸éœ€è¦è¿›è¡Œè®¢é˜…ï¼Œæƒ³ç”¨å³å–ï¼Œè€Œä¸”å…¶ç”Ÿå‘½å‘¨æœŸå®Œå…¨å’Œ ARC ç»“åˆï¼Œæ— éœ€ä¸»åŠ¨å–æ¶ˆè®¢é˜…ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;variable&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Variable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Initial value&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;variable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;New initial value&amp;#34;&lt;/span&gt;
&lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;variable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç›®å‰åœ¨ RxSwift ä¸­ Variable å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼Œå¦‚æœä½ ä½¿ç”¨äº† Variable ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ Console ä¸­æ‰“å°å‡ºä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;`Variable` is planned for future deprecation. Please consider `BehaviorRelay` as a replacement. Read more at: https://git.io/vNqvx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç›®å‰å®˜æ–¹ç»™å‡ºçš„æ¨èæ˜¯ä½¿ç”¨ BehaviorRelayï¼Œè¯¦ç»†è§£é‡Šå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Comments&#34; data-lang=&#34;Comments&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Comments&#34; data-lang=&#34;Comments&#34;&gt;/// Current recommended replacement for this API is `RxCocoa.BehaviorRelay` because:
/// * `Variable` isn&amp;#39;t a standard cross platform concept, hence it&amp;#39;s out of place in RxSwift target.
/// * It doesn&amp;#39;t have a counterpart for handling events (`PublishRelay`). It models state only.
/// * It doesn&amp;#39;t have a consistent naming with *Relay or other Rx concepts.
/// * It has an inconsistent memory management model compared to other parts of RxSwift (completes on `deinit`).&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é¦–å…ˆ Variable æ˜¯ RxSwift ä¸º Apple ç”Ÿæ€åŠ å…¥çš„ä¸€ä¸ªåè¯ï¼Œå¹¶ä¸æ˜¯ Rx ç”Ÿæ€å…±æœ‰çš„æ¦‚å¿µï¼Œè€Œä¸”åå­—ä¸Šä¹Ÿæ˜¾å¾—å’Œå…¶ä»–æ¦‚å¿µæ ¼æ ¼ä¸å…¥ï¼Œå› æ­¤ä¸¥æ ¼æ„ä¹‰ç®—èµ·æ¥å¹¶ä¸æ˜¯ Rx ç”Ÿæ€çš„ä¸€éƒ¨åˆ†äº†ï¼›&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼Œå®ƒåŠŸèƒ½ä¸Šå‡ ä¹å’Œ BehaviorRelay ä¸€æ ·ï¼Œä½¿ç”¨ BehaviorRelay ä¹Ÿèƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åä¸€ç‚¹ï¼Œå…¶å†…å­˜ç®¡ç†è¯­ä¹‰å’Œ Rx å…¶ä»–æ¦‚å¿µä¹Ÿä¸ä¸€æ ·ï¼Œå…¶ä»–çš„ä¿¡å·ç»ˆç»“æ˜¯ä¸¥æ ¼æŒ‰ç…§ completion å’Œ error ä¿¡å·ï¼Œä½†æ˜¯ Variable ç›´åˆ°å¯¹è±¡è¢«é‡Šæ”¾æ‰æ‰é»˜è®¤è§¦å‘ completion ä¿¡å·ã€‚&lt;/p&gt;

&lt;p&gt;è¯¦ç»†å®˜æ–¹è®¨è®ºåœ¨&lt;a href=&#34;https://github.com/ReactiveX/RxSwift/issues/1501&#34;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Apple Event Sandboxing</title>
      <link>https://hechen.xyz/post/appleevents-usage-description/</link>
      <pubDate>Thu, 21 Feb 2019 23:25:38 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/appleevents-usage-description/</guid>
      
        <description>

&lt;h2 id=&#34;é—®é¢˜èƒŒæ™¯&#34;&gt;é—®é¢˜èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘åœ¨ä¿®æ”¹æŸä¸ª &lt;a href=&#34;https://github.com/hechen/vibe&#34;&gt;Mac åº”ç”¨&lt;/a&gt;ï¼Œå…¶åŸç†å°±æ˜¯é€šè¿‡æ‰§è¡Œä¸€æ®µ AppleScript è·å– OmniFocus çš„ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œä½†æ˜¯æ€»å–ä¸åˆ°æ•°æ®ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&#34;åŸå› &#34;&gt;åŸå› &lt;/h2&gt;

&lt;p&gt;å…³é”®æ•°æ®è·å–é˜¶æ®µæ‰§è¡Œçš„ AppleScript çš„æ—¶å€™æ€»æ˜¯å–ä¸åˆ°æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;OmniFocus&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;front&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;document&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theModifiedProjects&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;every&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;flattened&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;project&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theModifiedProjects&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;every&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;flattened&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;task&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theModifiedProjects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;where&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;its&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;number&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;tasks&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;equal to&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt;
                        &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;completion&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;date&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;return&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theInboxCompletedTasks&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;every&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;inbox&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;task&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;where&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;its&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;number&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;tasks&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
        &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theInboxCompletedTasks&lt;/span&gt;    
            &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;completion&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;date&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theInboxCompletedTasks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;return&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;

&lt;span class=&#34;nb&#34;&gt;display dialog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt;

&lt;span class=&#34;no&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨ Cocoa ä¸­æ˜¯é€šè¿‡æ‰§è¡Œå¦‚ä¸‹ä»£ç æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;myAppleScript&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;I am a piece of applescript&amp;#34;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;scriptObject&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSAppleScript&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;myAppleScript&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSDictionary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scriptObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;executeAndReturnError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿›è¡Œ Debug å¯åŠ¨ App æˆ–è€… Archive å®‰è£…åŒ…æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå‡æ— æ³•æ­£å¸¸è·å–æ‰§è¡Œç»“æœï¼Œç›´æ¥æŠ¥é”™ã€‚ å…·ä½“é”™è¯¯åŸå› ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&amp;#34;NSAppleScriptErrorMessage&amp;#34; : &amp;#34;Not authorized to send Apple events to OmniFocus.&amp;#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¾ˆæ˜¾ç„¶ï¼Œæ²¡æœ‰æƒé™æ‰§è¡Œè¯¥è„šæœ¬æ¥å‘é€ Apple Event ç»™ OmniFocus ä»è€Œæ‰§è¡Œå¯¹åº”æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;é’ˆå¯¹ Apple Event çš„æƒé™æ§åˆ¶ï¼Œ æ˜¯ macOS Mojave ç³»ç»Ÿå¸¦å…¥ macOS çš„ï¼ŒApple æŠŠæƒé™æ§åˆ¶è¿›ä¸€æ­¥æ”¶ç¼©ï¼Œå¹¶ä¸”è¦æ±‚å¼€å‘è€…æ˜¾ç¤ºå‘ŠçŸ¥ç”¨æˆ·ä½ çš„ App è¦å¹²ä»€ä¹ˆã€‚å½“ç„¶ iOS å¼€å‘åŒå­¦è‚¯å®šå¾ˆæ¸…æ¥šï¼Œæˆ‘ä»¬æ— è®ºæ˜¯æ‹¿æ‘„åƒå¤´ï¼Œè¯»å–ç›¸å†Œï¼Œç”šè‡³æ˜¯ FaceID ç­‰éƒ½æ˜¯è¦æ˜ç¡®çš„åœ¨ App ä¸­å£°æ˜çš„ï¼Œä¹Ÿå°±æ˜¯è¦åœ¨ Info.plist æ–‡ä»¶ä¸­å£°åçš„ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äº macOS Mojave ç³»ç»Ÿè€Œè¨€ï¼Œæ–°å¢äº†é’ˆå¯¹ Apple Event çš„æƒé™æ§åˆ¶ï¼Œéœ€è¦å¼€å‘è€…åœ¨ plist æ–‡ä»¶ä¸­å¢åŠ  &lt;strong&gt;NSAppleEventsUsageDescription&lt;/strong&gt; ä¿¡æ¯ï¼Œå¹¶ä¸”æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ· Apple Event ä¼šç”¨æ¥åšä»€ä¹ˆäº‹æƒ…ã€‚è¿™ä¹Ÿæ˜¯å»å¹´ WWDC 2018 Session  &lt;a href=&#34;https://developer.apple.com/wwdc18/702&#34;&gt;&amp;ldquo;Your Apps and the Future of macOS Security&amp;rdquo;&lt;/a&gt; ä¸­æåˆ°çš„ï¼Œæ‰€æœ‰ç»™å…¶ä»– App å‘é€ AppleEvent çš„ Cocoa App å‡ä¼šå—åˆ°å½±å“ï¼Œè¿™å°±æ˜¯  &lt;strong&gt;AppleEvent sandboxing&lt;/strong&gt;ã€‚ å¦‚æœä½ ä¸æ·»åŠ è¯¥å£°æ˜å­—æ®µï¼ŒApp å°±é»˜è®¤ä¸è¿›è¡Œä»»ä½•æ˜¾ç¤ºæˆæƒè¡Œä¸ºå¹¶ä¸”é»˜è®¤æ— æƒé™è¿›è¡Œç›¸å…³æ“ä½œï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡å‰é¢å‡ºç°çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;è¯ä¸å¤šè¯´ï¼Œåœ¨ info.plist ä¸­åŠ å…¥ NSAppleEventsUsageDescription å­—æ®µï¼Œå¹¶ä¸”å¡«å…¥å…·ä½“æƒé™å£°æ˜,&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NEBjVZ3.png&#34; alt=&#34;Capto_Capture 2019-02-21_11-47-11_P&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å†æ¬¡å¯åŠ¨ App ä¹‹åå°±ä¼šæœ‰å¦‚ä¸‹å¼¹çª—æç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wm5GWLO.png&#34; alt=&#34;Capto_Capture 2019-02-21_11-47-42_P&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å‰é¢æ‰§è¡Œ Apple Script çš„æ–¹æ³•ä¼šåŒæ­¥ç­‰å¾…æˆæƒç»“æœï¼Œç”¨æˆ·ç‚¹å‡»å…è®¸ä¹‹åï¼ŒApp å°±èƒ½æ­£å¸¸è·å–æ•°æ®äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/sfN59K4.png&#34; alt=&#34;Capto_Capture 2019-02-21_11-08-44_P&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒæ–‡æ¡£&#34;&gt;å‚è€ƒæ–‡æ¡£&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2018/702/&#34;&gt;WWDC 2018 Session 702&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äºä¸€æ¬¡ SS æµé‡ä¸¢å¤±çš„è¿‡ç¨‹è®°å½•</title>
      <link>https://hechen.xyz/post/%E5%85%B3%E4%BA%8E%E4%B8%80%E6%AC%A1-ss-%E6%B5%81%E9%87%8F%E4%B8%A2%E5%A4%B1%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/</link>
      <pubDate>Mon, 28 Jan 2019 17:51:35 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/%E5%85%B3%E4%BA%8E%E4%B8%80%E6%AC%A1-ss-%E6%B5%81%E9%87%8F%E4%B8%A2%E5%A4%B1%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/</guid>
      
        <description>

&lt;h2 id=&#34;2019-01-29-æ›´æ–°&#34;&gt;2019-01-29 æ›´æ–°&lt;/h2&gt;

&lt;p&gt;æ—©ä¸Šä¸€åˆ°åŠå…¬å®¤è¿æ¥ä¸Šå…¬å¸ç½‘ç»œï¼Œç½‘é€Ÿç›´æ¥å°±é£šåˆ°äº† 600KB/sï¼Œæœä¸å…¶ç„¶ï¼Œè¿˜æ˜¯ &lt;code&gt;com.apple.Safari.SafeBrowsing.Service&lt;/code&gt; è¿™ä¸ªæœåŠ¡è¿›ç¨‹ã€‚è¿™å°±å°´å°¬äº†ï¼Œçœ‹æ¥å¹¶ä¸æ˜¯è¯´ä½ ä¸ç”¨ Safari å°±ä¸ä¼šè§¦å‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yifgIEZ.png&#34; alt=&#34;Surge Dashboard&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç›´æ¥æŠŠ Surge è§„åˆ™ä¸­çš„ Rule ç”± Direct æ”¹æˆäº† Rejectã€‚&lt;/p&gt;

&lt;h2 id=&#34;é—®é¢˜è¿½è¸ª&#34;&gt;é—®é¢˜è¿½è¸ª&lt;/h2&gt;

&lt;p&gt;åœ¨ 2018 å¹´ 12 æœˆåº•çš„æ—¶å€™ï¼Œå¶ç„¶é—´ç™»å½• AgentNEO æŸ¥çœ‹åˆšä¹°çš„æµé‡ä½¿ç”¨æƒ…å†µã€‚ä½†æ˜¯å‘ç°ï¼Œåˆšåœ¨å‰å‡ å¤©è´­ä¹°çš„ SS æµé‡åœ¨çŸ­çŸ­çš„ 4 å¤©ä¹‹å†…å°±è€—äº†å°†è¿‘ 95GBï¼Œå°±åœ¨ 1 æœˆ 1 æ—¥å…ƒæ—¦å½“å¤©å°±è€—äº†æ¥è¿‘ 75GBï¼Œè¦çŸ¥é“ï¼Œæˆ‘å¹³æ—¶çš„æœˆå‡æµé‡ä¹Ÿå°±ç»´æŒåœ¨ 10 GB ä¸åˆ°ï¼Œæ¯•ç«Ÿå¹³æ—¶åœ¨å…¬å¸åŠå…¬ï¼Œä¸šä½™æ—¶é—´ Youtube ä¹Ÿçœ‹çš„ç›¸å¯¹å°‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/9tRs9vh.png&#34; alt=&#34;AgentNEO æµé‡é¢æ¿&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æœ€åˆçœ‹åˆ°è¿™ä¸ªç»Ÿè®¡æ•°æ®ä¹‹åï¼Œæˆ‘ä¸€åº¦æ€€ç–‘æ˜¯ä»–ä»¬ç½‘ç«™çš„æµé‡ç»Ÿè®¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;åç»­å‡ å¤©ï¼Œæˆ‘å®é™…ä¸Šå¯¹æµé‡è€—æŸæ¯”è¾ƒå…³æ³¨ï¼Œæœ‰ä¸€å¤©æ³¨æ„åˆ°ï¼ŒSurge çš„æµé‡ç›‘æ§é€Ÿç‡ä¸€ç›´æŒç»­ä¸æ–­çš„æ˜¾ç¤ºè¾¾äº”å…­ç™¾ KB/s çš„ä¸‹è½½æµé‡ï¼Œä½†æ˜¯æˆ‘çŸ¥é“è‡ªå·±å½“æ—¶å¹¶æ²¡æœ‰ä¸‹è½½ä»»ä½•ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/nWz8JAt.png&#34; alt=&#34;Surge Menu Bar&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰“å¼€ Surge Dashboardï¼Œçœ‹åˆ°å¦‚ä¸‹çš„æƒ…å½¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/9kVX27V.png&#34; alt=&#34;Surge Dashboard&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°å½“æ—¶åœ¨æŒç»­ä¸æ–­çš„è¿›è¡Œä¸‹è½½åŠ¨ä½œçš„è¿›ç¨‹åç§°æ˜¯ &lt;code&gt;com.apple.Safari.SafeBrowsing.Service&lt;/code&gt;ï¼Œçœ‹è¯·æ±‚åœ°å€æ˜¯ safebrowsing.googleapis.comã€‚&lt;/p&gt;

&lt;p&gt;ä»è¿›ç¨‹åå­—æ¥çœ‹åº”è¯¥æ˜¯ Safari å’Œå®‰å…¨æµé‡ç›¸å…³çš„æœåŠ¡ï¼Œé€šè¿‡ Snitch çš„æ•°æ®åº“æŸ¥åˆ°å¯¹å…¶çš„è¯´æ˜ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Safari has built-in support for Googleâ€™s Safe Browsing service to identify fraudulent and unsafe websites. Right before Safari navigates to a certain website, the website gets checked for possible security concerns using Googleâ€™s Safe Browsing online database. Accessing the online database requires connections to Google servers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¯´çš„å¤§æ¦‚æ˜¯è¯¥æœåŠ¡æ˜¯é’ˆå¯¹ Safari æµè§ˆå™¨å¯ç”¨çš„ï¼Œåœ¨ Safari è¦å¸®ä½ å¯¼èˆªåˆ°ä¸‹ä¸€çº§é¡µé¢çš„æ—¶å€™ï¼Œä¼šè¯†åˆ«è¯¥é¡µé¢æ˜¯å¦æ˜¯æ¬ºè¯ˆğŸ¶æˆ–è€…ä¸å®‰å…¨âš ï¸çš„ç½‘ç«™ï¼Œæˆ‘ä»¬åœ¨ Safari çš„ Security èœå•ä¸­å¯ä»¥æ‰¾åˆ°å¯ç”¨å…³äºæ¬ºè¯ˆç½‘ç«™çš„æ£€æµ‹åŠŸèƒ½çš„å¼€å…³ã€‚ä»¥æˆ‘æœ¬æœºä¸Šçœ‹åˆ°çš„å†…å®¹å¦‚ä¸‹&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Safari uses Tencent Safe Browsing and Google Safe Browsing to identify fraudulent websites.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¤§æ¦‚æ„æ€å°±æ˜¯ Safari ä½¿ç”¨è…¾è®¯çš„å®‰å…¨æµè§ˆæœåŠ¡å’Œ Google çš„å®‰å…¨æµè§ˆæœåŠ¡æ¥é‰´åˆ«æ¬ºè¯ˆç½‘ç«™ï¼Œè…¾è®¯åº”è¯¥æ˜¯æœ¬åœ°åŒ–çš„äº§ç‰©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wEhv8iu.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é€šè¿‡é’ˆå¯¹è¯¥è¿›ç¨‹çš„å‡ºå£è¯·æ±‚ host ä¹Ÿå¯ä»¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œè¯¥è¿›ç¨‹å‘èµ·çš„ç½‘ç»œè¯·æ±‚ä¼šæœ‰å¦‚ä¸‹ä¸¤ä¸ª host å‡ºå£ï¼š
1. safebrowsing.googleapis.com
2. safebrowsing.urlsec.qq.com&lt;/p&gt;

&lt;p&gt;å…¶å®åœ¨ iOS è®¾å¤‡ä¸Šä¹Ÿæœ‰åŒæ ·çš„è¿›ç¨‹æ¥åšè¿™ä»¶äº‹æƒ…ï¼ŒæŠ“åŒ…æœ‰æ—¶å€™ä¹Ÿèƒ½æ•æ‰åˆ°è¿™ä¸¤ä¸ªè¯·æ±‚ï¼ˆå›½è¡Œï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/eDNI4jk.jpg&#34; alt=&#34;iPhone ä¸Šçš„ safebrowsing&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œè¿™æ¬¡å‡ºé—®é¢˜çš„å°±æ˜¯ google æä¾›çš„æ¬ºè¯ˆç½‘ç«™ç‰¹å¾åº“ã€‚
&lt;img src=&#34;https://i.imgur.com/BtfvMIV.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å°è¯•å…³é—­ Surge ä½œä¸ºç³»ç»Ÿæµé‡ä»£ç†ä¹‹åï¼Œçœ‹åˆ° Activity Monitor ä¸­è¿›ç¨‹åˆå¼€å§‹äº†ä¸‹è½½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåªæ˜¯è¿æ¥è¯·æ±‚ä¸»ä½“ä»åŸæ¥ Surge åˆ‡æ¢åˆ°äº†ç‹¬ç«‹è¿›ç¨‹è€Œå·²ï¼ˆSurge ä¼šæ¥ç®¡ç½‘ç»œæµé‡ï¼Œå› æ­¤ä¹‹å‰è¯¥ä»»åŠ¡çš„ä¸‹è½½ä¼šç®—åˆ° Surge çš„å¤´ä¸Šï¼‰ï¼Œä½†æ˜¯é’ˆå¯¹è¯¥ host çš„ä¸‹è½½ä»»åŠ¡ä¸€è‡´æŒç»­ä¸æ–­ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¯´èµ·æ¥ï¼ŒLittle Snitch Network Monitor è¿™æ¬¾è½¯ä»¶ä¹Ÿæ˜¯å½“æ—¶ä¸ºäº†æŸ¥æµé‡ä¸¢å¤±é—®é¢˜ï¼Œæ‰ä¹°çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/SUT5qQC.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œåœ¨æˆ‘å…³é—­ Surge ä½œä¸ºä»£ç†ä¹‹å‰ï¼Œå¯ä»¥çœ‹åˆ°è¯¥è¿›ç¨‹å¤§æ¦‚åœ¨ 7 ä¸ªå°æ—¶ä¹‹å†…è€—äº† 12.4 GB çš„æµé‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Gnxc4bB.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œåœ¨ç½‘ç»œä¸Šç›®å‰æœªçœ‹åˆ°é’ˆå¯¹ safebrowsing è¿›ç¨‹çš„å¤§é‡è®¨è®ºï¼Œå›½å†…è®ºå› &lt;a href=&#34;https://www.v2ex.com/t/404025&#34;&gt;V2EX&lt;/a&gt; é‡Œä¹Ÿçœ‹åˆ°æœ‰äººé‡åˆ°è¯¥é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;ç›®å‰æš‚æ—¶ä¸æ¸…æ¥šæ˜¯å®˜æ–¹ Bug è¿˜æ˜¯æˆ‘ç”µè„‘å®‰è£…äº†ä»€ä¹ˆæ’ä»¶æˆ–è€…è½¯ä»¶å¯¼è‡´ã€‚æš‚æ—¶å…ˆåœæ‰ä½¿ç”¨ Safari äº†ï¼Œç”¨ Chrome ç”¨ä¸Šä¸€æ®µæ—¶é—´ä¹‹åå†ç”¨ Snitch çœ‹ä¸‹æƒ…å†µå§ã€‚&lt;/p&gt;

&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºä¸æ”¾å¿ƒï¼Œåœ¨ Surge çš„è‡ªå®šä¹‰è§„åˆ™ä¸­åŠ äº†ä¸€æ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Conf&#34; data-lang=&#34;Conf&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Conf&#34; data-lang=&#34;Conf&#34;&gt;	NAME,com.apple.Safari.SafeBrowsing.Service,DIRECT&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é’ˆå¯¹è¯¥è¿›ç¨‹çš„æ‰€æœ‰æµé‡éƒ½ç›´è¿ï¼Œä¸ç”¨ä»£ç†äº†ã€‚ åç»­æœ‰ä»»ä½•è¿›å±•ä¼šæ›´æ–°åˆ° Blog ä¸­ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>åœ¨ Swift Framework ä¸­ä½¿ç”¨ C æ–‡ä»¶çš„è¿‡ç¨‹æ¢ç´¢</title>
      <link>https://hechen.xyz/post/swift-and-modules/</link>
      <pubDate>Thu, 03 Jan 2019 21:19:24 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/swift-and-modules/</guid>
      
        <description>

&lt;h2 id=&#34;é—®é¢˜æè¿°&#34;&gt;é—®é¢˜æè¿°&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨å¼€å‘çº¿ä¸Šè¯Šæ–­å·¥å…·éœ€æ±‚çš„æ—¶å€™ï¼Œæ˜¯ä»¥å•ä¸ª Pod çš„å½¢å¼æä¾›æ”¯æŒï¼Œå¹¶ä¸”ä»£ç æ–‡ä»¶ä¸­åªæœ‰çº¯ Swift æ–‡ä»¶ï¼Œä½†æ˜¯å…¶ä¸­éœ€è¦ç”¨åˆ°ç³»ç»Ÿçš„ C åº“çš„ä¸€äº›åŠŸèƒ½ï¼Œæœ¬æ¬¡å°±æ˜¯ä½¿ç”¨äº†ç³»ç»Ÿ C åº“ä¸­ &lt;code&gt;resolv.h&lt;/code&gt; è¿™ä¸ªæ–‡ä»¶æ¥è¿›è¡Œ DNS è§£ææ‰€ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å½“åæœŸ Pod åŠŸèƒ½å®Œå–„ä¹‹åï¼Œåœ¨ Example å·¥ç¨‹ä¸­ä¹Ÿå·²ç»ç¼–è¯‘é€šè¿‡ä¹‹åï¼Œæ¥å…¥ä¸»é¡¹ç›®ä¸­ä¹‹åé‡åˆ°äº†ä¸‹é¢è¿™ä¸ªç¼–è¯‘é”™è¯¯ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ADh0sy6.png&#34; alt=&#34;Error When Compile&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…·ä½“æ–‡å­—é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;/Users/chen/Repos/Work/ZHDiagnosisTool/ZHDiagnosisTool/Classes/Core/Network/ZHDiagnosisTool-Network-Header.h:8:10: 
    Include of non-modular header inside framework module &amp;#39;Diagnosis.ZHDiagnosisTool_Network_Header&amp;#39;: &amp;#39;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS12.1.sdk/usr/include/resolv.h&amp;#39;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¤§æ¦‚çš„æ„æ€å°±æ˜¯åœ¨ Umbrella Header ä¸­åŠ å…¥çš„ Bridging header æŒ‡å®šäº† include ä¸€ä¸ª C æ–‡ä»¶ï¼Œè€Œè¯¥ C æ–‡ä»¶æœ¬èº«å¹¶ä¸æ˜¯  Modular Headerï¼Œ å› æ­¤ç¼–è¯‘æ— æ³•é€šè¿‡ã€‚è¿™å°±æ¶‰åŠäº†ç›®å‰ iOS ç”Ÿæ€ä¸­æ™®éä½¿ç”¨çš„ Modules æ¦‚å¿µã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‡ ä¸ªæ¦‚å¿µ&#34;&gt;å‡ ä¸ªæ¦‚å¿µ&lt;/h2&gt;

&lt;h3 id=&#34;modules&#34;&gt;Modules&lt;/h3&gt;

&lt;p&gt;Modules çš„æ¦‚å¿µæ˜¯ XCode 5 å¸¦åˆ° iOS å¼€å‘è€…é¢å‰çš„ï¼Œä»é‚£æ—¶èµ· LLVM ç¼–è¯‘å™¨å°±å·²ç»å†…åœ¨æ”¯æŒäº†ï¼Œå…·ä½“å…³äºå…¶å†å²åœ¨ &lt;a href=&#34;https://onevcat.com/2013/06/new-in-xcode5-and-objc/&#34;&gt;WWDC 2013 Sessionç¬”è®° - Xcode5å’ŒObjCæ–°ç‰¹æ€§&lt;/a&gt; è¿™ç¯‡æ–‡ç« ä¸­å·²ç»è®²è§£çš„éå¸¸è¯¦ç»†äº†ï¼Œä¸å†èµ˜è¿°ï¼Œæ€»ç»“ä¸€å¥è¯å°±æ˜¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Modules æ˜¯è¢«å¼•å…¥ LLVM å±‚é¢çš„ï¼Œç”¨ä»¥è§£å†³ä¹‹å‰ C/C++ ç³»ä¸­ #include å’Œ #import å¸¦æ¥çš„å¼•ç”¨æ³›æ»¥ä»¥åŠç¼–è¯‘æ—¶é—´è¿‡é•¿çš„é—®é¢˜çš„ä¸€ç§æ‰‹æ®µã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å°¤å…¶æ˜¯åœ¨ Swift å¼•å…¥ä¹‹åï¼ŒModule çš„æ¦‚å¿µåº”è¯¥å·²ç»æ·±å…¥äººå¿ƒã€‚å¤§å®¶å¯èƒ½å·²ç»ä¹ æƒ¯ç›´æ¥ä½¿ç”¨ @import æ¥å¼•ç”¨æŸä¸ª Moduleï¼Œæˆ–è€…å…¶ä¸­æŸä¸ªåŠŸèƒ½å•å…ƒã€‚å°¤å…¶æ˜¯ä½¿ç”¨ CocoaPods é›†æˆå¼€å‘çš„æ—¶å€™ï¼Œå…¶å†…éƒ¨å®é™…ä¸Šä¹Ÿæ˜¯åšäº†ä¸€äº› module çš„å·¥ä½œï¼Œåœ¨ Pods ç›®å½•ä¸­å……æ–¥ç€ &lt;code&gt;.modulemap&lt;/code&gt; çš„èº«å½±ï¼Œæƒ³å¿…å¤§å®¶ç»å¸¸çœ‹åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;è€Œ ä¸€ä¸ª module çš„å±æ€§æ˜¯ç”±å®šä¹‰å®ƒçš„ &lt;code&gt;.modulemap&lt;/code&gt; æ–‡ä»¶æ¥å†³å®šçš„ï¼Œå…¶ç®€å•è¯­æ³•å¤§æ¦‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;module module_name &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;system&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    header &lt;span class=&#34;s2&#34;&gt;&amp;#34;header.h&amp;#34;&lt;/span&gt;
    link &lt;span class=&#34;s2&#34;&gt;&amp;#34;linked_library&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; *
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æœå¯¹å…¶ä¸­ &lt;a href=&#34;https://clang.llvm.org/docs/Modules.html#module-map-language&#34;&gt;Modules çš„è¯­æ³•&lt;/a&gt;æ„Ÿå…´è¶£ï¼Œå¯ä»¥åˆ° Clang çš„å®˜æ–¹æ–‡æ¡£ä¸‹é€šè¯»ä¸‹ï¼Œä½ è‚¯å®šä¼šå¯¹ Modules è¿™ä¸€å¥—æœ‰æ›´æ¸…æ¥šçš„è®¤è¯†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;umbrella-header&#34;&gt;Umbrella Header&lt;/h3&gt;

&lt;p&gt;è¯´èµ·æ¥ï¼ŒUmbrella Header æ˜¯åœ¨ Framework çš„æ¦‚å¿µè¢«å¼•å…¥çš„ï¼Œä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ¨¡å—å‡å­˜åœ¨ä¸€ä¸ª Umbrella Header ç”¨æ¥å°†é‚£äº›ä½ æƒ³æš´éœ²ç»™æ¨¡å—å¤–ç•Œè°ƒç”¨çš„å¤´æ–‡ä»¶åŒ…è£¹åœ¨ä¸€èµ·ã€‚é¿å…ä½¿ç”¨è€…åœ¨ä½¿ç”¨è¯¥æ¨¡å—çš„æ—¶å€™éœ€è¦æ‰‹åŠ¨è¾“å…¥å¤šä¸ª Header çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ å…¶å® Mac ç«¯å¾ˆæ—©å°±æœ‰è¿™ä¸ªæ¦‚å¿µï¼ŒiOS ä¸­ç‰¹æŒ‡ iOS 8 å¼€å§‹å®˜æ–¹åŠ å…¥ Dynamic Framework ä»¥åçš„æ¦‚å¿µã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä¸‹æ‰€ç¤ºï¼Œæ²¡æœ‰ Umbrella Header çš„æƒ…å†µä¸‹ä½ éœ€è¦å°†æ‰€æœ‰éœ€è¦å¼•å…¥çš„å¤´æ–‡ä»¶ä¾æ¬¡å†™å‡ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZCustomCell.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZCustomView.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZCustomViewController.h&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨ä½¿ç”¨äº† Umbrella Header ä¹‹åï¼Œä½ åªéœ€è¦ä¸‹é¢ä¸€è¡Œå³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZModule.h&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“ç„¶ï¼Œè¿˜å­˜åœ¨ umbrella frameworkï¼Œæ„Ÿå…´è¶£å¤§å®¶å¯ä»¥åˆ°&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/FrameworkAnatomy.html#//apple_ref/doc/uid/20002253-97623-BAJJHAJC&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ä¸‹è§‚çœ‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;bridging-header&#34;&gt;Bridging-Header&lt;/h3&gt;

&lt;p&gt;æ¡¥æ¥æ–‡ä»¶æ˜¯åœ¨ Swift æ¨å‡ºä¹‹åï¼ŒApple å¼•å…¥iOS ç”Ÿæ€çš„ç”¨ä»¥æ¡¥æ¥ Swift å’Œ Objective-C ç›¸äº’è°ƒç”¨çš„ä¸€ç§æ–¹å¼ ï¼ˆMix and Matchï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœåœ¨ Swift ä¸­æƒ³ä½¿ç”¨ Objective-C ç±»å®šä¹‰çš„å†…å®¹ï¼Œå°±éœ€è¦å»ºç«‹ Bridging Headerï¼Œç„¶ååœ¨å…¶ä¸­å®šä¹‰ä½ æƒ³è¦æš´éœ²çš„ OC å¤´æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/YwqHEKJ.png&#34; alt=&#34;Bridging Header&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„æ“ä½œåœ¨&lt;a href=&#34;https://developer.apple.com/documentation/swift/imported_c_and_objective-c_apis/importing_objective-c_into_swift&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;æœ‰é’ˆå¯¹åœ¨åŒä¸€ä¸ª App Target å’Œåœ¨åŒä¸€ä¸ª Framework å†…ä¸¤ç§æƒ…å†µå‡æœ‰è¯´æ˜ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;åœ¨æ¢³ç†è¿™äº›æ¦‚å¿µçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°è‡ªå·±ä¹‹å‰å¯¹æ¡¥æ¥æ–‡ä»¶æœ‰ä¸ªè¯¯åŒºï¼Œå¦‚æœä½ åœ¨ App çš„ä¸» Target ä¸­éœ€è¦è¿›è¡Œ OC å’Œ Swift çš„æ··ç¼–ï¼Œä½¿ç”¨ Bridging Header æ˜¯å¿…é€‰ï¼Œå¦‚æœä½ æ˜¯åœ¨åŒä¸€ä¸ª Framework ä¸­è¿›è¡Œçš„æ··ç¼–ï¼ŒBridging-Header æ˜¯å¹¶ä¸éœ€è¦çš„ï¼Œä½ éœ€è¦åšçš„åªæ˜¯åœ¨ Umbrella Header é‡ŒåŠ å…¥ä½ æƒ³æš´éœ²ç»™ Swift æ–‡ä»¶ä½¿ç”¨çš„ OC å¤´æ–‡ä»¶å³å¯ï¼Œä¹‹å‰è‡ªå·±ä¸€ç›´æ˜¯æ˜¾å¼çš„å»ºç«‹ä¸€ä¸ª Bridging-Headerï¼Œç„¶ååœ¨ Umbrella Header ä¸­å¼•å…¥è¯¥å¤´æ–‡ä»¶ï¼Œæƒ³æ¥è¿™ç§æ–¹å¼åªæ˜¯å°†ä½ æƒ³æš´éœ²åœ¨å¤–çš„å¤´æ–‡ä»¶è¿›è¡Œäº†äºŒæ¬¡åŒ…è£¹è€Œå·²ï¼Œå› ä¸º Cocoapods æ˜¯å°†æ‰€æœ‰ public header å‡åŠ å…¥åˆ° umbrella header é‡Œäº†ï¼Œå› æ­¤å•ä¸ª framework å†…éƒ¨å¼€å‘ï¼Œå³ä½¿æ²¡æœ‰ bridge header ä¹Ÿæ˜¯èƒ½å¤Ÿå°†ç¬¦å·æš´éœ²ç»™ Swift çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;cocoapods&#34;&gt;Cocoapods&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬æ¯æ¬¡æ‰§è¡Œ &lt;code&gt;pod install&lt;/code&gt; çš„æ—¶å€™ï¼Œå¦‚æœä½ ä½¿ç”¨ &lt;code&gt;â€”verbose&lt;/code&gt; æ¥çœ‹è¯¦ç»†å®‰è£…è¿‡ç¨‹å°±èƒ½çœ‹åˆ°ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå°†è¦è¢«å®‰è£…çš„ Pod å‡ä¼šæ‰§è¡Œç”Ÿæˆ module map å’Œ umbrella header è¿™ä¸¤ä¸ªé˜¶æ®µï¼Œå¦‚ä¸‹æ‰€ç¤ºéƒ¨åˆ† Install æŒ‡ä»¤çš„ä»£ç ï¼Œä»£ç ä½äº &lt;code&gt;lib/cocoapods/installer/xcode/pods_project_generator/aggregate_target_installer.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;install!&lt;/span&gt;
       &lt;span class=&#34;no&#34;&gt;UI&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- Installing target `&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;#{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;` &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;#{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;add_target&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;create_support_files_dir&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;create_support_files_group&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;create_xcconfig_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;host_requires_frameworks?&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;create_info_plist_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info_plist_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	    &lt;span class=&#34;n&#34;&gt;create_module_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;create_umbrella_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;elsif&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uses_swift?&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;create_module_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    			&lt;span class=&#34;n&#34;&gt;create_umbrella_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;
      
     &lt;span class=&#34;c1&#34;&gt;# Some Code&lt;/span&gt;
     &lt;span class=&#34;c1&#34;&gt;# Some Code&lt;/span&gt;
     &lt;span class=&#34;c1&#34;&gt;# Some Code      &lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¾ˆæ˜ç¡®ï¼ŒCocoapods åœ¨ install æŸä¸ª Pod çš„æ—¶å€™ä¼šæ‰§è¡Œåˆ›å»º module map æ–‡ä»¶ä»¥åŠ umbrella header æ–‡ä»¶çš„å·¥ä½œã€‚è¯¦ç»†çš„ä»£ç å¤§å®¶å¯ä»¥ç›´æ¥åˆ° Cocoapods æºç ä¸‹  &lt;code&gt;lib/cocoapods/generator&lt;/code&gt; ç›®å½•ä¸‹çœ‹ï¼Œåˆ†åˆ«æ˜¯ &lt;code&gt;module_map.rb&lt;/code&gt; å’Œ &lt;code&gt;umbrella_header.rb&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;å…¶ä¸­åœ¨å„è‡ªæ–‡ä»¶çš„æ³¨é‡Šéƒ¨åˆ†ä¹Ÿæœ‰é’ˆå¯¹ç”Ÿæˆæ–‡ä»¶çš„è¯´æ˜ï¼Œæ¯”å¦‚ &lt;code&gt;module_map.rb&lt;/code&gt; ä¸­è¯´æ˜äº† module map çš„ä½œç”¨ï¼Œ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Generates LLVM module map files. A module map file is generated for each Pod and for each Pod target definition that is built as a framework. It specifies a different umbrella header than usual to avoid name conflicts with existing headers of the podspec.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨ &lt;code&gt;umbrella_header.rb&lt;/code&gt; ä¸­è¯´æ˜äº† umbrella header çš„ä½œç”¨ï¼Œ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Generates an umbrella header file for clang modules, which are used by dynamic frameworks on iOS 8 and OSX 10.10 under the hood. If the target is a +PodTarget+, then the umbrella header is required to make all public headers in a convenient manner available without the need to write out header declarations for every library header.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;é—®é¢˜åŸå› &#34;&gt;é—®é¢˜åŸå› &lt;/h2&gt;

&lt;p&gt;é¦–å…ˆè§£ç­”ï¼šä¸ºä»€ä¹ˆ Example å·¥ç¨‹èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ è€Œç”¨äº†ä¸»å·¥ç¨‹æ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å› ä¸ºç›®å‰ä¸»å·¥ç¨‹éƒ½è¦æ±‚æˆ‘ä»¬è‡ªè¡Œå¼€å‘çš„ pod ä»¥åŠ¨æ€ framework çš„å½¢å¼å‚ä¸ï¼Œä½†æ˜¯åœ¨ Example å·¥ç¨‹å¼€å‘çš„æ—¶å€™æˆ‘ä»¬çš„ &lt;code&gt;podfile&lt;/code&gt; å¹¶æœªæŒ‡å®š &lt;code&gt;use_frameworks!&lt;/code&gt; ç”¨ä»¥äº§å‡ºåŠ¨æ€ frameworkï¼Œå› æ­¤æœªæš´éœ²å‡ºè¯¥é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä»¥ framework çš„å½¢å¼çš„ module æ‰ä¼šæœ‰è¯¥é—®é¢˜ï¼Œå‡†ç¡®çš„è¯´ï¼Œåº”è¯¥æ˜¯ &lt;code&gt;Dynamic Framework&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;äº†è§£äº†ä»¥ä¸Šæ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹æˆ‘ä»¬çš„é—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬çš„é—®é¢˜æ˜¯åœ¨ framework å†…éƒ¨è°ƒç”¨ç³»ç»Ÿ C åº“ä»£ç å‡ºç°çš„é—®é¢˜ï¼Œä» Xcode çš„æŠ¥é”™ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬é€šè¿‡ bridging header å¼•å…¥çš„ C æ–‡ä»¶å¹¶ä¸ä»¥ module çš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤ç¼–è¯‘å™¨æŠ¥é”™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è§£å†³è¿‡ç¨‹&#34;&gt;è§£å†³è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;å…¶å®å§ï¼Œå¤§å®¶éƒ½èƒ½æƒ³åˆ°ï¼Œä½¿ç”¨ Objective-C åšä¸ªå°è£…ï¼Œæˆ–è€…å¹²è„†ç›´æ¥è°ƒç”¨ C æ–‡ä»¶çš„ç±»ç”¨ OC é‡å†™ä¸å°±å®Œäº†ä¹ˆï¼Œå¯æ˜¯å¦‚æœä¸‹æ¬¡ä½ å†é‡åˆ°äº†å‘¢ï¼Ÿ æˆ–è€…è¦æ”¹é€ äº†ä¸€ä¸ªçº¯ Swift åº“å‘¢ï¼ŸçŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ‰èƒ½é¿å…å†æ¬¡è½å‘å§ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;å› ä¸º Objective-C è‡ªèº«ç¼–è¯‘å™¨æ˜¯å¸®ä½ åšäº† modular åŒ–çš„ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ é€‰æ‹©äº†å‰è€…ï¼Œè¿˜æœ‰ä¸ªé™åˆ¶ï¼Œä½ å¹¶ä¸èƒ½æŠŠä¸Šé¢ C çš„å¤´æ–‡ä»¶æ”¾åˆ°ä½ çš„ Objective-C çš„å¤´æ–‡ä»¶ä¸­ï¼Œå› ä¸ºæœ¬è´¨ä¸Šï¼Œæœ€åè¿™ä¸ªå¤´æ–‡ä»¶è¿˜æ˜¯è¦æš´éœ²ç»™ Umbrella Header çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é¦–å…ˆï¼Œèƒ½å¦å…è®¸ç¼–è¯‘å™¨æ”¯æŒåœ¨ module ä¸­å¼•å…¥é modular çš„å¤´æ–‡ä»¶å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;Xcode åœ¨ build setting ä¸­æä¾›äº†  &lt;code&gt;Allow Non-modular Includes In Framework Modules&lt;/code&gt; æ¥æ§åˆ¶æ˜¯å¦å…è®¸åœ¨å½“å‰ framework ä¸­æ”¯æŒé modular å¤´æ–‡ä»¶å¼•å…¥ï¼Œå…¶å¹¶ä¸é€‚ç”¨äºçº¯ Swift é¡¹ç›®ï¼Œè€Œä¸”å³ä½¿é€‚ç”¨ï¼Œå…¶ä¼šå¯¼è‡´æ‰€æœ‰ç”¨åˆ°è¯¥ framework çš„å¤§çš„ç¼–è¯‘å•å…ƒéƒ½ä¸èƒ½å†ä½¿ç”¨ module å½¢å¼å¼•å…¥å¤´æ–‡ä»¶äº†ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»é€‚ç”¨å¹³å¦å¼çš„ &lt;code&gt;#include &amp;quot;&amp;quot;&lt;/code&gt; å½¢å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/S4i2chx.png&#34; alt=&#34;Build Setting&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œé€šè¿‡åªèƒ½ä»æ ¹æºä¸Šæ¥è§£å†³è¯¥é—®é¢˜äº†ï¼Œæ—¢ç„¶éœ€è¦å¼•å…¥çš„æ–‡ä»¶æ˜¯ modular headerï¼Œæˆ‘ä»¬å°±è¦æƒ³åŠæ³•æ¥å°†å…¶åŒ…è£¹ä¸º moduleã€‚ åœ¨æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œå°±åœ¨ Swift åˆšæ¨å‡ºçš„æ—¶å€™ï¼Œå¤§å®¶å·²ç»é‡åˆ°è¿™ä¸ªé—®é¢˜äº†ï¼Œé‡åˆ°æœ€å¤šçš„å°±æ˜¯&lt;code&gt;CommonCrypto&lt;/code&gt; ç»å¸¸è¢«ä½¿ç”¨åˆ°çš„ C åº“ï¼Œå¸¸è§çš„ MD5 è®¡ç®—å°±æ˜¯å…¶æä¾›çš„ APIï¼Œä½†æ˜¯åœ¨å‰å‡ å¹´å®˜æ–¹å¹¶æœªå°†è¯¥åŠ¨æ€åº“ module åŒ–ï¼Œå› æ­¤å¯¼è‡´ä½ æ— æ³•åœ¨ Swift æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ç±»ä¼¼ &lt;code&gt;#import &amp;lt;CommonCrypto/CommonCrypto.h&amp;gt;&lt;/code&gt; è¿™ç§å†™æ³•ã€‚è‡ªç„¶è€Œè¨€å¤šäº†å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸‹å‡ºè‡ª StackOverflow ä¸Š &lt;a href=&#34;https://stackoverflow.com/questions/25248598/importing-commoncrypto-in-a-swift-framework/37125785#37125785&#34;&gt;Importing CommonCrypto in a Swift framework&lt;/a&gt; çš„å¸–å­ä¸‹é¢å°±æä¾›äº†å¤šç§è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¿˜æ˜¯é‚£å¥è¯ï¼Œä½ æ˜¯å¯ä»¥é€šè¿‡ Objective-C åšæ¡¥æ¥æ¥è¾¾åˆ°åŒæ ·æ•ˆæœçš„ã€‚æ¯•ç«Ÿ Swift æœ¬èº«å°±æ˜¯ä¸€é—¨å¿ƒæ€æƒ³æŠ›å¼€ C çš„å†å²åŒ…è¢±ï¼Œå› æ­¤æƒ³æ‹¥æœ‰ä¸€ä¸ªçº¯çº¯çš„ Swift ä»£ç ä¸æ²¾æŸ“ä¸€ç‚¹ C æ–‡ä»¶æ°”æ¯ï¼Œä½ å°±è¦åšä¸€äº›å·¥ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å…¶ä¸­æ ¹æœ¬é—®é¢˜å°±æ˜¯ä¸º &lt;code&gt;CommonCrypto&lt;/code&gt; è¿™ä¸ª C ç¼–è¯‘å•å…ƒå®šä¹‰ moduleï¼Œä¸Šé¢ä¹Ÿæåˆ°äº† LLVM æ˜¯é€šè¿‡ &lt;code&gt;modulemap&lt;/code&gt; æ–‡ä»¶æ¥è¯†åˆ«çš„ï¼Œæ‰€ä»¥åªè¦é€šè¿‡ &lt;code&gt;.modulemap&lt;/code&gt; æ¥å®šä¹‰å³å¯ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;    module CommonCrypto [system] {
        header &amp;#34;/usr/include/CommonCrypto/CommonCrypto.h&amp;#34;
        export *
    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®šä¹‰çš„ modulemap è‡ªç„¶å¯ä»¥æ”¾åˆ°ä»»æ„ç›®å½•ï¼Œåªè¦è®©ç¼–è¯‘å•å…ƒåœ¨ç¼–è¯‘çš„æ—¶å€™èƒ½å¤Ÿæœç´¢çš„åˆ°å³å¯ï¼ŒXcode é€‰é¡¹çš„ Build Settings ä¸‹çš„ Swift Compiler - Search Paths ã€‚æ·»åŠ  .modulemap æ–‡ä»¶æ‰€åœ¨è·¯å¾„å³å¯ã€‚åœ¨ç¼–è¯‘çš„æ—¶å€™ LLVM è‡ªç„¶ä¼šæŸ¥æ‰¾åˆ° .modulemap æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ Module ä¿¡æ¯ã€‚ä½ æ­¤æ—¶å°±å¯ä»¥åœ¨ä½¿ç”¨  CommonCrypto çš„åœ°æ–¹ä½¿ç”¨ modular header äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿‡äº†å‡ å¹´ä¹‹åï¼Œå®˜æ–¹æ‰å°†è¯¥åº“å®šä¹‰ä¸º moduleï¼Œåœ¨ Xcode è‡ªå¸¦çš„ iOS SDK ä¸­ &lt;code&gt;/usr/include/CommonCrypto&lt;/code&gt; ä¸‹å¯ä»¥çœ‹åˆ° &lt;code&gt;module.modulemap&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;module CommonCrypto [system] [extern_c] {
      umbrella header &amp;#34;CommonCrypto.h&amp;#34;
      export *
      module * { export * }
      
      module Error {
          header &amp;#34;CommonCryptoError.h&amp;#34;
          export *
      }
      
      module Random {
          header &amp;#34;CommonRandom.h&amp;#34;
          export *
      }
    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¤§å®¶ä¹Ÿæ³¨æ„åˆ°äº†åœ¨ CommonCrypto çš„åŒçº§ç›®å½•ä¸­å®é™…ä¸Šè¿˜æœ‰å¾ˆå¤šçš„ç³»ç»Ÿ C åº“ä»£ç ï¼Œå¹¶ä¸”ä¹Ÿæœ‰ä¸€ä¸ª module.modulemap æ–‡ä»¶ï¼Œæˆ‘è£å‰ªä¸€æ®µä»£ç å¤§å®¶çœ‹ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;module Compression [system] [extern_c] {
    header &amp;#34;compression.h&amp;#34;
    export *
    link &amp;#34;compression&amp;#34;
}
    
module Darwin [system] [extern_c] [no_undeclared_includes] {
    // Headers that are repeatedly included, and therefore should not be
    	// assigned to any given module.
    	exclude header &amp;#34;_structs.h&amp;#34;
    	exclude header &amp;#34;sys/_structs.h&amp;#34;
    
    	// C standard library
    	module C {
    		textual header &amp;#34;assert.h&amp;#34;
    
    	  module setjmp {
    			header &amp;#34;setjmp.h&amp;#34;
    			export *
    		}
    
    		module signal {
    			header &amp;#34;signal.h&amp;#34;
    			export *
    		}
    
    		module stdio {
    			header &amp;#34;stdio.h&amp;#34;
    			export *
    		}
    }
    
    module zlib [system] [extern_c] {
    	header &amp;#34;zlib.h&amp;#34;
    	export *
    	link &amp;#34;z&amp;#34;
    }
    
    module SQLite3 [system] [extern_c] {
    	header &amp;#34;sqlite3.h&amp;#34;
    	link &amp;#34;sqlite3&amp;#34;
    	explicit module Ext {
    		header &amp;#34;sqlite3ext.h&amp;#34;
    		export *
    	}
    	export *
    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ Swift ä»£ç é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¼¼ &lt;code&gt;import Darwin.C.stdio&lt;/code&gt; å†™æ³•çš„åŸå› ã€‚ä½†æ˜¯è¿˜æ˜¯å­˜åœ¨ä¸€äº› C åº“å¹¶æ²¡æœ‰è¢«å®šä¹‰ä¸º moduleï¼Œè€Œæœ¬æ¬¡ç”¨æ¥åš DNS è§£æçš„ &lt;code&gt;resolv.h&lt;/code&gt; å°±æ˜¯å…¶ä¸­ä¸€å‘˜ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“åˆ°æˆ‘ä»¬è§£å†³æ€è·¯é‡Œæ¥çœ‹å°±æ˜¯è¦è§£å†³ modulemap å¦‚ä½•å®šä¹‰ï¼Œå¦‚ä½•å’Œæˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„ cocoapods æ•´åˆçš„é—®é¢˜äº†ã€‚æ—¢ç„¶æ˜¯åœ¨ä½œä¸º pod è¿›è¡Œå¼€å‘ï¼Œè‡ªç„¶æ˜¯éœ€è¦å°† module map æ–‡ä»¶åŠ å…¥åˆ° pod çš„ä»£ç ç®¡ç†ä¸­å»ã€‚æ¯”å¦‚å°†å…¶æ”¾ç½®äºå•ä¸ª pod æ ¹ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ podspec ä¸­é…ç½®å¥½è·¯å¾„ä»¥ä¾¿ç¼–è¯‘çš„æ—¶å€™ Swift Search Paths ä¸­æœ‰å®ƒã€‚è‡ªç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ resolv.modulemap å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;module Resolv &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;system&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    header &lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/include/resolv.h&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; *
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶ååœ¨å¯¹åº”çš„ podspec æ–‡ä»¶ä¸­é…ç½® build setting ä¸­çš„å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subspec&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Core&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;source_files&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ZHDiagnosisTool/Classes/Core/**/*&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preserve_paths&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pod_target_xcconfig&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;SWIFT_INCLUDE_PATHS[sdk=macosx*]&amp;#39;&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;$(PODS_ROOT)/ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;SWIFT_INCLUDE_PATHS[sdk=iphoneos*]&amp;#39;&lt;/span&gt;         &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;$(PODS_ROOT)/ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;SWIFT_INCLUDE_PATHS[sdk=iphonesimulator*]&amp;#39;&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;$(PODS_ROOT)/ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¯æ˜¯ï¼Œé—®é¢˜å‡ºåœ¨ PODS_ROOTS è¿™ä¸ªè·¯å¾„ä¸Šï¼Œå¦‚æœæˆ‘ä»¬è¿›è¡Œæœ¬åœ°å¼€å‘ï¼Œè¯¥è·¯å¾„å°±æ˜¯ Cocoapods æ‰§è¡Œå®Œæ¯•ä¹‹åç”Ÿæˆçš„ä¸´æ—¶ Pods ç›®å½•ï¼Œå¹¶ä¸æ˜¯åŸå§‹ podspec æ–‡ä»¶æ‰€åœ¨çš„åœ°æ–¹ï¼Œè€Œå®˜æ–¹ä¹Ÿè¡¨æ˜äº†ï¼Œä¸ä¼šå¯¹è¿™ç§ Local Pods ç‰¹å®šæä¾›ä¸€ä¸ªç¯å¢ƒå˜é‡æ¥è·å–ï¼Œ å¦‚ä¸‹é“¾æ¥å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/CocoaPods/CocoaPods/issues/809&#34;&gt;local pod development on a project that includes libraries Â· Issue #809 Â· CocoaPods/CocoaPods&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¦‚å›¾ä¸­ï¼ŒæŒ‡å®š $(PODS_ROOT) è·¯å¾„å®é™…ä¸Šåœ¨å¼€å‘ Local Pod çš„æ—¶å€™å°±ä¼šæ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥å°±éœ€è¦æŒ‰ç…§ä¸Šé¢é“¾æ¥ä¸­çš„æ–¹å¼è‡ªè¡Œæ‰‹åŠ¨æ‹¼æ¥è·¯å¾„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°½å¯èƒ½ä¸ç”¨ PODS_ROOT è¿™ä¸ªè·¯å¾„ï¼Œéœ€è¦å¦å¤–æ‰¾ä¸€ä¸ªä¸ä¼šå› ä¸º Pod ä½ç½®è€Œå˜åŒ–çš„è·¯å¾„ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ç»ˆå‚è€ƒäº†ä»¥ä¸‹ repo ä¸­å·¥ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/onmyway133/Arcane&#34;&gt;onmyway133/Arcane&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ä½œè€…ä½¿ç”¨ Pod çš„ script phase æ¥å®Œæˆ .modulemap çš„æ“ä½œï¼Œè¿™æ ·ä¼šæ›´åŠ çµæ´»ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ ·ï¼Œé’ˆå¯¹æˆ‘ä»¬è‡ªå·±æœ¬æ¬¡çš„éœ€æ±‚æ¥çœ‹ï¼Œ.podspec ä¸­çš„ script å¦‚ä¸‹æ‰€å†™å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Create&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;BUILT_PRODUCTS_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/RESOLV.framework&amp;#34;&lt;/span&gt;
          
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; already exists, so skipping the rest of the script.&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;exit&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
          
mkdir -p &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Modules&amp;#34;&lt;/span&gt;
          
&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;module RESOLV [system] {
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    header \&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SDKROOT&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/usr/include/resolv.h\&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    export *
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;}&amp;#34;&lt;/span&gt; &amp;gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Modules/module.modulemap&amp;#34;&lt;/span&gt;
               
    
&lt;span class=&#34;c1&#34;&gt;# Generate fake header...&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; mkdir &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers&amp;#34;&lt;/span&gt;
touch &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers/resolv.h&amp;#34;&lt;/span&gt;
    
&lt;span class=&#34;c1&#34;&gt;# Soft link C header to local framework Headers&lt;/span&gt;
ln -sf &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SDKROOT&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/usr/include/resolv.h&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers/resolv.h&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ¯æ¬¡åœ¨ç¼–è¯‘è¿è¡Œå‰ï¼Œæˆ‘ä»¬ä¼šè‡ªè¡Œåˆ›å»ºä¸€ä¸ª &lt;code&gt;Resolv.framework&lt;/code&gt;ï¼Œå…¶ä¸­ Header ç›®å½•ä¸­æˆ‘ä»¬æ”¾ä¸€ä¸ªç©ºç™½æ–‡ä»¶å¹¶ä¸”è½¯é“¾æ¥åˆ°çœŸæ­£æƒ³è¦é“¾æ¥çš„å¤´æ–‡ä»¶ä¸Šï¼Œç„¶ååœ¨è¯¥ framework ä¸­åˆ›å»º modulemap æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ä¹‹åï¼Œæˆ‘ä»¬åœ¨ .podspec ä¸­æŒ‡å®š script phase ä¸ºç¼–è¯‘å‰å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;script_phase&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;ss&#34;&gt;:name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Resolv&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;ss&#34;&gt;:script&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;script_above&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;ss&#34;&gt;:execution_position&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;ss&#34;&gt;:before_compile&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ ·ï¼Œé€šè¿‡ &lt;code&gt;Resolv.framework&lt;/code&gt; çš„æ¡¥æ¥ï¼ŒSwift ä»£ç ä¸­å°±å¯ä»¥ç›´æ¥é€šè¿‡ &lt;code&gt;import RESOLV&lt;/code&gt; æ¥ä½¿ç”¨äº†ã€‚å½“ç„¶ï¼Œé“¾æ¥è¿™ä¸€ç¯ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§å½¢å¼è¾¾åˆ°ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç›´æ¥åœ¨ podspec æ–‡ä»¶ä¸­æŒ‡å®šä¾èµ–ï¼Œå¦‚ &lt;code&gt;core.library = &amp;quot;resolv&amp;quot;&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åœ¨ &lt;code&gt;.modulemap&lt;/code&gt; æ–‡ä»¶ä¸­æ˜¾å¼çš„ linkï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;module Resolv &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;system&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
header &lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/include/resolv.h&amp;#34;&lt;/span&gt;
link &lt;span class=&#34;s2&#34;&gt;&amp;#34;resolv&amp;#34;&lt;/span&gt;
&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; *
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è€Œä¸”é€šè¿‡å°† module map æ–‡ä»¶æ”¾ç½®äº product äº§å‡ºç›®å½•è¿™é‡Œä¹Ÿè§£å†³äº†è·¯å¾„æŒ‡å®šçš„é—®é¢˜ï¼Œå› ä¸º product folder æ˜¯é»˜è®¤åœ¨ç¼–è¯‘çš„æœç´¢è·¯å¾„ä¸‹çš„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æ€»ç»“æ¥çœ‹ï¼Œå°±æ˜¯æƒ³è¦åœ¨çº¯ Swift çš„é¡¹ç›®ä¸­å¼•å…¥ç³»ç»Ÿ C åº“æ–‡ä»¶ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯æœªè¢« modular åŒ–çš„æ–‡ä»¶ï¼Œå› ä¸ºæœ‰äº› C æ–‡ä»¶å·²ç»è¢«ç³»ç»Ÿé»˜è®¤å°è£…æˆäº† module äº†ï¼‰ã€‚ä»¥ä¸Šåªæ˜¯ä¸€äº›ç®€å•çš„æ¦‚å¿µè®²è§£ï¼Œæ•´ä¸ªç¼–è¯‘ç³»ç»Ÿä»¥åŠå¥—ä»¶éƒ½æ˜¯é•¿æ—¶é—´ä¸æ–­æ¼”åŒ–çš„ç»“æœï¼Œè¿™é‡Œä¹Ÿåªæ˜¯ç®€å•çš„è®²è¿°ï¼Œæœ‰ä¸€äº›æ¦‚å¿µå®é™…ä¸Šä¹Ÿåªæ˜¯ç‚¹åˆ°ä¸ºæ­¢ï¼Œå¤§å®¶å¦‚æœæ„Ÿå…´è¶£å¯ä»¥å¤šæ‰¾ä¸€äº›ç›¸å…³èµ„æ–™é˜…è¯»ä¸‹ï¼Œäº²è‡ªè¯•ä¸€è¯•ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://llvm.org/devmtg/2012-11/Gregor-Modules.pdf&#34;&gt;Modules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/LLVM&#34;&gt;LLVM - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://clang.llvm.org/docs/Modules.html#introduction&#34;&gt;Modules - Clang 8 documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://onevcat.com/2013/06/new-in-xcode5-and-objc/&#34;&gt;WWDC 2013 Sessionç¬”è®° - Xcode5å’ŒObjCæ–°ç‰¹æ€§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/25248598/importing-commoncrypto-in-a-swift-framework/37125785#37125785&#34;&gt;Importing CommonCrypto in a Swift framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://forums.developer.apple.com/thread/46477&#34;&gt;Adding CommonCrypto to custom Swift framework |Apple Developer Forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://theswiftdev.com/2018/01/15/how-to-call-c-code-from-swift/&#34;&gt;How to call C code from Swift - The.Swift.Dev.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/swift-and-ios-writing/using-a-c-library-inside-a-swift-framework-d041d7b701d9/&#34;&gt;Using a C library inside a Swift framework - Swift and iOS Writing - Medium&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>UserDefaults and Keychain</title>
      <link>https://hechen.xyz/post/userdefaults-and-keychain/</link>
      <pubDate>Fri, 21 Dec 2018 14:30:50 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/userdefaults-and-keychain/</guid>
      
        <description>

&lt;p&gt;Apple æä¾›äº†å‡ ç§æŒä¹…åŒ–æ–¹æ¡ˆï¼Œå…¶ä¸­ UserDefaults å’Œ Keychain æ˜¯ App å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„æ–¹æ¡ˆï¼Œè€Œä¸”ä»ä»¥å¾€å’ŒåŒäº‹çš„æ¢è®¨è¿‡ç¨‹ä¸­å‘ç°å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µä¸­æœ‰ä¸€äº›ç»†èŠ‚è¿˜æ˜¯ç†è§£ä¸å¤ªé€å½»ï¼Œå› æ­¤æœ¬æ–‡ä¼šé’ˆå¯¹è¿™äºŒè€…å±•å¼€è®²ä¸€è®²ã€‚&lt;/p&gt;

&lt;h2 id=&#34;userdefaults&#34;&gt;UserDefaults&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œé˜…è¯»å®Œ Apple å…³äº UserDefaults ä¸€èŠ‚çš„æ–‡æ¡£æè¿°ä¹‹åï¼Œæˆ‘è§‰å¾—æœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;UserDefaults çš„æ„æˆ&lt;/li&gt;
&lt;li&gt;UserDefaults çš„ç›®çš„&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;userdefaults-æ„æˆ&#34;&gt;UserDefaults æ„æˆ&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…·ä½“ UserDefaults å­˜å‚¨çš„åœ°æ–¹ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬åœ¨åº”ç”¨ä¸­å†™å…¥ Demo æ•°æ®ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wq9onOa.png&#34; alt=&#34;Write Key-Value to UserDefaults&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰“å° Library è·¯å¾„ï¼Œåœ¨ Finder ä¸­æ‰“å¼€è·¯å¾„:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/65ybYX6.png&#34; alt=&#34;Library&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚ä¸‹å±•ç¤ºå†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ Preferences ç›®å½•ä¸­å­˜åœ¨æŸä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚è¯¥ App Library ç›®å½•ä¸‹å­˜æ”¾çš„æ–‡ä»¶ä¸º &lt;code&gt;app.chen.ios.PersistenceDemo.plist&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ChqnDJa.png&#34; alt=&#34;Cache&#34; /&gt;
&lt;img src=&#34;https://i.imgur.com/cPvlFdR.png&#34; alt=&#34;Preferences&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¯¥ plist å†…å®¹å¦‚å›¾æ‰€ç¤ºï¼Œå³ä¸ºæˆ‘ä»¬ä¹‹å‰åœ¨ App ä¸­å†™å…¥çš„ Key-Valueã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/shdXoZN.png&#34; alt=&#34;plist&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥è¿™ä¹Ÿè¯æ˜äº†ï¼Œæˆ‘ä»¬é’ˆå¯¹ UserDefaults çš„è¯»å†™å®è´¨ä¸Šæ˜¯é’ˆå¯¹ plist æ–‡ä»¶çš„è¯»å†™ã€‚&lt;/p&gt;

&lt;p&gt;iOS ç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ åš &lt;code&gt;plist&lt;/code&gt; æ–‡ä»¶çš„è¯»å…¥ä»¥åŠ Cacheï¼Œæ ¹æ®æƒ…å†µä¼šæŠŠä½ åœ¨å†…å­˜ä¸­æ‰€åšçš„æ“ä½œåŒæ­¥åˆ° &lt;code&gt;plist&lt;/code&gt; æ–‡ä»¶ï¼ˆUserDefaults åŒæ­¥åˆ°å†…å­˜æ˜¯åŒæ­¥çš„ï¼ŒåŒæ­¥åˆ° Database æ˜¯å¼‚æ­¥çš„ï¼Œ iOS 8 å¼€å§‹ï¼Œä¼šæœ‰ä¸€ä¸ªå¸¸é©»è¿›ç¨‹ &lt;code&gt;cfprefsd&lt;/code&gt; æ¥è´Ÿè´£åŒæ­¥ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä½ ä¼šçœ‹æœ‰iOS é¢è¯•é¢˜ç›®ä¼šé—®é¢˜ï¼š ç³»ç»Ÿçš„ &lt;code&gt;UserDefaults&lt;/code&gt; çš„æœ¬è´¨ä»¥åŠå’Œ plist æ–‡ä»¶çš„ç›´æ¥è¯»å†™çš„åŒºåˆ«ï¼Ÿï¼ˆè¿™é¢˜ç›®å¤ª TM åäº†ã€‚ã€‚ã€‚ï¼‰&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;UserDefaults caches the information to avoid having to open the userâ€™s defaults database each time you need a default value. When you set a default value, itâ€™s changed synchronously within your process, and asynchronously to persistent storage and other processes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œå®è´¨ä¸Šï¼Œä½ æ˜¯å¯ä»¥ç›´æ¥é’ˆå¯¹ UserDefaults çš„æœ€ç»ˆäº§ç‰© plist æ–‡ä»¶è¿›è¡Œæ“ä½œçš„ï¼Œå½“ç„¶ï¼Œè¿™æ˜¯æœ‰é£é™©çš„ï¼Œè€Œä¸”æ— æ³•ä¿éšœæ­£å¸¸ä½¿ç”¨çš„ã€‚å®˜æ–¹åœ¨æ–‡æ¡£ä¸­ä¹Ÿæé†’äº†å¼€å‘è€…ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Donâ€™t try to access the preferences subsystem directly. Modifying preference property list files may result in loss of changes, delay of reflecting changes, and app crashes. To configure preferences, use the defaults command-line utility in macOS instead.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é‚£æ—¢ç„¶æœ¬è´¨ä¸Š UserDefaults æ˜¯ä½¿ç”¨ plist æ–‡ä»¶è¿›è¡Œå­˜å‚¨ï¼Œé‚£ä¹Ÿè¦æ±‚äº†æˆ‘ä»¬èƒ½å­˜å‚¨çš„ Value åªèƒ½æ”¯æŒ &lt;code&gt;plist&lt;/code&gt; æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œä¾‹å¦‚ &lt;code&gt;String&lt;/code&gt;ï¼Œ&lt;code&gt;Number&lt;/code&gt;ï¼Œ&lt;code&gt;Array&lt;/code&gt;ï¼Œ&lt;code&gt;Data&lt;/code&gt;ï¼Œ&lt;code&gt;Date&lt;/code&gt; ç­‰ï¼Œå½“ç„¶å¦‚æœä½ è¦å­˜å‚¨è‡ªå®šä¹‰çš„ç±»ï¼Œå…¶éœ€è¦éµå®ˆ &lt;code&gt;Codable&lt;/code&gt; åè®®ï¼ˆå®è´¨ä¹Ÿæ˜¯è¦å½’æ¡£ä¸º &lt;code&gt;Data&lt;/code&gt;ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/cxWHfvS.png&#34; alt=&#34;plist&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;userdefaults-ç›®çš„&#34;&gt;UserDefaults ç›®çš„&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;The defaults system allows an app to customize its behavior to match a userâ€™s preferences. For example, you can allow users to specify their preferred units of measurement or media playback speed. Apps store these preferences by assigning values to a set of parameters in a userâ€™s defaults database.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸€èˆ¬æˆ‘ä»¬åœ¨ &lt;code&gt;UserDefaults&lt;/code&gt; å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯ç”¨æˆ·çš„æŸäº›é…ç½®é¡¹ï¼Œä¸å› ä¸ºç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°æ„å¤–è€Œä¸¢å¤±ï¼Œæ¯”å¦‚æ˜¯å¦å¼€å¯äº†æ—¥å¤œé—´æ¨¡å¼äº†ï¼Œæ˜¯å¦å¼€å¯äº†å¤§å›¾æ¨¡å¼äº†ç­‰ç­‰ã€‚æˆ–è€…å­˜å‚¨ä¸€äº›å¯¹å®‰å…¨æ–¹é¢ä¸æ•æ„Ÿçš„æ•°æ®&lt;/p&gt;

&lt;p&gt;ä¸å»ºè®®å¾€ &lt;code&gt;UserDefaults&lt;/code&gt; é‡Œå­˜å‚¨è¾ƒå¤§çš„æ•°æ®ï¼Œä¾‹å¦‚ç›´æ¥å­˜å‚¨ä¸€å¼ å›¾ç‰‡ã€‚è€Œå¯¹äºè¿™ç§éœ€è¦å­˜å‚¨è¾ƒå¤§æ–‡ä»¶çš„éœ€æ±‚ï¼Œä½ å¯ä»¥å°†æ–‡ä»¶æœ¬èº«å­˜å‚¨åˆ°æœ¬åœ°ï¼Œè€Œ &lt;code&gt;UserDefaults&lt;/code&gt; é‡Œåªå­˜å‚¨è¯¥æ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/p&gt;

&lt;p&gt;æ¯•ç«Ÿåœ¨ App å¯åŠ¨ä¹‹åï¼ŒUserDefaults ä¼šè¿›è¡Œ IO ï¼Œè¯»å–æœ¬åœ° plist æ–‡ä»¶ï¼Œå› æ­¤ä¸€å®šç¨‹åº¦ä¸Šï¼Œä¹Ÿä¼šè¾ƒå°‘ App å¯åŠ¨ä¹‹å UserDefaults API é’ˆå¯¹ &lt;code&gt;plist&lt;/code&gt; æ–‡ä»¶ IO çš„æ—¶é—´ï¼Œçº¯å±ä¸ªäººæ£æµ‹ï¼Œæ²¡æœ‰ç»è¿‡å®éªŒéªŒè¯ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å…³äº-extension-ä¸­-userdefaults-çš„åº”ç”¨&#34;&gt;å…³äº Extension ä¸­ UserDefaults çš„åº”ç”¨&lt;/h3&gt;

&lt;p&gt;iOS ä¸Š Extension å’Œ Host App ä¹‹é—´åšæ•°æ®å…±äº«ä¹Ÿæ˜¯é€šè¿‡ UserDefaultsï¼Œå¼€å¯ App Group ä¹‹åï¼Œè¿™äºŒè€…å°±å¯ä»¥ä¿®æ”¹åŒä¸€ä»½é…ç½®ã€‚å…·ä½“ Extension å’Œ Host App ä¹‹é—´çš„å†…åœ¨å…³ç³»å¯ä»¥å…ˆçœ‹ä¸‹ Apple æ–‡æ¡£ã€‚æœ¬è´¨ä¸Šå¦‚ä¸‹æ‰€ç¤ºï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/cZFlz6o.png&#34; alt=&#34;app_extensions_container_restrictions&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Extension å’Œ Host App ä¹‹é—´é€šè¿‡ Shared Container æ¥åšæ•°æ®å…±äº«ï¼Œè¯¥ SharedContainer ç§æœ‰ï¼Œå› æ­¤ä¸å­˜åœ¨äºå•ä¸€ App çš„æ²™ç›’å†…ã€‚åº”è¯¥æ˜¯ç³»ç»Ÿä¼šå•ç‹¬å¼€è¾Ÿä¸€å—ç©ºé—´ç”¨ä»¥åšå…±äº«æ•°æ®çš„å­˜å‚¨ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;After you enable app groups, an app extension and its containing app can both use the NSUserDefaults API to share access to user preferences. To enable this sharing, use the initWithSuiteName: method to instantiate a new NSUserDefaults object, passing in the identifier of the shared group.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å› ä¸º UserDefaults æ—¢ç„¶æ˜¯æš´éœ²åœ¨æœ¬åœ°èƒ½å¤Ÿè®¿é—®çš„æ–‡ä»¶å½“ä¸­çš„ï¼Œå› æ­¤ä¸è¦åœ¨ UserDefaults é‡Œå­˜å‚¨ä»»ä½• Security-Sensitive çš„æ•°æ®ã€‚ å¦‚æœè¦å­˜å‚¨ä¿å¯†çº§åˆ«è¾ƒé«˜çš„æ•°æ®ï¼Œå°±è¦ç”¨åˆ°å¦å¤–ä¸€ç§æŒä¹…åŒ–æ–¹æ¡ˆ â”€â”€ Keychain&lt;/p&gt;

&lt;h2 id=&#34;keychain&#34;&gt;Keychain&lt;/h2&gt;

&lt;p&gt;å…³äº Keychainï¼Œæ˜¯ Apple æä¾›ç»™å¼€å‘è€…ç”¨æ¥å­˜å‚¨ Security-Sensitive çš„æ•°æ®äº†ï¼Œæ¯”å¦‚ç™»å½•å¯†ç ï¼Œç”¨æˆ·æ ‡è¯†ï¼ŒåŠ å¯†æ•°æ®ç­‰ç­‰ã€‚ å®˜æ–¹ç¤ºæ„å›¾å¦‚ä¸‹ï¼Œå…¶å®ä¸­é—´ Keychain çš„ API è¿˜è¿›è¡Œäº† Decrypt å’Œ Encrypt çš„åŠ¨ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/tvA4lV3.png&#34; alt=&#34;Keychain services API&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Apple æä¾›çš„ Keychain API å¤§éƒ¨åˆ†éƒ½æ˜¯ C è¯­è¨€å†™æˆï¼Œä½¿ç”¨èµ·æ¥ç›¸å¯¹ä¸ä¾¿ï¼Œå› æ­¤åŸºæœ¬ä¸Šæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨äºŒæ¬¡åŠ å·¥è¿‡çš„åº“ï¼Œæ¯”å¦‚çŸ¥ä¹ç”¨çš„å°±æ˜¯ SMKeychainã€‚&lt;/p&gt;

&lt;p&gt;Keychain ä¸­çš„æ•°æ®å®Œå…¨äº¤ç”±ç³»ç»Ÿä¿ç®¡å¹¶åŠ å¯†è¿‡( AES 128 in GCM (Galois/Counter Mode))çš„ï¼Œå› æ­¤èƒ½å¤Ÿä¿è¯å®‰å…¨æ€§ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœå¯¹åŠ å¯†è¿™ä¸€å—æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹ä¸‹&lt;a href=&#34;https://www.apple.com/business/site/docs/iOS_Security_Guide.pdf&#34;&gt;è‹¹æœçš„ç™½çš®ä¹¦&lt;/a&gt;ä¸­ Keychain data protection è¿™ä¸€èŠ‚ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼ŒKeychain çš„æ•°æ®å¹¶ä¸å­˜æ”¾åœ¨ App çš„ Sanbox ä¸­ï¼Œå³ä½¿åˆ é™¤äº† Appï¼Œèµ„æ–™ä¾ç„¶ä¿å­˜åœ¨ keychain ä¸­ã€‚å¦‚æœé‡æ–°å®‰è£…äº†appï¼Œè¿˜å¯ä»¥ä» keychain è·å–æ•°æ®ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åŒä¸€ä¸ª-app-å†…éƒ¨å…±äº«&#34;&gt;åŒä¸€ä¸ª App å†…éƒ¨å…±äº«&lt;/h3&gt;

&lt;p&gt;ç±»ä¼¼ UserDefaults ï¼ŒKeychain ä¹Ÿæ”¯æŒ Extension å’Œ host app ä¹‹é—´çš„å…±äº«ï¼Œéœ€è¦åœ¨æ¯ä¸ª Target çš„ Capability ä¸‹å¼€å¯ Keychain Sharing åŠŸèƒ½ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºåŒä¸€ä¸ª Groupã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä¸åŒ-app-ä¹‹é—´å…±äº«&#34;&gt;ä¸åŒ App ä¹‹é—´å…±äº«&lt;/h3&gt;

&lt;p&gt;å’Œ UserDefaults ä¸åŒçš„æ˜¯ï¼ŒKeychain çš„æ•°æ®æ˜¯å¯ä»¥è·¨ App è·å–çš„ï¼Œä½†æ˜¯é™äºä¸€ä¸ªå¼€å‘è€…çš„ Appï¼Œä¹Ÿå°±æ˜¯éœ€è¦ç¡®ä¿è¿™äº› App æ‰€å±çš„ Team ID æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªä¹Ÿæ˜¯App è¿›è¡Œ SSO ç™»å½•çš„åŸºç¡€ï¼Œæ¯”å¦‚çŸ¥ä¹æ—¥æŠ¥ä½¿ç”¨çŸ¥ä¹ä¸» App ç™»å½•ä¹Ÿæ˜¯åŸºäºæ­¤åŸç†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/0L2MA23.png&#34; alt=&#34;shared items&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨éœ€è¦è¿›è¡Œ Keychain å…±äº«çš„ App å†…å¼€å¯ Keychain Sharing çš„èƒ½åŠ›ï¼Œæ‰€å±åŒä¸€ä¸ª Team ID ä¸‹çš„ App æœ¬èº«éƒ½å¯ä»¥è¯»å–è¯¥ Keychain çš„å†…å®¹ï¼Œç±»ä¼¼äº AppGroupï¼Œè¿™é‡Œä¹Ÿä¼šäº§ç”Ÿ Keychain Groupã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Allows this application to share passwords from its keychain with other applications made by your team.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DJsInJb.png&#34; alt=&#34;Keychain Sharing&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒæ–‡æ¡£&#34;&gt;å‚è€ƒæ–‡æ¡£&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/foundation/userdefaults&#34;&gt;https://developer.apple.com/documentation/foundation/userdefaults&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.reddit.com/r/jailbreak/comments/2qpqi9/ios_812_has_protection_against_plist_file_editing/&#34;&gt;https://www.reddit.com/r/jailbreak/comments/2qpqi9/ios_812_has_protection_against_plist_file_editing/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://iphonedevwiki.net/index.php/PreferenceBundles&#34;&gt;http://iphonedevwiki.net/index.php/PreferenceBundles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html&#34;&gt;https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/security/keychain_services&#34;&gt;https://developer.apple.com/documentation/security/keychain_services&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/soffes/SAMKeychain&#34;&gt;https://github.com/soffes/SAMKeychain&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps&#34;&gt;https://developer.apple.com/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>å¦‚ä½•åˆ¶ä½œ Send to 2Do çš„ Safari ä¹¦ç­¾</title>
      <link>https://hechen.xyz/post/send-to-2do/</link>
      <pubDate>Mon, 26 Nov 2018 14:59:50 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/send-to-2do/</guid>
      
        <description>

&lt;p&gt;ä½¿ç”¨é¼ æ ‡æ‹–æ‹½ä¸‹é¢è¿™ä¸ªé“¾æ¥åˆ°ä½ çš„ Favorites Bar ä¸Šï¼Œé»˜è®¤ç‚¹å‡»è¡Œä¸ºå®é™…ä¸Šæ˜¯æ¨¡æ‹Ÿåœ¨å½“å‰é¡µé¢è¿›è¡Œå¯¼èˆªï¼Œè€Œç›®æ ‡åœ°å€ç”± &lt;code&gt;avascript:window.location&lt;/code&gt; æ¥æŒ‡å®šï¼Œç›®æ ‡åœ°å€å®é™…ä¸Šå°±æ˜¯å„ä¸ª App çš„ URL Schemeã€‚
ä½ å¯ä»¥åœ¨ &lt;a href=&#34;https://app-talk.com/&#34;&gt;AppTalk&lt;/a&gt;æŸ¥çœ‹å„ä¸ªä¸»æµ App çš„ URL Schemeã€‚&lt;/p&gt;

&lt;h2 id=&#34;2do&#34;&gt;2Do&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;javascript:window.location=&#34;&gt;Send to 2Do&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åç¼–è¾‘åœ°å€ï¼Œå°†å…¶æ›¿æ¢ä¸ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;javascript:window.location=&amp;#39;twodo://x-callback-url/add?task=&amp;#39;+encodeURIComponent(document.title)+&amp;#39;&amp;amp;note=&amp;#39;+encodeURIComponent(window.location)+&amp;#39;&amp;amp;action=url:&amp;#39;+encodeURIComponent(window.location)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/7M0xN1g.jpg&#34; alt=&#34;Change Value&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæœ¬è´¨ä¸Šæ˜¯æ‰§è¡Œäº†ä¸€æ®µ JS ä»£ç ï¼Œç»“åˆå½“å‰æ–‡æ¡£çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè°ƒç”¨ URL Schemeï¼Œå…¶ä¸­&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;document.title&lt;/code&gt; ä¸ºæ ‡é¢˜&lt;/li&gt;
&lt;li&gt;&lt;code&gt;window.location&lt;/code&gt; ä¸ºå½“å‰é¡µé¢é“¾æ¥&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;things&#34;&gt;Things&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ Things çš„ URL Scheme çš„è§„åˆ™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;c1&#34;&gt;/// add a todo due when tomorrow
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;things&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;///&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iamtitle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;notes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iamnotes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;when&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tomorrow&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;things:///add?title=iamtitle&amp;amp;notes=iamnotes&amp;amp;when=tomorrow&#34;&gt;Add a todo to Things&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ä½ å¯ä»¥æŠŠé“¾æ¥å†…å®¹æ”¹ä¸ºæ”¯æŒ Send To Thingsï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;nx&#34;&gt;javascript&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;things:///add?title=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;amp;notes=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;amp;when=today&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;omnifocus&#34;&gt;OmniFocus&lt;/h2&gt;

&lt;p&gt;åŒç†ï¼Œå¯ä»¥æœ‰ Send To OmniFocus ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;nx&#34;&gt;javascript&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;omnifocus:///add?note=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;amp;name=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;things:///add?title=iamtitle&amp;amp;notes=iamnotes&amp;amp;when=tomorrow&#34;&gt;Add a todo to OmniFocus&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æˆ–è€…ç›´æ¥å» &lt;a href=&#34;http://people.omnigroup.com/kc/OmniFocus/SendToOmniFocusBookmarklet.html&#34;&gt;OmniFocus é¡µé¢&lt;/a&gt; ç”¨ç›¸åŒæ–¹å¼æŠŠèµ·å·²ç»è®¾ç½®å¥½æ­£ç¡® Value çš„é“¾æ¥æ‹–åˆ°ä¸Šæ–¹å·¥å…·æ¡ä¸Šå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ æ‰¾ä¸åˆ° Favorites Barï¼Œç‚¹å‡» Safari èœå•æ ä¸Šçš„ View èœå•å°±èƒ½çœ‹åˆ°ï¼ˆä¸­æ–‡ç³»ç»Ÿå«è§†å›¾ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ZBqkn4Z.jpg&#34; alt=&#34;Favorites Bar&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
  </channel>
</rss>
