<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>I make stuff</title>
    <link>https://hechen.xyz/</link>
    <description>Recent content on I make stuff</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 30 Mar 2019 11:29:54 +0800</lastBuildDate>
    
        <atom:link href="https://hechen.xyz/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>About</title>
      <link>https://hechen.xyz/about/</link>
      <pubDate>Sun, 20 Aug 2017 21:38:52 +0800</pubDate>
      
      <guid>https://hechen.xyz/about/</guid>
      
        <description>&lt;p&gt;æ›¾ç»çš„ C++ å¼€å‘&lt;/p&gt;

&lt;p&gt;ç›®å‰åš iOS å¼€å‘ï¼Œå¶å°”åšä¸ª mac å¼€å‘&lt;/p&gt;

&lt;p&gt;å¶å°”å†™ç‚¹ Pythonï¼ŒRuby&lt;/p&gt;

&lt;p&gt;æ‰“æ‚ä¸­&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å†™ä¸ªå°å·¥å…· Swwwitch</title>
      <link>https://hechen.xyz/post/swwwitch/</link>
      <pubDate>Sat, 30 Mar 2019 11:29:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/swwwitch/</guid>
      
        <description>

&lt;p&gt;æœ€è¿‘çœ‹åˆ°å¼€å‘åœˆæŸçƒ­ç‚¹ï¼Œåšäº†ä¸ªå°å·¥å…·ï¼Œæ€»ç»“ä¸‹æœ€è¿‘çš„å‡ ä¸ª CocoaApp ä¸Šçš„åŠŸèƒ½ï¼Œä»…åšç»ƒæ‰‹ã€‚ç°åœ¨åªåŒ…å«äº†ä¸¤ä¸ªå¼€å…³ï¼šåˆ‡æ¢ç³»ç»Ÿä¸»é¢˜å’Œéšè—æ¡Œé¢ icon çš„åŠŸèƒ½ã€‚ä»æˆ‘ä¸ªäººè€Œè¨€ï¼Œå¦‚æœä½ æœ‰ Alfred ä»¥åŠ LaunchBar è¿™äº›å·¥å…·åœ¨æ‰‹ï¼Œç±»ä¼¼è¿™ç§å·¥å…·å¯¹ä½ æ¥è¯´æ²¡æœ‰å¿…è¦ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/U9RTmVU.png&#34; alt=&#34;Swwwitch-c500&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;åŠŸèƒ½ç‚¹&#34;&gt;åŠŸèƒ½ç‚¹&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;åˆ‡æ¢ç³»ç»Ÿä¸»é¢˜&lt;/li&gt;
&lt;li&gt;æ˜¾å¼æˆ–è€…å°è±¡æ¡Œé¢å›¾æ ‡&lt;/li&gt;
&lt;li&gt;å®Œå…¨çš„ Menu Only åº”ç”¨&lt;/li&gt;
&lt;li&gt;å¼€æœºè‡ªå¯åŠ¨&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…³äºç¬¬ä¸‰ç‚¹çš„å®ç°åœ¨&lt;a href=&#34;https://hechen.xyz/post/dockless-cocoaapps/&#34;&gt;å¦å¤–ä¸€ç¯‡æ–‡ç« &lt;/a&gt;æœ‰è®²è¿‡ï¼Œç¬¬å››ç‚¹çš„å®ç°åœ¨ &lt;a href=&#34;https://hechen.xyz/post/autostartwhenlogin/&#34;&gt;è¿™ä¸€ç¯‡&lt;/a&gt; ä¸­æœ‰è®²ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç³»ç»Ÿä¸»é¢˜åˆ‡æ¢&#34;&gt;ç³»ç»Ÿä¸»é¢˜åˆ‡æ¢&lt;/h3&gt;

&lt;p&gt;å…³äºç³»ç»Ÿä¸»é¢˜åˆ‡æ¢ä¸»è¦æ˜¯åŸºäº AppleScript æ‰€å†™ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;System Events&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;appearance&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;preferences&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;dark&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;dark&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mode&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½ å®Œå…¨å¯ä»¥è‡ªè¡Œæ‰§è¡Œè¿™æ®µ Apple Script æ¥åˆ‡æ¢ä¸»é¢˜ï¼Œä½ å¯ä»¥ç‚¹å‡»ä¸‹é¢é“¾æ¥å°è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;applescript://com.apple.scripteditor?action=new&amp;amp;name=Change%20Theme&amp;amp;script=tell%20application%20%22System%20Events%22%0D%09tell%20appearance%20preferences%0D%09%09set%20dark%20mode%20to%20not%20dark%20mode%0D%09end%20tell%0Dend%20tell&#34;&gt;Click Here to run&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;æ˜¾å¼-éšè—æ¡Œé¢å›¾æ ‡&#34;&gt;æ˜¾å¼/éšè—æ¡Œé¢å›¾æ ‡&lt;/h3&gt;

&lt;p&gt;å…³äºéšè—æ¡Œé¢å›¾æ ‡ï¼Œå®é™…ä¸Šæ˜¯æ‰§è¡Œç³»ç»Ÿçš„ Command æ¥å®ç°çš„ï¼ŒCocoa åº”ç”¨å¯ä»¥æ˜¾å¼ä½¿ç”¨ Processï¼ˆä¹Ÿå°±æ˜¯ NSTaskï¼‰æ¥æ‰§è¡Œä»»åŠ¡ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡ NSTask æ‰§è¡Œäº†ä¸€æ®µå¦‚ä¸‹çš„å‘½ä»¤è¡Œè¾¾åˆ°çš„ç›®çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;defaults write com.apple.finder CreateDesktop &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;
killall Finder&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½ å¯ä»¥è‡ªè¡Œç‚¹å‡»ä»¥ä¸‹é“¾æ¥å°è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;applescript://com.apple.scripteditor?action=new&amp;amp;name=Hide%20Desktop%20Icons&amp;amp;script=tell%20application%20%22Terminal%22%0D%20%20%20%20do%20script%20%22defaults%20write%20com.apple.finder%20CreateDesktop%20false%3b%20killall%20Finder%22%0Dend%20tell&#34;&gt;Click here to hide Desktop Icons&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;applescript://com.apple.scripteditor?action=new&amp;amp;name=Hide%20Desktop%20Icons&amp;amp;script=tell%20application%20%22Terminal%22%0D%20%20%20%20do%20script%20%22defaults%20write%20com.apple.finder%20CreateDesktop%20true%3b%20killall%20Finder%22%0Dend%20tell&#34;&gt;Click here to show Desktop Icons&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ„Ÿå…´è¶£å¯ä»¥å»çœ‹ä¸‹ä»£ç ï¼Œé¢†ä¼šæ„æ€å³å¯ã€‚
&lt;a href=&#34;https://github.com/hechen/Swwwitch/releases&#34;&gt;Releases&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;todo&#34;&gt;TODO&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Add more switch&lt;/li&gt;
&lt;li&gt;Add User-Customized switch setting&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;links&#34;&gt;Links&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://ss64.com/osx/&#34;&gt;Checkout all command lines macOS Support&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äº Mac åº”ç”¨çš„è‡ªå¯åŠ¨æ˜¯å¦‚ä½•åšåˆ°çš„</title>
      <link>https://hechen.xyz/post/autostartwhenlogin/</link>
      <pubDate>Mon, 18 Mar 2019 17:29:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/autostartwhenlogin/</guid>
      
        <description>

&lt;p&gt;å¼€æœºè‡ªå¯åŠ¨æ˜¯ Cocoa åº”ç”¨æœ€å¸¸è§çš„ä¸€ç§åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹éœ€è¦å¸¸é©» Menu çš„æœåŠ¡æ¥è¯´æ›´æ˜¯å¦‚æ­¤ï¼Œä»Šå¤©æˆ‘ä»¬å¯¹å¼€æœºå¯åŠ¨é¡¹çš„åŠŸèƒ½åŠ å…¥åšä¸ªæ¢³ç†ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;åœ¨ &lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-SW1&#34;&gt;Daemons and Services Programming Guide&lt;/a&gt; ä¸­æˆ‘ä»¬èƒ½æ‰¾åˆ°å…³äºè‡ªå¯åŠ¨é¡¹çš„å¼€å‘è¯´æ˜ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Applications can contain a helper application as a full application bundle, stored inside the main application bundle in the Contents/Library/LoginItems directory. Set either the LSUIElement or LSBackgroundOnly key in the Info.plist file of the helper applicationâ€™s bundle.&lt;/p&gt;

&lt;p&gt;Use the SMLoginItemSetEnabled function (available in OS X v10.6.6 and later) to enable a helper application. It takes two arguments, a CFStringRef containing the bundle identifier of the helper application, and a Boolean specifying the desired state. Pass true to start the helper application immediately and indicate that it should be started every time the user logs in. Pass false to terminate the helper application and indicate that it should no longer be launched when the user logs in. This function returns true if the requested change has taken effect; otherwise, it returns false. This function can be used to manage any number of helper applications.&lt;/p&gt;

&lt;p&gt;If multiple applications (for example, several applications from the same company) contain a helper application with the same bundle identifier, only the one with the greatest bundle version number is launched. Any of the applications that contain a copy of the helper application can enable and disable it.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æ–‡æ¡£ä¸­æè¿°çš„é‚£æ ·ï¼Œä½ å¯ä»¥åœ¨ä¸»åº”ç”¨ä¸­åŒ…å«ä¸€ä¸ªè¾…åŠ©åº”ç”¨ï¼Œå¹¶ä¸”è·¯å¾„å›ºå®šä¸º &lt;code&gt;Contents/Library/LoginItems&lt;/code&gt;ï¼Œ&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨ &lt;code&gt;Shared File List&lt;/code&gt;ï¼Œå…¶ç›¸å…³ API åœ¨ &lt;a href=&#34;https://developer.apple.com/documentation/coreservices/launch_services&#34;&gt;Launch Services Reference&lt;/a&gt; èƒ½æ‰¾åˆ°ï¼Œå…¶å®å…·ä½“çš„ API å°±åœ¨ &lt;code&gt;LSSharedFileList.h&lt;/code&gt; ä¸­ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ²™ç›’åº”ç”¨&#34;&gt;æ²™ç›’åº”ç”¨&lt;/h2&gt;

&lt;p&gt;åœ¨å®˜æ–¹æ–‡æ¡£ &lt;a href=&#34;http://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html#//apple_ref/doc/uid/TP40011183-CH4-SW3&#34;&gt;App Sandbox Design Guide&lt;/a&gt; ä¸­æœ‰å¦‚ä¸‹é’ˆå¯¹å¼€æœºè‡ªå¯åŠ¨çš„æè¿°ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;To create a login item for your sandboxed app, use the SMLoginItemSetEnabled function (declared in ServiceManagement/SMLoginItem.h) as described in Adding Login Items Using the Service Management Framework.&lt;/p&gt;

&lt;p&gt;(With App Sandbox, you cannot create a login item using functions in the LSSharedFileList.h header file. For example, you cannot use the function LSSharedFileListInsertItemURL. Nor can you manipulate the state of Launch Services, such as by using the function LSRegisterURL.)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å…¶å®ä¸Šé¢æåŠçš„æ–¹å¼ä¹Ÿå°±æ˜¯åœ¨ç¬¬ä¸€å°èŠ‚ä¸­æåˆ°çš„ä¸¤ç§æ–¹å¼ä¸­çš„ç¬¬ä¸€ç§ï¼Œè€Œä¸”ç¬¬äºŒç§å…±äº«æ–‡ä»¶åˆ—è¡¨çš„ API æ˜¯æ— æ³•é’ˆå¯¹æ²™ç›’åº”ç”¨ä½¿ç”¨çš„ï¼Œè€Œä¸” &lt;code&gt;LSSharedFileList.h&lt;/code&gt; å·²ç»åœ¨ 10.10 ç³»ç»Ÿç‰ˆæœ¬ä¹‹åæ ‡è®°ä¸ºåºŸå¼ƒäº†ã€‚&lt;/p&gt;

&lt;p&gt;ç»¼åˆä¸Šé¢çš„è¯´æ˜ï¼Œç›®å‰åœ¨ macOS ä¸ŠåŠ å…¥è‡ªå¯åŠ¨é¡¹çš„æ–¹å¼ä¹Ÿæœ‰ä¸”ä»…æœ‰ä¸€ç§æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åŠ å…¥è¾…åŠ©åº”ç”¨æ¥å¼•å¯¼ä¸»åº”ç”¨å¯åŠ¨ã€‚æ•´ä¸ªæ€è·¯åº”è¯¥æ˜¯å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å°†è¾…åŠ©åº”ç”¨åŠ å…¥ç³»ç»Ÿå¯åŠ¨é¡¹ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿå¯åŠ¨ï¼Œè¿›è€Œè‡ªå¯åŠ¨è¾…åŠ©åº”ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;è¾…åŠ©åº”ç”¨å¼•å¯¼ä¸»åº”ç”¨å¯åŠ¨ï¼›&lt;/li&gt;
&lt;li&gt;ä¸»åº”ç”¨å¯åŠ¨å®Œæˆï¼Œå¹²æ‰è¾…åŠ©åº”ç”¨&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ˜¯çš„ï¼Œå°±æ˜¯è¿™ä¹ˆç»•ï¼Œå…·ä½“è¦æ€ä¹ˆåšå‘¢ï¼Ÿ ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;åˆ›å»ºè¾…åŠ©åº”ç”¨ï¼Œå…¶ä½œä¸ºä¸»åº”ç”¨çš„ Target æ–°å»ºå‡ºæ¥&lt;/li&gt;
&lt;li&gt;å°†è¾…åŠ©åº”ç”¨çš„ Info.plist æ–‡ä»¶ä¸­æŒ‡å®šå±æ€§ &lt;code&gt;LSBackgroundOnly&lt;/code&gt; ä¸º &lt;code&gt;YES&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨è¾…åŠ©åº”ç”¨ Target çš„ build setting ä¸­è®¾ç½® &lt;code&gt;Skip Install&lt;/code&gt; ä¸º &lt;code&gt;YES&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨ä¸»åº”ç”¨çš„ build phase ä¸­åŠ å…¥ &lt;code&gt;Copy Files&lt;/code&gt; é˜¶æ®µï¼Œ

&lt;ul&gt;
&lt;li&gt;æŒ‡å®š destination ä¸º Wrapper&lt;/li&gt;
&lt;li&gt;æŒ‡å®š subpath ä¸º &lt;code&gt;Contents/Library/LoginItems&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŠ å…¥è¾…åŠ©åº”ç”¨çš„ Product&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¤§å®¶ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™äº›æ­¥éª¤çš„æ—¶å€™æ˜¯ä¸æ˜¯å¤´éƒ½å¤§äº†ï¼Œæ²¡é”™ï¼Œè¿™ä»…ä»…æ˜¯å†™ä»£ç ä¹‹å‰çš„å‚æ•°é…ç½®å·¥ä½œã€‚&lt;/p&gt;

&lt;h2 id=&#34;å¯åŠ¨é¡¹æ”¯æŒ&#34;&gt;å¯åŠ¨é¡¹æ”¯æŒ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fJUpG26.png&#34; alt=&#34;Add New Target&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æŒ‡å®š CocoaApp&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/tXJDr1Y.png&#34; alt=&#34;Specify Cocoa App&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æŒ‡å®š Product ID ä¸º &lt;code&gt;StartAtLoginLauncher&lt;/code&gt;,è¯¥ Target çš„ BundleID ä¸º &lt;code&gt;app.chen.osx.demo.StartAtLoginLauncher&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/uj2yhht.png&#34; alt=&#34;Modify BundleID&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åï¼Œä¿®æ”¹ StartAtLoginLauncher çš„ Info.plist æ–‡ä»¶ï¼ŒæŒ‡å®š &lt;code&gt;LSBackgroundOnly&lt;/code&gt; ä¸º YES
&lt;img src=&#34;https://i.imgur.com/BqNsFm7.png&#34; alt=&#34;BackgroundOnly&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¿®æ”¹ StartAtLoginLauncher Target çš„ Build Setting ä¸­ &lt;code&gt;Skip Install&lt;/code&gt; ä¸º &lt;code&gt;YES&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qKZzECK.png&#34; alt=&#34;Skill Install&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç´§æ¥ç€æ˜¯è®¾ç½®ä¸»åº”ç”¨ StartAtLogin Targetï¼Œä¸ºå…¶åŠ å…¥ Copy Files Build Phaseï¼Œå¦‚ä¸‹è®¾ç½®ï¼Œè·¯å¾„æ˜¯å›ºå®šçš„ &lt;code&gt;Contents/Library/LoginItems&lt;/code&gt;ï¼ŒCopy å¯¹è±¡ä¸º &lt;code&gt;StartAtLoginLauncher&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wfaxgmZ.png&#34; alt=&#34;Copy files Build Phase&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è‡³æ­¤ï¼Œæ‰€æœ‰è®¾ç½®å‡å·²å®Œæˆï¼Œä½ å¯ä»¥ Command+B äº§å‡ºä¸€ä¸ª Product çœ‹çœ‹ï¼Œåœ¨ä¸»åº”ç”¨é‡Œæ˜¯å¦å·²ç»å°†å¯åŠ¨é¡¹ç›®åŒ…å«è¿›å»äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/XfyYMG1.png&#34; alt=&#34;Build Product&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/OGXYmxw.png&#34; alt=&#34;Reveal Package Content&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿˜æ²¡æœ‰ç»“æŸï¼Œå› ä¸º StartAtLoginLauncher åº”ç”¨æ˜¯æŒ‡åœ¨åå°è¿è¡Œï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¾…åŠ©åº”ç”¨å¯åŠ¨çš„æ—¶å€™å¼¹å‡º UIï¼Œå› æ­¤è¿˜éœ€è¦åˆ é™¤ç›¸å…³çš„ UI ä»£ç ï¼Œåœ¨ Main.storyboard ä¸­ï¼Œåˆ é™¤ Window ä»¥åŠ ViewControllerï¼Œåªä¿ç•™ Application Scene å³å¯&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/poclDG1.png&#34; alt=&#34;Demo Start When Login&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è‡³æ­¤ï¼Œæ‰€æœ‰å†™ä»£ç ä¹‹å‰çš„å·¥ä½œå·²ç»å®Œæˆï¼Œæˆ‘ä»¬å·²ç»ä¸ºä¸»åº”ç”¨ç”Ÿæˆäº†å¯¹åº”çš„è¾…åŠ©åº”ç”¨ï¼Œå¸®åŠ©å…¶å¯åŠ¨ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åŠ å…¥å¯åŠ¨é¡¹&#34;&gt;åŠ å…¥å¯åŠ¨é¡¹&lt;/h3&gt;

&lt;p&gt;ä»£ç æ ¸å¿ƒé€»è¾‘åŒ…å«ä¸¤éƒ¨åˆ†ï¼š
1. ä¸»åº”ç”¨å¯åŠ¨ä¹‹åæ€æ‰è¾…åŠ©åº”ç”¨ï¼Œå› ä¸ºå…¶å·²ç»å®Œæˆäº†ä½¿å‘½ï¼›
2. åŠ©åº”ç”¨å¯åŠ¨ä¹‹åå°†ä¸»åº”ç”¨å”¤é†’&lt;/p&gt;

&lt;h4 id=&#34;ä¸»åº”ç”¨&#34;&gt;ä¸»åº”ç”¨&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;extension&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;killLauncher&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;killLauncher&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;applicationDidFinishLaunching&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aNotification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Insert code here to initialize your application&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;launcherAppId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLoginLauncher&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;runningApps&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSWorkspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApplications&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundleIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;launcherAppId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;isEmpty&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;DistributedNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;killLauncher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                         &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundleIdentifier&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸»åº”ç”¨åœ¨å®Œæˆå¯åŠ¨ä¹‹åï¼Œæ£€æŸ¥å½“å‰æ­£åœ¨æ‰§è¡Œçš„ Application åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«äº†æˆ‘ä»¬çš„è¾…åŠ©åº”ç”¨ï¼Œå¦‚æœåŒ…å«ï¼Œå‘é€é€šçŸ¥ï¼Œè®©å…¶ Terminate&lt;/p&gt;

&lt;h4 id=&#34;è¾…åŠ©åº”ç”¨&#34;&gt;è¾…åŠ©åº”ç”¨&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;applicationDidFinishLaunching&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aNotification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Notification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mainAppIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLogin&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;runningApps&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSWorkspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApplications&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runningApps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundleIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mainAppIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;isEmpty&lt;/span&gt;
        
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isRunning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;DistributedNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addObserver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                                &lt;span class=&#34;n&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;#selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;terminate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
                                                                &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;killLauncher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                                &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mainAppIdentifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bundlePath&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;components&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pathComponents&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;removeLast&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;removeLast&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;removeLast&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;MacOS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;StartAtLogin&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//main app name&lt;/span&gt;
            
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newPath&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;withComponents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;            
            &lt;span class=&#34;n&#34;&gt;NSWorkspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;launchApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;terminate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¾…åŠ©åº”ç”¨å¯åŠ¨ä¹‹åï¼ŒæŸ¥è¯¢ä¸»åº”ç”¨æ˜¯å¦å·²ç»è¿è¡Œï¼Œå¦‚æœå·²ç»è¿è¡Œï¼Œå°±è‡ªè§‰å¹²æ‰è‡ªå·±ã€‚å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œæˆ‘ä»¬å”¤é†’ä¸» Appï¼Œåœ¨æ­¤ä¹‹å‰è®¾ç½®ç›‘å¬ï¼Œç­‰åˆ°ä¸»åº”ç”¨å¯åŠ¨ä¹‹åä¼šå‘ç»™è‡ªå·±é€šçŸ¥ï¼Œç„¶åå†è‡ªæ€ ğŸ˜‚&lt;/p&gt;

&lt;p&gt;è¿™å…¶ä¸­æˆ‘ä»¬ä½¿ç”¨äº† DistributedNotificationCenterï¼Œå’Œå¹³æ—¶æˆ‘ä»¬ä½¿ç”¨çš„ NotificationCenter ä¸åŒï¼Œå…¶å‘å‡ºçš„é€šçŸ¥æ˜¯è·¨ä»»åŠ¡çš„ï¼Œä¹Ÿå°±æ˜¯å…¶ä»–è¿›ç¨‹å¦‚æœæ³¨å†Œäº†åŒæ ·çš„é€šçŸ¥ï¼Œä¹Ÿæ˜¯èƒ½å¤Ÿæ”¶åˆ°ç›‘å¬é€šçŸ¥çš„ã€‚ ç³»ç»Ÿçš„æ—¥å¤œé—´é€šçŸ¥å°±æ˜¯è¿™ç§ç±»å‹ï¼Œå…¶ä¼šåœ¨æ‰€æœ‰ Task ä¹‹é—´è¿›è¡Œå¹¿æ’­ï¼Œè¯¥é€šçŸ¥çš„ NotificationName æ˜¯ &lt;code&gt;AppleInterfaceThemeChangedNotification&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;reigsterThemeChangedNotification&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;DistributedNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addObserver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;#selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;selectorHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;notificationName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kr&#34;&gt;@objc&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;selectorHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Theme Changed!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;		
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å› æ­¤ Demo ä¸­çš„é€šçŸ¥åå­—åªæ˜¯ç¤ºä¾‹ï¼Œå°½å¯èƒ½çš„ç¡®ä¿é€šçŸ¥çš„å”¯ä¸€æ€§ã€‚&lt;/p&gt;

&lt;h4 id=&#34;åˆ‡æ¢è‡ªå¯åŠ¨çŠ¶æ€&#34;&gt;åˆ‡æ¢è‡ªå¯åŠ¨çŠ¶æ€&lt;/h4&gt;

&lt;p&gt;å…³äºè‡ªå¯åŠ¨çŠ¶æ€çš„è®¾ç½®åŒ…å«ä¸¤ä¸ªä¸»è¦çš„ APIï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;SMCopyAllJobDictionaries&lt;/li&gt;
&lt;li&gt;SMLoginItemSetEnabled&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&#34;smcopyalljobdictionaries&#34;&gt;SMCopyAllJobDictionaries&lt;/h5&gt;

&lt;p&gt;è·å–å½“å‰æˆ‘ä»¬çš„å¯åŠ¨é¡¹è®¾ç½®æƒ…å†µæ˜¯é€šè¿‡ &lt;code&gt;SMCopyAllJobDictionaries&lt;/code&gt; æ–¹æ³•ï¼Œå¦‚ä¸‹å®šä¹‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*!
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @function SMCopyAllJobDictionaries
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @abstract
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Copy the job description dictionaries for all jobs in the given domain.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @param domain
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * The job&amp;#39;s domain (e.g. {@link kSMDomainSystemLaunchd} or
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * {@link kSMDomainUserLaunchd}).
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @result
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * A new array containing all job dictionaries, or NULL if an error occurred. 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Must be released by the caller.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @discussion
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * SMCopyAllJobDictionaries returns an array of the job description dictionaries
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * for all jobs in the given domain, or NULL if an error occurred. This routine
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * is deprecated and will be removed in a future release. There will be no
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * provided replacement.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * For the specific use of testing the state of a login item that may have been
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * enabled with SMLoginItemSetEnabled() in order to show that state to the
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * user, this function remains the recommended API. A replacement API for this
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * specific use will be provided before this function is removed.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;__OSX_AVAILABLE_BUT_DEPRECATED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__MAC_10_6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__MAC_10_10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__IPHONE_3_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__IPHONE_8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;XPC_EXPORT&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;CFArrayRef&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;SMCopyAllJobDictionaries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CFStringRef&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¯¥æ–¹æ³•è™½ç„¶æ ‡è®° 10.10 ç³»ç»Ÿå¼€å§‹åºŸå¼ƒï¼Œä½†æ˜¯åˆ°ç›®å‰çš„ 10.14 ç‰ˆæœ¬è¿˜æœªæä¾›æ›¿æ¢çš„ APIï¼Œæ‰€ä»¥è¿˜æ˜¯å¯ä»¥ç»§ç»­ä½¿ç”¨çš„ï¼ˆæ–‡æ¡£æ‰€è¯´ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ å…¥çš„å‚æ•°å¯ä»¥ç†è§£å°±æ˜¯æŒ‡å®šè·å–ä»»åŠ¡ç±»å‹çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ kSMDomainUserLaunchd æ¥è·å–æ‰€æœ‰åŠ å…¥åˆ°ç”¨æˆ·å¯åŠ¨é¡¹åˆ—è¡¨ä¸­çš„ä»»åŠ¡ï¼Œå…¶ä¸­æ¯ä¸€ä¸ª Job éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼Œå†…å®¹å¤§æ¦‚ç±»ä¼¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/KDLqn9a.png&#34; alt=&#34;Launch Job-c500&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ Label æ¥æŸ¥æ‰¾æˆ‘ä»¬éœ€è¦çš„ Jobï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLoginLauncher&amp;#34;&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;jobs&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SMCopyAllJobDictionaries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kSMDomainUserLaunchd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;takeRetainedValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;AnyObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;autoLaunchRegistered&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jobs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;contains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;where&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Label&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h5 id=&#34;smloginitemsetenabled&#34;&gt;SMLoginItemSetEnabled&lt;/h5&gt;

&lt;p&gt;è®¾ç½®å¯åŠ¨é¡¹æ˜¯é€šè¿‡ &lt;code&gt;SMLoginItemSetEnabled&lt;/code&gt; æ–¹æ³•ï¼Œå‚æ•°ä¸ºè¦è‡ªå¯åŠ¨çš„åº”ç”¨çš„ BundleID ä»¥åŠè‡ªå¯åŠ¨çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;è¦è®°ä½ï¼Œè¿™é‡Œæˆ‘ä»¬è¿›è¡Œæ›´æ”¹çš„æ˜¯é’ˆå¯¹ Launch Helper çš„è®¾ç½®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;startAtLogin&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// ....&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;app.chen.osx.demo.StartAtLoginLauncher&amp;#34;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;SMLoginItemSetEnabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;launchHelperIdentifier&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CFString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;startAtLogin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;

&lt;p&gt;è‡³æ­¤ï¼Œå…³äºè‡ªå¯åŠ¨é¡¹çš„å·¥ä½œå·²ç»å®Œæˆï¼Œæƒ³è¦æµ‹è¯•ï¼Œå¯ä»¥å…ˆ Archive å‡ºä¸€ä¸ªå®‰è£…åŒ…ï¼Œç„¶åå°† Demo App æ‹–åˆ° /Applications ç›®å½•ï¼Œå¯åŠ¨ä¹‹åï¼Œè®¾ç½® Start At Login é€‰é¡¹ checked çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/szvqHoG.png&#34; alt=&#34;StartAtLogin&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸æ”¾å¿ƒï¼Œé€€å‡ºç™»å½•ä¹‹å‰ï¼ŒQuit æ‰æµ‹è¯•åº”ç”¨ï¼Œå¹¶ä¸”å–æ¶ˆ Reopen é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/5KrpAuU.png&#34; alt=&#34;Not Reopen&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åï¼ŒLog Out å½“å‰ç”¨æˆ·ï¼Œä¹‹åå†æ¬¡ç™»å½•è¿›æ¥ï¼Œçœ‹ Demo åº”ç”¨æ˜¯å¦è¢«å¯åŠ¨äº†ã€‚åœ¨æˆ‘çš„ç”µè„‘ä¸Šæµ‹è¯•å†æ¬¡å¯åŠ¨ä¹‹å Demo åº”ç”¨å°±ä¼šè¢«é¡ºåˆ©å¯åŠ¨äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/XJsUmVS.png&#34; alt=&#34;Desktop&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­è¿˜æœ‰ä¸€ç‚¹æ˜¯å…³äº Target çš„ Sandbox å±æ€§ï¼Œä½œä¸ºç›®å‰å”¯ä¸€å¯è¡Œçš„è‡ªå¯åŠ¨å®˜æ–¹æ–¹æ¡ˆï¼Œå…¶åŒæ—¶é€‚ç”¨äºæ²™ç›’åº”ç”¨å’Œéæ²™ç›’åº”ç”¨çš„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å·¥å…·æ¨è&#34;&gt;å·¥å…·æ¨è&lt;/h2&gt;

&lt;p&gt;æ¨èä¸‹ Github ä¸Š &lt;a href=&#34;https://github.com/sindresorhus&#34;&gt;sindresorhus&lt;/a&gt;
å†™çš„å°å·¥å…· &lt;a href=&#34;https://github.com/sindresorhus/LaunchAtLogin&#34;&gt;LaunchAtLogin&lt;/a&gt;ï¼Œç®€åŒ–äº†ä¸Šè¿°çš„æ­¥éª¤ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒé“¾æ¥&#34;&gt;å‚è€ƒé“¾æ¥&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/Security/Conceptual/AppSandboxDesignGuide/AboutAppSandbox/AboutAppSandbox.html#//apple_ref/doc/uid/TP40011183-CH1-SW1&#34;&gt;App Sandbox Design Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/Introduction.html#//apple_ref/doc/uid/10000172i-SW1-SW1&#34;&gt;Daemons and Services Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/Carbon/Conceptual/LaunchServicesConcepts/LSCIntro/LSCIntro.html#//apple_ref/doc/uid/TP30000999&#34;&gt;Launch Services Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>Mac å¹³å°ä¸Šé‚£äº› Dockless çš„ App éƒ½æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</title>
      <link>https://hechen.xyz/post/dockless-cocoaapps/</link>
      <pubDate>Wed, 13 Mar 2019 17:29:54 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/dockless-cocoaapps/</guid>
      
        <description>

&lt;p&gt;åœ¨ Mac å¹³å°ä½ åˆ¤æ–­ä¸€ä¸ªå·¥å…·å¥½ç”¨ä¸å¥½ç”¨ï¼Œå¸å¼•ä¸å¸å¼•ä½ ï¼Œå…¶ä¸­ Menu Only ä¹Ÿæ˜¯å¸å¼•ä½ çš„ä¸€ç‚¹ï¼Œä¸éœ€è¦å¸¸é©» Dock æ ï¼Œåœ¨å¤š workspace çš„æ—¶å€™ä¹Ÿä¸å½±å“æ­£å¸¸ä½¿ç”¨ã€‚å°¤å…¶æ˜¯é’ˆå¯¹ä¸€äº›éœ€è¦ä¾¿æ·æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„ Applicationï¼Œ menu bar çš„åŠŸèƒ½å¿…ä¸å¯å°‘ã€‚æœ¬æ–‡ä¸»è¦ç®€å•ä»‹ç»å…³é”®çš„å‡ ä¸ªæ“ä½œï¼Œåšä¸ªè®°å½•ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h1 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h1&gt;

&lt;p&gt;ä»¥ &lt;a href=&#34;https://www.shimovpn.com/&#34;&gt;Shimo&lt;/a&gt; è¿™ä¸ª App ä¸¾ä¾‹ï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/vT7EEVK.png&#34; alt=&#34;Shimo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨å…¶è®¾ç½®é€‰é¡¹å¡ä¸­èƒ½çœ‹åˆ° Show Shimo in çš„é€‰é¡¹èœå•ï¼Œå…¶ä¸­æœ‰ä¸‰é¡¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Menubar only&lt;/li&gt;
&lt;li&gt;Dock only&lt;/li&gt;
&lt;li&gt;Menubar &amp;amp; Dock&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/WywIVkV.png&#34; alt=&#34;Shimo Menu&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¹Ÿæ˜¯å¸¸è§çš„ Cocoa åº”ç”¨çš„æ¨¡å¼æ”¯æŒï¼Œå¾ˆå¤šå¸¸è§çš„ App éƒ½æ”¯æŒï¼Œæ¯”å¦‚ DayOneï¼ŒDashï¼ŒTodoist ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ioUvpNw.png&#34; alt=&#34;Dash&#34; /&gt;
&lt;img src=&#34;https://i.imgur.com/ORYAEcZ.png&#34; alt=&#34;Todoist&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶å®æ ¸å¿ƒåŠŸèƒ½æœ‰ä¸¤ç‚¹ï¼š
1. å¯ä»¥æ˜¾ç¤ºæˆ–è€…éšè— Dock å›¾æ ‡ï¼›
2. å¯ä»¥æ˜¾ç¤ºæˆ–è€…éšè— Menu èœå•è¿™ä¸¤è€…çš„ç»„åˆã€‚&lt;/p&gt;

&lt;h1 id=&#34;æ ¸å¿ƒæ­¥éª¤&#34;&gt;æ ¸å¿ƒæ­¥éª¤&lt;/h1&gt;

&lt;h2 id=&#34;dock&#34;&gt;Dock&lt;/h2&gt;

&lt;p&gt;æ™®é€šçš„ Cocoa Application åˆ›å»ºä¹‹åï¼Œé»˜è®¤éƒ½æ˜¯ Dock ä¸Šå±•ç¤ºçš„ï¼Œå¦‚æœæƒ³éšè— Dock å›¾æ ‡ï¼Œé¦–å…ˆå®ƒéœ€è¦æœ‰è¿™ä¸ªèƒ½åŠ›ï¼Œè¿™ä¸ªèƒ½åŠ›æ˜¯é€šè¿‡ info.plist æ–‡ä»¶ä¸­çš„ Key æ¥æŒ‡å®šçš„ï¼Œè¿™ä¸ª Key å°±æ˜¯ &lt;code&gt;LSUIElement&lt;/code&gt;ï¼Œæˆ‘ä»¬å°†å…¶å€¼è®¾ç½®ä¸º true&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plist&#34; data-lang=&#34;plist&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plist&#34; data-lang=&#34;plist&#34;&gt;	&amp;lt;key&amp;gt;LSUIElement&amp;lt;/key&amp;gt;
	&amp;lt;true/&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨å¯è§†åŒ–å±•ç¤º plist çš„æ—¶å€™èƒ½çœ‹åˆ°é’ˆå¯¹è¯¥ Key çš„æè¿°æ˜¯æ ‡è¯† Application is agent(UIElement)&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ef3w8TR.png&#34; alt=&#34;plist&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹‹åï¼Œå†æ¬¡æ‰“å¼€ Appï¼Œä¼šå‘ç° Dock ä¸Šå·²ç»çœ‹ä¸åˆ°è¯¥åº”ç”¨çš„å›¾æ ‡äº†ï¼Œè¿™å°±æ˜¯ UIElement çš„ä½œç”¨ï¼Œå…¶å®é™…ä¸Šå°±æ˜¯å£°æ˜æˆ‘ä»¬çš„ Cocoa App æ˜¯ UIElementï¼ˆä¹Ÿå³ agentï¼‰ applicationï¼ŒDock ä¸æ˜¾ç¤ºï¼Œå…è®¸æœ‰ä¸€å®šçš„ç”¨æˆ·ç•Œé¢ã€‚åœ¨æ–¹æ³• &lt;code&gt;TransformProcessType&lt;/code&gt; çš„å¤´æ–‡ä»¶ä¸­èƒ½çœ‹åˆ° Cocoa Application çš„å‡ ç§å¸¸è§ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  TransformProcessType()
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  Summary:
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    Changes the &amp;#39;type&amp;#39; of the process specified in the psn parameter.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *     The type is specified in the transformState parameter.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  Discussion:
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    Given a psn for an application, this call transforms that
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application into the given type.  Foreground applications have a
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    menu bar and appear in the Dock.  Background applications do not
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    appear in the Dock, do not have a menu bar ( and should not have
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    windows or other user interface ).  UIElement applications do not
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    have a menu bar, do not appear in the dock, but may in limited
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    circumstances present windows and user interface. If a foreground
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application is frontmost when transformed into a background
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application, it is first hidden and another application is made
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    frontmost.  A UIElement or background-only application which is
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    transformed into a foreground application is not brought to the
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    front (use SetFrontProcess() after the transform if this is
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    required) nor will it be shown if it is hidden ( even if hidden
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    automatically by being transformed into a background-only
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application ), so the caller should use ShowHideProcess() to show
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    the application after it is transformed into a foreground
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    application. Applications can only transform themselves; this
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *    call cannot change the type of another application.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;extern OSStatus 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;TransformProcessType(
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;  const ProcessSerialNumber *        psn,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;  ProcessApplicationTransformState   transformState)          AVAILABLE_MAC_OS_X_VERSION_10_3_AND_LATER;  &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸Šæ–¹çš„æ³¨é‡Šå†™çš„éå¸¸æ¸…æ¥šï¼Œæˆ‘ä»¬æ—¥å¸¸çš„ Cocoa Application ä¸»è¦åŒ…å«ä¸‰ç§ç±»å‹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Foreground applicationsï¼Œ æ‹¥æœ‰ä¸€ä¸ª menu barï¼Œå¹¶ä¸”ä¼šåœ¨ Dock ä¸Šå‡ºç°ï¼›&lt;/li&gt;
&lt;li&gt;Background applicationsï¼ŒDock ä¸Šä¸å­˜åœ¨å¹¶ä¸”æ²¡æœ‰ menu barï¼Œå¹¶ä¸”ä¸åº”è¯¥å­˜åœ¨ä»»ä½• UI äº¤äº’ç•Œé¢ï¼ˆå»ºè®®ï¼‰&lt;/li&gt;
&lt;li&gt;UIElement applications æœ‰å’Œ Background applications ç›¸åŒçš„æƒ…å†µï¼Œä½†æ˜¯å…è®¸åœ¨æŸäº›æƒ…å†µä¸‹å±•ç¤ºç”¨æˆ·ç•Œé¢ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;é‚£ä¸Šæ–¹è¿™ä¸ªæ–¹æ³• &lt;code&gt;TransformProcessType&lt;/code&gt; å°±æ˜¯è¿›è¡Œè¿™å‡ ç§æ¨¡å¼åˆ‡æ¢çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;toggleDock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// ProcessApplicationTransformState&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;transformState&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;show&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;?&lt;/span&gt; 
    &lt;span class=&#34;c1&#34;&gt;// show to foreground application &lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// or not show to background application&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ProcessApplicationTransformState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kProcessTransformToForegroundApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
    &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ProcessApplicationTransformState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kProcessTransformToUIElementApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// transform current application type.&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;psn&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ProcessSerialNumber&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;highLongOfPSN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lowLongOfPSN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;UInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kCurrentProcess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TransformProcessType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;psn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transformState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™é‡Œå®é™…ä¸Šè¿˜æœ‰ä¸€ç§æ–¹æ¡ˆä¹Ÿæ˜¯å¾ˆå¤šå¼€å‘è€…é€‰ç”¨çš„æ–¹æ¡ˆï¼Œé€šè¿‡æŒ‡å®š App çš„&lt;code&gt;ActivationPolicy&lt;/code&gt;æ¥å®ç°çš„ï¼Œæ ¸å¿ƒçš„ API æ˜¯ &lt;code&gt;setActivationPolicy&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/* Attempts to modify the application&amp;#39;s activation policy.  In OS X 10.9, any policy may be set; prior to 10.9, the activation policy may be changed to NSApplicationActivationPolicyProhibited or NSApplicationActivationPolicyRegular, but may not be changed to NSApplicationActivationPolicyAccessory.  This returns YES if setting the activation policy is successful, and NO if not.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     */&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;available&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OSX&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;10.6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;open&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;setActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;activationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è€Œé’ˆå¯¹ ActivationPolicy çš„è¯¦ç»†è§£é‡Šä¹Ÿå¯ä»¥åœ¨å…¶å¤´æ–‡ä»¶æ³¨é‡Šä¸­çœ‹åˆ°ä¸åŒçš„ activation policy æ„å‘³ç€ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;   &lt;span class=&#34;cm&#34;&gt;/* The following activation policies control whether and how an application may be activated.  They are determined by the Info.plist. */&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ActivationPolicy&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;cm&#34;&gt;/* The application is an ordinary app that appears in the Dock and may have a user interface.  This is the default for bundled apps, unless overridden in the Info.plist. */&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;regular&lt;/span&gt;

        &lt;span class=&#34;cm&#34;&gt;/* The application does not appear in the Dock and does not have a menu bar, but it may be activated programmatically or by clicking on one of its windows.  This corresponds to LSUIElement=1 in the Info.plist. */&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessory&lt;/span&gt;
        
        &lt;span class=&#34;cm&#34;&gt;/* The application does not appear in the Dock and may not create windows or be activated.  This corresponds to LSBackgroundOnly=1 in the Info.plist.  This is also the default for unbundled executables that do not have Info.plists. */&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prohibited&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®é™…ä¸Šä¸åŒçš„ activation policy å’Œ Info.plist æ–‡ä»¶ä¸­å†™å…¥ä¸åŒå…ƒç´ çš„æ•ˆæœæ˜¯å¯¹ç­‰çš„ã€‚regular policy çš„åº”ç”¨å°±æ˜¯å¸¸è§„å¼•ç”¨çš„å½¢å¼ï¼Œä¼šå‡ºç°åœ¨ Dock ä¸Šï¼Œaccessory policy çš„åº”ç”¨å°±æ˜¯æŒ‡å®šå½“å‰åº”ç”¨ä¸º agentï¼Œä¸å† Dock å‡ºç°ã€‚&lt;/p&gt;

&lt;p&gt;æ˜¾ç¤ºæˆ–è€…éšè— Dock çš„åŠŸèƒ½å°±å¯ä»¥é€šè¿‡åˆ‡æ¢å½“å‰çš„æ¿€æ´»ç­–ç•¥ï¼ˆactivation policyæ¥å®ç°ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;toggleDock2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;show&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;
               &lt;span class=&#34;n&#34;&gt;NSApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;regular&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
             &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setActivationPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accessory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;menu-bar&#34;&gt;Menu bar&lt;/h2&gt;

&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸Šå½¢å¼éšè— Dock å›¾æ ‡ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºåº”ç”¨åŠ ä¸Šèœå•æ æŒ‰é’®ï¼Œå…·ä½“åšæ³•æ˜¯é€šè¿‡ &lt;code&gt;NSStatusItem&lt;/code&gt; è¿™ä¸ªç±»ï¼Œå…¶ä»£è¡¨ä¸€ä¸ªç³»ç»Ÿèœå•æ ä¸Šçš„æ¡ç›®ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;statusItem&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSStatusBar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;statusItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;withLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStatusItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;squareLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¹‹åç³»ç»Ÿä¼šåœ¨ Menu bar ä¸Šåˆ›å»ºä¸€ä¸ªé€‰é¡¹æŒ‰é’®ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜éœ€è¦è®¾ç½®è¯¥èœå•é€‰é¡¹çš„ UIï¼Œå¦‚ä¸‹è®¾ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;statusItem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;button&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;named&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ic_dock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;button&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;action&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;#selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;doWhatYouWantToDo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:))&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ­¤æ—¶åº”ç”¨å¯åŠ¨ä¹‹åèœå•æ å°±ä¼šæœ‰å›¾æ ‡å±•ç¤ºäº†ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒ Raywenderlich å®¶çš„æ•™ç¨‹ï¼Œä¸å†èµ˜è¿°ã€‚ [&lt;a href=&#34;https://www.raywenderlich.com/450-menus-and-popovers-in-menu-bar-apps-for-macos&#34;&gt;Menus and Popovers in Menu Bar Apps for macOS&lt;/a&gt;]&lt;/p&gt;

&lt;p&gt;æœ‰ä¸ªå…³äºèœå•æ æŒ‰é’®çš„åº“ &lt;a href=&#34;https://github.com/phranck/CCNStatusItem&#34;&gt;CCNStatusItem&lt;/a&gt; æä¾›äº†æ¯”è¾ƒå®Œæ•´çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬æ”¯æŒ menu æŒ‰é’®å®šåˆ¶ï¼Œç‚¹å‡»å¼¹çª—ä»¥åŠ Dragging and Drop ç­‰æ”¯æŒã€‚ ä¸è¿‡è¯¥åº“å·²ç»å¾ˆä¹…æ²¡æœ‰ç»´æŠ¤äº†ï¼Œä»…åšå‚è€ƒå§ã€‚&lt;/p&gt;

&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/@jackymelb/show-hide-dock-icon-on-macos-app-3a59f7df282d&#34;&gt;Show/Hide dock icon on macOS App&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/appkit/nsstatusitem&#34;&gt;NSStatusItem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.raywenderlich.com/450-menus-and-popovers-in-menu-bar-apps-for-macos&#34;&gt;Menus and Popovers in Menu Bar Apps for macOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/phranck/CCNStatusItem&#34;&gt;CCNStatusItem&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>å¦‚ä½•åœ¨è‹±æ–‡è¯­è¨€ç³»ç»Ÿçš„ Safari ä¸­ä½¿ç”¨å°è±¡ç¬”è®°ï¼Ÿ</title>
      <link>https://hechen.xyz/post/using-yinxiangbiji-system-english/</link>
      <pubDate>Wed, 13 Mar 2019 00:30:49 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/using-yinxiangbiji-system-english/</guid>
      
        <description>&lt;blockquote&gt;
&lt;p&gt;å› ä¸º Evernote åœ¨å›½å†…ä½¿ç”¨äº†ä¸åŒçš„è´¦æˆ·ä½“ç³»ï¼Œå»å¹´å›¢é˜Ÿä¹Ÿå½»åº•ç‹¬ç«‹å‡ºæ¥ï¼Œä½†æ˜¯ Safari çš„å‰ªè—æ’ä»¶æ˜¯åŒä¸€ä¸ªï¼Œ&lt;a href=&#34;https://safari-extensions.apple.com/details/?id=com.evernote.safari.clipper-Q79WDW8YH9&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;ï¼Œä½†æ˜¯å½“ä½ ç³»ç»Ÿæ˜¯è‹±æ–‡ç³»ç»Ÿçš„æ—¶å€™ï¼Œä½¿ç”¨ Safari å‰ªè—æœ‰ç‚¹å°´å°¬ï¼Œå°±æ˜¯æ ¹æœ¬æ‰¾ä¸åˆ°å°è±¡ç¬”è®°çš„ç™»å½•å…¥å£ï¼Œè¯¥æ–‡åšä¸ªè®°å½•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;p&gt;é¦–å…ˆ Safari é»˜è®¤æ˜¯æ²¡æœ‰ Develop èœå•çš„ï¼Œå› æ­¤å…ˆå¼€å¯ Develop æ¨¡å¼ï¼Œè¿›å…¥ Safari çš„é€‰é¡¹è®¾ç½®é¢æ¿ä¸­ï¼Œæœ€å Advanced é€‰é¡¹å¡æœ€ä¸‹æ–¹å¦‚å›¾å‹¾é€‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/J5HvXn1.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-39-08_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶ï¼Œåœ¨ Safari çš„é¡¶éƒ¨èœå•ä¸­ä¼šå¤šå‡º Develop èœå•å…¥å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/OxPf4Ji.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-40-57_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å®‰è£…å°è±¡ç¬”è®°çš„æ’ä»¶ä¹‹åï¼Œç‚¹å‡» Safari ä¸Šçš„å°è±¡ç¬”è®°å‰ªè—æŒ‰é’®ï¼Œä½ ä¼šå‘ç°ç›´æ¥å¸¦åˆ° Evernote çš„ç™»å½•ç•Œé¢ï¼Œæ²¡æœ‰æ¸ é“è®©æˆ‘ç™»å½•å°è±¡ç¬”è®°ï¼Œå³ä½¿ä½  Safari å·²ç»ç™»å½•äº†å°è±¡ç¬”è®°ï¼Œç™»å½•çš„ Session å’Œ Cookie ä¿¡æ¯å¹¶æ²¡æœ‰ä»»ä½•ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/gVTWCOc.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-50-48_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ—¶ï¼Œä½ å°±ç™»å½•å›½é™…ç‰ˆ Evernote è´¦æˆ·ï¼Œå¦‚æœä½ æ²¡æœ‰ï¼Œé‚£å°±æ³¨å†Œä¸€ä¸ªã€‚æ€»ä¹‹ï¼Œä½ éœ€è¦å…ˆç™»å½•è¿›å»ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»è®©å‰ªè—èœå•å±•ç¤ºå‡ºæ¥æ‰è¡Œã€‚&lt;/p&gt;

&lt;p&gt;ç™»å½• Evernote ä¹‹åï¼Œæ‰“å¼€ä¸€ä¸ªé¡µé¢è¿›è¡Œå‰ªè£ï¼Œä¹‹åå¦‚å›¾ï¼Œæˆ‘ä»¬ç»ˆäºçœ‹åˆ°äº†å‰ªè—èœå•ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/VtvROcP.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-52-36_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LsitsxG.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-53-45_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»ä¸‹æ–¹çš„ Optionsï¼Œæ‰“å¼€è®¾ç½®é€‰é¡¹&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/KpQefZc.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-56-16_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶ï¼Œå› ä¸ºåˆšæ‰å¼€å¯äº† Develop èœå•é€‰é¡¹å¡ï¼Œæ­¤æ—¶å³é”®ç‚¹å‡»è¯¥çª—å£ï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ylecnyS.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-58-02_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡» Inspect Element æ‰“å¼€é¡µé¢å…ƒç´ æŸ¥çœ‹å™¨ï¼Œåœ¨ä¸‹æ–¹å…ƒç´ å±•ç¤ºåŒºä¸ºç„¦ç‚¹çš„å‰æä¸‹ï¼ŒCommand +F æœç´¢ &lt;strong&gt;DeveloperContainer&lt;/strong&gt; å…³é”®å­—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/0DSMO39.png&#34; alt=&#34;Capto_Capture 2019-03-13_12-59-28_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/t3uqMa4.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-02-18_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å¤§æ¦‚çŒœå¾—å‡ºæ¥ï¼Œè¿™ä¸ªé¢æ¿å®é™…ä¸Šéšè—äº†ä¸€äº›å¼€å‘è€…é€‰é¡¹ï¼Œè¿™é‡Œé€šè¿‡ display:none æ‰§è¡Œéšè—äº†ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠ &lt;code&gt;display:none&lt;/code&gt; åˆ æ‰ï¼ŒåŒå‡»å°±èƒ½é€‰ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ª div ä¸‹é¢åŒ…å«å¾ˆå¤š divï¼ˆæ˜¯ä¸€äº›å¼€å‘è€…åŠŸèƒ½é€‰é¡¹ï¼Œå°±åƒå¾ˆå¤šç¨‹åºä¸€æ ·ï¼Œè¿™äº›åŠŸèƒ½éƒ½è¢«éšè—äº†ï¼Œå¹³æ—¶çœ‹ä¸åˆ°ï¼‰ï¼Œå‘ç°åé¢æœ‰ä¸€ä¸ª style =â€œdisplay:none;â€è¿™æ˜¯å‰ç«¯é‡Œé¢ç»å¸¸çœ‹åˆ°çš„ä¸€ä¸ªæ ·å¼è¯­å¥ï¼Œä½œç”¨å°±æ˜¯éšè—ä¸‹é¢è¿™ä¸ªè¡¨é‡Œé¢çš„å†…å®¹ï¼Œç„¶åæŒ‰å›è½¦ç¡®å®šã€‚&lt;/p&gt;

&lt;p&gt;ä½ ä¼šå‘ç°ä¸Šæ–¹å°è±¡ç¬”è®°çš„å‰ªè—æ’ä»¶åˆ·æ–°äº†ï¼Œä¹‹åä½ ä¼šå‘ç°ä¹‹å‰è¢«éšè—çš„é€‰é¡¹å‡ºç°äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/95qql8h.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-05-31_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Developer Options è¿™ä¸ªé€‰é¡¹è¡¨å•å‡ºç°äº†ï¼Œå°±åœ¨ä¸è¿œå¤„çœ‹åˆ°äº†é€‰é¡¹ &lt;code&gt;Simulate Simplified Chinese&lt;/code&gt;ï¼Œé€‰ä¸­åé¢å¤é€‰æ¡†ã€‚ä¹‹åå‰ªè—æ’ä»¶ä¼šè‡ªåŠ¨é€€ç™»å½“å‰çš„ Evernote è´¦æˆ·ï¼Œè¿™æ—¶å€™å†æ¬¡ç‚¹å‡»å‰ªè—æŒ‰é’®ï¼Œå°±ä¼šè§¦å‘å°è±¡ç¬”è®°çš„ç™»å½•äº†ï¼Œåœ°å€ä¼šè¢«å¸¦å…¥åœ°å€ &lt;code&gt;https://app.yinxiang.com&lt;/code&gt; åŸŸä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DH2DdLa.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-10-22_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç™»å½•å®Œæˆä¹‹åï¼Œä½ çš„å‰ªè—æ’ä»¶å·²ç»æ˜¯å°è±¡ç¬”è®°çš„è´¦æˆ·äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/PXCjU4U.png&#34; alt=&#34;Capto_Capture 2019-03-13_01-11-52_A&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Enjoy it.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ä¸º NSView å¢åŠ  backgroundColor</title>
      <link>https://hechen.xyz/post/nsview&#43;backgroundcolor/</link>
      <pubDate>Mon, 11 Mar 2019 15:19:49 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/nsview&#43;backgroundcolor/</guid>
      
        <description>&lt;p&gt;NSView ä½œä¸º Cocoa ä¸­æœ€åŸºæœ¬çš„æ„æˆå…ƒç´ ï¼Œæ˜¯æ„æˆæ•´ä¸ª Mac App è§†å›¾ä½“ç³»çš„åŸºç¡€ï¼Œå’Œ UIView åœ¨ iOS ä¸–ç•Œä¸­çš„ä½ç½®ä¸€æ ·é‡è¦ï¼Œå¯æ˜¯åœ¨ UIView é‡Œå¸ç©ºè§æƒ¯çš„èƒŒæ™¯è‰²è®¾ç½®ï¼Œåœ¨ NSView ä¸­å´ä¸è§èº«å½±ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ iOS ä¸­ï¼Œè®¾ç½® UIView çš„èƒŒæ™¯è‰²å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UIKit&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGRect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;origin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;view&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;backgroundColor&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blue&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è€Œåœ¨ macOS ä¸Šï¼Œä½¿ç”¨ NSView èƒŒæ™¯è‰²éœ€è¦å¦‚ä¸‹è®¾ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Cocoa&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGRect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;origin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zero&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CGSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;view&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wantsLayer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;backgroundColor&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgColor&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;UIView è‡ªèº«æœ‰ä¸€ä¸ª backgroundColor çš„å±æ€§ï¼Œè€Œåœ¨ NSView ä¸­æ˜¯æ²¡æœ‰çš„ï¼Œä½ éœ€è¦åšçš„æ˜¯è®¾ç½® View æ‰€åŒ…å«çš„ layer çš„èƒŒæ™¯è‰²ã€‚è€Œä¸” layer æ˜¯ Optional çš„ï¼Œä¹Ÿå°±æ„å‘³ç€ NSView é»˜è®¤æ˜¯ä¸åŒ…å« layer çš„ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦è®¾ç½® wantsLayer ä¸º true è®© NSView åˆ›å»º layer å‡ºæ¥ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Apple çš„&lt;a href=&#34;https://developer.apple.com/documentation/appkit/nsview/1483695-wantslayer&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt; æœ‰é’ˆå¯¹ wantsLayer çš„ä¸€äº›è¯´æ˜&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Setting the value of this property to true turns the view into a layer-backed viewâ€”that is, the view uses a CALayer object to manage its rendered content. Creating a layer-backed view implicitly causes the entire view hierarchy under that view to become layer-backed. Thus, the view and all of its subviews (including subviews of subviews) become layer-backed. The default value of this property is false.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      
    </item>
    
    <item>
      <title>RxSwift ä¸­çš„å‡ ç§ Subject</title>
      <link>https://hechen.xyz/post/rxswift-subjects/</link>
      <pubDate>Tue, 26 Feb 2019 10:24:38 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/rxswift-subjects/</guid>
      
        <description>

&lt;blockquote&gt;
&lt;p&gt;æ–‡ä¸­æ‰€ç”¨æ’å›¾å‡å‡ºè‡ªä¹¦ç± ã€ŠRxSwift - Reactive Programming with Swiftã€‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Subject åœ¨ Rx çš„ä¸–ç•Œé‡Œæ˜¯è¿™ä¹ˆä¸€ç§å­˜åœ¨ï¼Œå…¶æ—¢å¯ä»¥ä½œä¸ºè§‚æµ‹è€…ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¢«è§‚æµ‹è€…ã€‚è‡ªç„¶è€Œç„¶æƒ³åˆ°çš„æ˜¯ Subject æœ¬èº«å°±å¯ä»¥ä½œä¸ºä¸€ç§è¿‡æ¸¡æ¡¥æ¥ä¿¡å·çš„æ‰‹æ®µï¼Œå®ƒè®¢é˜…æŸä¸ªä¿¡å·ï¼Œä¸€æ—¦ä¿¡å·æ”¶åˆ°åºåˆ—ï¼Œè½¬å¤´å®ƒå°±åˆæŠŠä¿¡å·æ•£å‘ç»™è‡ªå·±çš„è§‚æµ‹è€…äº†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ RxSwift çš„ä¸–ç•Œé‡Œæ¶‰åŠå‡ ç§ Subjectï¼Œè¿™é‡Œå…ˆè¡Œåšä¸ªè®°å½•ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;PublishSubject&lt;/li&gt;
&lt;li&gt;BehaviorSubject&lt;/li&gt;
&lt;li&gt;ReplaySubject&lt;/li&gt;
&lt;li&gt;Variable ï¼ˆé¢„è®¡åœ¨ 5.0 åºŸå¼ƒï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;publishsubject&#34;&gt;PublishSubject&lt;/h2&gt;

&lt;p&gt;PublishSubject åªç»™è®¢é˜…è€…å‘é€æ–°å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è®¢é˜…è€…åªèƒ½æ¥å—åˆ°è®¢é˜…ä¹‹åå‘å‡ºçš„ä¿¡å·ã€‚ä¸€å›¾èƒœåƒè¨€ï¼Œçœ‹ğŸ‘‡&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Cw4FjCT.png&#34; alt=&#34;publishSubject&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ç¬¬ä¸€æ’æ˜¯æŸä¸ªä½œä¸º Observable è§’è‰²çš„ Subjectï¼Œè‡ªå·¦è‡³å³ä¸ºä¸¥æ ¼æ—¶é—´çº¿ï¼Œ 2 å’Œ 3 æ’å‡ä¸ºè®¢é˜…äº†è¯¥ Subject çš„è§‚æµ‹è€…ï¼Œå‘ä¸Šçš„è™šçº¿è¡¨æ˜è®¢é˜…çš„æ—¶æœºï¼Œå¯ä»¥çœ‹åˆ°è§‚æµ‹è€…åªèƒ½æ¥æ”¶åˆ°è®¢é˜…ä¹‹åç”± Subject æ–°å‘å°„å‡ºçš„ä¿¡å·ã€‚&lt;/p&gt;

&lt;h2 id=&#34;behaviorsubject&#34;&gt;BehaviorSubject&lt;/h2&gt;

&lt;p&gt;BehaviorSubject ä¼šåœ¨è®¢é˜…è€…è®¢é˜…ä¹‹åå‘é€æœ€æ–°çš„ä¸€ä¸ªä¿¡å·å…ƒç´ ï¼Œè‡ªç„¶éœ€è¦ä½ åœ¨åˆå§‹åŒ–è¯¥å¯¹è±¡çš„æ—¶å€™ç»™å…¶è®¾å®šåˆå§‹åŒ–å€¼ï¼ˆå¦åˆ™å¯¹äºç¬¬ä¸€æ¬¡è®¢é˜…çš„è§‚æµ‹è€…æ¥è¯´ï¼Œå“ªæ¥çš„æœ€æ–°å‘å°„çš„å…ƒç´ å‘¢ï¼Ÿï¼‰ã€‚å¦‚æœåˆå§‹åŒ–çš„æ—¶å€™æ— æ³•æä¾›é»˜è®¤å€¼ï¼Œé‚£å¯èƒ½ä½ å°±éœ€è¦ç”¨åˆ°ä¸Šé¢çš„ PublishSubject äº†ã€‚å…¶ä¸­å¸¸ç”¨çš„ Variable å’Œ BehaviorRelay éƒ½æ˜¯å¯¹å…¶çš„å°è£…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ei6pCwT.png&#34; alt=&#34;BehaviorSubject&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°å’Œä¸Šæ–¹ Publish åŒºåˆ«çš„æ˜¯å…¶åœ¨è§‚æµ‹è€…è®¢é˜…ä¹‹åä¼šæ”¶åˆ°æœ€æ–°çš„æœ€åä¸€ä¸ªä¿¡å·ã€‚&lt;/p&gt;

&lt;h2 id=&#34;replaysubject&#34;&gt;ReplaySubject&lt;/h2&gt;

&lt;p&gt;é¡¾åæ€ä¹‰ï¼ŒReplaySubject ä¼šé‡æ–°å‘å°„åœ¨è®¢é˜…è€…è®¢é˜…ä¹‹é—´å‘å‡ºçš„ä¿¡å·ï¼Œå…·ä½“å‘å¤šå°‘æ˜¯ç”± bufferSize å†³å®šçš„ï¼Œå…¶æŒ‡å®šéœ€è¦ cache å¤šå°‘ä¸ªä¿¡å·ï¼Œå¦‚ä¸‹å›¾ä¸­æ‰€ç¤ºï¼ŒBuffer Size ä¸º 2ï¼Œå› æ­¤å½“ç¬¬äºŒä¸ªè®¢é˜…è€…è®¢é˜… Subject ä¹‹åï¼Œå…¶ä¼šæ”¶åˆ°æœ€æ–°çš„ 1 å’Œ 2 ä¸¤ä¸ªä¿¡å·ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;c1&#34;&gt;/// æŒ‡å®šå‘å°„å¤šå°‘æœ€æ–°ä¿¡å·&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;subject&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ReplaySubject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bufferSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/uuHAQ9c.png&#34; alt=&#34;replaySubject&#34; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šæ‰€æœ‰è¢« Cache çš„ä¿¡å·æœ¬èº«éƒ½æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œå› æ­¤éœ€è¦è€ƒè™‘åˆ°ç¼“å­˜ä¿¡å·çš„æœ€å¤§ä¸ªæ•°ä»¥åŠæ¯ä¸ªä¿¡å·çš„è´Ÿè½½ï¼Œæ¯”å¦‚ä½ çš„æ¯ä¸ªä¿¡å·æœ¬èº«æ˜¯ Image æ•°æ®ï¼Œç„¶ååˆ Cache äº†æ¯”è¾ƒå¤šçš„æ•°ç›®ï¼Œè¿™æ—¶å€™å†…å­˜å‹åŠ›å°±ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ª ReplaySubject çš„æ—¶å€™éœ€è¦æ³¨æ„å†…å­˜é—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;variable&#34;&gt;Variable&lt;/h2&gt;

&lt;p&gt;Variable è‡ªèº«å®è´¨ä¸Šæ˜¯ BehaviorSubject çš„å°è£…ï¼Œæ‰€ä»¥å®ƒå…·å¤‡ Behavior æ¯æ¬¡è®¢é˜…å°±ä¼šæ¥æ”¶åˆ°æœ€æ–°ä¿¡å·å…ƒç´ çš„å±æ€§ï¼Œä½†æ˜¯å’Œ BehaviorSubject ä¸åŒåœ¨äºå…¶ä¸ä¼šå› ä¸ºæ”¶åˆ° Error äº‹ä»¶å¯¼è‡´æ•´ä¸ªåºåˆ—åœæ­¢ï¼ˆä¹Ÿå°±æ˜¯è¯´åªæœ‰ completion ä¿¡å·æ‰ä¼šè®©è¯¥ä¿¡å·ç»ˆç»“ï¼‰ï¼Œè€Œå®ƒçš„ä¿¡å·å®Œæˆæ˜¯åœ¨å…¶ deinit æ–¹æ³•ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å–œæ¬¢ Variable çš„ä¸€ä¸ªæœ€å¤§åŸå› å¯èƒ½å°±æ˜¯ç›´æ¥è·å–å®ƒçš„å€¼ï¼Œè€Œä¸éœ€è¦åƒå¸¸è§„ä¿¡å·ä¸€èˆ¬éœ€è¦è¿›è¡Œè®¢é˜…æ‰èƒ½å–å¾—å®ƒçš„å€¼ï¼Œè€Œä¸”ä¸éœ€è¦è¿›è¡Œè®¢é˜…ï¼Œæƒ³ç”¨å³å–ï¼Œè€Œä¸”å…¶ç”Ÿå‘½å‘¨æœŸå®Œå…¨å’Œ ARC ç»“åˆï¼Œæ— éœ€ä¸»åŠ¨å–æ¶ˆè®¢é˜…ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;variable&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Variable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Initial value&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;variable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;New initial value&amp;#34;&lt;/span&gt;
&lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;variable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç›®å‰åœ¨ RxSwift ä¸­ Variable å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼Œå¦‚æœä½ ä½¿ç”¨äº† Variable ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ Console ä¸­æ‰“å°å‡ºä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;`Variable` is planned for future deprecation. Please consider `BehaviorRelay` as a replacement. Read more at: https://git.io/vNqvx&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç›®å‰å®˜æ–¹ç»™å‡ºçš„æ¨èæ˜¯ä½¿ç”¨ BehaviorRelayï¼Œè¯¦ç»†è§£é‡Šå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Comments&#34; data-lang=&#34;Comments&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Comments&#34; data-lang=&#34;Comments&#34;&gt;/// Current recommended replacement for this API is `RxCocoa.BehaviorRelay` because:
/// * `Variable` isn&amp;#39;t a standard cross platform concept, hence it&amp;#39;s out of place in RxSwift target.
/// * It doesn&amp;#39;t have a counterpart for handling events (`PublishRelay`). It models state only.
/// * It doesn&amp;#39;t have a consistent naming with *Relay or other Rx concepts.
/// * It has an inconsistent memory management model compared to other parts of RxSwift (completes on `deinit`).&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é¦–å…ˆ Variable æ˜¯ RxSwift ä¸º Apple ç”Ÿæ€åŠ å…¥çš„ä¸€ä¸ªåè¯ï¼Œå¹¶ä¸æ˜¯ Rx ç”Ÿæ€å…±æœ‰çš„æ¦‚å¿µï¼Œè€Œä¸”åå­—ä¸Šä¹Ÿæ˜¾å¾—å’Œå…¶ä»–æ¦‚å¿µæ ¼æ ¼ä¸å…¥ï¼Œå› æ­¤ä¸¥æ ¼æ„ä¹‰ç®—èµ·æ¥å¹¶ä¸æ˜¯ Rx ç”Ÿæ€çš„ä¸€éƒ¨åˆ†äº†ï¼›&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼Œå®ƒåŠŸèƒ½ä¸Šå‡ ä¹å’Œ BehaviorRelay ä¸€æ ·ï¼Œä½¿ç”¨ BehaviorRelay ä¹Ÿèƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åä¸€ç‚¹ï¼Œå…¶å†…å­˜ç®¡ç†è¯­ä¹‰å’Œ Rx å…¶ä»–æ¦‚å¿µä¹Ÿä¸ä¸€æ ·ï¼Œå…¶ä»–çš„ä¿¡å·ç»ˆç»“æ˜¯ä¸¥æ ¼æŒ‰ç…§ completion å’Œ error ä¿¡å·ï¼Œä½†æ˜¯ Variable ç›´åˆ°å¯¹è±¡è¢«é‡Šæ”¾æ‰æ‰é»˜è®¤è§¦å‘ completion ä¿¡å·ã€‚&lt;/p&gt;

&lt;p&gt;è¯¦ç»†å®˜æ–¹è®¨è®ºåœ¨&lt;a href=&#34;https://github.com/ReactiveX/RxSwift/issues/1501&#34;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Apple Event Sandboxing</title>
      <link>https://hechen.xyz/post/appleevents-usage-description/</link>
      <pubDate>Thu, 21 Feb 2019 23:25:38 +0800</pubDate>
      
      <guid>https://hechen.xyz/post/appleevents-usage-description/</guid>
      
        <description>

&lt;h2 id=&#34;é—®é¢˜èƒŒæ™¯&#34;&gt;é—®é¢˜èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘åœ¨ä¿®æ”¹æŸä¸ª &lt;a href=&#34;https://github.com/hechen/vibe&#34;&gt;Mac åº”ç”¨&lt;/a&gt;ï¼Œå…¶åŸç†å°±æ˜¯é€šè¿‡æ‰§è¡Œä¸€æ®µ AppleScript è·å– OmniFocus çš„ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œä½†æ˜¯æ€»å–ä¸åˆ°æ•°æ®ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&#34;åŸå› &#34;&gt;åŸå› &lt;/h2&gt;

&lt;p&gt;å…³é”®æ•°æ®è·å–é˜¶æ®µæ‰§è¡Œçš„ AppleScript çš„æ—¶å€™æ€»æ˜¯å–ä¸åˆ°æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-AppleScript&#34; data-lang=&#34;AppleScript&#34;&gt;&lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;OmniFocus&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;front&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;document&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theModifiedProjects&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;every&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;flattened&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;project&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theModifiedProjects&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;every&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;flattened&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;task&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theModifiedProjects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;where&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;its&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;number&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;tasks&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;equal to&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt;
                        &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;completion&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;date&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theCompletedTasks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;return&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theInboxCompletedTasks&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;every&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;inbox&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;task&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;where&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;its&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;number&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;tasks&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    
        &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theInboxCompletedTasks&lt;/span&gt;    
            &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;completion&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;date&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theInboxCompletedTasks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;return&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;repeat&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;tell&lt;/span&gt;

&lt;span class=&#34;nb&#34;&gt;display dialog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt;

&lt;span class=&#34;no&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;theProgressDetail&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨ Cocoa ä¸­æ˜¯é€šè¿‡æ‰§è¡Œå¦‚ä¸‹ä»£ç æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;myAppleScript&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;I am a piece of applescript&amp;#34;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;scriptObject&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSAppleScript&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;myAppleScript&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSDictionary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;output&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scriptObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;executeAndReturnError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿›è¡Œ Debug å¯åŠ¨ App æˆ–è€… Archive å®‰è£…åŒ…æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå‡æ— æ³•æ­£å¸¸è·å–æ‰§è¡Œç»“æœï¼Œç›´æ¥æŠ¥é”™ã€‚ å…·ä½“é”™è¯¯åŸå› ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&amp;#34;NSAppleScriptErrorMessage&amp;#34; : &amp;#34;Not authorized to send Apple events to OmniFocus.&amp;#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¾ˆæ˜¾ç„¶ï¼Œæ²¡æœ‰æƒé™æ‰§è¡Œè¯¥è„šæœ¬æ¥å‘é€ Apple Event ç»™ OmniFocus ä»è€Œæ‰§è¡Œå¯¹åº”æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;é’ˆå¯¹ Apple Event çš„æƒé™æ§åˆ¶ï¼Œ æ˜¯ macOS Mojave ç³»ç»Ÿå¸¦å…¥ macOS çš„ï¼ŒApple æŠŠæƒé™æ§åˆ¶è¿›ä¸€æ­¥æ”¶ç¼©ï¼Œå¹¶ä¸”è¦æ±‚å¼€å‘è€…æ˜¾ç¤ºå‘ŠçŸ¥ç”¨æˆ·ä½ çš„ App è¦å¹²ä»€ä¹ˆã€‚å½“ç„¶ iOS å¼€å‘åŒå­¦è‚¯å®šå¾ˆæ¸…æ¥šï¼Œæˆ‘ä»¬æ— è®ºæ˜¯æ‹¿æ‘„åƒå¤´ï¼Œè¯»å–ç›¸å†Œï¼Œç”šè‡³æ˜¯ FaceID ç­‰éƒ½æ˜¯è¦æ˜ç¡®çš„åœ¨ App ä¸­å£°æ˜çš„ï¼Œä¹Ÿå°±æ˜¯è¦åœ¨ Info.plist æ–‡ä»¶ä¸­å£°åçš„ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äº macOS Mojave ç³»ç»Ÿè€Œè¨€ï¼Œæ–°å¢äº†é’ˆå¯¹ Apple Event çš„æƒé™æ§åˆ¶ï¼Œéœ€è¦å¼€å‘è€…åœ¨ plist æ–‡ä»¶ä¸­å¢åŠ  &lt;strong&gt;NSAppleEventsUsageDescription&lt;/strong&gt; ä¿¡æ¯ï¼Œå¹¶ä¸”æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ· Apple Event ä¼šç”¨æ¥åšä»€ä¹ˆäº‹æƒ…ã€‚è¿™ä¹Ÿæ˜¯å»å¹´ WWDC 2018 Session  &lt;a href=&#34;https://developer.apple.com/wwdc18/702&#34;&gt;&amp;ldquo;Your Apps and the Future of macOS Security&amp;rdquo;&lt;/a&gt; ä¸­æåˆ°çš„ï¼Œæ‰€æœ‰ç»™å…¶ä»– App å‘é€ AppleEvent çš„ Cocoa App å‡ä¼šå—åˆ°å½±å“ï¼Œè¿™å°±æ˜¯  &lt;strong&gt;AppleEvent sandboxing&lt;/strong&gt;ã€‚ å¦‚æœä½ ä¸æ·»åŠ è¯¥å£°æ˜å­—æ®µï¼ŒApp å°±é»˜è®¤ä¸è¿›è¡Œä»»ä½•æ˜¾ç¤ºæˆæƒè¡Œä¸ºå¹¶ä¸”é»˜è®¤æ— æƒé™è¿›è¡Œç›¸å…³æ“ä½œï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡å‰é¢å‡ºç°çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;è¯ä¸å¤šè¯´ï¼Œåœ¨ info.plist ä¸­åŠ å…¥ NSAppleEventsUsageDescription å­—æ®µï¼Œå¹¶ä¸”å¡«å…¥å…·ä½“æƒé™å£°æ˜,&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NEBjVZ3.png&#34; alt=&#34;Capto_Capture 2019-02-21_11-47-11_P&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å†æ¬¡å¯åŠ¨ App ä¹‹åå°±ä¼šæœ‰å¦‚ä¸‹å¼¹çª—æç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wm5GWLO.png&#34; alt=&#34;Capto_Capture 2019-02-21_11-47-42_P&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å‰é¢æ‰§è¡Œ Apple Script çš„æ–¹æ³•ä¼šåŒæ­¥ç­‰å¾…æˆæƒç»“æœï¼Œç”¨æˆ·ç‚¹å‡»å…è®¸ä¹‹åï¼ŒApp å°±èƒ½æ­£å¸¸è·å–æ•°æ®äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/sfN59K4.png&#34; alt=&#34;Capto_Capture 2019-02-21_11-08-44_P&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒæ–‡æ¡£&#34;&gt;å‚è€ƒæ–‡æ¡£&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2018/702/&#34;&gt;WWDC 2018 Session 702&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äºä¸€æ¬¡ SS æµé‡ä¸¢å¤±çš„è¿‡ç¨‹è®°å½•</title>
      <link>https://hechen.xyz/post/%E5%85%B3%E4%BA%8E%E4%B8%80%E6%AC%A1-ss-%E6%B5%81%E9%87%8F%E4%B8%A2%E5%A4%B1%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/</link>
      <pubDate>Mon, 28 Jan 2019 17:51:35 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/%E5%85%B3%E4%BA%8E%E4%B8%80%E6%AC%A1-ss-%E6%B5%81%E9%87%8F%E4%B8%A2%E5%A4%B1%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/</guid>
      
        <description>

&lt;h2 id=&#34;2019-01-29-æ›´æ–°&#34;&gt;2019-01-29 æ›´æ–°&lt;/h2&gt;

&lt;p&gt;æ—©ä¸Šä¸€åˆ°åŠå…¬å®¤è¿æ¥ä¸Šå…¬å¸ç½‘ç»œï¼Œç½‘é€Ÿç›´æ¥å°±é£šåˆ°äº† 600KB/sï¼Œæœä¸å…¶ç„¶ï¼Œè¿˜æ˜¯ &lt;code&gt;com.apple.Safari.SafeBrowsing.Service&lt;/code&gt; è¿™ä¸ªæœåŠ¡è¿›ç¨‹ã€‚è¿™å°±å°´å°¬äº†ï¼Œçœ‹æ¥å¹¶ä¸æ˜¯è¯´ä½ ä¸ç”¨ Safari å°±ä¸ä¼šè§¦å‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yifgIEZ.png&#34; alt=&#34;Surge Dashboard&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç›´æ¥æŠŠ Surge è§„åˆ™ä¸­çš„ Rule ç”± Direct æ”¹æˆäº† Rejectã€‚&lt;/p&gt;

&lt;h2 id=&#34;é—®é¢˜è¿½è¸ª&#34;&gt;é—®é¢˜è¿½è¸ª&lt;/h2&gt;

&lt;p&gt;åœ¨ 2018 å¹´ 12 æœˆåº•çš„æ—¶å€™ï¼Œå¶ç„¶é—´ç™»å½• AgentNEO æŸ¥çœ‹åˆšä¹°çš„æµé‡ä½¿ç”¨æƒ…å†µã€‚ä½†æ˜¯å‘ç°ï¼Œåˆšåœ¨å‰å‡ å¤©è´­ä¹°çš„ SS æµé‡åœ¨çŸ­çŸ­çš„ 4 å¤©ä¹‹å†…å°±è€—äº†å°†è¿‘ 95GBï¼Œå°±åœ¨ 1 æœˆ 1 æ—¥å…ƒæ—¦å½“å¤©å°±è€—äº†æ¥è¿‘ 75GBï¼Œè¦çŸ¥é“ï¼Œæˆ‘å¹³æ—¶çš„æœˆå‡æµé‡ä¹Ÿå°±ç»´æŒåœ¨ 10 GB ä¸åˆ°ï¼Œæ¯•ç«Ÿå¹³æ—¶åœ¨å…¬å¸åŠå…¬ï¼Œä¸šä½™æ—¶é—´ Youtube ä¹Ÿçœ‹çš„ç›¸å¯¹å°‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/9tRs9vh.png&#34; alt=&#34;AgentNEO æµé‡é¢æ¿&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æœ€åˆçœ‹åˆ°è¿™ä¸ªç»Ÿè®¡æ•°æ®ä¹‹åï¼Œæˆ‘ä¸€åº¦æ€€ç–‘æ˜¯ä»–ä»¬ç½‘ç«™çš„æµé‡ç»Ÿè®¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;åç»­å‡ å¤©ï¼Œæˆ‘å®é™…ä¸Šå¯¹æµé‡è€—æŸæ¯”è¾ƒå…³æ³¨ï¼Œæœ‰ä¸€å¤©æ³¨æ„åˆ°ï¼ŒSurge çš„æµé‡ç›‘æ§é€Ÿç‡ä¸€ç›´æŒç»­ä¸æ–­çš„æ˜¾ç¤ºè¾¾äº”å…­ç™¾ KB/s çš„ä¸‹è½½æµé‡ï¼Œä½†æ˜¯æˆ‘çŸ¥é“è‡ªå·±å½“æ—¶å¹¶æ²¡æœ‰ä¸‹è½½ä»»ä½•ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/nWz8JAt.png&#34; alt=&#34;Surge Menu Bar&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰“å¼€ Surge Dashboardï¼Œçœ‹åˆ°å¦‚ä¸‹çš„æƒ…å½¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/9kVX27V.png&#34; alt=&#34;Surge Dashboard&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°å½“æ—¶åœ¨æŒç»­ä¸æ–­çš„è¿›è¡Œä¸‹è½½åŠ¨ä½œçš„è¿›ç¨‹åç§°æ˜¯ &lt;code&gt;com.apple.Safari.SafeBrowsing.Service&lt;/code&gt;ï¼Œçœ‹è¯·æ±‚åœ°å€æ˜¯ safebrowsing.googleapis.comã€‚&lt;/p&gt;

&lt;p&gt;ä»è¿›ç¨‹åå­—æ¥çœ‹åº”è¯¥æ˜¯ Safari å’Œå®‰å…¨æµé‡ç›¸å…³çš„æœåŠ¡ï¼Œé€šè¿‡ Snitch çš„æ•°æ®åº“æŸ¥åˆ°å¯¹å…¶çš„è¯´æ˜ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Safari has built-in support for Googleâ€™s Safe Browsing service to identify fraudulent and unsafe websites. Right before Safari navigates to a certain website, the website gets checked for possible security concerns using Googleâ€™s Safe Browsing online database. Accessing the online database requires connections to Google servers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¯´çš„å¤§æ¦‚æ˜¯è¯¥æœåŠ¡æ˜¯é’ˆå¯¹ Safari æµè§ˆå™¨å¯ç”¨çš„ï¼Œåœ¨ Safari è¦å¸®ä½ å¯¼èˆªåˆ°ä¸‹ä¸€çº§é¡µé¢çš„æ—¶å€™ï¼Œä¼šè¯†åˆ«è¯¥é¡µé¢æ˜¯å¦æ˜¯æ¬ºè¯ˆğŸ¶æˆ–è€…ä¸å®‰å…¨âš ï¸çš„ç½‘ç«™ï¼Œæˆ‘ä»¬åœ¨ Safari çš„ Security èœå•ä¸­å¯ä»¥æ‰¾åˆ°å¯ç”¨å…³äºæ¬ºè¯ˆç½‘ç«™çš„æ£€æµ‹åŠŸèƒ½çš„å¼€å…³ã€‚ä»¥æˆ‘æœ¬æœºä¸Šçœ‹åˆ°çš„å†…å®¹å¦‚ä¸‹&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Safari uses Tencent Safe Browsing and Google Safe Browsing to identify fraudulent websites.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¤§æ¦‚æ„æ€å°±æ˜¯ Safari ä½¿ç”¨è…¾è®¯çš„å®‰å…¨æµè§ˆæœåŠ¡å’Œ Google çš„å®‰å…¨æµè§ˆæœåŠ¡æ¥é‰´åˆ«æ¬ºè¯ˆç½‘ç«™ï¼Œè…¾è®¯åº”è¯¥æ˜¯æœ¬åœ°åŒ–çš„äº§ç‰©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wEhv8iu.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é€šè¿‡é’ˆå¯¹è¯¥è¿›ç¨‹çš„å‡ºå£è¯·æ±‚ host ä¹Ÿå¯ä»¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œè¯¥è¿›ç¨‹å‘èµ·çš„ç½‘ç»œè¯·æ±‚ä¼šæœ‰å¦‚ä¸‹ä¸¤ä¸ª host å‡ºå£ï¼š
1. safebrowsing.googleapis.com
2. safebrowsing.urlsec.qq.com&lt;/p&gt;

&lt;p&gt;å…¶å®åœ¨ iOS è®¾å¤‡ä¸Šä¹Ÿæœ‰åŒæ ·çš„è¿›ç¨‹æ¥åšè¿™ä»¶äº‹æƒ…ï¼ŒæŠ“åŒ…æœ‰æ—¶å€™ä¹Ÿèƒ½æ•æ‰åˆ°è¿™ä¸¤ä¸ªè¯·æ±‚ï¼ˆå›½è¡Œï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/g9JCPdU.jpg&#34; alt=&#34;iPhone ä¸Šçš„ Safebrowsing&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œè¿™æ¬¡å‡ºé—®é¢˜çš„å°±æ˜¯ google æä¾›çš„æ¬ºè¯ˆç½‘ç«™ç‰¹å¾åº“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BtfvMIV.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å°è¯•å…³é—­ Surge ä½œä¸ºç³»ç»Ÿæµé‡ä»£ç†ä¹‹åï¼Œçœ‹åˆ° Activity Monitor ä¸­è¿›ç¨‹åˆå¼€å§‹äº†ä¸‹è½½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåªæ˜¯è¿æ¥è¯·æ±‚ä¸»ä½“ä»åŸæ¥ Surge åˆ‡æ¢åˆ°äº†ç‹¬ç«‹è¿›ç¨‹è€Œå·²ï¼ˆSurge ä¼šæ¥ç®¡ç½‘ç»œæµé‡ï¼Œå› æ­¤ä¹‹å‰è¯¥ä»»åŠ¡çš„ä¸‹è½½ä¼šç®—åˆ° Surge çš„å¤´ä¸Šï¼‰ï¼Œä½†æ˜¯é’ˆå¯¹è¯¥ host çš„ä¸‹è½½ä»»åŠ¡ä¸€è‡´æŒç»­ä¸æ–­ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¯´èµ·æ¥ï¼ŒLittle Snitch Network Monitor è¿™æ¬¾è½¯ä»¶ä¹Ÿæ˜¯å½“æ—¶ä¸ºäº†æŸ¥æµé‡ä¸¢å¤±é—®é¢˜ï¼Œæ‰ä¹°çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/SUT5qQC.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œåœ¨æˆ‘å…³é—­ Surge ä½œä¸ºä»£ç†ä¹‹å‰ï¼Œå¯ä»¥çœ‹åˆ°è¯¥è¿›ç¨‹å¤§æ¦‚åœ¨ 7 ä¸ªå°æ—¶ä¹‹å†…è€—äº† 12.4 GB çš„æµé‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Gnxc4bB.png&#34; alt=&#34;Little Snitch Network Monitor&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œåœ¨ç½‘ç»œä¸Šç›®å‰æœªçœ‹åˆ°é’ˆå¯¹ safebrowsing è¿›ç¨‹çš„å¤§é‡è®¨è®ºï¼Œå›½å†…è®ºå› &lt;a href=&#34;https://www.v2ex.com/t/404025&#34;&gt;V2EX&lt;/a&gt; é‡Œä¹Ÿçœ‹åˆ°æœ‰äººé‡åˆ°è¯¥é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;ç›®å‰æš‚æ—¶ä¸æ¸…æ¥šæ˜¯å®˜æ–¹ Bug è¿˜æ˜¯æˆ‘ç”µè„‘å®‰è£…äº†ä»€ä¹ˆæ’ä»¶æˆ–è€…è½¯ä»¶å¯¼è‡´ã€‚æš‚æ—¶å…ˆåœæ‰ä½¿ç”¨ Safari äº†ï¼Œç”¨ Chrome ç”¨ä¸Šä¸€æ®µæ—¶é—´ä¹‹åå†ç”¨ Snitch çœ‹ä¸‹æƒ…å†µå§ã€‚&lt;/p&gt;

&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºä¸æ”¾å¿ƒï¼Œåœ¨ Surge çš„è‡ªå®šä¹‰è§„åˆ™ä¸­åŠ äº†ä¸€æ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Conf&#34; data-lang=&#34;Conf&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Conf&#34; data-lang=&#34;Conf&#34;&gt;	NAME,com.apple.Safari.SafeBrowsing.Service,DIRECT&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é’ˆå¯¹è¯¥è¿›ç¨‹çš„æ‰€æœ‰æµé‡éƒ½ç›´è¿ï¼Œä¸ç”¨ä»£ç†äº†ã€‚ åç»­æœ‰ä»»ä½•è¿›å±•ä¼šæ›´æ–°åˆ° Blog ä¸­ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>åœ¨ Swift Framework ä¸­ä½¿ç”¨ C æ–‡ä»¶çš„è¿‡ç¨‹æ¢ç´¢</title>
      <link>https://hechen.xyz/post/swift-and-modules/</link>
      <pubDate>Thu, 03 Jan 2019 21:19:24 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/swift-and-modules/</guid>
      
        <description>

&lt;h2 id=&#34;é—®é¢˜æè¿°&#34;&gt;é—®é¢˜æè¿°&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨å¼€å‘çº¿ä¸Šè¯Šæ–­å·¥å…·éœ€æ±‚çš„æ—¶å€™ï¼Œæ˜¯ä»¥å•ä¸ª Pod çš„å½¢å¼æä¾›æ”¯æŒï¼Œå¹¶ä¸”ä»£ç æ–‡ä»¶ä¸­åªæœ‰çº¯ Swift æ–‡ä»¶ï¼Œä½†æ˜¯å…¶ä¸­éœ€è¦ç”¨åˆ°ç³»ç»Ÿçš„ C åº“çš„ä¸€äº›åŠŸèƒ½ï¼Œæœ¬æ¬¡å°±æ˜¯ä½¿ç”¨äº†ç³»ç»Ÿ C åº“ä¸­ &lt;code&gt;resolv.h&lt;/code&gt; è¿™ä¸ªæ–‡ä»¶æ¥è¿›è¡Œ DNS è§£ææ‰€ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å½“åæœŸ Pod åŠŸèƒ½å®Œå–„ä¹‹åï¼Œåœ¨ Example å·¥ç¨‹ä¸­ä¹Ÿå·²ç»ç¼–è¯‘é€šè¿‡ä¹‹åï¼Œæ¥å…¥ä¸»é¡¹ç›®ä¸­ä¹‹åé‡åˆ°äº†ä¸‹é¢è¿™ä¸ªç¼–è¯‘é”™è¯¯ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ADh0sy6.png&#34; alt=&#34;Error When Compile&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…·ä½“æ–‡å­—é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;/Users/chen/Repos/Work/ZHDiagnosisTool/ZHDiagnosisTool/Classes/Core/Network/ZHDiagnosisTool-Network-Header.h:8:10: 
    Include of non-modular header inside framework module &amp;#39;Diagnosis.ZHDiagnosisTool_Network_Header&amp;#39;: &amp;#39;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS12.1.sdk/usr/include/resolv.h&amp;#39;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¤§æ¦‚çš„æ„æ€å°±æ˜¯åœ¨ Umbrella Header ä¸­åŠ å…¥çš„ Bridging header æŒ‡å®šäº† include ä¸€ä¸ª C æ–‡ä»¶ï¼Œè€Œè¯¥ C æ–‡ä»¶æœ¬èº«å¹¶ä¸æ˜¯  Modular Headerï¼Œ å› æ­¤ç¼–è¯‘æ— æ³•é€šè¿‡ã€‚è¿™å°±æ¶‰åŠäº†ç›®å‰ iOS ç”Ÿæ€ä¸­æ™®éä½¿ç”¨çš„ Modules æ¦‚å¿µã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‡ ä¸ªæ¦‚å¿µ&#34;&gt;å‡ ä¸ªæ¦‚å¿µ&lt;/h2&gt;

&lt;h3 id=&#34;modules&#34;&gt;Modules&lt;/h3&gt;

&lt;p&gt;Modules çš„æ¦‚å¿µæ˜¯ XCode 5 å¸¦åˆ° iOS å¼€å‘è€…é¢å‰çš„ï¼Œä»é‚£æ—¶èµ· LLVM ç¼–è¯‘å™¨å°±å·²ç»å†…åœ¨æ”¯æŒäº†ï¼Œå…·ä½“å…³äºå…¶å†å²åœ¨ &lt;a href=&#34;https://onevcat.com/2013/06/new-in-xcode5-and-objc/&#34;&gt;WWDC 2013 Sessionç¬”è®° - Xcode5å’ŒObjCæ–°ç‰¹æ€§&lt;/a&gt; è¿™ç¯‡æ–‡ç« ä¸­å·²ç»è®²è§£çš„éå¸¸è¯¦ç»†äº†ï¼Œä¸å†èµ˜è¿°ï¼Œæ€»ç»“ä¸€å¥è¯å°±æ˜¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Modules æ˜¯è¢«å¼•å…¥ LLVM å±‚é¢çš„ï¼Œç”¨ä»¥è§£å†³ä¹‹å‰ C/C++ ç³»ä¸­ #include å’Œ #import å¸¦æ¥çš„å¼•ç”¨æ³›æ»¥ä»¥åŠç¼–è¯‘æ—¶é—´è¿‡é•¿çš„é—®é¢˜çš„ä¸€ç§æ‰‹æ®µã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å°¤å…¶æ˜¯åœ¨ Swift å¼•å…¥ä¹‹åï¼ŒModule çš„æ¦‚å¿µåº”è¯¥å·²ç»æ·±å…¥äººå¿ƒã€‚å¤§å®¶å¯èƒ½å·²ç»ä¹ æƒ¯ç›´æ¥ä½¿ç”¨ @import æ¥å¼•ç”¨æŸä¸ª Moduleï¼Œæˆ–è€…å…¶ä¸­æŸä¸ªåŠŸèƒ½å•å…ƒã€‚å°¤å…¶æ˜¯ä½¿ç”¨ CocoaPods é›†æˆå¼€å‘çš„æ—¶å€™ï¼Œå…¶å†…éƒ¨å®é™…ä¸Šä¹Ÿæ˜¯åšäº†ä¸€äº› module çš„å·¥ä½œï¼Œåœ¨ Pods ç›®å½•ä¸­å……æ–¥ç€ &lt;code&gt;.modulemap&lt;/code&gt; çš„èº«å½±ï¼Œæƒ³å¿…å¤§å®¶ç»å¸¸çœ‹åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;è€Œ ä¸€ä¸ª module çš„å±æ€§æ˜¯ç”±å®šä¹‰å®ƒçš„ &lt;code&gt;.modulemap&lt;/code&gt; æ–‡ä»¶æ¥å†³å®šçš„ï¼Œå…¶ç®€å•è¯­æ³•å¤§æ¦‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;module module_name &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;system&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    header &lt;span class=&#34;s2&#34;&gt;&amp;#34;header.h&amp;#34;&lt;/span&gt;
    link &lt;span class=&#34;s2&#34;&gt;&amp;#34;linked_library&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; *
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æœå¯¹å…¶ä¸­ &lt;a href=&#34;https://clang.llvm.org/docs/Modules.html#module-map-language&#34;&gt;Modules çš„è¯­æ³•&lt;/a&gt;æ„Ÿå…´è¶£ï¼Œå¯ä»¥åˆ° Clang çš„å®˜æ–¹æ–‡æ¡£ä¸‹é€šè¯»ä¸‹ï¼Œä½ è‚¯å®šä¼šå¯¹ Modules è¿™ä¸€å¥—æœ‰æ›´æ¸…æ¥šçš„è®¤è¯†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;umbrella-header&#34;&gt;Umbrella Header&lt;/h3&gt;

&lt;p&gt;è¯´èµ·æ¥ï¼ŒUmbrella Header æ˜¯åœ¨ Framework çš„æ¦‚å¿µè¢«å¼•å…¥çš„ï¼Œä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ¨¡å—å‡å­˜åœ¨ä¸€ä¸ª Umbrella Header ç”¨æ¥å°†é‚£äº›ä½ æƒ³æš´éœ²ç»™æ¨¡å—å¤–ç•Œè°ƒç”¨çš„å¤´æ–‡ä»¶åŒ…è£¹åœ¨ä¸€èµ·ã€‚é¿å…ä½¿ç”¨è€…åœ¨ä½¿ç”¨è¯¥æ¨¡å—çš„æ—¶å€™éœ€è¦æ‰‹åŠ¨è¾“å…¥å¤šä¸ª Header çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ å…¶å® Mac ç«¯å¾ˆæ—©å°±æœ‰è¿™ä¸ªæ¦‚å¿µï¼ŒiOS ä¸­ç‰¹æŒ‡ iOS 8 å¼€å§‹å®˜æ–¹åŠ å…¥ Dynamic Framework ä»¥åçš„æ¦‚å¿µã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä¸‹æ‰€ç¤ºï¼Œæ²¡æœ‰ Umbrella Header çš„æƒ…å†µä¸‹ä½ éœ€è¦å°†æ‰€æœ‰éœ€è¦å¼•å…¥çš„å¤´æ–‡ä»¶ä¾æ¬¡å†™å‡ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZCustomCell.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZCustomView.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZCustomViewController.h&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨ä½¿ç”¨äº† Umbrella Header ä¹‹åï¼Œä½ åªéœ€è¦ä¸‹é¢ä¸€è¡Œå³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;XYZModule/XYZModule.h&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“ç„¶ï¼Œè¿˜å­˜åœ¨ umbrella frameworkï¼Œæ„Ÿå…´è¶£å¤§å®¶å¯ä»¥åˆ°&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/FrameworkAnatomy.html#//apple_ref/doc/uid/20002253-97623-BAJJHAJC&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ä¸‹è§‚çœ‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;bridging-header&#34;&gt;Bridging-Header&lt;/h3&gt;

&lt;p&gt;æ¡¥æ¥æ–‡ä»¶æ˜¯åœ¨ Swift æ¨å‡ºä¹‹åï¼ŒApple å¼•å…¥iOS ç”Ÿæ€çš„ç”¨ä»¥æ¡¥æ¥ Swift å’Œ Objective-C ç›¸äº’è°ƒç”¨çš„ä¸€ç§æ–¹å¼ ï¼ˆMix and Matchï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœåœ¨ Swift ä¸­æƒ³ä½¿ç”¨ Objective-C ç±»å®šä¹‰çš„å†…å®¹ï¼Œå°±éœ€è¦å»ºç«‹ Bridging Headerï¼Œç„¶ååœ¨å…¶ä¸­å®šä¹‰ä½ æƒ³è¦æš´éœ²çš„ OC å¤´æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/YwqHEKJ.png&#34; alt=&#34;Bridging Header&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„æ“ä½œåœ¨&lt;a href=&#34;https://developer.apple.com/documentation/swift/imported_c_and_objective-c_apis/importing_objective-c_into_swift&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;æœ‰é’ˆå¯¹åœ¨åŒä¸€ä¸ª App Target å’Œåœ¨åŒä¸€ä¸ª Framework å†…ä¸¤ç§æƒ…å†µå‡æœ‰è¯´æ˜ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;åœ¨æ¢³ç†è¿™äº›æ¦‚å¿µçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°è‡ªå·±ä¹‹å‰å¯¹æ¡¥æ¥æ–‡ä»¶æœ‰ä¸ªè¯¯åŒºï¼Œå¦‚æœä½ åœ¨ App çš„ä¸» Target ä¸­éœ€è¦è¿›è¡Œ OC å’Œ Swift çš„æ··ç¼–ï¼Œä½¿ç”¨ Bridging Header æ˜¯å¿…é€‰ï¼Œå¦‚æœä½ æ˜¯åœ¨åŒä¸€ä¸ª Framework ä¸­è¿›è¡Œçš„æ··ç¼–ï¼ŒBridging-Header æ˜¯å¹¶ä¸éœ€è¦çš„ï¼Œä½ éœ€è¦åšçš„åªæ˜¯åœ¨ Umbrella Header é‡ŒåŠ å…¥ä½ æƒ³æš´éœ²ç»™ Swift æ–‡ä»¶ä½¿ç”¨çš„ OC å¤´æ–‡ä»¶å³å¯ï¼Œä¹‹å‰è‡ªå·±ä¸€ç›´æ˜¯æ˜¾å¼çš„å»ºç«‹ä¸€ä¸ª Bridging-Headerï¼Œç„¶ååœ¨ Umbrella Header ä¸­å¼•å…¥è¯¥å¤´æ–‡ä»¶ï¼Œæƒ³æ¥è¿™ç§æ–¹å¼åªæ˜¯å°†ä½ æƒ³æš´éœ²åœ¨å¤–çš„å¤´æ–‡ä»¶è¿›è¡Œäº†äºŒæ¬¡åŒ…è£¹è€Œå·²ï¼Œå› ä¸º Cocoapods æ˜¯å°†æ‰€æœ‰ public header å‡åŠ å…¥åˆ° umbrella header é‡Œäº†ï¼Œå› æ­¤å•ä¸ª framework å†…éƒ¨å¼€å‘ï¼Œå³ä½¿æ²¡æœ‰ bridge header ä¹Ÿæ˜¯èƒ½å¤Ÿå°†ç¬¦å·æš´éœ²ç»™ Swift çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;cocoapods&#34;&gt;Cocoapods&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬æ¯æ¬¡æ‰§è¡Œ &lt;code&gt;pod install&lt;/code&gt; çš„æ—¶å€™ï¼Œå¦‚æœä½ ä½¿ç”¨ &lt;code&gt;â€”verbose&lt;/code&gt; æ¥çœ‹è¯¦ç»†å®‰è£…è¿‡ç¨‹å°±èƒ½çœ‹åˆ°ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå°†è¦è¢«å®‰è£…çš„ Pod å‡ä¼šæ‰§è¡Œç”Ÿæˆ module map å’Œ umbrella header è¿™ä¸¤ä¸ªé˜¶æ®µï¼Œå¦‚ä¸‹æ‰€ç¤ºéƒ¨åˆ† Install æŒ‡ä»¤çš„ä»£ç ï¼Œä»£ç ä½äº &lt;code&gt;lib/cocoapods/installer/xcode/pods_project_generator/aggregate_target_installer.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;install!&lt;/span&gt;
       &lt;span class=&#34;no&#34;&gt;UI&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- Installing target `&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;#{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;` &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;#{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;add_target&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;create_support_files_dir&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;create_support_files_group&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;create_xcconfig_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;host_requires_frameworks?&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;create_info_plist_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info_plist_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    	    &lt;span class=&#34;n&#34;&gt;create_module_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;create_umbrella_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;elsif&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uses_swift?&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;create_module_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    			&lt;span class=&#34;n&#34;&gt;create_umbrella_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;native_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;
      
     &lt;span class=&#34;c1&#34;&gt;# Some Code&lt;/span&gt;
     &lt;span class=&#34;c1&#34;&gt;# Some Code&lt;/span&gt;
     &lt;span class=&#34;c1&#34;&gt;# Some Code      &lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¾ˆæ˜ç¡®ï¼ŒCocoapods åœ¨ install æŸä¸ª Pod çš„æ—¶å€™ä¼šæ‰§è¡Œåˆ›å»º module map æ–‡ä»¶ä»¥åŠ umbrella header æ–‡ä»¶çš„å·¥ä½œã€‚è¯¦ç»†çš„ä»£ç å¤§å®¶å¯ä»¥ç›´æ¥åˆ° Cocoapods æºç ä¸‹  &lt;code&gt;lib/cocoapods/generator&lt;/code&gt; ç›®å½•ä¸‹çœ‹ï¼Œåˆ†åˆ«æ˜¯ &lt;code&gt;module_map.rb&lt;/code&gt; å’Œ &lt;code&gt;umbrella_header.rb&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;å…¶ä¸­åœ¨å„è‡ªæ–‡ä»¶çš„æ³¨é‡Šéƒ¨åˆ†ä¹Ÿæœ‰é’ˆå¯¹ç”Ÿæˆæ–‡ä»¶çš„è¯´æ˜ï¼Œæ¯”å¦‚ &lt;code&gt;module_map.rb&lt;/code&gt; ä¸­è¯´æ˜äº† module map çš„ä½œç”¨ï¼Œ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Generates LLVM module map files. A module map file is generated for each Pod and for each Pod target definition that is built as a framework. It specifies a different umbrella header than usual to avoid name conflicts with existing headers of the podspec.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨ &lt;code&gt;umbrella_header.rb&lt;/code&gt; ä¸­è¯´æ˜äº† umbrella header çš„ä½œç”¨ï¼Œ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Generates an umbrella header file for clang modules, which are used by dynamic frameworks on iOS 8 and OSX 10.10 under the hood. If the target is a +PodTarget+, then the umbrella header is required to make all public headers in a convenient manner available without the need to write out header declarations for every library header.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;é—®é¢˜åŸå› &#34;&gt;é—®é¢˜åŸå› &lt;/h2&gt;

&lt;p&gt;é¦–å…ˆè§£ç­”ï¼šä¸ºä»€ä¹ˆ Example å·¥ç¨‹èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ è€Œç”¨äº†ä¸»å·¥ç¨‹æ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å› ä¸ºç›®å‰ä¸»å·¥ç¨‹éƒ½è¦æ±‚æˆ‘ä»¬è‡ªè¡Œå¼€å‘çš„ pod ä»¥åŠ¨æ€ framework çš„å½¢å¼å‚ä¸ï¼Œä½†æ˜¯åœ¨ Example å·¥ç¨‹å¼€å‘çš„æ—¶å€™æˆ‘ä»¬çš„ &lt;code&gt;podfile&lt;/code&gt; å¹¶æœªæŒ‡å®š &lt;code&gt;use_frameworks!&lt;/code&gt; ç”¨ä»¥äº§å‡ºåŠ¨æ€ frameworkï¼Œå› æ­¤æœªæš´éœ²å‡ºè¯¥é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä»¥ framework çš„å½¢å¼çš„ module æ‰ä¼šæœ‰è¯¥é—®é¢˜ï¼Œå‡†ç¡®çš„è¯´ï¼Œåº”è¯¥æ˜¯ &lt;code&gt;Dynamic Framework&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;äº†è§£äº†ä»¥ä¸Šæ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹æˆ‘ä»¬çš„é—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬çš„é—®é¢˜æ˜¯åœ¨ framework å†…éƒ¨è°ƒç”¨ç³»ç»Ÿ C åº“ä»£ç å‡ºç°çš„é—®é¢˜ï¼Œä» Xcode çš„æŠ¥é”™ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬é€šè¿‡ bridging header å¼•å…¥çš„ C æ–‡ä»¶å¹¶ä¸ä»¥ module çš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤ç¼–è¯‘å™¨æŠ¥é”™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è§£å†³è¿‡ç¨‹&#34;&gt;è§£å†³è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;å…¶å®å§ï¼Œå¤§å®¶éƒ½èƒ½æƒ³åˆ°ï¼Œä½¿ç”¨ Objective-C åšä¸ªå°è£…ï¼Œæˆ–è€…å¹²è„†ç›´æ¥è°ƒç”¨ C æ–‡ä»¶çš„ç±»ç”¨ OC é‡å†™ä¸å°±å®Œäº†ä¹ˆï¼Œå¯æ˜¯å¦‚æœä¸‹æ¬¡ä½ å†é‡åˆ°äº†å‘¢ï¼Ÿ æˆ–è€…è¦æ”¹é€ äº†ä¸€ä¸ªçº¯ Swift åº“å‘¢ï¼ŸçŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ‰èƒ½é¿å…å†æ¬¡è½å‘å§ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;å› ä¸º Objective-C è‡ªèº«ç¼–è¯‘å™¨æ˜¯å¸®ä½ åšäº† modular åŒ–çš„ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ é€‰æ‹©äº†å‰è€…ï¼Œè¿˜æœ‰ä¸ªé™åˆ¶ï¼Œä½ å¹¶ä¸èƒ½æŠŠä¸Šé¢ C çš„å¤´æ–‡ä»¶æ”¾åˆ°ä½ çš„ Objective-C çš„å¤´æ–‡ä»¶ä¸­ï¼Œå› ä¸ºæœ¬è´¨ä¸Šï¼Œæœ€åè¿™ä¸ªå¤´æ–‡ä»¶è¿˜æ˜¯è¦æš´éœ²ç»™ Umbrella Header çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é¦–å…ˆï¼Œèƒ½å¦å…è®¸ç¼–è¯‘å™¨æ”¯æŒåœ¨ module ä¸­å¼•å…¥é modular çš„å¤´æ–‡ä»¶å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;Xcode åœ¨ build setting ä¸­æä¾›äº†  &lt;code&gt;Allow Non-modular Includes In Framework Modules&lt;/code&gt; æ¥æ§åˆ¶æ˜¯å¦å…è®¸åœ¨å½“å‰ framework ä¸­æ”¯æŒé modular å¤´æ–‡ä»¶å¼•å…¥ï¼Œå…¶å¹¶ä¸é€‚ç”¨äºçº¯ Swift é¡¹ç›®ï¼Œè€Œä¸”å³ä½¿é€‚ç”¨ï¼Œå…¶ä¼šå¯¼è‡´æ‰€æœ‰ç”¨åˆ°è¯¥ framework çš„å¤§çš„ç¼–è¯‘å•å…ƒéƒ½ä¸èƒ½å†ä½¿ç”¨ module å½¢å¼å¼•å…¥å¤´æ–‡ä»¶äº†ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»é€‚ç”¨å¹³å¦å¼çš„ &lt;code&gt;#include &amp;quot;&amp;quot;&lt;/code&gt; å½¢å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/S4i2chx.png&#34; alt=&#34;Build Setting&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œé€šè¿‡åªèƒ½ä»æ ¹æºä¸Šæ¥è§£å†³è¯¥é—®é¢˜äº†ï¼Œæ—¢ç„¶éœ€è¦å¼•å…¥çš„æ–‡ä»¶æ˜¯ modular headerï¼Œæˆ‘ä»¬å°±è¦æƒ³åŠæ³•æ¥å°†å…¶åŒ…è£¹ä¸º moduleã€‚ åœ¨æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œå°±åœ¨ Swift åˆšæ¨å‡ºçš„æ—¶å€™ï¼Œå¤§å®¶å·²ç»é‡åˆ°è¿™ä¸ªé—®é¢˜äº†ï¼Œé‡åˆ°æœ€å¤šçš„å°±æ˜¯&lt;code&gt;CommonCrypto&lt;/code&gt; ç»å¸¸è¢«ä½¿ç”¨åˆ°çš„ C åº“ï¼Œå¸¸è§çš„ MD5 è®¡ç®—å°±æ˜¯å…¶æä¾›çš„ APIï¼Œä½†æ˜¯åœ¨å‰å‡ å¹´å®˜æ–¹å¹¶æœªå°†è¯¥åŠ¨æ€åº“ module åŒ–ï¼Œå› æ­¤å¯¼è‡´ä½ æ— æ³•åœ¨ Swift æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ç±»ä¼¼ &lt;code&gt;#import &amp;lt;CommonCrypto/CommonCrypto.h&amp;gt;&lt;/code&gt; è¿™ç§å†™æ³•ã€‚è‡ªç„¶è€Œè¨€å¤šäº†å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸‹å‡ºè‡ª StackOverflow ä¸Š &lt;a href=&#34;https://stackoverflow.com/questions/25248598/importing-commoncrypto-in-a-swift-framework/37125785#37125785&#34;&gt;Importing CommonCrypto in a Swift framework&lt;/a&gt; çš„å¸–å­ä¸‹é¢å°±æä¾›äº†å¤šç§è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¿˜æ˜¯é‚£å¥è¯ï¼Œä½ æ˜¯å¯ä»¥é€šè¿‡ Objective-C åšæ¡¥æ¥æ¥è¾¾åˆ°åŒæ ·æ•ˆæœçš„ã€‚æ¯•ç«Ÿ Swift æœ¬èº«å°±æ˜¯ä¸€é—¨å¿ƒæ€æƒ³æŠ›å¼€ C çš„å†å²åŒ…è¢±ï¼Œå› æ­¤æƒ³æ‹¥æœ‰ä¸€ä¸ªçº¯çº¯çš„ Swift ä»£ç ä¸æ²¾æŸ“ä¸€ç‚¹ C æ–‡ä»¶æ°”æ¯ï¼Œä½ å°±è¦åšä¸€äº›å·¥ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å…¶ä¸­æ ¹æœ¬é—®é¢˜å°±æ˜¯ä¸º &lt;code&gt;CommonCrypto&lt;/code&gt; è¿™ä¸ª C ç¼–è¯‘å•å…ƒå®šä¹‰ moduleï¼Œä¸Šé¢ä¹Ÿæåˆ°äº† LLVM æ˜¯é€šè¿‡ &lt;code&gt;modulemap&lt;/code&gt; æ–‡ä»¶æ¥è¯†åˆ«çš„ï¼Œæ‰€ä»¥åªè¦é€šè¿‡ &lt;code&gt;.modulemap&lt;/code&gt; æ¥å®šä¹‰å³å¯ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;    module CommonCrypto [system] {
        header &amp;#34;/usr/include/CommonCrypto/CommonCrypto.h&amp;#34;
        export *
    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®šä¹‰çš„ modulemap è‡ªç„¶å¯ä»¥æ”¾åˆ°ä»»æ„ç›®å½•ï¼Œåªè¦è®©ç¼–è¯‘å•å…ƒåœ¨ç¼–è¯‘çš„æ—¶å€™èƒ½å¤Ÿæœç´¢çš„åˆ°å³å¯ï¼ŒXcode é€‰é¡¹çš„ Build Settings ä¸‹çš„ Swift Compiler - Search Paths ã€‚æ·»åŠ  .modulemap æ–‡ä»¶æ‰€åœ¨è·¯å¾„å³å¯ã€‚åœ¨ç¼–è¯‘çš„æ—¶å€™ LLVM è‡ªç„¶ä¼šæŸ¥æ‰¾åˆ° .modulemap æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ Module ä¿¡æ¯ã€‚ä½ æ­¤æ—¶å°±å¯ä»¥åœ¨ä½¿ç”¨  CommonCrypto çš„åœ°æ–¹ä½¿ç”¨ modular header äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿‡äº†å‡ å¹´ä¹‹åï¼Œå®˜æ–¹æ‰å°†è¯¥åº“å®šä¹‰ä¸º moduleï¼Œåœ¨ Xcode è‡ªå¸¦çš„ iOS SDK ä¸­ &lt;code&gt;/usr/include/CommonCrypto&lt;/code&gt; ä¸‹å¯ä»¥çœ‹åˆ° &lt;code&gt;module.modulemap&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;module CommonCrypto [system] [extern_c] {
      umbrella header &amp;#34;CommonCrypto.h&amp;#34;
      export *
      module * { export * }
      
      module Error {
          header &amp;#34;CommonCryptoError.h&amp;#34;
          export *
      }
      
      module Random {
          header &amp;#34;CommonRandom.h&amp;#34;
          export *
      }
    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¤§å®¶ä¹Ÿæ³¨æ„åˆ°äº†åœ¨ CommonCrypto çš„åŒçº§ç›®å½•ä¸­å®é™…ä¸Šè¿˜æœ‰å¾ˆå¤šçš„ç³»ç»Ÿ C åº“ä»£ç ï¼Œå¹¶ä¸”ä¹Ÿæœ‰ä¸€ä¸ª module.modulemap æ–‡ä»¶ï¼Œæˆ‘è£å‰ªä¸€æ®µä»£ç å¤§å®¶çœ‹ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;module Compression [system] [extern_c] {
    header &amp;#34;compression.h&amp;#34;
    export *
    link &amp;#34;compression&amp;#34;
}
    
module Darwin [system] [extern_c] [no_undeclared_includes] {
    // Headers that are repeatedly included, and therefore should not be
    	// assigned to any given module.
    	exclude header &amp;#34;_structs.h&amp;#34;
    	exclude header &amp;#34;sys/_structs.h&amp;#34;
    
    	// C standard library
    	module C {
    		textual header &amp;#34;assert.h&amp;#34;
    
    	  module setjmp {
    			header &amp;#34;setjmp.h&amp;#34;
    			export *
    		}
    
    		module signal {
    			header &amp;#34;signal.h&amp;#34;
    			export *
    		}
    
    		module stdio {
    			header &amp;#34;stdio.h&amp;#34;
    			export *
    		}
    }
    
    module zlib [system] [extern_c] {
    	header &amp;#34;zlib.h&amp;#34;
    	export *
    	link &amp;#34;z&amp;#34;
    }
    
    module SQLite3 [system] [extern_c] {
    	header &amp;#34;sqlite3.h&amp;#34;
    	link &amp;#34;sqlite3&amp;#34;
    	explicit module Ext {
    		header &amp;#34;sqlite3ext.h&amp;#34;
    		export *
    	}
    	export *
    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ Swift ä»£ç é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¼¼ &lt;code&gt;import Darwin.C.stdio&lt;/code&gt; å†™æ³•çš„åŸå› ã€‚ä½†æ˜¯è¿˜æ˜¯å­˜åœ¨ä¸€äº› C åº“å¹¶æ²¡æœ‰è¢«å®šä¹‰ä¸º moduleï¼Œè€Œæœ¬æ¬¡ç”¨æ¥åš DNS è§£æçš„ &lt;code&gt;resolv.h&lt;/code&gt; å°±æ˜¯å…¶ä¸­ä¸€å‘˜ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“åˆ°æˆ‘ä»¬è§£å†³æ€è·¯é‡Œæ¥çœ‹å°±æ˜¯è¦è§£å†³ modulemap å¦‚ä½•å®šä¹‰ï¼Œå¦‚ä½•å’Œæˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„ cocoapods æ•´åˆçš„é—®é¢˜äº†ã€‚æ—¢ç„¶æ˜¯åœ¨ä½œä¸º pod è¿›è¡Œå¼€å‘ï¼Œè‡ªç„¶æ˜¯éœ€è¦å°† module map æ–‡ä»¶åŠ å…¥åˆ° pod çš„ä»£ç ç®¡ç†ä¸­å»ã€‚æ¯”å¦‚å°†å…¶æ”¾ç½®äºå•ä¸ª pod æ ¹ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ podspec ä¸­é…ç½®å¥½è·¯å¾„ä»¥ä¾¿ç¼–è¯‘çš„æ—¶å€™ Swift Search Paths ä¸­æœ‰å®ƒã€‚è‡ªç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ resolv.modulemap å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;module Resolv &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;system&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    header &lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/include/resolv.h&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; *
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶ååœ¨å¯¹åº”çš„ podspec æ–‡ä»¶ä¸­é…ç½® build setting ä¸­çš„å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subspec&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Core&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;source_files&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ZHDiagnosisTool/Classes/Core/**/*&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preserve_paths&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pod_target_xcconfig&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;SWIFT_INCLUDE_PATHS[sdk=macosx*]&amp;#39;&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;$(PODS_ROOT)/ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;SWIFT_INCLUDE_PATHS[sdk=iphoneos*]&amp;#39;&lt;/span&gt;         &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;$(PODS_ROOT)/ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;SWIFT_INCLUDE_PATHS[sdk=iphonesimulator*]&amp;#39;&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;$(PODS_ROOT)/ZHDiagnosisTool/Classes/Core/ModuleMap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¯æ˜¯ï¼Œé—®é¢˜å‡ºåœ¨ PODS_ROOTS è¿™ä¸ªè·¯å¾„ä¸Šï¼Œå¦‚æœæˆ‘ä»¬è¿›è¡Œæœ¬åœ°å¼€å‘ï¼Œè¯¥è·¯å¾„å°±æ˜¯ Cocoapods æ‰§è¡Œå®Œæ¯•ä¹‹åç”Ÿæˆçš„ä¸´æ—¶ Pods ç›®å½•ï¼Œå¹¶ä¸æ˜¯åŸå§‹ podspec æ–‡ä»¶æ‰€åœ¨çš„åœ°æ–¹ï¼Œè€Œå®˜æ–¹ä¹Ÿè¡¨æ˜äº†ï¼Œä¸ä¼šå¯¹è¿™ç§ Local Pods ç‰¹å®šæä¾›ä¸€ä¸ªç¯å¢ƒå˜é‡æ¥è·å–ï¼Œ å¦‚ä¸‹é“¾æ¥å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/CocoaPods/CocoaPods/issues/809&#34;&gt;local pod development on a project that includes libraries Â· Issue #809 Â· CocoaPods/CocoaPods&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¦‚å›¾ä¸­ï¼ŒæŒ‡å®š $(PODS_ROOT) è·¯å¾„å®é™…ä¸Šåœ¨å¼€å‘ Local Pod çš„æ—¶å€™å°±ä¼šæ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥å°±éœ€è¦æŒ‰ç…§ä¸Šé¢é“¾æ¥ä¸­çš„æ–¹å¼è‡ªè¡Œæ‰‹åŠ¨æ‹¼æ¥è·¯å¾„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°½å¯èƒ½ä¸ç”¨ PODS_ROOT è¿™ä¸ªè·¯å¾„ï¼Œéœ€è¦å¦å¤–æ‰¾ä¸€ä¸ªä¸ä¼šå› ä¸º Pod ä½ç½®è€Œå˜åŒ–çš„è·¯å¾„ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ç»ˆå‚è€ƒäº†ä»¥ä¸‹ repo ä¸­å·¥ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/onmyway133/Arcane&#34;&gt;onmyway133/Arcane&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ä½œè€…ä½¿ç”¨ Pod çš„ script phase æ¥å®Œæˆ .modulemap çš„æ“ä½œï¼Œè¿™æ ·ä¼šæ›´åŠ çµæ´»ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ ·ï¼Œé’ˆå¯¹æˆ‘ä»¬è‡ªå·±æœ¬æ¬¡çš„éœ€æ±‚æ¥çœ‹ï¼Œ.podspec ä¸­çš„ script å¦‚ä¸‹æ‰€å†™å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Create&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;BUILT_PRODUCTS_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/RESOLV.framework&amp;#34;&lt;/span&gt;
          
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; already exists, so skipping the rest of the script.&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;exit&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
          
mkdir -p &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Modules&amp;#34;&lt;/span&gt;
          
&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;module RESOLV [system] {
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    header \&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SDKROOT&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/usr/include/resolv.h\&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    export *
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;}&amp;#34;&lt;/span&gt; &amp;gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Modules/module.modulemap&amp;#34;&lt;/span&gt;
               
    
&lt;span class=&#34;c1&#34;&gt;# Generate fake header...&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; mkdir &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers&amp;#34;&lt;/span&gt;
touch &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers/resolv.h&amp;#34;&lt;/span&gt;
    
&lt;span class=&#34;c1&#34;&gt;# Soft link C header to local framework Headers&lt;/span&gt;
ln -sf &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SDKROOT&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/usr/include/resolv.h&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;FRAMEWORK_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/Headers/resolv.h&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ¯æ¬¡åœ¨ç¼–è¯‘è¿è¡Œå‰ï¼Œæˆ‘ä»¬ä¼šè‡ªè¡Œåˆ›å»ºä¸€ä¸ª &lt;code&gt;Resolv.framework&lt;/code&gt;ï¼Œå…¶ä¸­ Header ç›®å½•ä¸­æˆ‘ä»¬æ”¾ä¸€ä¸ªç©ºç™½æ–‡ä»¶å¹¶ä¸”è½¯é“¾æ¥åˆ°çœŸæ­£æƒ³è¦é“¾æ¥çš„å¤´æ–‡ä»¶ä¸Šï¼Œç„¶ååœ¨è¯¥ framework ä¸­åˆ›å»º modulemap æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ä¹‹åï¼Œæˆ‘ä»¬åœ¨ .podspec ä¸­æŒ‡å®š script phase ä¸ºç¼–è¯‘å‰å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;script_phase&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;ss&#34;&gt;:name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Resolv&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;ss&#34;&gt;:script&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;script_above&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;ss&#34;&gt;:execution_position&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;ss&#34;&gt;:before_compile&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ ·ï¼Œé€šè¿‡ &lt;code&gt;Resolv.framework&lt;/code&gt; çš„æ¡¥æ¥ï¼ŒSwift ä»£ç ä¸­å°±å¯ä»¥ç›´æ¥é€šè¿‡ &lt;code&gt;import RESOLV&lt;/code&gt; æ¥ä½¿ç”¨äº†ã€‚å½“ç„¶ï¼Œé“¾æ¥è¿™ä¸€ç¯ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§å½¢å¼è¾¾åˆ°ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç›´æ¥åœ¨ podspec æ–‡ä»¶ä¸­æŒ‡å®šä¾èµ–ï¼Œå¦‚ &lt;code&gt;core.library = &amp;quot;resolv&amp;quot;&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åœ¨ &lt;code&gt;.modulemap&lt;/code&gt; æ–‡ä»¶ä¸­æ˜¾å¼çš„ linkï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;module Resolv &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;system&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
header &lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/include/resolv.h&amp;#34;&lt;/span&gt;
link &lt;span class=&#34;s2&#34;&gt;&amp;#34;resolv&amp;#34;&lt;/span&gt;
&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; *
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è€Œä¸”é€šè¿‡å°† module map æ–‡ä»¶æ”¾ç½®äº product äº§å‡ºç›®å½•è¿™é‡Œä¹Ÿè§£å†³äº†è·¯å¾„æŒ‡å®šçš„é—®é¢˜ï¼Œå› ä¸º product folder æ˜¯é»˜è®¤åœ¨ç¼–è¯‘çš„æœç´¢è·¯å¾„ä¸‹çš„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æ€»ç»“æ¥çœ‹ï¼Œå°±æ˜¯æƒ³è¦åœ¨çº¯ Swift çš„é¡¹ç›®ä¸­å¼•å…¥ç³»ç»Ÿ C åº“æ–‡ä»¶ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯æœªè¢« modular åŒ–çš„æ–‡ä»¶ï¼Œå› ä¸ºæœ‰äº› C æ–‡ä»¶å·²ç»è¢«ç³»ç»Ÿé»˜è®¤å°è£…æˆäº† module äº†ï¼‰ã€‚ä»¥ä¸Šåªæ˜¯ä¸€äº›ç®€å•çš„æ¦‚å¿µè®²è§£ï¼Œæ•´ä¸ªç¼–è¯‘ç³»ç»Ÿä»¥åŠå¥—ä»¶éƒ½æ˜¯é•¿æ—¶é—´ä¸æ–­æ¼”åŒ–çš„ç»“æœï¼Œè¿™é‡Œä¹Ÿåªæ˜¯ç®€å•çš„è®²è¿°ï¼Œæœ‰ä¸€äº›æ¦‚å¿µå®é™…ä¸Šä¹Ÿåªæ˜¯ç‚¹åˆ°ä¸ºæ­¢ï¼Œå¤§å®¶å¦‚æœæ„Ÿå…´è¶£å¯ä»¥å¤šæ‰¾ä¸€äº›ç›¸å…³èµ„æ–™é˜…è¯»ä¸‹ï¼Œäº²è‡ªè¯•ä¸€è¯•ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://llvm.org/devmtg/2012-11/Gregor-Modules.pdf&#34;&gt;Modules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/LLVM&#34;&gt;LLVM - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://clang.llvm.org/docs/Modules.html#introduction&#34;&gt;Modules - Clang 8 documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://onevcat.com/2013/06/new-in-xcode5-and-objc/&#34;&gt;WWDC 2013 Sessionç¬”è®° - Xcode5å’ŒObjCæ–°ç‰¹æ€§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/25248598/importing-commoncrypto-in-a-swift-framework/37125785#37125785&#34;&gt;Importing CommonCrypto in a Swift framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://forums.developer.apple.com/thread/46477&#34;&gt;Adding CommonCrypto to custom Swift framework |Apple Developer Forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://theswiftdev.com/2018/01/15/how-to-call-c-code-from-swift/&#34;&gt;How to call C code from Swift - The.Swift.Dev.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/swift-and-ios-writing/using-a-c-library-inside-a-swift-framework-d041d7b701d9/&#34;&gt;Using a C library inside a Swift framework - Swift and iOS Writing - Medium&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>UserDefaults and Keychain</title>
      <link>https://hechen.xyz/post/userdefaults-and-keychain/</link>
      <pubDate>Fri, 21 Dec 2018 14:30:50 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/userdefaults-and-keychain/</guid>
      
        <description>

&lt;p&gt;Apple æä¾›äº†å‡ ç§æŒä¹…åŒ–æ–¹æ¡ˆï¼Œå…¶ä¸­ UserDefaults å’Œ Keychain æ˜¯ App å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„æ–¹æ¡ˆï¼Œè€Œä¸”ä»ä»¥å¾€å’ŒåŒäº‹çš„æ¢è®¨è¿‡ç¨‹ä¸­å‘ç°å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µä¸­æœ‰ä¸€äº›ç»†èŠ‚è¿˜æ˜¯ç†è§£ä¸å¤ªé€å½»ï¼Œå› æ­¤æœ¬æ–‡ä¼šé’ˆå¯¹è¿™äºŒè€…å±•å¼€è®²ä¸€è®²ã€‚&lt;/p&gt;

&lt;h2 id=&#34;userdefaults&#34;&gt;UserDefaults&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œé˜…è¯»å®Œ Apple å…³äº UserDefaults ä¸€èŠ‚çš„æ–‡æ¡£æè¿°ä¹‹åï¼Œæˆ‘è§‰å¾—æœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;UserDefaults çš„æ„æˆ&lt;/li&gt;
&lt;li&gt;UserDefaults çš„ç›®çš„&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;userdefaults-æ„æˆ&#34;&gt;UserDefaults æ„æˆ&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…·ä½“ UserDefaults å­˜å‚¨çš„åœ°æ–¹ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬åœ¨åº”ç”¨ä¸­å†™å…¥ Demo æ•°æ®ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wq9onOa.png&#34; alt=&#34;Write Key-Value to UserDefaults&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰“å° Library è·¯å¾„ï¼Œåœ¨ Finder ä¸­æ‰“å¼€è·¯å¾„:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/65ybYX6.png&#34; alt=&#34;Library&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚ä¸‹å±•ç¤ºå†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ Preferences ç›®å½•ä¸­å­˜åœ¨æŸä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚è¯¥ App Library ç›®å½•ä¸‹å­˜æ”¾çš„æ–‡ä»¶ä¸º &lt;code&gt;app.chen.ios.PersistenceDemo.plist&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ChqnDJa.png&#34; alt=&#34;Cache&#34; /&gt;
&lt;img src=&#34;https://i.imgur.com/cPvlFdR.png&#34; alt=&#34;Preferences&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¯¥ plist å†…å®¹å¦‚å›¾æ‰€ç¤ºï¼Œå³ä¸ºæˆ‘ä»¬ä¹‹å‰åœ¨ App ä¸­å†™å…¥çš„ Key-Valueã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/shdXoZN.png&#34; alt=&#34;plist&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥è¿™ä¹Ÿè¯æ˜äº†ï¼Œæˆ‘ä»¬é’ˆå¯¹ UserDefaults çš„è¯»å†™å®è´¨ä¸Šæ˜¯é’ˆå¯¹ plist æ–‡ä»¶çš„è¯»å†™ã€‚&lt;/p&gt;

&lt;p&gt;iOS ç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ åš &lt;code&gt;plist&lt;/code&gt; æ–‡ä»¶çš„è¯»å…¥ä»¥åŠ Cacheï¼Œæ ¹æ®æƒ…å†µä¼šæŠŠä½ åœ¨å†…å­˜ä¸­æ‰€åšçš„æ“ä½œåŒæ­¥åˆ° &lt;code&gt;plist&lt;/code&gt; æ–‡ä»¶ï¼ˆUserDefaults åŒæ­¥åˆ°å†…å­˜æ˜¯åŒæ­¥çš„ï¼ŒåŒæ­¥åˆ° Database æ˜¯å¼‚æ­¥çš„ï¼Œ iOS 8 å¼€å§‹ï¼Œä¼šæœ‰ä¸€ä¸ªå¸¸é©»è¿›ç¨‹ &lt;code&gt;cfprefsd&lt;/code&gt; æ¥è´Ÿè´£åŒæ­¥ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä½ ä¼šçœ‹æœ‰iOS é¢è¯•é¢˜ç›®ä¼šé—®é¢˜ï¼š ç³»ç»Ÿçš„ &lt;code&gt;UserDefaults&lt;/code&gt; çš„æœ¬è´¨ä»¥åŠå’Œ plist æ–‡ä»¶çš„ç›´æ¥è¯»å†™çš„åŒºåˆ«ï¼Ÿï¼ˆè¿™é¢˜ç›®å¤ª TM åäº†ã€‚ã€‚ã€‚ï¼‰&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;UserDefaults caches the information to avoid having to open the userâ€™s defaults database each time you need a default value. When you set a default value, itâ€™s changed synchronously within your process, and asynchronously to persistent storage and other processes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œå®è´¨ä¸Šï¼Œä½ æ˜¯å¯ä»¥ç›´æ¥é’ˆå¯¹ UserDefaults çš„æœ€ç»ˆäº§ç‰© plist æ–‡ä»¶è¿›è¡Œæ“ä½œçš„ï¼Œå½“ç„¶ï¼Œè¿™æ˜¯æœ‰é£é™©çš„ï¼Œè€Œä¸”æ— æ³•ä¿éšœæ­£å¸¸ä½¿ç”¨çš„ã€‚å®˜æ–¹åœ¨æ–‡æ¡£ä¸­ä¹Ÿæé†’äº†å¼€å‘è€…ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Donâ€™t try to access the preferences subsystem directly. Modifying preference property list files may result in loss of changes, delay of reflecting changes, and app crashes. To configure preferences, use the defaults command-line utility in macOS instead.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é‚£æ—¢ç„¶æœ¬è´¨ä¸Š UserDefaults æ˜¯ä½¿ç”¨ plist æ–‡ä»¶è¿›è¡Œå­˜å‚¨ï¼Œé‚£ä¹Ÿè¦æ±‚äº†æˆ‘ä»¬èƒ½å­˜å‚¨çš„ Value åªèƒ½æ”¯æŒ &lt;code&gt;plist&lt;/code&gt; æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œä¾‹å¦‚ &lt;code&gt;String&lt;/code&gt;ï¼Œ&lt;code&gt;Number&lt;/code&gt;ï¼Œ&lt;code&gt;Array&lt;/code&gt;ï¼Œ&lt;code&gt;Data&lt;/code&gt;ï¼Œ&lt;code&gt;Date&lt;/code&gt; ç­‰ï¼Œå½“ç„¶å¦‚æœä½ è¦å­˜å‚¨è‡ªå®šä¹‰çš„ç±»ï¼Œå…¶éœ€è¦éµå®ˆ &lt;code&gt;Codable&lt;/code&gt; åè®®ï¼ˆå®è´¨ä¹Ÿæ˜¯è¦å½’æ¡£ä¸º &lt;code&gt;Data&lt;/code&gt;ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/cxWHfvS.png&#34; alt=&#34;plist&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;userdefaults-ç›®çš„&#34;&gt;UserDefaults ç›®çš„&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;The defaults system allows an app to customize its behavior to match a userâ€™s preferences. For example, you can allow users to specify their preferred units of measurement or media playback speed. Apps store these preferences by assigning values to a set of parameters in a userâ€™s defaults database.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸€èˆ¬æˆ‘ä»¬åœ¨ &lt;code&gt;UserDefaults&lt;/code&gt; å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯ç”¨æˆ·çš„æŸäº›é…ç½®é¡¹ï¼Œä¸å› ä¸ºç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°æ„å¤–è€Œä¸¢å¤±ï¼Œæ¯”å¦‚æ˜¯å¦å¼€å¯äº†æ—¥å¤œé—´æ¨¡å¼äº†ï¼Œæ˜¯å¦å¼€å¯äº†å¤§å›¾æ¨¡å¼äº†ç­‰ç­‰ã€‚æˆ–è€…å­˜å‚¨ä¸€äº›å¯¹å®‰å…¨æ–¹é¢ä¸æ•æ„Ÿçš„æ•°æ®&lt;/p&gt;

&lt;p&gt;ä¸å»ºè®®å¾€ &lt;code&gt;UserDefaults&lt;/code&gt; é‡Œå­˜å‚¨è¾ƒå¤§çš„æ•°æ®ï¼Œä¾‹å¦‚ç›´æ¥å­˜å‚¨ä¸€å¼ å›¾ç‰‡ã€‚è€Œå¯¹äºè¿™ç§éœ€è¦å­˜å‚¨è¾ƒå¤§æ–‡ä»¶çš„éœ€æ±‚ï¼Œä½ å¯ä»¥å°†æ–‡ä»¶æœ¬èº«å­˜å‚¨åˆ°æœ¬åœ°ï¼Œè€Œ &lt;code&gt;UserDefaults&lt;/code&gt; é‡Œåªå­˜å‚¨è¯¥æ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/p&gt;

&lt;p&gt;æ¯•ç«Ÿåœ¨ App å¯åŠ¨ä¹‹åï¼ŒUserDefaults ä¼šè¿›è¡Œ IO ï¼Œè¯»å–æœ¬åœ° plist æ–‡ä»¶ï¼Œå› æ­¤ä¸€å®šç¨‹åº¦ä¸Šï¼Œä¹Ÿä¼šè¾ƒå°‘ App å¯åŠ¨ä¹‹å UserDefaults API é’ˆå¯¹ &lt;code&gt;plist&lt;/code&gt; æ–‡ä»¶ IO çš„æ—¶é—´ï¼Œçº¯å±ä¸ªäººæ£æµ‹ï¼Œæ²¡æœ‰ç»è¿‡å®éªŒéªŒè¯ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å…³äº-extension-ä¸­-userdefaults-çš„åº”ç”¨&#34;&gt;å…³äº Extension ä¸­ UserDefaults çš„åº”ç”¨&lt;/h3&gt;

&lt;p&gt;iOS ä¸Š Extension å’Œ Host App ä¹‹é—´åšæ•°æ®å…±äº«ä¹Ÿæ˜¯é€šè¿‡ UserDefaultsï¼Œå¼€å¯ App Group ä¹‹åï¼Œè¿™äºŒè€…å°±å¯ä»¥ä¿®æ”¹åŒä¸€ä»½é…ç½®ã€‚å…·ä½“ Extension å’Œ Host App ä¹‹é—´çš„å†…åœ¨å…³ç³»å¯ä»¥å…ˆçœ‹ä¸‹ Apple æ–‡æ¡£ã€‚æœ¬è´¨ä¸Šå¦‚ä¸‹æ‰€ç¤ºï¼Œ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/cZFlz6o.png&#34; alt=&#34;app_extensions_container_restrictions&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Extension å’Œ Host App ä¹‹é—´é€šè¿‡ Shared Container æ¥åšæ•°æ®å…±äº«ï¼Œè¯¥ SharedContainer ç§æœ‰ï¼Œå› æ­¤ä¸å­˜åœ¨äºå•ä¸€ App çš„æ²™ç›’å†…ã€‚åº”è¯¥æ˜¯ç³»ç»Ÿä¼šå•ç‹¬å¼€è¾Ÿä¸€å—ç©ºé—´ç”¨ä»¥åšå…±äº«æ•°æ®çš„å­˜å‚¨ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;After you enable app groups, an app extension and its containing app can both use the NSUserDefaults API to share access to user preferences. To enable this sharing, use the initWithSuiteName: method to instantiate a new NSUserDefaults object, passing in the identifier of the shared group.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å› ä¸º UserDefaults æ—¢ç„¶æ˜¯æš´éœ²åœ¨æœ¬åœ°èƒ½å¤Ÿè®¿é—®çš„æ–‡ä»¶å½“ä¸­çš„ï¼Œå› æ­¤ä¸è¦åœ¨ UserDefaults é‡Œå­˜å‚¨ä»»ä½• Security-Sensitive çš„æ•°æ®ã€‚ å¦‚æœè¦å­˜å‚¨ä¿å¯†çº§åˆ«è¾ƒé«˜çš„æ•°æ®ï¼Œå°±è¦ç”¨åˆ°å¦å¤–ä¸€ç§æŒä¹…åŒ–æ–¹æ¡ˆ â”€â”€ Keychain&lt;/p&gt;

&lt;h2 id=&#34;keychain&#34;&gt;Keychain&lt;/h2&gt;

&lt;p&gt;å…³äº Keychainï¼Œæ˜¯ Apple æä¾›ç»™å¼€å‘è€…ç”¨æ¥å­˜å‚¨ Security-Sensitive çš„æ•°æ®äº†ï¼Œæ¯”å¦‚ç™»å½•å¯†ç ï¼Œç”¨æˆ·æ ‡è¯†ï¼ŒåŠ å¯†æ•°æ®ç­‰ç­‰ã€‚ å®˜æ–¹ç¤ºæ„å›¾å¦‚ä¸‹ï¼Œå…¶å®ä¸­é—´ Keychain çš„ API è¿˜è¿›è¡Œäº† Decrypt å’Œ Encrypt çš„åŠ¨ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/tvA4lV3.png&#34; alt=&#34;Keychain services API&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Apple æä¾›çš„ Keychain API å¤§éƒ¨åˆ†éƒ½æ˜¯ C è¯­è¨€å†™æˆï¼Œä½¿ç”¨èµ·æ¥ç›¸å¯¹ä¸ä¾¿ï¼Œå› æ­¤åŸºæœ¬ä¸Šæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨äºŒæ¬¡åŠ å·¥è¿‡çš„åº“ï¼Œæ¯”å¦‚çŸ¥ä¹ç”¨çš„å°±æ˜¯ SMKeychainã€‚&lt;/p&gt;

&lt;p&gt;Keychain ä¸­çš„æ•°æ®å®Œå…¨äº¤ç”±ç³»ç»Ÿä¿ç®¡å¹¶åŠ å¯†è¿‡( AES 128 in GCM (Galois/Counter Mode))çš„ï¼Œå› æ­¤èƒ½å¤Ÿä¿è¯å®‰å…¨æ€§ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœå¯¹åŠ å¯†è¿™ä¸€å—æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹ä¸‹&lt;a href=&#34;https://www.apple.com/business/site/docs/iOS_Security_Guide.pdf&#34;&gt;è‹¹æœçš„ç™½çš®ä¹¦&lt;/a&gt;ä¸­ Keychain data protection è¿™ä¸€èŠ‚ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼ŒKeychain çš„æ•°æ®å¹¶ä¸å­˜æ”¾åœ¨ App çš„ Sanbox ä¸­ï¼Œå³ä½¿åˆ é™¤äº† Appï¼Œèµ„æ–™ä¾ç„¶ä¿å­˜åœ¨ keychain ä¸­ã€‚å¦‚æœé‡æ–°å®‰è£…äº†appï¼Œè¿˜å¯ä»¥ä» keychain è·å–æ•°æ®ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åŒä¸€ä¸ª-app-å†…éƒ¨å…±äº«&#34;&gt;åŒä¸€ä¸ª App å†…éƒ¨å…±äº«&lt;/h3&gt;

&lt;p&gt;ç±»ä¼¼ UserDefaults ï¼ŒKeychain ä¹Ÿæ”¯æŒ Extension å’Œ host app ä¹‹é—´çš„å…±äº«ï¼Œéœ€è¦åœ¨æ¯ä¸ª Target çš„ Capability ä¸‹å¼€å¯ Keychain Sharing åŠŸèƒ½ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºåŒä¸€ä¸ª Groupã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä¸åŒ-app-ä¹‹é—´å…±äº«&#34;&gt;ä¸åŒ App ä¹‹é—´å…±äº«&lt;/h3&gt;

&lt;p&gt;å’Œ UserDefaults ä¸åŒçš„æ˜¯ï¼ŒKeychain çš„æ•°æ®æ˜¯å¯ä»¥è·¨ App è·å–çš„ï¼Œä½†æ˜¯é™äºä¸€ä¸ªå¼€å‘è€…çš„ Appï¼Œä¹Ÿå°±æ˜¯éœ€è¦ç¡®ä¿è¿™äº› App æ‰€å±çš„ Team ID æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªä¹Ÿæ˜¯App è¿›è¡Œ SSO ç™»å½•çš„åŸºç¡€ï¼Œæ¯”å¦‚çŸ¥ä¹æ—¥æŠ¥ä½¿ç”¨çŸ¥ä¹ä¸» App ç™»å½•ä¹Ÿæ˜¯åŸºäºæ­¤åŸç†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/0L2MA23.png&#34; alt=&#34;shared items&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨éœ€è¦è¿›è¡Œ Keychain å…±äº«çš„ App å†…å¼€å¯ Keychain Sharing çš„èƒ½åŠ›ï¼Œæ‰€å±åŒä¸€ä¸ª Team ID ä¸‹çš„ App æœ¬èº«éƒ½å¯ä»¥è¯»å–è¯¥ Keychain çš„å†…å®¹ï¼Œç±»ä¼¼äº AppGroupï¼Œè¿™é‡Œä¹Ÿä¼šäº§ç”Ÿ Keychain Groupã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Allows this application to share passwords from its keychain with other applications made by your team.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DJsInJb.png&#34; alt=&#34;Keychain Sharing&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒæ–‡æ¡£&#34;&gt;å‚è€ƒæ–‡æ¡£&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/foundation/userdefaults&#34;&gt;https://developer.apple.com/documentation/foundation/userdefaults&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.reddit.com/r/jailbreak/comments/2qpqi9/ios_812_has_protection_against_plist_file_editing/&#34;&gt;https://www.reddit.com/r/jailbreak/comments/2qpqi9/ios_812_has_protection_against_plist_file_editing/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://iphonedevwiki.net/index.php/PreferenceBundles&#34;&gt;http://iphonedevwiki.net/index.php/PreferenceBundles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html&#34;&gt;https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/security/keychain_services&#34;&gt;https://developer.apple.com/documentation/security/keychain_services&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/soffes/SAMKeychain&#34;&gt;https://github.com/soffes/SAMKeychain&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps&#34;&gt;https://developer.apple.com/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>å¦‚ä½•åˆ¶ä½œ Send to 2Do çš„ Safari ä¹¦ç­¾</title>
      <link>https://hechen.xyz/post/send-to-2do/</link>
      <pubDate>Mon, 26 Nov 2018 14:59:50 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/send-to-2do/</guid>
      
        <description>

&lt;p&gt;ä½¿ç”¨é¼ æ ‡æ‹–æ‹½ä¸‹é¢è¿™ä¸ªé“¾æ¥åˆ°ä½ çš„ Favorites Bar ä¸Šï¼Œ&lt;/p&gt;

&lt;h1 id=&#34;2do&#34;&gt;2Do&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;javascript:window.location=&#34;&gt;Send to 2Do&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åç¼–è¾‘åœ°å€ï¼Œå°†å…¶æ›¿æ¢ä¸ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;javascript:window.location=&amp;#39;twodo://x-callback-url/add?task=&amp;#39;+encodeURIComponent(document.title)+&amp;#39;&amp;amp;note=&amp;#39;+encodeURIComponent(window.location)+&amp;#39;&amp;amp;action=url:&amp;#39;+encodeURIComponent(window.location)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/7M0xN1g.jpg&#34; alt=&#34;Change Value&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæœ¬è´¨ä¸Šæ˜¯æ‰§è¡Œäº†ä¸€æ®µ JS ä»£ç ï¼Œç»“åˆå½“å‰æ–‡æ¡£çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè°ƒç”¨ URL Schemeï¼Œå…¶ä¸­&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;document.title&lt;/code&gt; ä¸ºæ ‡é¢˜&lt;/li&gt;
&lt;li&gt;&lt;code&gt;window.location&lt;/code&gt; ä¸ºå½“å‰é¡µé¢é“¾æ¥&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;things&#34;&gt;Things&lt;/h1&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ Things çš„ URL Scheme çš„è§„åˆ™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;c1&#34;&gt;/// add a todo due when tommorow
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;things&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;///&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iamtitle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;notes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iamnotes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;when&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tomorrow&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ¯”å¦‚ä½ å¯ä»¥æŠŠé“¾æ¥å†…å®¹æ”¹ä¸ºæ”¯æŒ Send To Thingsï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;nx&#34;&gt;javascript&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;things:///add?title=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;amp;notes=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;amp;when=today&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h1 id=&#34;omnifocus&#34;&gt;OmniFocus&lt;/h1&gt;

&lt;p&gt;åŒç†ï¼Œå¯ä»¥æœ‰ Send To OmniFocus ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span class=&#34;nx&#34;&gt;javascript&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;omnifocus:///add?note=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;window&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;amp;name=&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ–è€…ç›´æ¥å» &lt;a href=&#34;http://people.omnigroup.com/kc/OmniFocus/SendToOmniFocusBookmarklet.html&#34;&gt;OmniFocus é¡µé¢&lt;/a&gt; ç”¨ç›¸åŒæ–¹å¼æŠŠèµ·å·²ç»è®¾ç½®å¥½æ­£ç¡® Value çš„é“¾æ¥æ‹–åˆ°ä¸Šæ–¹å·¥å…·æ¡ä¸Šå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ æ‰¾ä¸åˆ° Favorites Barï¼Œç‚¹å‡» Safari èœå•æ ä¸Šçš„ View èœå•å°±èƒ½çœ‹åˆ°ï¼ˆä¸­æ–‡ç³»ç»Ÿå«è§†å›¾ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ZBqkn4Z.jpg&#34; alt=&#34;Favorites Bar&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>é˜…è¯»æµç¨‹</title>
      <link>https://hechen.xyz/post/reading-process/</link>
      <pubDate>Tue, 16 Oct 2018 17:01:44 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/reading-process/</guid>
      
        <description>

&lt;p&gt;æœ€è¿‘ç»Ÿä¸€äº†ä¸€ä¸‹è‡ªå·±çš„é˜…è¯»æµç¨‹ï¼Œæ›´æ–°ä¸€ä¸‹ï¼Œå…·ä½“ç”¨åˆ°çš„å·¥å…·æœ‰&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;DEVONThink Pro&lt;/li&gt;
&lt;li&gt;PDFExpert&lt;/li&gt;
&lt;li&gt;MarginNote&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…¶ä¸­ 1 æ˜¯è¾“å…¥å’Œå½’æ¡£æºï¼Œ3 æ˜¯è¾“å‡ºæºã€‚ å¤§æ¦‚å°±æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/SrcVtP1.png&#34; alt=&#34;Reading Process&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;é‡‡é›†ç´ æ&#34;&gt;é‡‡é›†ç´ æ&lt;/h2&gt;

&lt;p&gt;åœ¨å¹³æ—¶æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼Œçœ‹åˆ°è‡ªå·±å–œæ¬¢çš„æ–‡ç« ä¹‹åï¼Œæƒ³è¿›è¡Œä¸€äº›æ ‡è®°æˆ–è€…åšç¬”è®°ï¼Œå¤§æ¦‚æœ‰å‡ ä¸ªé€‰æ‹©ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å°è±¡ç¬”è®°ç›´æ¥ clip å½“å‰ç½‘é¡µï¼Œä¹‹ååœ¨å°è±¡ç¬”è®°é‡Œè¿›è¡Œé˜…è¯»æˆ–è€…æ ‡è®°&lt;/li&gt;
&lt;li&gt;æ”¾è¿›ç¨åè¯»æœåŠ¡ä¸­ï¼Œæ¯”å¦‚ Pocket æˆ–è€… Instapaper ç­‰ï¼›&lt;/li&gt;
&lt;li&gt;ç”¨ Safari è‡ªå¸¦çš„ Save as PDF ä¹‹åå†ç”¨å•ç‹¬çš„ PDF å·¥å…·æŸ¥çœ‹ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è€Œæœ€è¿‘å‡ ä¸ªæœˆï¼Œå› ä¸º MarginNote 3 çš„å‘å¸ƒï¼Œç”±äºå…¶æä¾›çš„å¤§çº²è„‘å›¾çš„è‡ªåŠ¨ç”Ÿæˆï¼Œç»™æˆ‘æä¾›äº†ä¸€ç§ä¾¿åˆ©çš„æ‹†ä¹¦åŠŸèƒ½ï¼Œå› æ­¤ä¼šæŠŠå¹³æ—¶çœ‹åˆ°çš„æ–‡ç« éƒ½å½’é›†åˆ°ä¸€å¤„æ¥çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;å€ŸåŠ© DEVONthink çš„ Clip To DEVONthink çš„æ’ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŠŠæ–‡ç« å½’é›†åˆ° DEONThink ä¸­ï¼Œæœ€ä¸»è¦çš„æ˜¯å› ä¸ºå®ƒèƒ½ä¿å­˜ WebArchiveï¼Œå³ä½¿åç»­æ–‡ç« è¢«åˆ é™¤ä¹Ÿæ²¡å…³ç³»ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Kw7CoBl.png&#34; alt=&#34;Clip To DEVONthink&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å½“æŒ‰ä¸‹ Cmmd + S è¿›è¡Œå½’æ¡£ä¹‹åï¼ŒDEVONThink å¯¹åº” Group é‡Œå°±ä¼šæŠŠè¯¥åŸå§‹é¡µé¢ä¿å­˜èµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/m3jM9kx.png&#34; alt=&#34;DEVONthink&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç”±äº WebArchive æ— æ³•åš Highlight æ ‡è®°ï¼Œè¿™æ—¶å€™å°±ç”¨åˆ°äº† DEVONthink æä¾›çš„ OCR åŠŸèƒ½ï¼Œå°† WebArchive æå–ä¸º PDF æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/YxEsN2G.png&#34; alt=&#34;WebArchive To PDF&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;äºŒæ¬¡åŠ å·¥å¤„ç†&#34;&gt;äºŒæ¬¡åŠ å·¥å¤„ç†&lt;/h2&gt;

&lt;p&gt;å½“ä½ ä½¿ç”¨ DEVONthink ç”Ÿæˆ PDF ä¹‹åï¼Œå°±å¯ä»¥ç›´æ¥ç”¨å…¶è‡ªå¸¦çš„ PDF é˜…è¯»å·¥å…·è¿›è¡Œé˜…è¯»äº†ï¼Œå®ƒé»˜è®¤æä¾›å·¥å…·å·²ç»å®Œå…¨æ»¡è¶³ï¼Œä¸è¿‡æˆ‘æƒ³åˆ©ç”¨ MarginNote æ¥é˜…è¯»ï¼Œå› æ­¤è¿™æ—¶å€™ä½ å¯ä»¥é€‰æ‹©ç›´æ¥å‘é€åˆ° MarginNote æ¥é˜…è¯»ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä¼šé€‰æ‹©å…ˆä½¿ç”¨ PDF Expert è¿›è¡Œ PDF æ–‡ä»¶çš„è£å‰ªï¼Œå› ä¸ºå¤§å¤šæ•°æ—¶å€™ç½‘é¡µæ­£æ–‡å†…å®¹ä¸¤ä¾§ç•™ç™½å¤ªå¤šï¼Œæƒ³è£å‰ªæ‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/8I8UcFY.png&#34; alt=&#34;PDF With Margin&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è£å‰ªæ‰å¤šä½™çš„éƒ¨åˆ†ä¹‹åï¼Œpdf æ–‡ä»¶å°±å¯è¯»æ€§ä¹Ÿä¼šæå¤§æé«˜ã€‚
&lt;img src=&#34;https://i.imgur.com/1CwG33x.png&#34; alt=&#34;Final PDF&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;é˜…è¯»è¾“å‡º&#34;&gt;é˜…è¯»è¾“å‡º&lt;/h2&gt;

&lt;p&gt;åˆ°äº†è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ–‡æ¡£å¯¼å…¥åˆ° MarginNote ä¸­ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š
&lt;img src=&#34;https://i.imgur.com/DmADrxk.png&#34; alt=&#34;MarginNote Import&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ &lt;strong&gt;Add to Study&lt;/strong&gt;ï¼Œå°†è‡ªå·±çš„æ ‡è®°å’Œç¬”è®°ç”Ÿæˆç¬”è®°æœ¬ï¼ŒMarginNote å¼ºå¤§å°±åœ¨äºèƒ½å¤Ÿå¾ˆå¥½çš„è‡ªåŠ¨å¸®ä½ æŠŠé‡ç‚¹å½’é›†åˆ°ä¸€èµ·ï¼Œç”Ÿæˆè„‘å›¾å…³è”ï¼Œä½ è¿˜å¯ä»¥é’ˆå¯¹æŸä¸ªéƒ¨åˆ†åšç¬”è®°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/9uvu95H.png&#34; alt=&#34;MarginNote Add To Study&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è€Œä¸”å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬çœ‹ä¸€ç¯‡æ–‡ç« å¾ˆå¤§å¯èƒ½ä¼šå±•å¼€è¿™ä¸ªä¸»é¢˜ï¼Œæ¯”å¦‚çœ‹ä¸‹è¯¥æ–‡ç« ä¸‹ç»™çš„å‚è€ƒé“¾æ¥ï¼Œè¿™äº›å¾€å¾€éƒ½æ˜¯åŒæ ·ä¸»é¢˜çš„å†…å®¹ï¼Œæˆ‘ä»¬å¸Œæœ›ç›¸å…³çš„æ–‡ç« èƒ½å¤Ÿæ•´ä½“å½’é›†åˆ°ä¸€ä¸ªç¬”è®°æœ¬ä¸‹ã€‚MarginNote å¯ä»¥å¾ˆæ–¹ä¾¿åšåˆ°ï¼Œæ¯”å¦‚ä¸‹å›¾ï¼Œæˆ‘åœ¨é˜…è¯» Apple å®˜æ–¹ URL Session Programming Guide çš„æ—¶å€™ä¼šæŸ¥çœ‹å¾ˆå¤šç›¸å…³æ–‡ç« ï¼Œä¹Ÿéƒ½æ˜¯ç›¸å…³å†…å®¹ï¼Œæˆ‘ä¼šæŠŠç¬”è®°æ•´ç†åœ¨ä¸€èµ·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/kIvn6v8.png&#34; alt=&#34;MarginNote Note Group&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘å•ç‹¬åœ¨ MarginNote é‡Œå»ºäº†ä¸€ä¸ª Folder ï¼Œå« Articleã€‚ä¸“é—¨é˜…è¯»æˆ‘ä» DEVONthink ä¸­é‡‡é›†åˆ°çš„æ–‡ç« ã€‚é˜…è¯»å®Œæ¯•ï¼Œè¿˜å¯ä»¥å°†é˜…è¯»ç¬”è®°å½’æ¡£ï¼ŒMarginNote æ”¯æŒåˆ†äº«åˆ° å°è±¡ç¬”è®°ï¼ŒWord æˆ–è€… DEVONthink è¿›è¡Œå½’æ¡£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yyQ3pOr.png&#34; alt=&#34;Export&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åˆ°äº†è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šå¯¹æˆ‘æ¥è®²ä¸€ä¸ª è¾“å…¥ â”€â”€ å¤„ç† â”€â”€ é˜…è¯» â”€â”€ è¾“å‡º çš„æ•´ä¸ªæµç¨‹å°±ç»“æŸäº†ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªé—­ç¯ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢æåˆ°çš„ä¸‰ä¸ªå·¥å…·ï¼Œå‡æœ‰ iOS ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ„å‘³ç€å³ä½¿æ‹¿ç€æ‰‹æœºä¹Ÿèƒ½å¤Ÿä¸ç ´åæ•´ä¸ªé˜…è¯»ç¯èŠ‚ï¼Œä¸è¿‡å…¶ä¸­ DEVONthink æä¾›çš„ iOS ç‰ˆæœ¬æ˜¯æ²¡åŠæ³•è¿›è¡Œ WebArchive å‘ PDF çš„è½¬æ¢çš„ï¼Œå¤„ç†è¿™ä¸€æ­¥æœ€åè¿˜æ˜¯å¾—æ”¾åœ¨ Mac ç«¯å¤„ç†ï¼Œä¸è¿‡è§£å†³äº†è¾“å…¥å’Œè¾“å‡ºä¹Ÿå°±æ„å‘³ç€éšæ—¶éšåœ°å¯ä»¥æ•è·æƒ³çœ‹çš„å†…å®¹æ”¾åˆ°ç¨åè¯»åˆ—è¡¨ï¼Œç„¶åè‡ªåŠ¨åŒæ­¥åˆ° Mac ç«¯è¿›è¡Œå¤„ç†ï¼Œç„¶ååœ¨ MarginNote å¯¹åº”çš„ iOS ç‰ˆæœ¬ï¼Œå¹³æ—¶åœ¨å®¶çš„æ—¶å€™è¿˜æ˜¯ä¹ æƒ¯ç”¨ iPad Pro æŸ¥çœ‹ï¼Œä½“éªŒä¹Ÿä¸é”™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ZJsdxyS.jpg&#34; alt=&#34;iPad MarginNote&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ä¸‰ä¸ªç®€å•æ­¥éª¤è®©ä½ æµ‹è¯•ä½¿ç”¨ç³»ç»Ÿå•ä¾‹çš„ä»£ç </title>
      <link>https://hechen.xyz/post/testing-swift-code-that-uses-system-singletons-in-3-easy-steps/</link>
      <pubDate>Tue, 17 Jul 2018 17:09:57 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/testing-swift-code-that-uses-system-singletons-in-3-easy-steps/</guid>
      
        <description>

&lt;p&gt;å¤§éƒ¨åˆ†åœ¨ Apple å¹³å°å¼€å‘çš„ App éƒ½ä¼šä¾èµ–åŸºäºå•ä¾‹çš„ APIã€‚ä» UIScreen åˆ° UIApplicationï¼Œå†åˆ° NSBundleï¼Œè€Œ Foundationï¼ŒUIKit ä»¥åŠ AppKit é‡Œåˆ°å¤„å……æ–¥ç€é™æ€çš„ APIã€‚&lt;/p&gt;

&lt;p&gt;å°½ç®¡å•ä¾‹éå¸¸æ–¹ä¾¿ï¼Œå¹¶ä¸”éšæ—¶éšåœ°éƒ½å¯ä»¥å¾ˆè½»æ˜“çš„è·å–åˆ°ç‰¹å®šçš„ APIï¼Œä½†æ˜¯å½“å®ƒä»¬ä¸€æ—¦è¦é¢ä¸´ä»£ç è§£è€¦å’Œæµ‹è¯•çš„æ—¶å€™å°±ä¼šå‡ºç°æŒ‘æˆ˜ã€‚å•ä¾‹åŒæ—¶ä¹Ÿæ˜¯å¹³æ—¶é‡åˆ° Bug é‡Œæœ€å¸¸è§çš„ä¸€ç§ï¼Œåœ¨å•ä¾‹ä¸­çŠ¶æ€ä¼šä»¥å…±äº«çš„æ–¹å¼ç»ˆç»“ï¼Œé‚£äº›é’ˆå¯¹çŠ¶æ€åšçš„å˜æ›´å¹¶ä¸èƒ½å¾ˆå¥½çš„å¹¿æ’­åˆ°æ•´ä¸ªç³»ç»Ÿå±‚é¢ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶è€Œï¼Œå°½ç®¡æˆ‘ä»¬èƒ½å¤Ÿé‡æ„è‡ªå·±çš„ä»£ç ï¼Œè®©å®ƒä»¬åªåœ¨çœŸæ­£éœ€æ±‚çš„åœ°æ–¹ä½¿ç”¨å•ä¾‹ï¼Œæˆ‘ä»¬é’ˆå¯¹ç³»ç»Ÿ API ä¹Ÿåšä¸äº†å¤ªå¤šã€‚ä½†æ˜¯ï¼Œå¥½æ¶ˆæ¯æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€äº›æŠ€å·§è®©ä½ ä½¿ç”¨ç³»ç»Ÿå•ä¾‹çš„ä»£ç ä¾ç„¶å˜å¾—å®¹æ˜“ç®¡ç†å’Œæµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬çœ‹ä¸€äº›ä½¿ç”¨äº† URLSession.shared å•ä¾‹çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DataLoader&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;task&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URLSession&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dataTask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;with&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()))&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;task&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resume&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸Šé¢è¿™ä¸ª &lt;strong&gt;DataLoader&lt;/strong&gt; ç°åœ¨å°±å˜å¾—å¾ˆéš¾æµ‹è¯•ï¼Œå› ä¸ºå®ƒå†…éƒ¨ä¼šè‡ªä¸»è°ƒç”¨å…±äº«çš„ URL Session æ¥æ‰§è¡Œä¸€ä¸ªç½‘ç»œè°ƒç”¨ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬ä¸ºæµ‹è¯•ä»£ç ä¸­å¢åŠ ä¸€äº›ç­‰å¾…å’Œè¶…æ—¶ä»£ç ï¼Œç„¶åå¾ˆå¿«è¿™éƒ¨åˆ†ä»£ç å°±ä¼šå˜å¾—ç³Ÿç³•å’Œä¸ç¨³å®šã€‚&lt;/p&gt;

&lt;h2 id=&#34;æŠ½è±¡æˆä¸€ä¸ªåè®®&#34;&gt;æŠ½è±¡æˆä¸€ä¸ªåè®®&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬ç¬¬ä¸€ä¸ªä»»åŠ¡å°±æ˜¯æŠŠæˆ‘ä»¬éœ€è¦çš„ URLSession çš„éƒ¨åˆ†ç§»åˆ°ä¸€ä¸ªåè®®é‡Œï¼Œè¿™æ ·æˆ‘ä»¬åœ¨æµ‹è¯•ä¸­ä¹Ÿèƒ½å¤Ÿå¾ˆå®¹æ˜“çš„è¿›è¡Œ mockã€‚åœ¨ä½œè€…çš„&lt;a href=&#34;http://www.ustream.tv/recorded/101118612&#34;&gt;ä¸€æ¬¡ talk&lt;/a&gt;ä¸­ä½œè€…å»ºè®®å°½å¯èƒ½çš„é¿å… mockï¼Œå°½ç®¡å®ƒæ˜¯ä¸€ç§å¾ˆå¥½çš„ç­–ç•¥ã€‚ä½†æ˜¯å½“ä½ å’Œç³»ç»Ÿçš„å•ä¾‹æ‰“äº¤é“çš„æ—¶å€™ï¼Œmock å°±æ˜¯ä¸€ä¸ªå¢åŠ å¯é¢„æµ‹æ€§çš„é‡è¦å·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª &lt;strong&gt;NetworkEngine&lt;/strong&gt; åè®®ï¼Œç„¶åè®© URLSession ç¬¦åˆå®ƒ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;protocol&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NetworkEngine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;typealias&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URLResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;performRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;extension&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;URLSession&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkEngine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;typealias&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkEngine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;performRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;task&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dataTask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;with&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;task&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resume&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šæ‰€è§ï¼Œæˆ‘ä»¬ä½¿å¾— &lt;strong&gt;URLSessionDataTask&lt;/strong&gt; æˆäº† &lt;strong&gt;URLSession&lt;/strong&gt; çš„ä¸€ä¸ªå®ç°ç»†èŠ‚ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±é¿å…äº†åœ¨æµ‹è¯•ä»£ç ä¸­ä¸å¾—ä¸åˆ›å»ºä¸åŒçš„ mock ï¼Œè€Œåªéœ€è¦å…³æ³¨ NetworkEngine å°±è¡Œã€‚&lt;/p&gt;

&lt;h2 id=&#34;åè®®ä¸­æŠŠå•ä¾‹ä½œä¸ºé»˜è®¤å€¼&#34;&gt;åè®®ä¸­æŠŠå•ä¾‹ä½œä¸ºé»˜è®¤å€¼&lt;/h2&gt;

&lt;p&gt;ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„ &lt;strong&gt;DataLoader&lt;/strong&gt; æ¥ä½¿ç”¨æ–°çš„ NetworkEngine åè®®ï¼ŒæŠŠå®ƒä½œä¸ºä¾èµ–é¡¹æ³¨å…¥ã€‚æˆ‘ä»¬æŠŠ URLSession.shared ä½œä¸ºé»˜è®¤å‚æ•°ä¼ é€’ï¼Œä»¥æ­¤åšåˆ°äº†å‘åå…¼å®¹å¹¶ä¸”å’Œä¹‹å‰ä¸€æ ·æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DataLoader&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkEngine&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkEngine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URLSession&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;performRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()))&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é€šè¿‡ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥åƒä¹‹å‰ä¸€æ ·å¾ˆå®¹æ˜“çš„ç”Ÿæˆ &lt;strong&gt;DataLoader&lt;/strong&gt;ï¼Œè€Œä¸éœ€è¦æä¾›ä¸€ä¸ª &lt;strong&gt;NetworkEngine&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åœ¨ä½ çš„æµ‹è¯•ä¸­-mock-åè®®&#34;&gt;åœ¨ä½ çš„æµ‹è¯•ä¸­ Mock åè®®&lt;/h2&gt;

&lt;p&gt;æœ€åï¼Œè®©æˆ‘ä»¬å†™ä¸ªæµ‹è¯•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡ mock &lt;strong&gt;NetworkEngine&lt;/strong&gt; ä½¿å¾—æˆ‘ä»¬çš„æµ‹è¯•å¿«é€Ÿï¼Œå¯é¢„æµ‹å¹¶ä¸”å®¹æ˜“ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;testLoadingData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NetworkEngineMock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkEngine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;typealias&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkEngine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt; 

        &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;requestedURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;

        &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;performRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;requestedURL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;

            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;â€œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Hello&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;world&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utf8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;engine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkEngineMock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;loader&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DataLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DataLoader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;URL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;â€œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;my&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;API&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;loader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;XCTAssertEqual&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;requestedURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;XCTAssertEqual&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Hello&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;world&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utf8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šæ‰€è§ï¼Œä½œè€…è¯•å›¾è®© mock å°½å¯èƒ½çš„ç®€å•ã€‚ä¸éœ€è¦åˆ›å»ºåŒ…å«å¤§é‡é€»è¾‘çš„å¤æ‚ mockï¼Œä½ åªéœ€è¦è®©è‡ªå·±çš„ä»£ç è¿”å›ä¸€äº› hardcode çš„å€¼é€šå¸¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œè¿™æ ·ï¼Œä½ èƒ½å¤Ÿåœ¨è‡ªå·±çš„æµ‹è¯•ä¸­è¿›è¡Œæ–­è¨€ã€‚ç„¶è€Œï¼Œé£é™©å°±æ˜¯ä½ å¯èƒ½æœ€åæµ‹è¯•çš„æ˜¯è‡ªå·±çš„ mock è€Œä¸æ˜¯ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æœ€å&#34;&gt;æœ€å&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬ç°åœ¨é€šè¿‡ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤è®©è¿™äº›ä¾ç„¶æ–¹ä¾¿çš„ä½¿ç”¨äº†ç³»ç»Ÿçš„å•ä¾‹å¯è¢«æµ‹è¯•ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æŠ½è±¡åè®®&lt;/li&gt;
&lt;li&gt;åè®®ä¸­æŠŠå•ä¾‹ä½œä¸ºé»˜è®¤å€¼&lt;/li&gt;
&lt;li&gt;åœ¨ä½ çš„æµ‹è¯•ä¸­ Mock è¯¥åè®®&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>é¿å…åœ¨ Swift ä¸­ä½¿ç”¨å•ä¾‹</title>
      <link>https://hechen.xyz/post/avoiding-singletons-in-swift/</link>
      <pubDate>Mon, 16 Jul 2018 17:34:36 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/avoiding-singletons-in-swift/</guid>
      
        <description>

&lt;p&gt;â€œæˆ‘çŸ¥é“å•ä¾‹ä¸å¥½ï¼Œä½†æ˜¯&amp;hellip;â€ï¼Œè¿™æ˜¯å¼€å‘è€…å¸¸å¸¸åœ¨è®¨è®ºä»£ç çš„æ—¶å€™ä¼šæåˆ°çš„ã€‚è²Œä¼¼ç¤¾åŒºå¤§å®¶æœ‰å…±è¯† â”€â”€ å•ä¾‹ä¸å¥½ã€‚ä½†æ˜¯åŒæ—¶ï¼ŒåŒ…æ‹¬ Apple å’Œç¬¬ä¸‰æ–¹çš„ Swift å¼€å‘è€…è¿˜æ˜¯åœ¨ App å†…éƒ¨æˆ–è€…å…±äº«çš„ frameworks é‡Œä¸æ–­åœ¨ç”¨å®ƒä»¬ã€‚&lt;/p&gt;

&lt;p&gt;è¿™å‘¨ï¼Œè®©æˆ‘ä»¬å¥½å¥½çœ‹ä¸€çœ‹å•ä¾‹çš„é—®é¢˜åˆ°åº•åœ¨å“ªé‡Œï¼Œæ¢ç´¢æ›´å¤šçš„æŠ€å·§ä»¥ä¾¿æˆ‘ä»¬æ—¥å¸¸èƒ½å¤Ÿé¿å…ä½¿ç”¨å®ƒä»¬ã€‚è¿™å°±å¼€å§‹å§ï¼&lt;/p&gt;

&lt;h3 id=&#34;ä¸ºä»€ä¹ˆå•ä¾‹è¿™ä¹ˆæµè¡Œ&#34;&gt;ä¸ºä»€ä¹ˆå•ä¾‹è¿™ä¹ˆæµè¡Œï¼Ÿ&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆä¸€ç‚¹æˆ‘ä»¬è¦æƒ³çš„æ˜¯é—®é—®è‡ªå·±ï¼Œä¸ºä»€ä¹ˆå•ä¾‹è¿™ä¹ˆæµè¡Œï¼Ÿçƒ­è¿‡å¤§å¤šæ•°å¼€å‘è€…éƒ½è®¤åŒï¼Œå•ä¾‹åº”è¯¥è¢«é¿å…çš„è¯ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬è¿˜ä¸æ–­çš„å‡ºç°å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æˆ‘è®¤ä¸ºæœ‰ä¸¤éƒ¨åˆ†åŸå› ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘è§‰å¾—æ—¥å¸¸å¼€å‘ Apple å¹³å°ä¸Šçš„ App æ—¶å€™å¤§é‡ä½¿ç”¨å•ä¾‹ï¼Œæœ€å¤§çš„åŸå› æ˜¯è‹¹æœè‡ªå·±ä¹Ÿåœ¨ç»å¸¸çš„ç”¨ã€‚ä½œä¸ºç¬¬ä¸‰æ–¹å¼€å‘è€…æ¥è®²ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šæŠŠ Apple çš„åšæ³•ä½œä¸ºæœ€ä½³å®è·µæ¥ç”¨ï¼Œä»»ä½• Apple è‡ªå·±å¸¸å¸¸ä½¿ç”¨çš„æ¨¡å¼åœ¨ç¤¾åŒºä¹Ÿä¼šå‘å±•çš„å¾ˆè¿…é€Ÿã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªè°œé¢˜çš„ç¬¬äºŒä¸ªåŸå› æ˜¯å•ä¾‹éå¸¸æ–¹ä¾¿ã€‚å•ä¾‹å› ä¸ºå®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è·å–åˆ°ï¼Œå› è€Œç»å¸¸ä¼šæ‰®æ¼”ä¸€ä¸ªè·å–ç‰¹å®šæ ¸å¿ƒå€¼æˆ–è€…å¯¹è±¡çš„å¿«æ·æ–¹å¼ã€‚å¯ä»¥çœ‹ä¸‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³åœ¨ &lt;strong&gt;ProfileViewController&lt;/strong&gt; ä¸­å±•ç¤ºå½“å‰ç™»å½•ç”¨æˆ·çš„åå­—ï¼ŒåŒæ—¶å½“æŸä¸ªæŒ‰é’®æŒ‰ä¸‹çš„æ—¶å€™ï¼Œé€€ç™»å½“å‰ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ProfileViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;lazy&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;nameLabel&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UILabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;nameLabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UserManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;currentUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;handleLogOutButtonTap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;UserManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logOut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æŒ‰ç…§ä¸Šé¢è¿™æ ·ï¼ŒæŠŠä¸€ä¸ª UserManager å•ä¾‹çš„ç”¨æˆ·å’Œè´¦æˆ·å¤„ç†çš„åŠŸèƒ½å°è£…èµ·æ¥ï¼Œç¡®å®å¾ˆæ–¹ä¾¿ï¼ˆè€Œä¸”å¾ˆå¸¸è§ï¼ï¼‰ï¼Œé‚£è¿™ç§æ¨¡å¼çš„ä½¿ç”¨åˆ°åº•ä¸å¥½åœ¨å“ªé‡Œå‘¢ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&#34;ä¸ºä»€ä¹ˆå•ä¾‹ä¼šå¾ˆç³Ÿç³•&#34;&gt;ä¸ºä»€ä¹ˆå•ä¾‹ä¼šå¾ˆç³Ÿç³•ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;å½“è®¨è®ºç±»ä¼¼æ¨¡å¼å’Œæ¶æ„è¿™äº›ä¸œè¥¿çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“é™·å…¥ä¸€ä¸ªç‰¹åˆ«ç†è®ºåŒ–çš„åœˆå¥—ã€‚è™½ç„¶è®©æˆ‘ä»¬çš„ä»£ç ç†è®ºä¸Šâ€œæ­£ç¡®â€ï¼Œéµå¾ªæœ€ä½³å®è·µå’ŒåŸåˆ™æ˜¯å¾ˆç¾å¥½çš„ï¼Œä½†æ˜¯ç°å®ç»å¸¸ä¼šå¾ˆå—æ‰“å‡»ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€äº›ä¸­é—´æ–¹æ¡ˆã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œå…³äºå•ä¾‹å¼•èµ·çš„å®è´¨æ€§é—®é¢˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆå®ƒä»¬è¦åº”è¯¥è¢«é¿å…å‘¢ï¼Ÿè¿™é‡Œæˆ‘å€¾å‘äºä¸‰ä¸ªåŸå› ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è¿™äº›å•ä¾‹æ˜¯å…¨å±€çš„å¯å˜çš„å…±äº«çŠ¶æ€ã€‚å®ƒä»¬çš„çŠ¶æ€æ˜¯åœ¨æ•´ä¸ª App é‡Œè‡ªåŠ¨å…±äº«çš„ï¼Œå› æ­¤å½“å…¶çŠ¶æ€å‘ç”Ÿä¸å¯é¢„æœŸçš„å˜åŒ–çš„æ—¶å€™ï¼ŒBug ä¹Ÿå°±å¯èƒ½å¼€å§‹å‘ç”Ÿäº†ï¼›&lt;/li&gt;
&lt;li&gt;å•ä¾‹ä¹‹é—´çš„å…³ç³»ä»¥åŠä¾èµ–è¿™äº›å•ä¾‹çš„ä»£ç å¸¸å¸¸ä¸é‚£ä¹ˆå¥½å®šä¹‰ã€‚å› ä¸ºå•ä¾‹æ˜¯å¦‚æ­¤æ–¹ä¾¿å’Œå®¹æ˜“è·å¾—ï¼Œå¤§é‡çš„ä½¿ç”¨å®ƒä»¬å¸¸å¸¸ä¼šå¯¼è‡´å¾ˆéš¾ç»´æŠ¤&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E9%9D%A2%E6%9D%A1%E5%BC%8F%E4%BB%A3%E7%A0%81&#34;&gt;é¢æ¡å¼ä»£ç &lt;/a&gt;ï¼Œè¿™äº›ä»£ç ä¸­å¯¹è±¡å’Œå¯¹è±¡ä¹‹é—´æ²¡æœ‰æ¸…æ™°çš„éš”ç¦»ï¼›&lt;/li&gt;
&lt;li&gt;ç®¡ç†è¿™äº›å•ä¾‹çš„ç”Ÿå‘½å‘¨æœŸéå¸¸çš„éš¾ã€‚å› ä¸ºå•ä¾‹æœ¬èº«ä¼šåœ¨åº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…å­˜æ´»ï¼Œç®¡ç†å®ƒä»¬å°±å˜å¾—å¼‚å¸¸å›°éš¾ï¼Œå› æ­¤å¸¸å¸¸ä¼šä¸å¾—ä¸ä¾èµ–å¯é€‰å€¼æ¥è·Ÿè¸ªå€¼çš„å˜åŒ–ã€‚è¿™ä¹Ÿä½¿å¾—ä¾èµ–å•ä¾‹çš„ä»£ç å˜å¾—å¾ˆéš¾æµ‹è¯•ï¼Œå› ä¸ºä½ æ²¡æ³•åœ¨ä¸€ä¸ªæµ‹è¯• case é‡ŒæŠŠçŠ¶æ€é‡ç½®ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åœ¨æˆ‘ä»¬å‰é¢çš„ &lt;strong&gt;ProfileViewController&lt;/strong&gt; çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†æœ‰è¿™ä¸‰ä¸ªé—®é¢˜çš„ä¿¡å·å‡ºç°ã€‚é¦–å…ˆå®ƒä¾èµ– UserManager å¯¼è‡´è¿™äºŒè€…å…³ç³»å¾ˆä¸æ¸…æ™°ï¼Œå…¶æ¬¡ï¼Œå®ƒä¸å¾—ä¸è®© currentUser ä½œä¸ºå¯é€‰å€¼å‡ºç°ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡åŠæ³•åœ¨ç¼–è¯‘æœŸå°±èƒ½å¤Ÿç¡®å®šè§†å›¾æ§åˆ¶å™¨å®é™…ä¸Šå‡ºç°çš„æ—¶å€™è¿™ä¸ªæ•°æ®ä¸€å®šåœ¨ã€‚å¬èµ·æ¥å°±æ„Ÿè§‰è¦æœ‰ bug å‘ç”Ÿçš„æ„Ÿè§‰ ğŸ˜¬!&lt;/p&gt;

&lt;h3 id=&#34;ä¾èµ–æ³¨å…¥&#34;&gt;ä¾èµ–æ³¨å…¥&lt;/h3&gt;

&lt;p&gt;ç›¸å¯¹äºä½¿ç”¨ &lt;strong&gt;ProfileViewController&lt;/strong&gt; é€šè¿‡å•ä¾‹æ¥è·å–å®ƒæ‰€éœ€çš„ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬è¦åœ¨å…¶åˆå§‹åŒ–æ–¹æ³•ä¸­å°†ä¾èµ–é¡¹ä¼ å…¥ã€‚è¿™é‡Œæˆ‘ä»¬æ˜¯å°†å½“å‰çš„ User ä½œä¸ºéå¯é€‰ä¼ å…¥çš„ï¼ŒåŒæ ·ï¼Œä¼ å…¥ä¸€ä¸ª &lt;strong&gt;LogOutService&lt;/strong&gt; æ¥è¿›è¡Œç™»å‡ºæ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ProfileViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;logOutService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LogOutService&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;lazy&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;nameLabel&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UILabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;logOutService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LogOutService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logOutService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;logOutService&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nibName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;nameLabel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;handleLogOutButtonTap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;logOutService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logOut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ ·çš„è¯ï¼Œä»£ç å°±ä¼šå˜å¾—æ›´åŠ æ¸…æ™°ï¼Œå¹¶ä¸”å®¹æ˜“ç®¡ç†ã€‚æˆ‘ä»¬çš„ä»£ç ç°åœ¨å®‰å…¨çš„ä¾èµ–å…¶ Modelï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæ¸…æ™°çš„ API è¿›è¡Œç™»å‡ºçš„äº¤äº’ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†å„ç§å•ä¾‹ä»¥åŠç®¡ç†å™¨é‡æ„æˆæ¸…æ™°åˆ†ç¦»çš„æœåŠ¡èƒ½å¤Ÿä½¿å¾—ä¸€ä¸ª App çš„æ ¸å¿ƒå¯¹è±¡ä¹‹é—´çš„å…³ç³»æ›´åŠ æ¸…æ™°ã€‚&lt;/p&gt;

&lt;h3 id=&#34;services&#34;&gt;Services&lt;/h3&gt;

&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬æ›´è¿‘ä¸€äº›æ¥çœ‹ä¸‹ &lt;strong&gt;LogOutService&lt;/strong&gt; è¿™ä¸ªç±»æ˜¯å¦‚ä½•å®ç°çš„ã€‚å®ƒå†…éƒ¨ä¹Ÿå¯¹å…¶ä¾èµ–çš„æœåŠ¡ä½¿ç”¨äº†ä¾èµ–æ³¨å…¥ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªä¼˜é›…çš„ï¼Œå®šä¹‰æ¸…æ™°çš„ API æ¥åªåšä¸€ä»¶äº‹æƒ… â”€â”€ ç™»å‡ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;LogOutService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;networkService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkService&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;navigationService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NavigationService&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
         &lt;span class=&#34;n&#34;&gt;networkService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
         &lt;span class=&#34;n&#34;&gt;navigationService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NavigationService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;networkService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;networkService&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;navigationService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;navigationService&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;logOut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;networkService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;weak&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
            &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;navigationService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;showLoginScreen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;ç¿»æ–°&#34;&gt;ç¿»æ–°&lt;/h3&gt;

&lt;p&gt;ä»ä¸€ä¸ªé‡åº¦ä½¿ç”¨å•ä¾‹çš„è®¾ç½®åˆ°å®Œå…¨ä½¿ç”¨æœåŠ¡ï¼Œä¾èµ–æ³¨å…¥ä»¥åŠæœ¬åœ°çŠ¶æ€æ¥æ”¹é€ ä¼šéå¸¸çš„å›°éš¾ï¼Œä¼šèŠ±è´¹å¤§é‡æ—¶é—´ã€‚è€Œä¸”ï¼Œä¼šå¾ˆéš¾è®¤ä¸ºèŠ±å¤§é‡æ—¶é—´åœ¨è¿™ä¸Šé¢æ˜¯åˆç†çš„ï¼Œè€Œä¸”æœ‰äº›æ—¶å€™å¯èƒ½ä¼šéœ€è¦ä¸€æ¬¡æ›´å¤§è§„æ¨¡çš„é‡æ„æ‰è¡Œã€‚&lt;/p&gt;

&lt;p&gt;è°¢å¤©è°¢åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸è¿‘çš„æŠ€æœ¯ï¼Œåœ¨&lt;a href=&#34;https://www.swiftbysundell.com/posts/testing-swift-code-that-uses-system-singletons-in-3-easy-steps&#34;&gt;Testing Swift code that uses system singletons in 3 easy steps&lt;/a&gt;è¿™ç¯‡æ–‡ç« ä¸­ä¹Ÿä½¿ç”¨åˆ°è¿‡ï¼Œå…¶å…è®¸æˆ‘ä»¬å¯ä»¥ä»¥ä¸€ç§éå¸¸å®¹æ˜“çš„æ–¹å¼å•ä¾‹å¼€å§‹ã€‚å’Œå¾ˆå¤šå…¶ä»–è§£å†³æ–¹æ¡ˆç±»ä¼¼ â”€â”€ åè®®æ¥æ•‘åœºï¼&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¸æ˜¯ä¸€æ¬¡æ€§é‡æ„æ‰€æœ‰çš„å•ä¾‹ï¼Œè€Œæ˜¯åˆ›å»º Service ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„æŠŠæˆ‘ä»¬çš„ Service å®šä¹‰æˆ Protocolï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;protocol&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;LogOutService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;logOut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;protocol&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NetworkService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;protocol&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NavigationService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;showLoginScreen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;showProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬å°±èƒ½é€šè¿‡å°†å•ä¾‹ç¬¦åˆæˆ‘ä»¬æ–°åˆ›å»ºçš„ Service åè®®æ¥ä½¿å…¶ç¿»æ–°ä¸ºä¸€å † Serviceã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”šè‡³ä¸éœ€è¦æ”¹å˜ä»»ä½•å®ç°ï¼Œåªæ˜¯ç®€å•çš„ä¼ é€’å®ƒä»¬ shared å®ä¾‹ä½œä¸ºä¸€ä¸ª Service å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ ·çš„æŠ€å·§ä¹Ÿèƒ½å¤Ÿè¢«ç”¨ä½œé‡æ„æˆ‘ä»¬ app ä¸­å…¶ä»–æ ¸å¿ƒå¯¹è±¡ï¼Œé‚£äº›å¯¹è±¡æˆ‘ä»¬ä¹Ÿè®¸ä¹Ÿéƒ½æ­£åœ¨ä»¥æŸç§å•ä¾‹å½¢å¼åœ¨ä½¿ç”¨ç€ï¼Œä¾‹å¦‚ä½¿ç”¨ AppDelegate æ¥åšå¯¼èˆªã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;extension&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UserManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LoginService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LogOutService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;extension&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;AppDelegate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NavigationService&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;showLoginScreen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;navigationController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;viewControllers&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;LoginViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;loginService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UserManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;navigationService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;showProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;viewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ProfileViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;logOutService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UserManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;navigationController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pushViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;viewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;animated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬ç°åœ¨é€šè¿‡ä½¿ç”¨ä¾èµ–æ³¨å…¥ä»¥åŠ Service çš„æ–¹å¼ï¼Œå¼€å§‹ä½¿å¾—æˆ‘ä»¬å·¥ç¨‹å¤„åœ¨ Singleton free çš„çŠ¶æ€ï¼Œè€Œä¸éœ€è¦è¿›è¡Œç‰¹åˆ«å·¨å¤§çš„å·¥ç¨‹æ”¹é€ å’Œé‡å†™ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±èƒ½å¤Ÿä½¿ç”¨ Service æˆ–è€…å…¶ä»–ç±»å‹çš„ API é€ä¸ªæ›¿æ¢æ‰å•ä¾‹ï¼Œæ¯”å¦‚è¯´ä½¿ç”¨&lt;a href=&#34;https://www.swiftbysundell.com/posts/replacing-legacy-code-using-swift-protocols&#34;&gt;è¿™ç¯‡åšæ–‡&lt;/a&gt;ä¸­çš„æŠ€å·§ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h3&gt;

&lt;p&gt;å•ä¾‹ä¹Ÿä¸æ˜¯éƒ½æ˜¯ä¸å¥½çš„ï¼Œåªæ˜¯åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¼šå¼•å‘ä¸€ç³»åˆ—é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯ä»¥é€šè¿‡ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼ä¸ºä½ ç¨‹åºé‡Œçš„å¯¹è±¡å»ºç«‹è‰¯å¥½çš„å…³ç³»æ¥è§£å†³ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ ç°åœ¨æ­£åœ¨å¼€å‘çš„ App é‡Œåœ¨ä½¿ç”¨å¤§é‡çš„å•ä¾‹ï¼Œé‚£ä½ ä¸€å®šä¹Ÿåœ¨ç»å†æˆ–è€…å·²ç»ç»å†è¿‡å®ƒä»¬æ‰€å¸¦æ¥çš„ bug äº†å§ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿç»™ä½ ä¸€äº›çµæ„Ÿè®©ä½ æ²¡æœ‰é‚£ä¹ˆæ…Œä¹±çš„å¼€å§‹è¿œç¦»å®ƒä»¬ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Swift ä¸­å‡ ç§ä¸åŒçš„ä¾èµ–æ³¨å…¥æ–¹å¼</title>
      <link>https://hechen.xyz/post/different-flavors-of-dependency-injection-in-swift/</link>
      <pubDate>Mon, 16 Jul 2018 13:57:24 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/different-flavors-of-dependency-injection-in-swift/</guid>
      
        <description>

&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡ï¼š&lt;a href=&#34;https://ppinera.es/2017/09/29/modular-xcode-projects.html&#34;&gt;Modular Xcode projects&lt;/a&gt;
åŸä½œè€… &amp;amp; Copyright &lt;a href=&#34;http://twitter.com/pepibumur&#34;&gt;@pepibumur&lt;/a&gt;
ç¿»è¯‘ï¼š&lt;a href=&#34;https://twitter.com/OgreMergO&#34;&gt;@OgreMergO&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨ä¹‹å‰çš„å‡ ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†å‡ ç§ä½¿ç”¨ä¾èµ–æ³¨å…¥æ–¹å¼ä½¿å¾—æŸä¸ª swift app æ‹¥æœ‰ä¸€ä¸ªæ›´åŠ è§£è€¦å¯æµ‹è¯•çš„æ¶æ„ã€‚æ¯”å¦‚åœ¨ &lt;a href=&#34;https://hechen.xyz/2017/11/19/Dependency-injection-using-factories-in-Swift/&#34;&gt;åœ¨ Swift ä¸­ä½¿ç”¨å·¥å‚æ¨¡å¼è¿›è¡Œä¾èµ–æ³¨å…¥&lt;/a&gt; ä¸­å’Œå·¥å‚æ¨¡å¼ç»“åˆï¼Œä»¥åŠåœ¨&lt;a href=&#34;http://hechen.xyz/2018/07/16/Avoiding-singletons-in-Swift/&#34;&gt;é¿å…åœ¨ Swift ä¸­ä½¿ç”¨å•ä¾‹&lt;/a&gt;ä¸­æ›¿æ¢ç¨‹åºä¸­çš„å•ä¾‹å¯¹è±¡ç­‰æ–¹å¼è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚&lt;/p&gt;

&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¤§éƒ¨åˆ†æˆ‘çš„åšæ–‡ä»¥åŠä¾‹å­ä¸­éƒ½ä½¿ç”¨äº†åŸºäºåˆå§‹åŒ–çš„ä¾èµ–æ³¨å…¥æ–¹å¼ã€‚ç„¶è€Œï¼Œå°±åƒå¤§éƒ¨åˆ†çš„ç¼–ç¨‹æŠ€å·§ä¸€æ ·ï¼Œè¿˜æœ‰å¾ˆå¤š â€œå£å‘³â€ çš„è¿›è¡Œä¾èµ–æ³¨å…¥çš„æ–¹å¼ â”€â”€ æ¯ä¸€ç§éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚ è¿™å‘¨ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å…¶ä¸­ä¸‰ç§æ–¹å¼ä»¥åŠå¦‚ä½•åœ¨ Swift ä¸­ä½¿ç”¨å®ƒä»¬ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åŸºäºåˆå§‹åŒ–æ–¹æ³•&#34;&gt;åŸºäºåˆå§‹åŒ–æ–¹æ³•&lt;/h3&gt;

&lt;p&gt;è®©æˆ‘ä»¬å¿«é€Ÿå›é¡¾ä¸€ä¸‹ç”¨çš„æœ€ä¸ºå¹¿æ³›çš„ä¾èµ–æ³¨å…¥æ–¹å¼ â”€â”€ initializer-basedã€‚è¿™ä¸ªæƒ³æ³•æ˜¯åœ¨æŸä¸ªç±»è¢«åˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥å…¶æ‰€éœ€çš„ä¾èµ–çš„æ–¹å¼ã€‚è¿™ç§å½¢å¼æœ€å¤§çš„å¥½å¤„å°±æ˜¯ï¼Œå®ƒä¿è¯äº†èƒ½å¤Ÿç«‹å³æ»¡è¶³è¯¥ç±»å®Œæˆå…¶åŠŸèƒ½æ‰€éœ€è¦çš„æ‰€æœ‰ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬å»ºä¸€ä¸ªç±» â”€â”€ FileLoader æ¥ä»ç£ç›˜åŠ è½½æ–‡ä»¶ã€‚ä¸ºäº†å®ç°è¯¥ Loader çš„åŠŸèƒ½ï¼Œéœ€è¦ä¸¤ä¸ªä¾èµ–é¡¹ï¼Œç³»ç»Ÿæ‰€æä¾›çš„å®ä¾‹å¯¹è±¡ â”€â”€ &lt;strong&gt;FileManager&lt;/strong&gt; å’Œ &lt;strong&gt;Cache&lt;/strong&gt;ã€‚ä½¿ç”¨åŸºäºåˆå§‹åŒ–çš„ä¾èµ–æ³¨å…¥çš„æ‰§è¡Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;FileLoader&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;fileManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FileManager&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Cache&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fileManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FileManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
         &lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Cache&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fileManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fileManager&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¯ä»¥å…³æ³¨ä¸‹åˆå§‹åŒ–æ–¹æ³•é‡Œé»˜è®¤å‚æ•°çš„è®¾ç½®ï¼Œå…¶å¯ä»¥é¿å…æ¯æ¬¡éƒ½éœ€è¦è‡ªè¡Œåˆ›å»ºçš„é—®é¢˜ã€‚è¿™æ ·èƒ½å¤Ÿç®€åŒ–æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ &lt;strong&gt;FileLoader&lt;/strong&gt; ç±»åˆ›å»ºæ–‡ä»¶åŠ è½½å™¨çš„å·¥ä½œï¼Œè€Œä¸”ä¹Ÿèƒ½å¤Ÿèƒ½å¤Ÿä¼ å…¥ mock æ•°æ®æˆ–è€…æˆ‘ä»¬çš„æµ‹è¯•ä»£ç ä¸­çš„åˆ›å»ºçš„å®ä¾‹è¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åŸºäºå±æ€§&#34;&gt;åŸºäºå±æ€§&lt;/h3&gt;

&lt;p&gt;è™½ç„¶å‰ä¸€ç§åŸºäºåˆå§‹åŒ–çš„ä¾èµ–æ³¨å…¥å½¢å¼å¸¸å¸¸ç»™æˆ‘ä»¬è‡ªå®šä¹‰ç±»å¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œä½†æ˜¯æœ‰æ—¶å€™ï¼Œå½“ä½ ä¸å¾—ä¸ç»§æ‰¿è‡ªæŸä¸ªç³»ç»Ÿç±»çš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›å›°éš¾ã€‚å…¶ä¸­ä¸€ä¸ªä¾‹å­å°±æ˜¯ï¼Œå½“æˆ‘ä»¬æ„å»º view controllerï¼Œå°¤å…¶æ˜¯ä½ åœ¨ä½¿ç”¨ XIB ä»¥åŠ Storyboard ç±»å®šä¹‰å®ƒä»¬çš„æ—¶å€™ï¼Œå› ä¸ºæ­¤æ—¶ä½ ä¸å†èƒ½å¤ŸæŒæ§å®ƒä»¬çš„åˆå§‹åŒ–æ–¹æ³•äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºè¿™äº›æƒ…å†µï¼ŒåŸºäºå±æ€§çš„ä¾èµ–æ³¨å…¥æ–¹å¼æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚ç›¸å¯¹äºåˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œå¯¹è±¡çš„ä¾èµ–é¡¹æ³¨å…¥ï¼ŒåŸºäºå±æ€§çš„å½¢å¼å¯ä»¥åœ¨ä¹‹åé€šè¿‡ç®€å•çš„èµ‹å€¼æ¥åšåˆ°ï¼Œå…¶èƒ½å¤Ÿè®©ä½ å‡å°‘æ¨¡æ¿ä»£ç çš„ä¹¦å†™ï¼Œå°¤å…¶æ˜¯åœ¨ä½ ç¡®å®æ²¡æœ‰å¿…è¦è¿›è¡Œæ³¨å…¥çš„æ—¶å€™èƒ½å¤Ÿæœ‰æ›´å¥½çš„é»˜è®¤å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨æ„å»ºä¸€ä¸ª &lt;strong&gt;PhotoEditorViewController&lt;/strong&gt; ï¼Œè¿™ä¸ªè§†å›¾æ§åˆ¶å™¨ä½¿å¾—ç”¨æˆ·ç¼–è¾‘å®ƒä»¬ç…§ç‰‡åº“ä¸­çš„å›¾ç‰‡ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªåŠŸèƒ½ï¼Œè¯¥è§†å›¾æ§åˆ¶å™¨éœ€è¦ç”¨åˆ°ç³»ç»Ÿæä¾›çš„ PHPhotoLibrary ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ï¼ˆè¯¥ç±»æœ¬èº«æ˜¯ä¸€ä¸ªå•ä¾‹ï¼‰ä»¥åŠæˆ‘ä»¬è‡ªå·±å®ç°çš„ç±» &lt;strong&gt;PhotoEditorEngine&lt;/strong&gt; çš„ä¸€ä¸ªå®ä¾‹ã€‚é‚£ä¸ºäº†ä¸é€šè¿‡è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•è¿›è¡Œä¾èµ–æ³¨å…¥çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€äº›å…·æœ‰é»˜è®¤å€¼çš„å¯å˜å±æ€§ï¼Œä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;PhotoEditorViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;library&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PhotoLibrary&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PHPhotoLibrary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;engine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PhotoEditorEngine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½¿ç”¨ &lt;a href=&#34;https://www.swiftbysundell.com/posts/testing-swift-code-that-uses-system-singletons-in-3-easy-steps&#34;&gt;Testing Swift code that uses system singletons in 3 easy steps&lt;/a&gt; è¿™ç¯‡æ–‡ç« ä¸­çš„æ‰‹æ³•ï¼Œé€šè¿‡ä½¿ç”¨ä¸€ä¸ªåè®®æä¾›ä¸€ä¸ªæ›´ä¸ºæŠ½è±¡çš„ &lt;strong&gt;PhotoLibrary&lt;/strong&gt; æ¥å£æ¥è·å–ç³»ç»Ÿçš„å›¾ç‰‡åº“ã€‚è¿™æ ·ä¼šä½¿å¾—æµ‹è¯•å’Œ Mock æ•°æ®ç‰¹åˆ«çš„å®¹æ˜“ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢è¿™äº›å·¥ä½œæ¯”è¾ƒå¥½çš„æ˜¯æˆ‘ä»¬ä¾ç„¶èƒ½å¤Ÿé€šè¿‡ç®€å•çš„ç»™è§†å›¾æ§åˆ¶å™¨æ¥èµ‹å€¼ï¼Œä»è€Œåœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ç®€å•çš„æ³¨å…¥ Mock ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;PhotoEditorViewControllerTests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;XCTestCase&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;testApplyingBlackAndWhiteFilter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;viewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PhotoEditorViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Assign a mock photo library to gain complete control over&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// what photos are stored in it&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;library&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PhotoLibraryMock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;library&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;photos&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestPhotoFactory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;photoWithColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;red&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;viewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;library&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;library&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Run our testing commands&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;viewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;selectPhoto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;viewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apply&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blackAndWhite&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;viewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;savePhoto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Assert that the outcome is correct&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;XCTAssertTrue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;photoIsBlackAndWhite&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;library&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;photos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]))&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;   
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;åŸºäºå‚æ•°&#34;&gt;åŸºäºå‚æ•°&lt;/h3&gt;

&lt;p&gt;æœ€åä¸€ç§ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹åŸºäºå‚æ•°çš„ä¾èµ–æ³¨å…¥å½¢å¼ã€‚è¿™ç§æ–¹å¼å°¤å…¶åœ¨ä½ æƒ³è®©æ—§æœ‰ä»£ç æ›´åŠ å¯æµ‹è¯•ï¼Œè€Œä¸éœ€è¦å¯¹ç°å­˜çš„ç»“æ„è¿›è¡Œæ›´å¤šæ”¹åŠ¨çš„æ—¶å€™å°¤å…¶æœ‰æ•ˆã€‚&lt;/p&gt;

&lt;p&gt;è®¸å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä»…éœ€è¦æŸä¸ªç‰¹å®šçš„ä¾èµ–é¡¹ä¸€æ¬¡ï¼Œæˆ–è€…æˆ‘ä»¬ä»…ä»…éœ€è¦åœ¨æŸäº›ç‰¹å®šæ¡ä»¶ä¸‹è¿›è¡Œ mockã€‚ä¸éœ€è¦æ”¹å˜æŸä¸ªå¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•æˆ–è€…æš´éœ²å¯å˜å±æ€§ï¼ˆé€šå¸¸éƒ½ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘å‡ºä¸€ä¸ªæ¥å—ä¸€ä¸ªä¾èµ–é¡¹ä½œä¸ºå‚æ•°çš„ç‰¹å®š APIã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬çœ‹ä¸€ä¸ª &lt;strong&gt;NoteManager&lt;/strong&gt; ç±»ï¼Œè¯¥ç±»æ˜¯æŸä¸ªç¬”è®°ç±»åº”ç”¨çš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„å·¥ä½œå°±æ˜¯ç®¡ç†æ‰€æœ‰ç”¨æˆ·å·²ç»ä¹¦å†™çš„ç¬”è®°ï¼Œæä¾›ä¸€ä¸ª API è®©ç”¨æˆ·èƒ½å¤ŸæŸ¥è¯¢ç¬”è®°ã€‚è€ƒè™‘åˆ°è¿™ä¸ªæ“ä½œå¯èƒ½è€—æ—¶ï¼ˆå¦‚æœç”¨æˆ·æœ‰è®¸å¤šç¬”è®°ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯è¿™æ ·ï¼‰ï¼Œæˆ‘ä»¬æŠŠè¯¥åŠ¨ä½œæ­£å¸¸æ”¾ç½®äºä¸€ä¸ªåå°çº¿ç¨‹æ‰§è¡Œï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NoteManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;loadNotes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matching&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                   &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Note&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;DispatchQueue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;global&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userInitiated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;database&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loadDatabase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;notes&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;note&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;note&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;notes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å°½ç®¡ä¸Šé¢çš„ä»£ç åœ¨æˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒé‡Œä¹Ÿç®—æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†åœ¨æµ‹è¯•ä¸­æˆ‘ä»¬æ­£å¸¸æƒ…å†µä¸‹æ˜¯æƒ³é¿å…ä¸€äº›å¼‚æ­¥ä»£ç çš„ï¼Œå°½å¯èƒ½çš„å¹³è¡ŒåŒ–ä»¥é¿å… &lt;a href=&#34;https://www.swiftbysundell.com/posts/reducing-flakiness-in-swift-tests&#34;&gt;flakiness&lt;/a&gt;. å¦‚æœè¦ç±»ä¼¼äºåŸºäºåˆå§‹åŒ–æˆ–è€…åŸºäºå±æ€§çš„ä¾èµ–æ³¨å…¥èƒ½å¤ŸæŒ‡å®šä¸€ä¸ªæ˜¾å¼çš„é˜Ÿåˆ—æä¾›ç»™ NoteManager æ¥ç”¨çš„æ–¹å¼ï¼Œéœ€è¦å¯¹è¯¥ç±»è¿›è¡Œå¾ˆå¤šæ”¹å˜ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨å½“ä¸‹æ— æ³•åšæˆ–è€…ä¸æ„¿æ„åšçš„ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ—¶å€™ï¼ŒåŸºäºå‚æ•°çš„ä¾èµ–æ³¨å…¥æ–¹å¼çš„å®ç°å°±èƒ½å¤Ÿè¾¾åˆ°ã€‚ç›¸å¯¹äºä¸å¾—ä¸å¯¹æ•´ä¸ªç±»è¿›è¡Œé‡æ„ï¼Œæˆ‘ä»¬é€šè¿‡æ’å…¥é˜Ÿåˆ—ç›¸å…³ä»£ç ä½¿å¾— &lt;code&gt;loadNotes&lt;/code&gt; æ–¹æ³•åœ¨è¯¥é˜Ÿåˆ—ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NoteManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;loadNotes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matching&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                   &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DispatchQueue&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;global&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userInitiated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
                   &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Note&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;database&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loadDatabase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;notes&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;note&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;note&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;notes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ ·å°±ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå¾ˆå®¹æ˜“çš„åœ¨æµ‹è¯•ä»£ç ä¸­ä½¿ç”¨æŸä¸ªå®šåˆ¶çš„æˆ‘ä»¬å¯ç­‰å¾…çš„é˜Ÿåˆ—ã€‚è¿™æ ·ä¹Ÿå‡ ä¹ä½¿å¾—æˆ‘ä»¬æŠŠä¸Šé¢çš„æ¥å£è½¬å˜æˆäº†ä¸€ä¸ªåŒæ­¥æ¥å£ï¼Œä½¿å¾—ä¸€åˆ‡å˜å¾—æ›´åŠ å®¹æ˜“å’Œå¯é¢„æµ‹ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ä¸ªåŸºäºå‚æ•°çš„ä¾èµ–æ³¨å…¥çš„ä½¿ç”¨æ¡ˆä¾‹æ˜¯å½“ä½ æƒ³æµ‹è¯•æŸä¸ªé™æ€çš„ API çš„æ—¶å€™ã€‚å› ä¸ºé™æ€çš„ API æˆ‘ä»¬æ˜¯ä¸å­˜åœ¨åˆå§‹åŒ–æ–¹æ³•çš„ï¼ŒåŒæ—¶æˆ‘ä»¬ç†æƒ³æƒ…å†µä¸‹ä¹Ÿæ˜¯ä¸åº”è¯¥ç»´æŠ¤ä»»ä½•é™æ€çš„çŠ¶æ€çš„ï¼Œé‚£åŸºäºå‚æ•°çš„ä¾èµ–æ³¨å…¥æ–¹å¼å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªé™æ€çš„ç±» &lt;strong&gt;MessageSender&lt;/strong&gt;ï¼Œ è¯¥ç±»å½“å‰ä¾èµ–æŸä¸ªå•ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MessageSender&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;Database&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;endpoint&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sendMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;NetworkManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“ç„¶ï¼Œä¸€ä¸ªé•¿è¿œçš„è§£å†³æ–¹æ¡ˆæ›´å¯èƒ½æ˜¯é‡æ„ &lt;strong&gt;MessageSender&lt;/strong&gt; è¿™ä¸ªç±»ï¼Œè®©å®ƒå˜æˆä¸€ä¸ªéé™æ€çš„ï¼Œèƒ½å¤Ÿåœ¨å…¶æ‰€æœ‰è¢«ä½¿ç”¨çš„åœ°æ–¹è¢«æ­£ç¡®çš„æ³¨å…¥ä¾èµ–ã€‚ä½†æ˜¯åŸºäºæˆ‘ä»¬èƒ½å¤Ÿæ›´å®¹æ˜“çš„æµ‹è¯•å®ƒï¼ˆæ¯”å¦‚ï¼Œé‡ç°æˆ–è€…éªŒè¯æŸä¸ª Bugï¼‰ï¼Œæˆ‘ä»¬èƒ½ç®€å•çš„ä½¿ç”¨å‚æ•°ä½œä¸ºä¾èµ–é¡¹è¿›è¡Œæ³¨å…¥ï¼Œè€Œä¸æ˜¯åŸºäºæŸä¸ªå•ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MessageSender&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                     &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                     &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Database&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                     &lt;span class=&#34;n&#34;&gt;networkManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NetworkManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;database&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;endpoint&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sendMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;networkManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬åˆå†æ¬¡ä½¿ç”¨äº†ç¼ºçœçš„å‚æ•°ï¼Œä¸ä»…ä»…æ›´åŠ æ–¹ä¾¿è€Œå·²ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œèƒ½å¤Ÿåœ¨ 100% å‘åå…¼å®¹çš„æƒ…å†µä¸‹ä¸ºæˆ‘ä»¬çš„ä»£ç å¢åŠ æµ‹è¯•æ”¯æŒã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œå“ªä¸€ç§ä¾èµ–æ³¨å…¥çš„æ–¹æ¡ˆæ˜¯æœ€å¥½çš„å‘¢ï¼Ÿå°±åƒå¤§éƒ¨åˆ†æ—¶å€™ä¸€æ ·ï¼Œæˆ‘çš„ç­”æ¡ˆå¾ˆæ— èŠçš„ï¼š çœ‹æƒ…å†µï¼æˆ‘åœ¨è¯¥åšå®¢ä¸­æ‰€è§†å›¾å»åšçš„ä¸€ä»¶äº‹æƒ…å°±æ˜¯é’ˆå¯¹æŸä¸ªç‰¹å®šé—®é¢˜ç»™å‡ºéœ€è¦ä¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚åŸå› å¾ˆç®€å•ï¼Œæˆ‘çœŸçš„ä¸ç›¸ä¿¡åˆæ‰€è°“é“¶å¼¹çš„å­˜åœ¨ã€‚æˆ‘è®¤ä¸ºï¼ŒæŒ‰ç…§æˆ‘ä»¬æ„æ„¿å…·å¤‡å¤šä¸ªå·¥å…·æˆ–è€…å¯¹äºç‰¹å®šæŠ€å·§çš„å¤šç§è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿä½¿æˆ‘ä»¬å˜å¾—æ›´å¥½ï¼Œåœ¨å†™ä»£ç çš„æ—¶å€™ä¹Ÿèƒ½å¤Ÿæ¸¸åˆƒæœ‰ä½™ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>é‚£äº›æˆ‘æ¢å¤ Mac ç³»ç»Ÿä¹‹åè¦å®‰è£…çš„ Apps</title>
      <link>https://hechen.xyz/post/my-favorite-mac-apps/</link>
      <pubDate>Wed, 11 Jul 2018 12:58:37 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/my-favorite-mac-apps/</guid>
      
        <description>

&lt;p&gt;è®°å½•ä¸€ä¸‹è‡ªå·±å¸¸ç”¨çš„ Mac Appsï¼Œæ¯æ¬¡é‡è£…ä¹‹ååˆ°äº†ç”¨çš„æ—¶å€™å‘ç°å¿˜è®°å®‰è£…äº†(ä¸æ˜¯æ¯æ¬¡éƒ½ç”¨ TimeMachine æ¢å¤)ï¼Œè€Œä¸”å¼ºçƒˆç®€æ˜“å¤§å®¶å¦‚æœæŸä¸ª App æœ‰å¯¹åº”çš„ç‹¬ç«‹å®‰è£…ç‰ˆæœ¬çš„è¯ï¼Œè´­ä¹°å…¶ç‹¬ç«‹å®‰è£…ç‰ˆæœ¬ä¸ºå¥½ï¼Œæ²™ç›’ç¯å¢ƒä»¥åŠå’Œ Apple ID ç»‘å®šçš„ç‰¹æ€§å°±ä½¿å¾—åŠŸèƒ½æ€§ä»¥åŠçµæ´»åº¦å¤§å‡ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;blockquote&gt;
&lt;p&gt;æ›´æ–°æ—¶é—´ 2018-10-07
æ›´æ¢å›¾åºŠï¼Œæ›´æ–°å›¾ç‰‡&lt;/p&gt;

&lt;p&gt;æ›´æ–°æ—¶é—´ 2018-08-10
ä¸ä¹…å‰ï¼Œå·²ç»è®¢é˜…äº†ä¸€å¹´çš„ Setappï¼Œå‘ç°ä¸Šé¢å¥½å¤š App è‡ªå·±éƒ½ä¹‹å‰ä¹°è¿‡äº†ï¼ŒSighï¼
å¦‚æœä½ ä½¿ç”¨ Ulysses æˆ–è€… MoneyWiz 3.0 çš„è¯ï¼Œè®¢é˜… Setapp å°±ä¼šéå¸¸çš„å€¼å¾—ï¼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/q3yToeZ.png&#34; alt=&#34;Mac Apps&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;åŠå…¬å·¥å…·&#34;&gt;åŠå…¬å·¥å…·&lt;/h2&gt;

&lt;p&gt;ç¦»å¼€è¿™äº›å·¥å…·ï¼Œè²Œä¼¼æ— æ³•åŠå…¬çš„ã€‚&lt;/p&gt;

&lt;h3 id=&#34;airmail&#34;&gt;AirMail&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/airmail-3/id918858936?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/19ADIxn.jpg&#34; alt=&#34;AirMai&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é‚®ç®±å®¢æˆ·ç«¯ï¼Œçœ‹ä¸­ AirMail ä¸»è¦æ˜¯å› ä¸ºå…¶å¼ºå¤§çš„ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆã€‚&lt;/p&gt;

&lt;h3 id=&#34;slack&#34;&gt;Slack&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/slack/id803453959?mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/W1wtsje.jpg&#34; alt=&#34;Slack&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¬å¸çš„æ—¥å¸¸æ²Ÿé€šäº¤æµä¸»è¦æˆ˜åœºï¼Œå…¶å®æ•´ä¸ªæ“ä½œä½“éªŒæˆ‘æ˜¯ä¸å¤ªé€‚åº”çš„ï¼Œä¸è¿‡å®ƒå¼ºå¤§åœ¨ç¬¬ä¸‰æ–¹æœåŠ¡çš„é›†æˆä¸Šï¼Œå¯ä»¥åšå¾ˆå¤šè‡ªåŠ¨åŒ–çš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;h3 id=&#34;fantastical-2&#34;&gt;Fantastical 2&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://flexibits.com/fantastical&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/1naxpaM.jpg&#34; alt=&#34;Fantastical&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ—¥å†å·¥å…·ï¼ŒæŸ¥çœ‹æ»¡æ»¡çš„ä¸€å±å¹•æ—¥ç¨‹ï¼Œä½ ä¼šæ„Ÿè§‰å¾ˆèˆ’æœçš„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;tunnelblick&#34;&gt;Tunnelblick&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://tunnelblick.net/downloads.html&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ghIEHNQ.png&#34; alt=&#34;Tunnelblick-menu&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¬å¸éœ€è¦ä½¿ç”¨è¯¥ App æ¥æ¥å…¥åŠå…¬å®¤ç½‘ç»œã€‚è¿œç¨‹åŠå…¬å¿…å¤‡ã€‚&lt;/p&gt;

&lt;h4 id=&#34;office-ä¸‰ä»¶å¥—&#34;&gt;Office ä¸‰ä»¶å¥—&lt;/h4&gt;

&lt;p&gt;å¾®è½¯çš„ Office ä¸‰ä»¶å¥—ï¼ŒWordï¼ŒExcelï¼ŒPowerPointã€‚ ç”¨çš„é¢‘ç‡ä¸é«˜ï¼Œä½†æ˜¯ç”¨çš„æ—¶å€™å¾—æœ‰ã€‚&lt;/p&gt;

&lt;h2 id=&#34;gtd&#34;&gt;GTD&lt;/h2&gt;

&lt;p&gt;æ—¥å¸¸ GTD å·¥å…·ï¼ŒåŸºæœ¬å°±æ˜¯å„å®¶è¯„æµ‹å¸¸æèµ·çš„å‡ æ¬¾ Appã€‚&lt;/p&gt;

&lt;h3 id=&#34;2do&#34;&gt;2Do&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.2doapp.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/st89Smb.jpg&#34; alt=&#34;2Do on Mac&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€è¿‘æ‰å®Œå…¨è½¬å‘ 2Doï¼Œè¿™ä¸ª GTD å·¥å…·æ˜¯æˆ‘æœ€æ—©ä¹°å…¥çš„ï¼Œä½†æ˜¯åæ¥å› ä¸ºå…¶è‡ªåŠ¨åŒ–å¤ªå¼±ï¼Œè¢«æ‰“å…¥å†·å®«ã€‚æœ€è¿‘å‡ ä¸ªæœˆåˆå¼€å§‹æ¡èµ·æ¥äº†ï¼Œå¸å¼•æˆ‘çš„å‡ ä¸ªç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Colorful Tab&lt;/li&gt;
&lt;li&gt;Mail AutoCapture&lt;/li&gt;
&lt;li&gt;Smart List&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ï¼Œå…¶åŒæ­¥ç›®å‰ç¨³å®šçš„å°±åªèƒ½ä½¿ç”¨ Dropbox äº†ï¼Œåœ¨å›½å†…åŸºæœ¬å¯¹å¤§éƒ¨åˆ†äººå°±æ˜¯ä¸ªéšœç¢ã€‚&lt;/p&gt;

&lt;h3 id=&#34;things-3&#34;&gt;Things 3&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/5ifAVwf.jpg&#34; alt=&#34;Things3&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Things 2 ä¹‹å‰ä¹Ÿæœ‰ï¼Œä¸è¿‡å› ä¸ºåŠŸèƒ½å¤ªç®€å•ï¼ŒåŸºæœ¬å¤„äºä¹°äº†çœ‹çœ‹çš„çŠ¶æ€ï¼Œåæ¥ Things 3 çš„å‡ºç°ä¸»è¦çœ‹ä¸­å®ƒçš„è®¾è®¡å…ƒç´ ã€‚&lt;/p&gt;

&lt;h3 id=&#34;omnifocus-3&#34;&gt;OmniFocus 3&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/D72LM50.jpg&#34; alt=&#34;OmniFocus 3&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å®ƒæœ€ä¸»è¦çš„åŸå› æ˜¯å®ƒæ”¯æŒ AppleScript æ¯”è¾ƒæ–¹ä¾¿ã€‚å°¤å…¶æ˜¯ç»“åˆ Keyboard Maestro æ¥ç”¨å¤ªæ–¹ä¾¿ã€‚æ¯”å¦‚æˆ‘ä¼šå»ºç«‹ä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯å‘¨äº”ä¸‹åˆä¸‹ç­å‰è‡ªåŠ¨ç”Ÿæˆä¸€å¼ å‘¨æŠ¥è¡¨å•ï¼Œåˆ—å‡ºæ¥æœ¬å‘¨å®Œæˆçš„ Task ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;æœ€è¿‘åˆšåˆä» 2 å‡çº§åˆ° 3 ä»£ï¼ŒåŠä»·æŠ˜æ‰£ 39.99$&lt;/p&gt;

&lt;p&gt;3 ä¸»è¦å°†ä¹‹å‰ Context æ›´æ¢ä¸ºæ”¯æŒå¤šå±æ€§çš„ Tagï¼Œä¹Ÿç®—è¡¥å……äº†ä¸€ä¸ªç«äº‰ç‚¹å§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç³»ç»Ÿå·¥å…·&#34;&gt;ç³»ç»Ÿå·¥å…·&lt;/h2&gt;

&lt;p&gt;åŸºæœ¬æ˜¯ç³»ç»Ÿç¼ºå°‘çš„æˆ–è€…åŠŸèƒ½éš¾ä»¥æ»¡è¶³æ—¥å¸¸ä½¿ç”¨çš„ä¸€äº› Appã€‚&lt;/p&gt;

&lt;h3 id=&#34;1-blocker&#34;&gt;1 Blocker&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/app/id1107421413&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/l3aGI1P.jpg&#34; alt=&#34;1 Blocker&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;istat-menus&#34;&gt;iStat Menus&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://download.bjango.com/istatmenus/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/PtO8FNP.jpg&#34; alt=&#34;iStat Menus&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;bartender-3&#34;&gt;Bartender 3&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.macbartender.com/Demo/Bartender%203.zip&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/EnE2fyQ.png&#34; alt=&#34;Bartender&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;surge&#34;&gt;Surge&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://nssurge.com/&#34;&gt;Surge&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æœ€è¿‘ Yachen Liu å‘å¸ƒäº† Surge 3 çš„ Mac ç‰ˆæœ¬é¢„è§ˆç‰ˆæœ¬&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/CNc6AIK.png&#34; alt=&#34;Surge 3&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å®è´¨ä¸Šæ˜¯ä¸ªç½‘ç»œè°ƒè¯•å·¥å…·ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¢«ç”¨æ¥ä½œä¸ºçˆ±å›½ä¸Šç½‘å·¥å…·äº†ã€‚ è€Œä¸”å®šä»·ç­–ç•¥ä¹Ÿæ˜¯å¼•å‘äº†å¾ˆå¤šå£æ°´æˆ˜ï¼Œä¸è¿‡å•†å“å˜›ï¼Œå¦‚æœä½ è§‰å¾—ä¸å€¼å°±ä¸ä¹°å°±è¡Œäº†ï¼Œä¸å¿…è¦æƒ³ç”¨è¿˜éª‚ä»–å®šä»·é«˜ï¼Œå¯¹å§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/gkhCynx.png&#34; alt=&#34;Surge Dashboard&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;wallpaper-wizard&#34;&gt;Wallpaper Wizard&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/wallpaper-wizard-2/id1266674560?mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/lYnieJQ.jpg&#34; alt=&#34;Wallpaper Wizard&#34; /&gt;&lt;/p&gt;

&lt;p&gt;MacPaw å®¶çš„å£çº¸åº”ç”¨ï¼Œé™æ—¶å…è´¹çš„æ—¶å€™å…¥çš„ã€‚&lt;/p&gt;

&lt;h3 id=&#34;tinkertool&#34;&gt;TinkerTool&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.bresink.com/osx/TinkerTool.html&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/YqvFP1Y.png&#34; alt=&#34;TinkerTool&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªç³»ç»Ÿå¢å¼ºå·¥å…·ï¼Œå¯ä»¥å¯¹ Dashboard å’Œ Docker ç­‰è¿›è¡Œå®šåˆ¶åŒ–ä¿®æ”¹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;capto&#34;&gt;Capto&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.globaldelight.com/capto/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/9QeUc6Z.jpg&#34; alt=&#34;Capto&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆªå±å’Œå½•åˆ¶è§†é¢‘å·¥å…·ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ•ˆç‡å·¥å…·&#34;&gt;æ•ˆç‡å·¥å…·&lt;/h2&gt;

&lt;h3 id=&#34;1password-7-for-mac&#34;&gt;1Password 7 for Mac&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://app-updates.agilebits.com/download/OPM7&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Bb13IZD.jpg&#34; alt=&#34;1Password 7&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;alfred-3&#34;&gt;Alfred 3&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://cachefly.alfredapp.com/Alfred_3.6.2_922.dmg&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/WeFkSYh.jpg&#34; alt=&#34;Alfred&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;launchbar-6&#34;&gt;LaunchBar 6&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.obdev.at/products/launchbar/download.html&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/FVgOB3g.png&#34; alt=&#34;LaunchBar&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;bettertouchtool&#34;&gt;BetterTouchTool&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://bettertouchtool.net/releases/BetterTouchTool.zip&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/4RfNX0T.jpg&#34; alt=&#34;BetterTouchTool&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;keyboard-maestro&#34;&gt;Keyboard Maestro&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.keyboardmaestro.com/action/download?km-kmi-7-b3&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/IOZeiaH.png&#34; alt=&#34;Keyboard Maestro&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;yoink&#34;&gt;Yoink&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://eternalstorms.at/yoink/mac/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/oMcckyM.jpg&#34; alt=&#34;Yoink&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;unclutter&#34;&gt;Unclutter&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://unclutterapp.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/SunNE17.png&#34; alt=&#34;Unclutter&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;toothfairy&#34;&gt;ToothFairy&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/toothfairy/id1191449274?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/2crElmV.jpg&#34; alt=&#34;ToothFairy&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;popclip&#34;&gt;PopClip&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/popclip/id445189367?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qytMbLT.jpg&#34; alt=&#34;PopClip&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;copied&#34;&gt;Copied&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://geo.itunes.apple.com/us/app/copied/id1026349850?ls=1&amp;amp;mt=12&amp;amp;at=1010l8Ju&amp;amp;ct=web&amp;amp;uo=8&amp;amp;at=1010l8Ju&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/hRW1Xoo.jpg&#34; alt=&#34;Copied&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸€æ¬¾å‰ªè´´æ¿å·¥å…·ï¼Œåº”è¯¥æ˜¯ç›®å‰ Mac ä¸Šæœ€å¼ºå¤§çš„å‰ªè´´æ¿å·¥å…·äº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å†™ä½œ&#34;&gt;å†™ä½œ&lt;/h2&gt;

&lt;h3 id=&#34;day-one&#34;&gt;Day One&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/day-one/id1055511498?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fKmOZa9.jpg&#34; alt=&#34;Day One&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ—¥è®°åº”ç”¨ï¼Œä¹‹å‰ä¹°äº† iOS å’Œ Mac åŒç‰ˆæœ¬ï¼Œæ”¹æˆè®¢é˜…ä¹‹åè‡ªåŠ¨å‡çº§ä¸º Plus ä¼šå‘˜äº†ï¼ŒåŠŸèƒ½å·²ç»å®Œå…¨è¶³å¤Ÿã€‚æœ€è¿‘çš„ Premium ä¼šå‘˜å¢åŠ äº†éŸ³é¢‘æ—¥è®°ä»¥åŠ Dark Theme çš„ä¸»é¢˜äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ulysses&#34;&gt;Ulysses&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/ulysses/id1225570693?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/GBaAJW2.jpg&#34; alt=&#34;Ulysses&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå®Œå…¨æ˜¯å†²åŠ¨æ¶ˆè´¹ï¼Œå°±æ˜¯æƒ³çœ‹çœ‹å¤§å®¶æ§æ€è¿™ä¹ˆç‹ åˆ°åº•ä¼˜ç§€åœ¨å“ªé‡Œï¼Œè¯´å®è¯å…¶è‡ªå®šä¹‰çš„ Markdown æ ¼å¼æˆ‘è¿˜æ˜¯ç”¨ä¸å¤ªä¹ æƒ¯ï¼Œä¸è¿‡ç”¨äº†æ¯å‡ æ¬¡ã€‚ä»éè®¢é˜…ç”¨åˆ°äº†è®¢é˜…&lt;/p&gt;

&lt;h3 id=&#34;mweb&#34;&gt;MWeb&lt;/h3&gt;

&lt;p&gt;æ¨èå®‰è£…å…¶é MAS ç‰ˆæœ¬ï¼Œ&lt;a href=&#34;https://zh.mweb.im/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fMxRIDB.jpg&#34; alt=&#34;MWeb&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å‰ä¸€é˜µå­åˆšåˆå‡çº§åˆ°äº† 3.0 ç‰ˆæœ¬ï¼Œè™½ç„¶ UI ä¸Šå’Œ Ulysses å·®å¾—è¿œï¼Œä¸è¿‡å› ä¸ºæœ¬åœ°åŒ–åšçš„å¥½ï¼Œå„é¡¹æœåŠ¡æ¥å…¥çš„æ¯”è¾ƒå®Œæ•´ï¼Œæ¯”å¦‚å›¾åºŠï¼Œé™æ€ç½‘ç«™è‡ªåŠ¨ç”Ÿæˆç­‰éƒ½æ˜¯æ¯”è¾ƒå¸å¼•äººçš„åœ°æ–¹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;notability&#34;&gt;Notability&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/notability/id736189492?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/GPiorsk.jpg&#34; alt=&#34;Notability&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;goodnotes&#34;&gt;GoodNotes&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/goodnotes/id1026566364?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-07-13-2400x2400bb -2-.jpg&#34; alt=&#34;GoodNotes&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;mindnode-5&#34;&gt;MindNode 5&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/mindnode-5/id1289197285?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/1er4hI3.jpg&#34; alt=&#34;MindNode 5&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;é˜…è¯»&#34;&gt;é˜…è¯»&lt;/h2&gt;

&lt;h3 id=&#34;devonthink-pro-office&#34;&gt;DEVONThink Pro Office&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://www.devontechnologies.com/download/products.html&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-07-13-42007085dd.png&#34; alt=&#34;DEVONThink Pro Office&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å·²ç»å®Œå…¨æŠŠ DENONThink å®¶çš„äº§å“ä½œä¸ºæ„å»ºæˆ‘çŸ¥è¯†å›¾è°±çš„å·¥å…·äº†ã€‚å¿…å¤‡ã€‚&lt;/p&gt;

&lt;h3 id=&#34;reeder-3&#34;&gt;Reeder 3&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/reeder-3/id880001334?mt=12&amp;amp;uo=4&amp;amp;at=1001lsTF&amp;amp;ct=iOS_detail_share_880001334&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NPLz9Wl.jpg&#34; alt=&#34;Reeder 3&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;marginnote-3&#34;&gt;MarginNote 3&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://marginnote.com/?lang=zh-hans&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/kPu5B0k.jpg&#34; alt=&#34;MarginNote 3&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å¼€å‘å·¥å…·&#34;&gt;å¼€å‘å·¥å…·&lt;/h2&gt;

&lt;h3 id=&#34;ide&#34;&gt;IDE&lt;/h3&gt;

&lt;h4 id=&#34;xcode&#34;&gt;Xcode&lt;/h4&gt;

&lt;p&gt;è¯ä¸å¤šè¯´ï¼Œè€è€å®å®çš„ä» App Store ä¸‹è½½å§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NSW9lFo.jpg&#34; alt=&#34;Xcode&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;appcode&#34;&gt;AppCode&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://www.jetbrains.com/objc/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/pdXy6FK.png&#34; alt=&#34;AppCode&#34; /&gt;&lt;/p&gt;

&lt;p&gt;AppCode å¼ºå¤§å°±å¼ºå¤§åœ¨ Jetbrain å›¢é˜Ÿä¸€è´¯çš„ Refactor åŠŸèƒ½ã€‚ä¸è¿‡åœ¨ 15å¯¸ ä¸­é… MacBook Pro ä¸Šä¾ç„¶ä¼šæ—¶ä¸æ—¶å¡é¡¿ï¼Œä¸æ¸…æ¥šæ—¶ä¸æ—¶å› ä¸ºå…¶åŸºäº JVM é‚£ä¸€å¥—æ‰€è‡´ã€‚æ¨èä¸ªäººå¼€å‘è€…æˆ–è€…é¡¹ç›®ä¸å¤ªåºå¤§çš„å›¢é˜Ÿæˆ–è€…ä¸ªäººä½¿ç”¨ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç¼–è¾‘å™¨&#34;&gt;ç¼–è¾‘å™¨&lt;/h3&gt;

&lt;h4 id=&#34;visual-studio-code&#34;&gt;Visual Studio Code&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://code.visualstudio.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ExXn0QN.png&#34; alt=&#34;Visual Studio Code&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç›®å‰å½“ä¹‹æ— æ„§æœ€å¥½ä½¿çš„ç¼–è¾‘å™¨äº†ï¼Œå½“ç„¶å¯ä»¥ä½œä¸ºå¤§é‡è„šæœ¬è¯­è¨€çš„è½»é‡ IDE ä½¿ç”¨äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä»£ç ç®¡ç†&#34;&gt;ä»£ç ç®¡ç†&lt;/h3&gt;

&lt;h4 id=&#34;tower&#34;&gt;Tower&lt;/h4&gt;

&lt;p&gt;Tower æ˜¯ä¸€æ¬¾å¤šå¹³å°æ”¯æŒçš„ Git GUIï¼Œä½¿ç”¨å‘½ä»¤è¡Œè™½ç„¶æŸäº›ç¨‹åº¦ä¸Šæ¯”è¾ƒå¿«ï¼Œä¹Ÿæ˜¾å¾— Geek èŒƒå„¿ï¼Œä½†æ˜¯åœ¨æŸ¥çœ‹ Diff ç­‰åŠŸèƒ½ä¸Šç¡®å®ä¸å¤ªç›´è§‚ï¼Œå› æ­¤ä¸€æ¬¾ Git çš„ UI å·¥å…·æ˜¾å¾—å¾ˆé‡è¦ã€‚Tower æ˜¯ä¸€æ¬¾æ”¶è´¹è½¯ä»¶ï¼Œæœ€è¿‘ 3.0 è½¬ä¸ºäº†è®¢é˜…å¼ã€‚åˆšè®¢é˜…äº†ä¸€å¹´åŸºç¡€ç‰ˆå†æ¥ç€ç”¨ï¼Œæ¯•ç«Ÿåˆ‡æ¢å·¥å…·çš„ä»£ä»·æœ‰æ—¶å€™è›®å¤§çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.git-tower.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/r4FdJaF.jpg&#34; alt=&#34;Microsoft.VisualStudio.Services.Screenshots&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;ohmystar&#34;&gt;OhMyStar&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/ohmystar2/id1218642292?ls=1&amp;amp;mt=8&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/3NNd0ct.jpg&#34; alt=&#34;OhMyStar 2&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;snippetslab&#34;&gt;SnippetsLab&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/snippetslab/id1006087419?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qd4LQGz.jpg&#34; alt=&#34;SnippetsLab&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;è®¾è®¡&#34;&gt;è®¾è®¡&lt;/h3&gt;

&lt;h4 id=&#34;sketch&#34;&gt;Sketch&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://www.sketchapp.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NXGXH8X.jpg&#34; alt=&#34;Sketch&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;sip-for-mac&#34;&gt;Sip for Mac&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://sipapp.io/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/f3NUIHy.jpg&#34; alt=&#34;sip-color-format-mac-2016&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;paintcode&#34;&gt;PaintCode&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://www.paintcodeapp.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/E7UILLI.png&#34; alt=&#34;PaintCode 3&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸»è¦é’ˆå¯¹ä¸€äº›å¤æ‚çš„è®¾è®¡å›¾å½¢ï¼Œç”¨ä»£ç ç»˜åˆ¶ä¼šéå¸¸å¤æ‚ï¼Œæ¯”å¦‚ä¸€ä¸ªéœ€è¦ä½¿ç”¨ Bezier ç»˜åˆ¶å¤æ‚çš„å›¾å½¢ï¼Œå¦‚æœäººå·¥ç”»ï¼Œè´¹æ—¶è´¹åŠ›ã€‚ä½¿ç”¨ PaintCode èƒ½å¤Ÿè§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæ”¯æŒ Objective-C å’Œ Swift ä¸¤ç§è¯­è¨€ã€‚&lt;/p&gt;

&lt;p&gt;ç»“åˆ Playground çš„è¯ä½ æ„Ÿå—ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;h4 id=&#34;eagle&#34;&gt;Eagle&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/4kEFUi4.png&#34; alt=&#34;Eagle&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è®¾è®¡å¸ˆç”¨æ¥æ”¶é›†ç´ ææ‰€ç”¨&lt;/p&gt;

&lt;h3 id=&#34;è°ƒè¯•&#34;&gt;è°ƒè¯•&lt;/h3&gt;

&lt;h4 id=&#34;charles&#34;&gt;Charles&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://www.charlesproxy.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/s7LX5NO.png&#34; alt=&#34;Charles&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å…¬å¸çš„åºåˆ—å·ï¼Œæ‰‹æœºç‰ˆæœ¬æˆ‘ä¹Ÿå…¥äº†ï¼Œä¸è¿‡åœ¨ iOS ç”Ÿæ€é‡Œå…¶å¹¶æ²¡æœ‰ Mac ä¸Šåœ¨åŒç­‰åŠŸèƒ½ä¸Šçš„åœ°ä½ï¼Œåœ¨ iOS ä¸Šæˆ‘æ›´å–œæ¬¢ä½¿ç”¨ surge æˆ–è€… Thor æ¥æŠ“åŒ…ï¼Œè€Œåè€…çš„åŠŸèƒ½åŸºæœ¬ä¸Šç›®å‰æ˜¯å¸‚é¢ä¸Šæœ€å®Œæ•´çš„ App äº†ã€‚ ä½†æ˜¯åœ¨ Mac å¹³å°ï¼ŒCharles çš„åœ°ä½ä¾ç„¶æ— äººæ’¼åŠ¨ã€‚&lt;/p&gt;

&lt;h4 id=&#34;paw&#34;&gt;Paw&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://paw.cloud/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/zt7Up5u.jpg&#34; alt=&#34;paw-lg&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¼ºå¤§çš„ API è°ƒè¯•å·¥å…·&lt;/p&gt;

&lt;h4 id=&#34;reveal&#34;&gt;Reveal&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://revealapp.com/features/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ITkfXe6.jpg&#34; alt=&#34;Reveal&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;å…¶ä»–&#34;&gt;å…¶ä»–&lt;/h3&gt;

&lt;h4 id=&#34;monodraw&#34;&gt;Monodraw&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://monodraw.helftone.com/&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/M20TPBn.jpg&#34; alt=&#34;Monodraw&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä»£ç æ³¨é‡ŠåŠ å¼ºå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥å¯¹ä»£ç è¿›è¡Œæ³¨é‡Šã€‚&lt;/p&gt;

&lt;h4 id=&#34;cutebaby&#34;&gt;CuteBaby&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/GyIzViM.jpg&#34; alt=&#34;CuteBaby&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Model åºåˆ—åŒ–å·¥å…·ï¼Œè§£å†³çš„ç—›ç‚¹å°±æ˜¯åç«¯ç»™ä½ ä¸€ä¸ª JSON ç»“æ„ï¼Œä½ éœ€è¦è‡ªè¡Œæ˜ å°„æˆå·¥ç¨‹ä¸­çš„ç±»ï¼Œè¿™ä¸ªé‡å¤å·¥ä½œæœ‰æ—¶å€™ä¼šè®©æ‚¨ç‚¸æ‰ï¼Œå› ä¸ºæœ‰çš„æ¥å£è¿”å›çš„ç»“æ„å¤æ‚ï¼Œå­—æ®µç¹æ‚ã€‚ä¸è¿‡ç½‘ç»œä¸Šæœ‰å¾ˆå¤šå¼€æºçš„é¡¹ç›®å…¶å®ä¹Ÿå¯ä»¥åšåˆ°ä¸€å®šç¨‹åº¦ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¤¾äº¤&#34;&gt;ç¤¾äº¤&lt;/h2&gt;

&lt;h4 id=&#34;telegram&#34;&gt;Telegram&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://telegram.org/dl/macos&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/cWw9qpK.jpg&#34; alt=&#34;Telegram&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;tweetbot-3&#34;&gt;Tweetbot 3&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/cn/app/tweetbot-3-for-twitter/id1384080005?l=en&amp;amp;mt=12&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yK4hhTr.jpg&#34; alt=&#34;Tweetbot&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å…¶ä»–-1&#34;&gt;å…¶ä»–&lt;/h2&gt;

&lt;h4 id=&#34;rescuetime&#34;&gt;RescueTime&lt;/h4&gt;

&lt;p&gt;ä¹°äº† Premium ä¼šå‘˜ï¼Œè®°å½•æˆ‘æ—¥å¸¸åœ¨ Mac ä¸Šçš„å·¥ä½œè®°å½•ã€‚å·²ç»è®°å½•äº†å¤§æ¦‚æœ‰ 2 å¹´å¤šçš„æ•°æ®äº†ï¼Œå¾ˆç›´è§‚ã€‚&lt;/p&gt;

&lt;h4 id=&#34;pcalc&#34;&gt;PCalc&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/PRMDseI.jpg&#34; alt=&#34;PCalc&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹Ÿç®—æ˜¯è€ç‰Œçš„è®¡ç®—å™¨äº†&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>What is LLVM</title>
      <link>https://hechen.xyz/post/what-is-llvm/</link>
      <pubDate>Tue, 10 Jul 2018 12:05:58 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/what-is-llvm/</guid>
      
        <description>

&lt;h1 id=&#34;ä»€ä¹ˆæ˜¯-llvm-éšè—åœ¨-swift-rust-clang-ç­‰è¯­è¨€èƒŒåçš„å¥¥ç§˜&#34;&gt;ä»€ä¹ˆæ˜¯ LLVMï¼Ÿéšè—åœ¨ Swiftï¼ŒRustï¼ŒClang ç­‰è¯­è¨€èƒŒåçš„å¥¥ç§˜&lt;/h1&gt;

&lt;blockquote&gt;
&lt;p&gt;äº†è§£ç¼–è¯‘å™¨æ˜¯å¦‚ä½•ç”Ÿæˆæœºå™¨åŸç”Ÿä»£ç ä¼šä½¿å¾—å€’è…¾æ–°è¯­è¨€æˆ–è€…åŠ å¼ºå·²ç»å­˜åœ¨çš„ç¼–ç¨‹è¯­è¨€å˜å¾—æ¯”ä»¥å¾€æ›´åŠ å®¹æ˜“äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œé’ˆå¯¹ç°å­˜è¯­è¨€çš„ä¼˜åŒ–å¦‚åŒé›¨åæ˜¥ç¬‹èˆ¬äº§ç”Ÿã€‚ Mozilla çš„ &lt;strong&gt;Rust&lt;/strong&gt;ï¼Œ Apple çš„ &lt;strong&gt;Swift&lt;/strong&gt;ï¼ŒJetBrain çš„ &lt;strong&gt;Kotlin&lt;/strong&gt;ç­‰è¯­è¨€ç»™å¼€å‘è€…æä¾›äº†åœ¨é€Ÿåº¦ï¼Œå®‰å…¨æ€§ï¼Œä¾¿æ·æ€§ï¼Œå¯ç§»æ¤æ€§ä»¥åŠæ€§èƒ½ç­‰æ–¹é¢æ›´å¤šçš„é€‰æ‹©ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªæ—¶é—´ç‚¹å‘¢ï¼Ÿä¸€ä¸ªé‡å¤§çš„åŸå› æ˜¯é‚£äº›æ„å»ºå…·ä½“è¯­è¨€ç›¸å…³çš„æ–°å¼å·¥å…·çš„å‡ºç°ã€‚åœ¨è¿™ä¸€å †å·¥å…·ä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯ LLVMï¼Œå…¶å…¨ç§°æ˜¯ Low-Level Virtual Machineï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå…¶æœ€æ—©æ˜¯ç”± Swift è¯­è¨€çš„å‘æ˜äºº Chris Lattner åœ¨ä¼Šåˆ©è¯ºæ–¯å·å·ç«‹å¤§å­¦æœŸé—´çš„ä¸€ä¸ªç ”ç©¶é¡¹ç›®è€Œæ¥ã€‚&lt;/p&gt;

&lt;p&gt;LLVM ä¸ä»…ä»…ä½¿å¾—åˆ›å»ºæ–°å¼è¯­è¨€æ›´åŠ å®¹æ˜“ï¼Œä¹Ÿä½¿å¾—é’ˆå¯¹ç°å­˜ç¼–ç¨‹è¯­è¨€è¿›è¡Œå¢å¼ºå®Œå–„æ›´åŠ ä¾¿æ·ã€‚å®ƒæä¾›äº†ä¸€å †å·¥å…·ä½¿å¾—åˆ›é€ è¯­è¨€çš„è¿‡ç¨‹ä¸­éœ€è¦çš„é‚£äº›ä»¤äººå¤´ç–¼çš„äº‹æƒ…å˜å¾—è‡ªåŠ¨åŒ–ï¼šåˆ›å»ºä¸€ä¸ªç¼–è¯‘å™¨ï¼Œè¾“å‡ºä»£ç éœ€è¦é€‚é…å¤šå¹³å°å’Œæ¶æ„ï¼Œç¼–å†™ä»£ç å¤„ç†è¯­è¨€å½“ä¸­é€šå¸¸éƒ½å­˜åœ¨çš„é‚£äº›æ¯”è¾ƒæ™¦æ¶©çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚å¼‚å¸¸ã€‚LLVM çš„è‡ªç”±å¼€å‘è®¸å¯ä½¿å¾—å®ƒå¯ä»¥è¢«è‡ªç”±çš„ä½œä¸ºä¸€ä¸ªè½¯ä»¶ç»„ä»¶æˆ–è€…è¢«éƒ¨ç½²æˆæœåŠ¡æ¥ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨äº† LLVM çš„ç¼–ç¨‹è¯­è¨€èŠ±åå†Œç§æœ‰å¾ˆå¤šç†Ÿæ‚‰çš„åå­—ã€‚Apple çš„ Swift è¯­è¨€ä½¿ç”¨ LLVM ä½œä¸ºå…¶ç¼–è¯‘å™¨æ¡†æ¶ï¼ŒRust è¯­è¨€ä½¿ç”¨ LLVM ä½œä¸ºå…¶å·¥å…·é“¾ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚åŒæ ·ï¼Œè®¸å¤šç¼–è¯‘å™¨ä¹Ÿæœ‰å…¶ LLVM ç‰ˆæœ¬ï¼Œä¾‹å¦‚ Clangï¼Œä¸€ä¸ª C/C++ ç¼–è¯‘å™¨ï¼Œå®ƒæ˜¯å’Œ LLVM åŠŸèƒ½ç‰¹åˆ«ç›¸è¿‘çš„ä¸€ä¸ªé¡¹ç›®ã€‚è¿˜æœ‰ Kotlin è¯­è¨€ï¼Œå…¶åä¹‰ä¸Šæ˜¯ä¸€é—¨ JVM è¯­è¨€ï¼Œä¹Ÿæ­£åœ¨å¼€å‘è¯¥è¯­è¨€çš„ä¸€ä¸ªç‰ˆæœ¬ï¼š &lt;a href=&#34;https://www.infoworld.com/article/3187370/application-development/kotlin-compiles-directly-to-native-code-via-llvm.html&#34;&gt;Kotlin Native&lt;/a&gt;ï¼Œå…¶ä½¿ç”¨ LLVM ç¼–è¯‘æˆæœºå™¨åŸç”Ÿä»£ç ã€‚&lt;/p&gt;

&lt;h2 id=&#34;llvm-æ˜¯ä»€ä¹ˆ&#34;&gt;LLVM æ˜¯ä»€ä¹ˆ&lt;/h2&gt;

&lt;p&gt;LLVM æœ€æ ¸å¿ƒçš„åŠŸèƒ½å°±æ˜¯ï¼Œå¯ä»¥é€šè¿‡ç¼–ç æ–¹å¼åˆ›é€ æœºå™¨åŸç”Ÿä»£ç ã€‚ä¸€ä¸ªå¼€å‘è€…å¯ä»¥ä½¿ç”¨å…¶ API åˆ›é€ æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤æ˜¯ä¸€ç§ intermediate representation æ ¼å¼ï¼Œç®€ç§° IRã€‚ä¹‹åï¼ŒLLVM èƒ½å¤Ÿå°† IR ç¼–è¯‘æˆç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–è€…å¯¹å…¶æ‰§è¡Œå³æ—¶ç¼–è¯‘ä»¥è¿è¡Œåœ¨å¦å¤–ä¸€ä¸ªç¨‹åºï¼Œä¾‹å¦‚æŸç¼–ç¨‹è¯­è¨€çš„è§£é‡Šå™¨çš„ä¸Šä¸‹æ–‡ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­å¾ˆå¸¸è§çš„ç»“æ„ä½“æˆ–è€…æ¨¡å¼ï¼ŒLLVM çš„ API éƒ½æä¾›äº†åŸå§‹è¯­ä¹‰çš„æ”¯æŒã€‚ä¾‹å¦‚ï¼Œå‡ ä¹æ‰€æœ‰çš„è¯­è¨€éƒ½æœ‰å‡½æ•°æˆ–è€…å…¨å±€å˜é‡çš„æ¦‚å¿µï¼ŒLLVM åœ¨å…¶ IR ä¸­æŠŠå‡½æ•°å’Œå…¨å±€å˜é‡ä½œä¸ºç‹¬ç«‹å…ƒç´ å®šä¹‰å‡ºæ¥ï¼Œå› æ­¤ä½ ä¸éœ€è¦èŠ±å¤ªå¤šæ—¶é—´å’Œç²¾åŠ›æ¥é‡å¤é€ è¿™äº›ç‰¹å®šçš„è½®å­ï¼Œä½ åªéœ€è¦ä½¿ç”¨ LLVM çš„å®ç°ï¼Œä¸“æ³¨äºä½ çš„è¯­è¨€æœ€éœ€è¦å…³æ³¨çš„åœ°æ–¹å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/xIbW9gq.jpg&#34; alt=&#34;ä¸€ä¸ª LLVM çš„ IR çš„ä¾‹è¯. å³ä¾§æ˜¯ä¸€ä¸ªç®€å•çš„ C ç¨‹åº; å·¦ä¾§æ˜¯åŒæ ·çš„ä»£ç è¢« Clang ç¼–è¯‘å™¨ç¿»è¯‘æˆçš„ LLVM IR&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;llvm-ä¸“ä¸ºç§»æ¤æ€§è€Œè®¾è®¡&#34;&gt;LLVM: ä¸“ä¸ºç§»æ¤æ€§è€Œè®¾è®¡&lt;/h2&gt;

&lt;p&gt;æ¶‰åŠ LLVM çš„ä¸€ç‚¹å°±æ˜¯ï¼Œç»å¸¸åœ¨è®¨è®º C è¯­è¨€çš„æ—¶å€™è¢«æåŠï¼š C è¯­è¨€æœ‰æ—¶å€™ä¼šè¢«æè¿°ä¸ºä¸€é—¨å¯ç§»æ¤çš„é«˜é˜¶æ±‡ç¼–è¯­è¨€ï¼Œå°±æ˜¯å› ä¸ºå…¶å…·å¤‡èƒ½è¢«æ˜ å°„æˆå¾ˆæ¥è¿‘ç¡¬ä»¶è®¾å¤‡çš„æŒ‡ä»¤ï¼Œè€Œä¸”å®ƒå·²ç»è¢«ç§»æ¤åˆ°å‡ ä¹æ‰€æœ‰çš„ç³»ç»Ÿæ¶æ„ä¸Šã€‚ä½†æ˜¯ C è¯­è¨€åªèƒ½ä½œä¸ºä¸€ç§å¯ç§»æ¤çš„æ±‡ç¼–è¯­è¨€å®é™…ä¸Šä¹Ÿæœ‰å…¶å‰¯ä½œç”¨ï¼Œè¿™ä¸ªç¡®å®ä¹Ÿä¸æ˜¯å…¶è®¾è®¡ç›®æ ‡ã€‚&lt;/p&gt;

&lt;p&gt;ä½œä¸ºå¯¹æ¯”ï¼ŒLLVM çš„ IR ä»æœ€åˆå°±æ˜¯è¢«è®¾è®¡ä½œä¸ºä¸€ä¸ªå¯ç§»æ¤çš„æ±‡ç¼–ã€‚ä½“ç°çš„ç¬¬ä¸€ç‚¹å°±æ˜¯å…¶æä¾›ç‹¬ç«‹äºç‰¹å®šæœºå™¨æ¶æ„çš„è¯­ä¹‰ï¼Œä¾‹å¦‚ï¼Œinteger ç±»å‹å¹¶ä¸ä¼šè¢«é™åˆ¶åœ¨ç‰¹å®šç¡¬ä»¶è®¾å¤‡ä¸Šçš„æœ€å¤§ä½æ•°ï¼ˆæ¯”å¦‚ 32 ä½ æˆ–è€… 64 ä½ï¼‰ã€‚ä½ å¯ä»¥æŒ‰ç…§ä½ çš„éœ€è¦çš„ä½æ•°æ¥åˆ›å»ºä½ æ‰€éœ€è¦çš„ integer ç±»å‹ï¼Œæ¯”å¦‚ ä¸€ä¸ª 128 ä½çš„ integerã€‚ä½ ä¹Ÿä¸éœ€è¦æ‹…å¿ƒé’ˆå¯¹ç‰¹å®šå¤„ç†å™¨æŒ‡ä»¤é›†æ¥å†åŠ å·¥ï¼ŒLLVM å·²ç»ä¸ºäº†è€ƒè™‘äº†è¿™äº›ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ æƒ³çœ‹åˆ° LLVM IR é•¿çš„ä»€ä¹ˆæ ·å­ï¼Œå¯ä»¥å»çœ‹ä¸€ä¸‹ &lt;a href=&#34;http://ellcc.org/&#34;&gt;ELLCC é¡¹ç›®&lt;/a&gt;ï¼Œå°è¯•ä¸€ä¸‹ &lt;a href=&#34;http://ellcc.org/demo/index.cgi&#34;&gt;Demo&lt;/a&gt; ç›´æ¥ä½¿ç”¨æµè§ˆå™¨å°† C ä»£ç è½¬æ¢ä¸º LLVM IRã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¼–ç¨‹è¯­è¨€æ˜¯å¦‚ä½•ä½¿ç”¨-llvm-çš„&#34;&gt;ç¼–ç¨‹è¯­è¨€æ˜¯å¦‚ä½•ä½¿ç”¨ LLVM çš„&lt;/h2&gt;

&lt;p&gt;æœ€å¸¸ç”¨çš„åœºæ™¯å°±æ˜¯ä½œä¸ºæŸä¸€ç§è¯­è¨€çš„ç¼–è¯‘å™¨å‰ç«¯ï¼ˆahead-of-time (AOT) compilerï¼‰ï¼Œé™¤äº†å¦‚æ­¤ï¼ŒLLVM è¿˜æœ‰å…¶ä»–å¾ˆå¤šå¯èƒ½æ€§ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä½¿ç”¨-llvm-è¿›è¡Œå³æ—¶ç¼–è¯‘&#34;&gt;ä½¿ç”¨ LLVM è¿›è¡Œå³æ—¶ç¼–è¯‘&lt;/h3&gt;

&lt;p&gt;ä¸€äº›æƒ…å½¢éœ€è¦æˆ‘ä»¬çš„ä»£ç åœ¨è¿è¡Œæ—¶å³æ—¶ç”Ÿæˆï¼Œè€Œä¸æ˜¯æå‰ç¼–è¯‘å¥½ã€‚æ¯”å¦‚ &lt;a href=&#34;https://www.infoworld.com/article/3241107/python/julia-vs-python-julia-language-rises-for-data-science.html?nsdr=true&#34;&gt;Julia è¯­è¨€&lt;/a&gt;ï¼ŒJIT ç¼–è¯‘å…¶ä»£ç ï¼Œå› ä¸ºå…¶éœ€è¦è¿è¡Œå¾ˆå¿«ï¼Œèƒ½å¤Ÿä½¿å¾—ç”¨æˆ·é€šè¿‡äº¤äº’å¼è§£æå™¨ï¼ˆ&lt;a href=&#34;https://en.wikipedia.org/wiki/Readâ€“evalâ€“print_loop&#34;&gt;REPL&lt;/a&gt;ï¼‰æˆ–è€…å¯äº¤äº’å¼¹çª—æ¥äº¤äº’ã€‚Monoï¼Œä½¿ç”¨ .Net å®ç°ï¼Œèƒ½å¤Ÿåˆ©ç”¨ &lt;a href=&#34;http://www.mono-project.com/docs/advanced/runtime/docs/llvm-backend/&#34;&gt;LLVM åç«¯ç¼–è¯‘ä¸ºæœºå™¨åŸç”Ÿä»£ç &lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.infoworld.com/article/2880767/python/5-projects-push-python-performance.html&#34;&gt;Numba&lt;/a&gt;ï¼Œä¸€ä¸ªä¸º Python æä¾›çš„æ•°å­¦è®¡ç®—åŠ é€ŸåŒ…ï¼ŒJIT å°†é€‰æ‹©çš„ Python å‡½æ•°ç¼–è¯‘ä¸ºæœºå™¨ä»£ç ã€‚å®ƒä¹Ÿèƒ½æå‰ç¼–è¯‘ Numba ä¿®é¥°çš„ä»£ç ï¼Œä½†æ˜¯ï¼ˆä¾‹å¦‚ Juliaï¼‰ï¼ŒPython ç”±äºå…¶è§£é‡Šæ€§è¯­è¨€çš„ç‰¹æ€§èƒ½å¤Ÿæä¾›å¿«é€Ÿçš„å¼€å‘å·¥ä½œã€‚ä½¿ç”¨ JIT ç¼–è¯‘èƒ½å¤Ÿäº§å‡ºæ¯”æå‰ç¼–è¯‘æ›´å¥½çš„ Python çš„äº¤äº’å·¥ä½œæµã€‚&lt;/p&gt;

&lt;p&gt;å…¶ä»–çš„è¯­è¨€è¿˜æœ‰ç”¨éä¼ ç»Ÿæ–¹å¼æŠŠ LLVM ä½œä¸º JIT æ¥å®éªŒçš„è¯­è¨€ï¼Œæ¯”å¦‚ &lt;a href=&#34;https://www.pgcon.org/2017/schedule/events/1092.en.html&#34;&gt;JIT-Compiling SQL Queries in PostgreSQL Using LLVM&lt;/a&gt;ï¼Œèƒ½å¤Ÿè¾¾åˆ°é«˜è¾¾ 5 å€çš„æ€§èƒ½æå‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/viRT3KE.jpg&#34; alt=&#34;Numba ä½¿ç”¨ LLVM å³æ—¶ç¼–è¯‘å…¶æ•°å€¼ä»£ç ä»è€ŒåŠ é€Ÿå…¶æ‰§è¡Œé€Ÿåº¦ã€‚JIT åŠ é€Ÿçš„ sum2d å‡½æ•°å®Œæˆæ‰§è¡Œæ¯”ä½¿ç”¨å¸¸è§„ Python ä»£ç çš„å®ç°å¿«å¤§çº¦ 139 å€&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;åˆ©ç”¨-llvm-è¿›è¡Œè‡ªåŠ¨åŒ–çš„ä»£ç ä¼˜åŒ–&#34;&gt;åˆ©ç”¨ LLVM è¿›è¡Œè‡ªåŠ¨åŒ–çš„ä»£ç ä¼˜åŒ–&lt;/h3&gt;

&lt;p&gt;LLVM ä¸ä»…ä»…æ˜¯å°† IR ç¼–è¯‘æˆåŸç”Ÿæœºå™¨ä»£ç ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ç¼–ç å¼•å¯¼å…¶è¿›è¡Œæ›´å¤§ç²’åº¦çš„ä¼˜åŒ–å·¥ä½œï¼Œæ•´ä¸ªå·¥ä½œä¼šè´¯ç©¿æ•´ä¸ªé“¾æ¥è¿‡ç¨‹ã€‚ä¼˜åŒ–å·¥ä½œå¯ä»¥éå¸¸æ¿€è¿›ï¼ŒåŒ…æ‹¬å¯¹å‡½æ•°è¿›è¡Œå†…è”ï¼Œç§»é™¤æ­»ä»£ç ï¼ˆåŒ…å«æ— ç”¨çš„ç±»å‹å£°æ˜ä»¥åŠå‡½æ•°å‚æ•°ï¼‰æˆ–è€…&lt;a href=&#34;https://en.wikipedia.org/wiki/Loop_unrolling&#34;&gt;å±•å¼€å¾ªç¯&lt;/a&gt;ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ¬¡ä¾ç„¶ï¼Œä¸Šé¢è¿™äº›ä½ å¹¶ä¸éœ€è¦éƒ½è‡ªå·±æ¥åšã€‚ LLVM èƒ½å¤Ÿå¸®ä½ å¤„ç†è¿™äº›äº‹æƒ…ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰éœ€å…³é—­è¿™äº›åŠŸèƒ½ã€‚ä¸¾ä¾‹æ¥è®²ï¼Œå¦‚æœä½ æƒ³ç‰ºç‰²ä¸€éƒ¨åˆ†æ€§èƒ½æ¥å‡å°äºŒè¿›åˆ¶çš„å¤§å°ï¼Œä½ å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç¼–è¯‘å™¨å‰ç«¯æ¥å‘ŠçŸ¥ LLVM æ¥å…³é—­å¾ªç¯å±•å¼€ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä½¿ç”¨-llvm-çš„é¢†åŸŸç‰¹å®šè¯­è¨€&#34;&gt;ä½¿ç”¨ LLVM çš„é¢†åŸŸç‰¹å®šè¯­è¨€&lt;/h3&gt;

&lt;p&gt;LLVM å·²ç»è¢«ç”¨ä»¥ä¸ºè®¸å¤šè·¨é¢†åŸŸé€šç”¨è®¡ç®—æœºè¯­è¨€äº§ç”Ÿç¼–è¯‘å™¨ï¼Œä½†æ˜¯å®ƒåœ¨ç”Ÿæˆéå¸¸å‚ç›´æˆ–è€…è§£å†³æŸäº›å…·ä½“é—®é¢˜çš„è¯­è¨€æ–¹é¢ä¹Ÿéå¸¸æœ‰ç”¨ã€‚åœ¨æŸäº›ç¨‹åº¦ä¸Šï¼Œè¿™æ‰æ˜¯ LLVM æœ€é—ªå…‰çš„ç‚¹æ‰€åœ¨ï¼Œå› ä¸ºå®ƒç§»é™¤äº†ä¸€å¤§å †åˆ›å»ºè¯¥è¯­è¨€è¿‡ç¨‹ä¸­çš„å•è°ƒçƒ¦èºçš„å·¥ä½œï¼Œå¹¶ä¸”ä½¿å¾—å®ƒè¡¨ç°çš„æ›´å¥½ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ï¼Œ&lt;a href=&#34;https://github.com/kripken/emscripten&#34;&gt;Emscripten&lt;/a&gt; é¡¹ç›®ï¼Œé‡‡ç”¨äº† LLVM IR ä»£ç ï¼Œå°†å…¶è½¬æ¢æˆ JavaScriptï¼Œç†è®ºä¸Šå…è®¸ä»»ä½•å…·å¤‡ LLVM åç«¯çš„è¯­è¨€å¯ä»¥å¯¼å‡ºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ä»£ç ã€‚è™½ç„¶ Emscripten çš„é•¿æœŸè®¡åˆ’æ˜¯èƒ½å¤Ÿæ‹¥æœ‰å¯ç”Ÿæˆ WebAssembly çš„åŸºäº LLVM çš„åç«¯ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ªå±•ç¤º LLVM çµæ´»æ€§çš„å¾ˆå¥½çš„ä¾‹è¯ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ç§ LLVM å¯ä»¥è¢«ä½¿ç”¨çš„æ–¹å¼å°±æ˜¯ä¸ºå·²å­˜åœ¨çš„ç¼–ç¨‹è¯­è¨€å¢åŠ ç‰¹å®šé¢†åŸŸçš„æ‰©å±•ã€‚Nvidia ä½¿ç”¨ LLVM åˆ›é€ äº†&lt;a href=&#34;https://developer.nvidia.com/cuda-llvm-compiler&#34;&gt;Nvidia CUDA Compiler&lt;/a&gt;ï¼Œå…¶èƒ½å¤Ÿè®©ç¼–ç¨‹è¯­è¨€å¢åŠ é’ˆå¯¹ CUDA çš„åŸç”Ÿæ”¯æŒï¼Œè€Œä¸æ˜¯é€šè¿‡åŠ è½½æŸä¸ªåº“æ¥å”¤èµ·ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åœ¨å¤šç§è¯­è¨€ä¸­ä½¿ç”¨-llvm&#34;&gt;åœ¨å¤šç§è¯­è¨€ä¸­ä½¿ç”¨ LLVM&lt;/h2&gt;

&lt;p&gt;å’Œ LLVM æ‰“äº¤é“çš„ä¸€ç§å…¸å‹æ–¹å¼å°±æ˜¯æ‰¾åˆ°ä½ å¾ˆèˆ’æœçš„ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç æ¥ä½“ä¼šï¼Œå½“ç„¶ï¼Œè¿™ç§ç¼–ç¨‹è¯­è¨€è¦æ”¯æŒ LLVMã€‚&lt;/p&gt;

&lt;p&gt;ä¸¤ç§å¸¸è§é€‰æ‹©çš„è¯­è¨€æ˜¯ C å’Œ C++ã€‚è®¸å¤š LLVM çš„å¼€å‘è€…é»˜è®¤é€‰æ‹©è¿™äºŒè€…ä¹‹ä¸€æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;LLVM æœ¬èº«å°±æ˜¯ C++ å†™çš„ï¼›&lt;/li&gt;
&lt;li&gt;LLVM çš„ API èƒ½å¤Ÿåœ¨ C å’Œ C++ ä¸­æ— ç¼ä½¿ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;éœ€è¦è¯­è¨€éƒ½å€¾å‘äºåŸºäº C å’Œ C++ è¿›è¡Œå¼€å‘ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°½ç®¡ï¼Œè¿™ä¸¤ç§è¯­è¨€å¹¶ä¸æ˜¯å”¯ä¸€çš„é€‰æ‹©ã€‚è®¸å¤šè¯­è¨€èƒ½å¤ŸåŸç”Ÿè°ƒç”¨ C åº“çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ˜¯å¯ä»¥ä½¿ç”¨è¿™äº›è¯­è¨€æ¥è¿›è¡Œ LLVM å¼€å‘çš„ï¼Œä½†æ˜¯å…¶ä¹Ÿæœ‰åŠ©äºåœ¨æŸç§è¯­è¨€ä¸­å®é™…å­˜åœ¨ä¸€ä¸ªåº“ï¼Œèƒ½å¤Ÿä¼˜é›…çš„å°è£… LLVM çš„ APIã€‚å¹¸è¿çš„æ˜¯ï¼Œè®¸å¤šè¯­è¨€å’Œè¿è¡Œæ—¶éƒ½æœ‰è¿™äº›åº“ï¼ŒåŒ…æ‹¬ &lt;a href=&#34;https://github.com/Microsoft/LLVMSharp&#34;&gt;C#/.Net/Mono&lt;/a&gt;, &lt;a href=&#34;https://crates.io/crates/llvm-sys&#34;&gt;Rust&lt;/a&gt;, &lt;a href=&#34;https://hackage.haskell.org/package/llvm&#34;&gt;Haskell&lt;/a&gt;, &lt;a href=&#34;https://opam.ocaml.org/packages/llvm/&#34;&gt;OCAML&lt;/a&gt;, &lt;a href=&#34;https://www.npmjs.com/package/llvm-node&#34;&gt;Node.js&lt;/a&gt;, &lt;a href=&#34;https://llvm.org/svn/llvm-project/llgo/trunk/README.TXT&#34;&gt;Go&lt;/a&gt;, å’Œ &lt;a href=&#34;https://github.com/numba/llvmlite&#34;&gt;Python&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡ï¼Œä½ éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™äº›è¯­è¨€ä¸­æœ‰ä¸€äº›é’ˆå¯¹ LLVM çš„ç»‘å®šæ”¯æŒå¹¶ä¸å®Œæ•´ã€‚ä»¥ Python è¯­è¨€ä¸¾ä¾‹ï¼Œè™½ç„¶å­˜åœ¨å¤šç§é€‰æ‹©ï¼Œä½†æ˜¯å®ƒä»¬éƒ½ä¼šåœ¨å®Œæ•´æ€§å’ŒåŠŸæ•ˆæ€§ä¸Šæœ‰å·®åˆ«ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;LLVM é¡¹ç›®ä¸‹&lt;a href=&#34;https://github.com/llvm-mirror/llvm/tree/master/bindings/python&#34;&gt;ç»´æŠ¤æœ‰é’ˆå¯¹ LLVM çš„ C ç‰ˆ API çš„ç»‘å®šé›†åˆ&lt;/a&gt;ï¼Œä½†æ˜¯å®ƒä»¬å·²ç»ä¸å†è¢«ç»´æŠ¤äº†ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.infoworld.com/article/3247799/development-tools/what-is-llvm-the-power-behind-swift-rust-clang-and-more.html&#34;&gt;llvmpy&lt;/a&gt; åœ¨ 2015 å¹´åœæ­¢çš„ç»´æŠ¤ï¼Œè¿™å¯¹äºä»»ä½•çš„è½¯ä»¶é¡¹ç›®æ¥è®²éƒ½ä¸æ˜¯ä¸€ä»¶å¥½äº‹ã€‚åœ¨ä½¿ç”¨ LLVM çš„æ—¶å€™æ›´æ˜¯å¦‚æ­¤ï¼Œè€ƒè™‘åˆ°æ¯ä¸€ä¸ªç‰ˆæœ¬çš„ LLVM æ‰€å¸¦æ¥çš„å˜åŒ–æ•°é‡ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/numba/llvmlite&#34;&gt;llvmlite&lt;/a&gt; æ˜¯ç”± Numba çš„å¼€å‘å›¢é˜Ÿåˆ›å»ºçš„ï¼Œå·²ç»æˆä¸ºäº†å½“ä¸‹åœ¨ Python ä¸­åš LLVM å¼€å‘çš„æœ‰åŠ›ç«äº‰è€…ã€‚å®ƒåŸºäº Numba é¡¹ç›®çš„éœ€æ±‚ï¼Œåªå®ç°äº†ä¸€å°éƒ¨åˆ† LLVM çš„åŠŸèƒ½ã€‚ä½†æ˜¯è¿™ä¸ªåŠŸèƒ½å­é›†å·²ç»èƒ½å¤Ÿæ»¡è¶³å¤§éƒ¨åˆ† LLVM å¼€å‘è€…ä½¿ç”¨äº†ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/revng/llvmcpy&#34;&gt;llvmcpy&lt;/a&gt; æ—¨åœ¨æ›´æ–° Python ä¸º C åº“æä¾›çš„ç»‘å®šï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿä»¥è‡ªåŠ¨åŒ–çš„å½¢å¼ä¿æŒæ›´æ–°ï¼Œå¹¶ä¸” Python çš„åŸç”Ÿè¯­æ³•ä½¿å¾—å®ƒä»¬èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ã€‚llvmcpy ä¾ç„¶å¤„äºåˆçº§é˜¶æ®µï¼Œä½†æ˜¯å·²ç»åšäº†å¾ˆå¤šå’Œ LLVM API æ‰“äº¤é“çš„åŸºç¡€å·¥ä½œã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If youâ€™re curious about how to use LLVM libraries to build a language, LLVMâ€™s own creators have a tutorial, using either C++ or OCAML, that steps you through creating a simple language called Kaleidoscope. Itâ€™s since been ported to other languages:&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ å¾ˆå¥½å¥‡å¦‚ä½•ä½¿ç”¨ LLVM åº“æ„å»ºä¸€é—¨è¯­è¨€çš„è¯ï¼ŒLLVM çš„åŸåˆ›è€…ä»¬æä¾›äº†&lt;a href=&#34;https://llvm.org/docs/tutorial/index.html&#34;&gt;æ•™ç¨‹&lt;/a&gt;ï¼Œè¯¥æ•™ç¨‹ä½¿ç”¨ C++ æˆ–è€… OCAML ï¼ŒæŒ‡å¯¼ä½ ä»å¤´åˆ°å°¾åˆ›é€ ä¸€é—¨ç®€å•çš„è¯­è¨€ &lt;strong&gt;Kaleidoscope&lt;/strong&gt;ï¼Œè€Œè¿™ä¸ªç¤ºä¾‹å·²ç»è¢«ç§»æ¤åˆ°å…¶ä»–è¯­è¨€ä¸Šäº†ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.stephendiehl.com/llvm/&#34;&gt;Haskell&lt;/a&gt;: å’ŒåŸå§‹æ•™ç¨‹æœ€æ¥è¿‘çš„ç§»æ¤ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Pythonï¼š&lt;a href=&#34;https://github.com/eliben/pykaleidoscope&#34;&gt;ä¸€ä¸ªç‰ˆæœ¬&lt;/a&gt;å’Œè¯¥æ•™ç¨‹éå¸¸æ¥è¿‘ï¼Œ&lt;a href=&#34;https://github.com/frederickjeanguerin/pykaleidoscope&#34;&gt;å¦å¤–ä¸€ä¸ªç‰ˆæœ¬&lt;/a&gt; æ›´æ¿€è¿›ä¸€äº›ï¼Œé‡å†™äº†ä¸€ä¸ªäº¤äº’å‘½ä»¤è¡Œã€‚ä¸¤è€…éƒ½ä½¿ç”¨äº† llvmlite ä½œä¸ºå’Œ LLVM çš„ç»‘å®šï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/jauhien/iron-kaleidoscope&#34;&gt;Rust&lt;/a&gt; å’Œ &lt;a href=&#34;https://harlanhaskins.com/2017/01/08/building-a-compiler-with-swift-in-llvm-part-1-introduction-and-the-lexer.html&#34;&gt;Swift&lt;/a&gt;ï¼šä¼¼ä¹ä¸å¯é¿å…ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¿™ä¸¤ä¸ªè¯­è¨€ç‰ˆæœ¬çš„ç§»æ¤ç‰ˆæœ¬æ•™ç¨‹ï¼Œå› ä¸º LLVM æœ¬èº«æ›´å°±æ˜¯å› ä¸ºè¿™äºŒè€…æ‰å¾—ä»¥åˆ›é€ çš„ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€åï¼Œè¿™ä¸ªæ•™ç¨‹ä¹Ÿæœ‰å…¶ä»–äººç±»è¯­è¨€çš„ç‰ˆæœ¬ã€‚å®ƒå·²ç»è¢«ç¿»è¯‘æˆä¸­æ–‡äº†ï¼Œæœ‰ä½¿ç”¨ &lt;a href=&#34;https://github.com/liancheng/llvm-tutorial-cn&#34;&gt;C++&lt;/a&gt; çš„ï¼Œä¹Ÿæœ‰ &lt;a href=&#34;https://github.com/moevis/Kaleidoscope-LLVM-tutorial-zh-cn&#34;&gt;Python&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;llvm-åšä¸åˆ°å“ªäº›&#34;&gt;LLVM åšä¸åˆ°å“ªäº›&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸Šæåˆ°çš„éƒ½æ˜¯ LLVM èƒ½å¤Ÿæä¾›çš„åŠŸèƒ½ï¼Œå®ƒè¿˜æœ‰ä¸€äº›æ— æ³•åšåˆ°çš„äº‹æƒ…ï¼Œäº†è§£ä¸€ä¸‹ä¼šæ¯”è¾ƒæœ‰ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¾ä¾‹è€Œè¨€ï¼ŒLLVM ä¸ä¼šè¿›è¡Œè¯­æ³•è§£æã€‚è®¸å¤šå·¥å…·ï¼Œæ¯”å¦‚ &lt;a href=&#34;http://dinosaur.compilertools.net/&#34;&gt;lex/yacc&lt;/a&gt;ï¼Œ&lt;a href=&#34;http://aquamentus.com/flex_bison.html&#34;&gt;ï¬‚ex/bison&lt;/a&gt; ä»¥åŠ &lt;a href=&#34;http://www.antlr.org/&#34;&gt;ANTLR&lt;/a&gt; ç­‰éƒ½å·²ç»åšäº†è¿™äº›å·¥ä½œã€‚è§£æè¯­æ³•å°±æ„å‘³ç€è¦å’Œç¼–è¯‘è¡Œä¸ºè¿›è¡Œè§£è€¦ï¼Œæ‰€ä»¥ï¼ŒLLVM æ²¡æœ‰è¯•å›¾å»åšè¿™éƒ¨åˆ†å·¥ä½œä¹Ÿä¸æ„å¤–ã€‚&lt;/p&gt;

&lt;p&gt;LLVM ä¹Ÿä¸ä¼šè¯•å›¾è§£å†³å›´ç»•æŸç§ç‰¹å®šè¯­è¨€æ›´å¤§èŒƒå›´çš„å‘¨è¾¹è¡Œä¸ºã€‚ä½ éœ€è¦è‡ªè¡Œå®‰è£…ç¼–è¯‘å™¨äºŒè¿›åˆ¶ï¼Œç®¡ç†å®‰è£…è¿‡ç¨‹ä¸­çš„åŒ…ä»¥åŠå‡çº§å·¥å…·é“¾ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åä¸€ç‚¹ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„æ˜¯ï¼Œä¾ç„¶åˆå¾ˆå¤šè¯­è¨€é€šç”¨çš„éƒ¨åˆ† LLVM æ²¡æœ‰åŸç”Ÿæ”¯æŒçš„ã€‚è®¸å¤šç¼–ç¨‹è¯­è¨€éƒ½å­˜åœ¨åƒåœ¾å›æ”¶å†…å­˜ç®¡ç†çš„è¡Œä¸ºï¼Œè¦ä¹ˆä½œä¸ºç®¡ç†å†…å­˜çš„ä¸»è¦æ–¹å¼ï¼Œè¦ä¹ˆä½œä¸ºæŸç§ç­–ç•¥ï¼Œä¾‹å¦‚ RAIIï¼ˆC++ å’Œ Rust è¯­è¨€ä¸­ä½¿ç”¨çš„ï¼‰çš„è¾…åŠ©ã€‚LLVM ä¸æä¾›åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä½†æ˜¯å®ƒç¡®å®&lt;a href=&#34;https://llvm.org/docs/GarbageCollection.html&#34;&gt;æä¾›ä¸€äº›å·¥å…·&lt;/a&gt;ï¼Œèƒ½å¤Ÿå…è®¸ä»£ç å¯ä»¥ä½¿ç”¨å…ƒæ•°æ®æ¥åšæ ‡è®°ä½¿å¾—ç¼–å†™åƒåœ¾æ”¶é›†å™¨æ›´åŠ å®¹æ˜“ã€‚&lt;/p&gt;

&lt;p&gt;å°½ç®¡å¦‚æ­¤ï¼ŒLLVM è¿˜æ˜¯å­˜åœ¨æœ€ç»ˆæ·»åŠ åŸç”Ÿæ”¯æŒæ‰§è¡Œåƒåœ¾å›æ”¶æœºåˆ¶çš„å¯èƒ½æ€§ã€‚LLVM æ­£åœ¨ä»¥æ¯ 6 ä¸ªæœˆä¸€ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°åœ¨å¿«é€Ÿå‘å±•ã€‚è€Œè¿™ä¸ªå‘å±•æ­¥é€Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šå› ä¸ºç›®å‰å¾ˆå¤šä¸»æµç¼–ç¨‹è¯­è¨€å·²ç»æŠŠå…¶ä½œä¸ºå®ƒä»¬å¼€å‘è¿‡ç¨‹çš„æ ¸å¿ƒä¸€ç¯ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>In App Purchase</title>
      <link>https://hechen.xyz/post/in-app-purchase/</link>
      <pubDate>Thu, 24 May 2018 10:40:39 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/in-app-purchase/</guid>
      
        <description>

&lt;p&gt;å¯¹äºåœ¨ App Store ä¸­ä¸Šæ¶çš„åº”â½¤æ¥è¯´ï¼Œåº”â½¤å†…è´­ä¹°(In-App Purchaseï¼Œç®€ç§° IAP) åº”è¯¥æ˜¯ä¸€ä¸ªé¿ä¸å¼€çš„è¯é¢˜ï¼Œå°¤å…¶æ˜¯å»å¹´å¾®ä¿¡æ‰“èµå’Œ Apple ä¹‹é—´çš„äº‰æ‰§æ›´è®© IAP ç«äº†ä¸€æŠŠï¼Œä¸ä»…ä»…å¤§å…¬å¸ï¼Œä½œä¸ºä¸ªäººå¼€å‘è€…æ¥è®²ï¼ŒIAP ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œè¯´ä¸å®šå°±æ˜¯ä½ å…»å®¶ç³Šå£çš„å·¥å…·å‘¢ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;æ•´ä¸ª IAP çš„è¿‡ç¨‹ï¼Œåœ¨å®¢æˆ·ç«¯çš„å®ç°ä¾èµ–äº &lt;code&gt;StoreKit&lt;/code&gt; è¿™ä¸ªæ¡†æ¶ï¼Œæ‰€æœ‰çš„æ”¯ä»˜ç›¸å…³æ“ä½œéƒ½æ˜¯äº¤ç”± StoreKit æ¥å®Œæˆçš„ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå¤ä¹ ä¸€ä¸‹ IAP çš„æ•´ä¸ªæµç¨‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;in-app-purchase-çš„æ•´ä½“æµç¨‹&#34;&gt;In App Purchase çš„æ•´ä½“æµç¨‹&lt;/h2&gt;

&lt;h3 id=&#34;é˜¶æ®µ-1&#34;&gt;é˜¶æ®µ 1&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-09-03-4DDE8387-EDB1-42CC-B18C-3DC6CA1DC688.png&#34; alt=&#34;In App Purchase è¿‡ç¨‹&#34; /&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;åŠ è½½ In-App Identifier&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ä» AppStore ä¸­è·å–æœ¬åœ°åŒ–çš„å•†å“ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æŠŠ IAP çš„è´­ä¹°ç•Œâ¾¯é¢å±•ç¤ºç»™â½¤ç”¨æˆ·ï¼Œâ½¤ç”¨æˆ·å¯ä»¥åŒæ„è´­ä¹°å¹¶ç‚¹å‡»è´­ä¹°æŒ‰é’®ã€‚&lt;/li&gt;
&lt;li&gt;â½¤ç”¨æˆ·æˆæƒè´­ä¹°ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ï¨¸å‘é€è´­ä¹°è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ï¨¸å¤„ç†ï§¤è´­ä¹°è¯·æ±‚ï¼Œå¹¶æŠŠç»“æœè¿”å›ç»™ StoreKitã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè´­ä¹°è¯·æ±‚éªŒè¯é€šè¿‡ï¼Œå®¢æˆ·ç«¯æ­¤æ—¶è§£é”å†…å®¹æˆ–è€…æä¾›â¾¦é‡‘ï¤Šå¸ã€‚&lt;/li&gt;
&lt;li&gt;è‡³æ­¤ï¼Œæ•´ä¸ªäº¤æ˜“ï§ æµç¨‹ç»“æŸã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;é˜¶æ®µ-2&#34;&gt;é˜¶æ®µ 2&lt;/h3&gt;

&lt;p&gt;å…·ä½“åˆ°å’Œ Apple Store æ‰“äº¤é“çš„è¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-08-27-intro_2x.png&#34; alt=&#34;IAP With App Store&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;é˜¶æ®µ-3&#34;&gt;é˜¶æ®µ 3&lt;/h3&gt;

&lt;p&gt;å¦‚æœæ¶‰åŠåˆ°è‡ªå·± App ç«¯ Server çš„å‚ä¸ï¼ŒåŸºæœ¬å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-08-29-1*MwLeHUGSupbb9j-oYQyflw.png&#34; alt=&#34;IAP With Business Server&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ­£å¸¸å¤šå‡ºçš„å‡ æ­¥ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è·å– Product æ ‡è¯†åˆ—è¡¨ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ä¸Šä¼  Receipt æ•°æ®ç»™ Serverï¼ŒServer è‡ªè¡Œæ ¡éªŒæˆ–è€…ä½¿ç”¨ Apple çš„æ¥å£æ ¡éªŒï¼›&lt;/li&gt;
&lt;li&gt;Server ç«¯å‘ŠçŸ¥ç»™å®¢æˆ·ç«¯ä»˜è´¹å†…å®¹&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;æ³¨å†Œå•†å“&#34;&gt;æ³¨å†Œå•†å“&lt;/h3&gt;

&lt;p&gt;å•†å“æ³¨å†Œæ˜¯é€šè¿‡ iTunes Connect åå°è¿›è¡Œçš„ï¼Œå…¶ä¸­å•†å“ç±»å‹éœ€è¦æå‰æ˜ç¡®å¥½ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å•†å“ç±»å‹&#34;&gt;å•†å“ç±»å‹&lt;/h4&gt;

&lt;p&gt;å‚ä¸ App å†…æ”¯ä»˜åŠ¨ä½œçš„å•†å“æœ‰å››ç§ç±»å‹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Consumable products ï¼ˆæ¶ˆè€—å‹å•†å“ï¼‰&lt;/li&gt;
&lt;li&gt;Non-consumable products ï¼ˆéæ¶ˆè€—å‹å•†å“ï¼‰&lt;/li&gt;
&lt;li&gt;Auto-renewable subscriptions ï¼ˆè‡ªåŠ¨ç»­çº¦è®¢é˜…ï¼‰&lt;/li&gt;
&lt;li&gt;Non-renewable subscriptions ï¼ˆéè‡ªåŠ¨ç»­çº¦è®¢é˜…ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…¶ä¸­å…³äºéè‡ªåŠ¨ç»­çº¦è®¢é˜…ï¼ŒApp çš„å¼€å‘è€…æœ‰ä¹‰åŠ¡åŒæ­¥æœåŠ¡åˆ°ç”¨æˆ·çš„æ‰€æœ‰è®¾å¤‡ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä¸‹ï¼Œæ˜¯å®˜æ–¹æ–‡æ¡£åˆ—å‡ºæ¥çš„å››ç§å•†å“ç±»å‹çš„ä¸€äº›ä¸»è¦å±æ€§ã€‚&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Product type&lt;/th&gt;
&lt;th&gt;Non-consumable&lt;/th&gt;
&lt;th&gt;Consumable&lt;/th&gt;
&lt;th&gt;Auto-renewable&lt;/th&gt;
&lt;th&gt;Non-renewing&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Users can buy&lt;/td&gt;
&lt;td&gt;Once&lt;/td&gt;
&lt;td&gt;Multiple times&lt;/td&gt;
&lt;td&gt;Multiple times&lt;/td&gt;
&lt;td&gt;Multiple times&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Appears in the receipt&lt;/td&gt;
&lt;td&gt;Always&lt;/td&gt;
&lt;td&gt;Once&lt;/td&gt;
&lt;td&gt;Always&lt;/td&gt;
&lt;td&gt;Always&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Synced across devices&lt;/td&gt;
&lt;td&gt;By the system&lt;/td&gt;
&lt;td&gt;Not synced&lt;/td&gt;
&lt;td&gt;By the system&lt;/td&gt;
&lt;td&gt;By your app&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Restored&lt;/td&gt;
&lt;td&gt;By the system&lt;/td&gt;
&lt;td&gt;Not restored&lt;/td&gt;
&lt;td&gt;By the system&lt;/td&gt;
&lt;td&gt;By your app&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;å…¶ä¸­éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;é™¤äº†éæ¶ˆè€—å‹å•†å“åªèƒ½ä¹°ä¸€æ¬¡ï¼Œå†æ¬¡è´­ä¹°åº”è¯¥ä¼šå¤±è´¥ä»¥å¤–ï¼Œå…¶ä»–ä¸‰ç§ç±»å‹ï¼ˆæ¶ˆè€—å‹ï¼Œè¿ç»­/éè¿ç»­è®¢é˜…ï¼‰éƒ½æ˜¯å¯ä»¥æ— é™åˆ¶è´­ä¹°çš„ï¼ŒApple æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼›&lt;/li&gt;
&lt;li&gt;é™¤äº†æ¶ˆè€—å‹å•†å“åœ¨ Receipt ä¸­å‡ºç°ä¸€æ¬¡ï¼Œå…¶ä»–ä¸‰ç§ç±»å‹ï¼ˆéæ¶ˆè€—å‹ï¼Œè¿ç»­/éè¿ç»­è®¢é˜…ï¼‰æ˜¯å§‹ç»ˆéƒ½ä¼šåœ¨å…¶ä¸­çš„ï¼Œè¿™ä¹Ÿæ˜¯åç»­åšè®¢é˜…æ ¡éªŒè‡³å…³é‡è¦çš„ä¸€ç¯ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;è·å–-product-id&#34;&gt;è·å– Product ID&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œè·å–çš„æ˜¯ Product åœ¨ iTunes Connect åå°æ³¨å†Œå•†å“æ—¶å¡«å†™çš„ Product ID&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-09-03-15359854946888.png&#34; alt=&#34;Product ID&#34; /&gt;&lt;/p&gt;

&lt;p&gt;In-App Identifier ä¸ºæ¯ä¸ªå¯é”€å”®çš„å•†å“æä¾›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ã€‚åœ¨å®¢æˆ·ç«¯ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™æ­»ä»£ç :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;identifiers&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;com.myCompany.myApp.product1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;com.myCompany.myApp.product2&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ–è€…ä» Server ç«¯è·å–ã€‚&lt;/p&gt;

&lt;h3 id=&#34;è·å–å•†å“ä¿¡æ¯&#34;&gt;è·å–å•†å“ä¿¡æ¯&lt;/h3&gt;

&lt;p&gt;ç„¶åé€šè¿‡ä¸Šä¸€æ­¥å–å¾—çš„ Product ID æ¥è·å–å…·ä½“æŸä¸ª Product çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»·æ ¼ï¼Œæè¿°ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// è·å–ä¸€æ‰¹å•†å“çš„ä¿¡æ¯&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SKProductsRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;productIdentifiers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifierSet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 

&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delegate&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨ä»£ç†å›è°ƒä¸­å¤„ç†è·å–çš„ç»“æœï¼Œè¿›è¡Œå±•ç¤ºæˆ–è€… Cacheã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;productRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SKProductsRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;didReceive&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SKProductsResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;product&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;products&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; 
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®˜æ–¹å»ºè®®æ˜¯ä¸è¦è¿›è¡Œç¼“å­˜ï¼Œå› ä¸º Product çš„ä¿¡æ¯æœ‰å¯èƒ½ä¼šæ›´æ–°ï¼Œæ¯”å¦‚ç”¨æˆ·åˆ‡æ¢ AppStore çš„åŒºåŸŸï¼Œä»·æ ¼ä¿¡æ¯ä¹Ÿä¼šå› ä¸ºç›¸åº”çš„æ±‡ç‡å‘ç”Ÿå˜åŒ–ã€‚ä¸è¿‡ï¼åœ¨å›½å†…ï¼Œè¢«ç‰ºç‰²æœ€å¤§çš„ç”¨æˆ·ä½“éªŒä¸æ˜¯è¿™ç§è¾¹ç•Œæƒ…å†µï¼Œè€Œæ˜¯è·å– Product ä¿¡æ¯æ˜¯éœ€è¦å’Œ Apple Server æ‰“äº¤é“çš„ï¼Œè¿™å°±æœ‰ä¸ªé—®é¢˜ â€”â€” æ…¢ï¼&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¼šåœ¨å¼€æœºçš„æ—¶å€™æå‰é¢„å–æ‰€æœ‰ Product ä¿¡æ¯ï¼Œå¹¶ä¸”ç¼“å­˜èµ·æ¥ã€‚ä¸‹æ¬¡å¼¹å‡ºå……å€¼é¢æ¿çš„æ—¶å€™å°±ç›´æ¥åˆ—å‡ºå•†å“ä¿¡æ¯å³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å±•ç¤ºæ”¯ä»˜-ui&#34;&gt;å±•ç¤ºæ”¯ä»˜ UI&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±çœ‹ä»€ä¹ˆæ—¶å€™è¿›è¡Œè´­ä¹°äº†ï¼Œå±•ç¤ºå•†å“é¢æ¿è¿›è¡Œè´­ä¹°ã€‚ç”¨æˆ·åœ¨é¢æ¿ä¸Šè¿›è¡Œé€‰æ‹©ä¹‹åï¼Œå°±è¿›å…¥äº†ä¸‹ä¸€é˜¶æ®µ â”€â”€ æ”¯ä»˜&lt;/p&gt;

&lt;h2 id=&#34;å‘å‡ºè´­ä¹°è¯·æ±‚&#34;&gt;å‘å‡ºè´­ä¹°è¯·æ±‚&lt;/h2&gt;

&lt;p&gt;è¿™â¼€æ­¥ä¹Ÿå¾ˆç®€å•ï¼Œ ä¸¤â¾ï¨ˆä»£ç å°±å¯ä»¥æå®šã€‚åªéœ€è¦æŠŠä¹‹å‰æ‹¿åˆ°çš„å•†å“å¯¹è±¡ä¼ åˆ° &lt;code&gt;SKPayment&lt;/code&gt; çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œæ„é€ ä¸€ä¸ª &lt;code&gt;SKPayment&lt;/code&gt; å®ï¦µï¼Œå†æŠŠè¿™ä¸ªå®ï¦µåŠ â¼Šåˆ°è´­ä¹°é˜Ÿï¦œä¸­å³å¯:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;payment&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SKPayment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;product&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;product&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SKPaymentQueue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;payment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¹‹åå°±äº¤ç»™ Apple äº†ï¼Œæ­¤æ—¶åº”ç”¨å†…ä¼šå¼¹å‡ºè‹¹æœè®¾è®¡çš„è´­ä¹°çª—å£ï¼Œç”¨æˆ·åªè¦ä½¿â½¤æŒ‡çº¹æˆ–è€…è¾“å…¥å¯†ç å³å¯åŒæ„ä»˜æ¬¾ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å¤„ç†è´­ä¹°ç»“æœ&#34;&gt;å¤„ç†è´­ä¹°ç»“æœ&lt;/h2&gt;

&lt;p&gt;å½“â½¤æˆ·çš„è´­ä¹°è¯·æ±‚ç»è¿‡ &lt;code&gt;StoreKit&lt;/code&gt; å’Œè‹¹æœæœåŠ¡ï¨¸çš„éªŒè¯åï¼Œå¼€å‘è€…å¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶åˆ°ã€‚Apple å…·ä½“çš„å›è°ƒä¼šé€šè¿‡ &lt;code&gt;SKPaymentQueue&lt;/code&gt; æ¥è¿›è¡Œï¼Œå¦‚ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ”¯ä»˜ä¹‹å‰å°±å‘ &lt;code&gt;SKPaymentQueue&lt;/code&gt; ä¸­åŠ å…¥ä»£ç†ç›‘å¬ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;n&#34;&gt;SKPaymentQueue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½ å¯ä»¥æŠŠå…·ä½“çš„ç›‘å¬æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¸­å®Œæˆã€‚åœ¨è¯¥ Observer ä¸­ï¼Œå®ç°ä»£ç†æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å¤„ç†ï§¤ SKPaymentQueueObserver äº‹ä»¶&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;cs&#34;&gt;MARK:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt; - SKPaymentTransactionObserver&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;paymentQueue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SKPaymentQueue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;updatedTransactions&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transactions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SK&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PaymentTransaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transaction&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transactions&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;transactionState&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; 
            &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;purchased&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// Validate the purchase&lt;/span&gt;
            
            &lt;span class=&#34;c1&#34;&gt;// Locate the file&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;guard&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;appStoreReceiptURL&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// Handle failure&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;    
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;c1&#34;&gt;// Read the contents&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;receipt&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;contentsOf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; 
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¯¹äºæ¯ä¸€ä¸ªä½ æäº¤çš„ Paymentï¼Œå°±ä¸€å®šä¼šæœ‰ä¸€ä¸ªç›¸åº”çš„ Transaction ç”Ÿæˆä»¥ä¾¿å…¶åç»­å¤„ç†ã€‚é€šè¿‡æ£€æŸ¥ transaction çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šæ¯ç§çŠ¶æ€ä¸‹çš„å¤„ç†é€»è¾‘ã€‚å¦‚æœçŠ¶æ€æ˜¾ç¤ºå·²è´­ä¹°ï¼Œ æˆ‘ä»¬è¿˜æ˜¯åº”è¯¥å’Œâ¾ƒå·±çš„æœåŠ¡å™¨ï¨¸è¿›ï¨ˆä¸€æ¬¡æ ¡éªŒï¼Œç¡®ä¿äº¤ï§ çœŸå®æœ‰æ•ˆâ½½è€Œï¥§æ˜¯é€šè¿‡è¶Šç‹±åçš„æŸäº›æ’ä»¶å®Œæˆçš„ã€‚è¢«æ£€éªŒçš„ï¼Œæ˜¯ä¸€ç§è¢«è‹¹æœç§°ä¹‹ä¸ºæ”¶æ®(receipt)çš„å‡­è¯ï¼Œå°±åƒæˆ‘ä»¬åœ¨è¶…å¸‚è´­ç‰©æˆ–è€…é¥­åº—å°±é¤åæ‹¿åˆ°çš„æ”¶æ®ä¸€æ ·ï¼Œæ¯â¼€ä¸ªè´­ä¹°çš„å•†å“éƒ½æœ‰â¾ƒå·±çš„æ”¶æ®ã€‚è¿™ä¸ªæ”¶æ®ç”±è‹¹æœç­¾å‘ï¼Œä¿å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°ã€‚&lt;/p&gt;

&lt;p&gt;ç›®å‰ Apple å®˜æ–¹æä¾›ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯æœ¬æœºæ ¡éªŒï¼Œä¸€ç§æ˜¯ Server ç«¯æ ¡éªŒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-09-03-E9DC4D03-7F18-49CC-B21D-835904E2B39F.png&#34; alt=&#34;Receipt Validation Ways&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;final-æŠ•é€’å•†å“&#34;&gt;Finalï¼ŒæŠ•é€’å•†å“&lt;/h2&gt;

&lt;p&gt;å½“ Server ç«¯æ£€éªŒå®Œæˆä¹‹åï¼Œè¯´æ˜æœ¬åœ°äº¤æ˜“å·²ç»æˆåŠŸå®Œæˆï¼Œå› æ­¤å°†ç”¨æˆ·è´­ä¹°çš„å†…å®¹æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚å½“ç„¶ï¼Œå¯¹äºä¸šåŠ¡æ–¹ï¼Œè´­ä¹°å®Œæˆä¸ä»£è¡¨ä¸šåŠ¡å®Œæˆï¼Œå› æ­¤å¤§å¤šæ•°æƒ…å†µä¸‹è¿˜æœ‰ä¸€æ­¥è¿›è¡Œå•†å“ä¸šåŠ¡æ ¡éªŒçš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼š&lt;/p&gt;

&lt;p&gt;Apple ä¹Ÿæ˜ç¡®å‘Šè¯‰å¼€å‘è€…æœ‰å‡ ä¸ªå…³é”®çš„è·¯å¾„èŠ‚ç‚¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/2018-09-03-C1BB8495-728D-43E7-9C40-8EC9B3A22905.png&#34; alt=&#34;å…³é”®è·¯å¾„&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç›‘å¬äº¤æ˜“çŠ¶æ€çš„ä»£ç ä¸€å®šè¦è¶Šæ—©è¶Šå¥½ï¼Œæ¯”å¦‚åœ¨ App å®Œæˆå¯åŠ¨ä¹‹åè¿›è¡Œæ³¨å†Œï¼Œç¡®ä¿æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…éƒ½æœ‰ä»£ç é€»è¾‘æ¥å¤„ç†ç›‘å¬åˆ°çš„äº¤æ˜“ï¼Œæ ¹æ®ç›‘å¬åˆ°çš„ Transaction çš„çŠ¶æ€æ¥åˆ†å‘å¤„ç†é€»è¾‘ã€‚å› ä¸ºå¾ˆæœ‰å¯èƒ½ä½ ç›‘å¬çš„æ—¶æœºå¤ªæ™šï¼Œå¯¼è‡´ Apple é€šçŸ¥æœ‰ä¸€äº›ä¹‹å‰æœªå®Œæˆçš„äº¤æ˜“çš„æ—¶å€™ä½ æ— æ³•æ•è·ã€‚è¯´ç™½äº†å°±æ˜¯ç”¨æˆ·çš„è´­ä¹°æµç¨‹è·Ÿ App ç”Ÿå‘½å‘¨æœŸä¸æŒ‚é’©å¯¼è‡´çš„ï¼Œå…¸å‹çš„æœ‰ä»¥ä¸‹å‡ ä¸ªåœºæ™¯&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·æ€æ­»äº† App&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·éœ€è¦æ›´æ–°å¸å·ä¸­çš„ä»˜è´¹ä¿¡æ¯ï¼ˆæ­¤æ—¶å·²è·³å‡º App ï¼‰&lt;/li&gt;
&lt;li&gt;App é—ªé€€&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·è¿›è¡Œäº†è®¢é˜…ç»­æœŸ&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·è¿›å…¥äº†æ¨ä»‹ä¿ƒé”€ä»·çš„æµç¨‹&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·è·³å‡º App è¾“å…¥æ¨å¹¿ç &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;ç»“æŸäº¤æ˜“&#34;&gt;ç»“æŸäº¤æ˜“&lt;/h2&gt;

&lt;p&gt;åœ¨æœ€åä¸€æ­¥ä¸­ï¼Œå¦‚æœæ˜¯æ­£å¸¸çš„äº¤ï§ ï¼Œé‚£ä¹ˆç®€å•çš„ç»“æŸå®ƒä»¬å°±â¾ï¦ºã€‚ä½†å¯¹äºå…¶ä»–å¼‚å¸¸çš„äº¤æ˜“ï§ ï¼Œâ½æ¯”å¦‚å‡ºç°ï¦ºä¸€äº› errorï¼Œä¹Ÿè¦å¦¥å–„çš„ç»“æŸå®ƒä»¬ã€‚å¦‚æœæ˜¯â¾ƒåŠ¨ç»­æœŸçš„è®¢é˜…ï¼Œä¹Ÿä¼šç»è¿‡è¿™ä¸€æ­¥ã€‚å¦‚æœ äº¤ï§ æ²¡æœ‰è¢«æ­£ç¡®çš„ç»“æŸï¼Œå®ƒä»¬ä¼šä¸€ç›´åœç•™ï§åœ¨ä¸Šæ–‡æåˆ°çš„é˜Ÿï¦œä¸­ï¼Œæ¯æ¬¡å›è°ƒå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œé˜Ÿåˆ— ä¸­éƒ½ä¼šæœ‰è¿™äº›æ²¡æœ‰è¢«ç»“æŸçš„äº¤ï§ ã€‚ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦æå‰ç›‘å¬çš„åŸå› äº†ã€‚&lt;/p&gt;

&lt;p&gt;ç»“æŸäº¤ï§ çš„ä»£ç â¾®å¸¸ç®€å•ï¼Œåªæœ‰ä¸€ï¨ˆ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;n&#34;&gt;SKPaymentQueue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;finishTransaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;transaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;å…³äº-transaction-å’Œ-receipt-çš„åŒºåˆ«å’Œè”ç³»&#34;&gt;å…³äº Transaction å’Œ Receipt çš„åŒºåˆ«å’Œè”ç³»&lt;/h3&gt;

&lt;p&gt;å¾ˆå¤šåŒå­¦åœ¨è¿›è¡Œ IAP å¼€å‘çš„æ—¶å€™å¸¸å¸¸æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å›°æƒ‘å°±æ˜¯ Transaction å’Œ Receipt å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Œè¿™é‡Œé‡æ–°æ¢³ç†äº†ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å…³äº-transaction&#34;&gt;å…³äº Transaction&lt;/h4&gt;

&lt;p&gt;å…¶å®å‰é¢è®² Payment çš„æ“ä½œçš„æ—¶å€™å·²ç»è¡¨æ˜äº†ï¼Œ Transaction æ˜¯å’Œå…·ä½“çš„ä¸€æ¬¡ Payment å¯¹åº”çš„ï¼Œä¹Ÿå°±æ˜¯å‘ç”Ÿä¸€æ¬¡ Payment å°±ä¼šç”Ÿæˆ Transactionï¼Œä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯ 1 å¯¹ 1 çš„å…³ç³»ï¼Œæ¯”å¦‚æœ¬æ¬¡ Payment å¯¹åº”çš„ Transaction å·²ç»è¢« finish äº†ï¼Œç”¨æˆ·æ¢äº†æ‰‹æœºï¼Œç™»é™†åŒæ · AppleID çš„æ—¶å€™ä½¿ç”¨ Restore åŠŸèƒ½ï¼ŒApple ä¼šç”Ÿæˆ Transaction ç»™ä½ ï¼Œæœ¬æ¬¡çš„ Transaction å°±å¯¹åº”çš„ä¹‹å‰çš„ Paymentï¼Œåªæ˜¯çŠ¶æ€æ ‡è®°ä¸º .restoredã€‚&lt;/p&gt;

&lt;p&gt;Transaction çš„çŠ¶æ€ä¸»è¦æœ‰ä»¥ä¸‹è¿™ä¹ˆå‡ ç§ï¼š&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;çŠ¶æ€&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.purchasing&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ä¸éœ€è¦åšä»€ä¹ˆï¼Œç»§ç»­ç­‰å¾… SKPaymentTransactionState çš„çŠ¶æ€æµè½¬&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.purchased&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ç”¨æˆ·å·²å®Œæˆä»˜è´¹ï¼Œå¤„ç†ä»˜è´¹åçš„æµç¨‹å¹¶è°ƒç”¨ finishTransaction æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.failed&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ç”¨æˆ·ä»˜è´¹å¤±è´¥ï¼Œå¤„ç†ä»˜è´¹å¤±è´¥çš„æµç¨‹å¹¶è°ƒç”¨ finishTransaction æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.restored&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ç”¨æˆ·ä»˜è´¹æˆåŠŸï¼Œå¤„ç†ä»˜è´¹åçš„æµç¨‹å¹¶è°ƒç”¨ finishTransaction æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;.deferred&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ä¸éœ€è¦åšä»€ä¹ˆï¼Œç»§ç»­ç­‰å¾… SKPaymentTransactionState çš„çŠ¶æ€æµè½¬&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: å¯¹äº &lt;code&gt;finishTransaction&lt;/code&gt; çš„å‡ ç‚¹è¯´æ˜ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å¯¹äºé‚£äº›ä¾èµ–è‹¹æœä¸‹è½½æœåŠ¡çš„ï¼Œæ¯”å¦‚å­˜å‚¨åœ¨ iTunes Connect ä¸Šçš„ä»˜è´¹å†…å®¹è¦ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¦‚æœä¸‹è½½å®Œæˆä¹‹å‰å°±è¿›è¡Œäº† finish åŠ¨ä½œä¼šå¯¼è‡´ Apple é˜»æ–­æ‰€æœ‰çš„ä¸‹è½½æµç¨‹ï¼Œå¹¶ä¸”æ— æ³•é‡æ–°ä¸‹è½½ï¼›&lt;/li&gt;
&lt;li&gt;Transaction éœ€è¦é…åˆ Receipt éªŒè¯æ˜¯å¦åˆæ³•ï¼Œå•çº¯é å‰ç«¯æ˜¯ä¸é è°±çš„ï¼Œå› æ­¤äº¤ç”±ä¸šåŠ¡åç«¯éªŒè¯ Receipt æ›´å®‰å…¨åˆç†ï¼Œä¸šåŠ¡åç«¯æ¥å†³å®šæ˜¯å¦éœ€è¦ finish&lt;/li&gt;
&lt;li&gt;æ–‡æ¡£é‡Œè¯´ï¼šYour app needs to finish every transaction, regardless of whether the transaction succeeded or failed. æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† Transaction Finish æ‰ï¼Œå¦åˆ™ä¼šå§‹ç»ˆå‡ºç°åœ¨ PaymentQueue é‡Œï¼ŒBUTï¼Œä¸­é—´æ€çš„äº¤æ˜“æ˜¯ä¸éœ€è¦ finish çš„ï¼Œæ¯”å¦‚ .purchasing å’Œ .deferred&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&#34;å…³äº-receipt&#34;&gt;å…³äº Receipt&lt;/h4&gt;

&lt;p&gt;Receipt æ˜¯ App Store ç­¾å‘çš„ï¼Œæ˜¯ä½ çš„ App ä¸Šå’Œè¯¥ App ä¸Šå‘ç”Ÿçš„æ”¯ä»˜è¡Œä¸ºè®°å½•ã€‚å®ƒå­˜å‚¨åœ¨è®¾å¤‡ä¸Šçš„æŸä¸ªå›ºå®šåœ°å€ï¼ŒStoreKit å¹¶ä¸ä¼šç”Ÿæˆå®ƒï¼Œå®ƒæ˜¯ä» App Store æ‹‰å–ä¸‹æ¥çš„ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;k&#34;&gt;guard&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;appStoreReceiptURL&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// handle failure&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// read the contents&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;receipt&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;contentsOf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æœæœ¬åœ°è¯¥åœ°å€é‡Œæ²¡æœ‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œåˆ·æ–°ï¼Œå®è´¨ä¸Šå°±æ˜¯ä» App Store è¯·æ±‚ Receipt æ•°æ®ã€‚è¯·æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SKReceiptRefreshRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delegate&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹&#34;&gt;è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š&lt;/h2&gt;

&lt;h3 id=&#34;æ¢å¤å·²ç»è´­ä¹°çš„å•†å“&#34;&gt;æ¢å¤å·²ç»è´­ä¹°çš„å•†å“&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„äº‹æƒ…å°±æ˜¯ï¼šå¦‚æœä¸€ä¸ªç”¨æˆ·è¯•å›¾å»è´­ä¹°ä¸€ä¸ªä¹‹å‰è´­ä¹°è¿‡çš„å•†å“ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä½ App æä¾›çš„ Restore åŠŸèƒ½æ¢å¤çš„è¯ï¼ŒApp Store ä¼šä¾ç„¶åˆ›å»ºä¸€ä¸ªæ­£å¸¸çš„æ–°äº¤æ˜“ã€‚ç”¨æˆ·æ˜¯ä¸ä¼šè¢«å†æ¬¡æ”¶è´¹çš„ï¼Œè¿™é‡Œçš„é—®é¢˜æ˜¯ï¼ŒTransaction çš„çŠ¶æ€å¯ä¸æ˜¯ restoredï¼Œè€Œæ˜¯å®Œå…¨æ–°çš„ Transactionï¼Œä½ å¯ä»¥æŒ‰ç…§ä¹‹å‰çš„æ­£å¸¸æµç¨‹èµ°ï¼Œå½“ç„¶å¯¹äºè‡ªå¸¦è´¦æˆ·ä½“ç³»çš„ App æ¥è®²ï¼Œéœ€è¦è‡ªè¡Œåˆ¤æ–­å’Œè®¡ç®—ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/in-app-purchase/&#34;&gt;In App Purchase&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction.html&#34;&gt;In-App Purchase Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/archive/releasenotes/General/ValidateAppStoreReceipt/Introduction.html&#34;&gt;Receipt Validation Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://forums.developer.apple.com/thread/46737&#34;&gt;How to detect refunded IAPs from receipts?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/10771240/check-if-a-non-renewable-subscription-was-refunded-by-apple&#34;&gt;Check if a non-renewable subscription was refunded by Apple?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/6439482/how-does-apple-notify-ios-apps-of-refunds-of-in-app-purchases-iap&#34;&gt;How does Apple notify iOS apps of refunds of in-app purchases (IAP)?&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>åœ¨ Swift ä¸­ä½¿ç”¨å·¥å‚æ¨¡å¼è¿›è¡Œä¾èµ–æ³¨å…¥</title>
      <link>https://hechen.xyz/post/dependency-injection-using-factories-in-swift/</link>
      <pubDate>Sun, 19 Nov 2017 18:17:15 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/dependency-injection-using-factories-in-swift/</guid>
      
        <description>

&lt;p&gt;ä¾èµ–æ³¨å…¥æ˜¯ä¸€é¡¹ä½¿å¾—ä»£ç æ›´åŠ å¯æµ‹è¯•çš„å…³é”®å·¥å…·ã€‚æˆ‘ä»¬ä¸éœ€è¦æŒæœ‰æŸäº›å¯¹è±¡ï¼Œæˆ–è€…åˆ›å»ºè¿™äº›å¯¹è±¡çš„è‡ªæœ‰ä¾èµ–ï¼Œæˆ–è€…é€šè¿‡å•ä¾‹æ¥è·å–ä»–ä»¬ï¼Œè€Œæ˜¯å°½å¯èƒ½ä½¿é‚£äº›å¯¹è±¡èƒ½å¤Ÿæ­£å¸¸è¿è½¬æ‰€å¿…é¡»çš„ä¸€åˆ‡å†…å®¹ï¼ˆå…¶ä»–å¯¹è±¡ï¼‰é€šè¿‡å¤–ç•Œä¼ å…¥ï¼Œè¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œä¸€æ–¹é¢èƒ½æ¸…æ™°çš„çœ‹å¾—åˆ°æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå¦ä¸€æ–¹ä¾¿ä¹Ÿä½¿å¾—æµ‹è¯•å·¥ä½œå˜å¾—æ›´ä¸ºç®€å•ï¼ˆå› ä¸ºæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿè¿™äº›ä¾èµ–é¡¹æ¥æ•è·ã€éªŒè¯çŠ¶æ€ä»¥åŠå€¼ã€‚ï¼‰&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;ç„¶è€Œï¼Œå°½ç®¡ä¾èµ–æ³¨å…¥ç¡®å®å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯å½“åœ¨å·¥ç¨‹ä¸­å¹¿æ³›ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯ä¼šæœ‰ä¸€äº›ç—›ç‚¹ã€‚éšç€æŸä¸ªå¯¹è±¡çš„ä¾èµ–é¡¹è¶Šæ¥è¶Šå¤šï¼Œåˆå§‹åŒ–è¯¥å¯¹è±¡å°±å˜å¾—è¶Šæ¥è¶Šè¹©è„šã€‚è™½ç„¶ä½¿å¾—ä»£ç å¯æµ‹æ²¡æ¯›ç—…ï¼Œä½†æ˜¯å¦‚æœåƒä¸‹é¢è¿™ç§æ¯æ¬¡éœ€è¦è¿™æ ·æ¥å†™åˆå§‹åŒ–æ–¹æ³•ï¼Œä¹Ÿå¤ªä¸çˆ½äº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class UserManager {
    init(dataLoader: DataLoader, database: Database, cache: Cache,
        keychain: Keychain, tokenManager: TokenManager) {
        // ...
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œè¿™å‘¨å’±ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹æŸç§ä¾èµ–æ³¨å…¥çš„æŠ€å·§ï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç ä¸å¤±å»å¯æµ‹æ€§ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦å†å¼ºè¿«è‡ªå·±å»å†™ä¸€å›¢åˆå§‹åŒ–æ–¹æ³•æˆ–è€…å¤æ‚çš„ä¾èµ–ç®¡ç†çš„ä»£ç ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¼ é€’ä¾èµ–é¡¹&#34;&gt;ä¼ é€’ä¾èµ–é¡¹&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬é‡åˆ°ä¸Šé¢ä»£ç  demo ä¸­çš„é—®é¢˜ï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¹ˆå¤šä¾èµ–é¡¹ä¼ é€’ç»™æŸä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿ä¹‹åæ¥ä½¿ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æ„å»ºä¸€ä¸ªæ¶ˆæ¯æ”¶å‘çš„ Appï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª view controller éœ€è¦å±•ç¤ºæŸä¸ªç”¨æˆ·æ‰€æœ‰çš„æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class MessageListViewController: UITableViewController {
    private let loader: MessageLoader

    init(loader: MessageLoader) {
        self.loader = loader
        super.init(nibName: nil, bundle: nil)
    }

    override func viewWillAppear(_Â animated: Bool) {
        super.viewWillAppear(animated)

        loader.load { [weak self]() messages in
            self?.reloadTableView(with: messages)
        }
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šä»£ç èƒ½çœ‹åˆ°ï¼Œæˆ‘ä»¬ç»™ &lt;code&gt;MessageListViewController&lt;/code&gt; ä¼ å…¥æŸä¸ªä¾èµ–é¡¹ &lt;code&gt;MessageLoader&lt;/code&gt;ï¼Œä¹‹åå…¶è¢«ç”¨æ¥åŠ è½½æ•°æ®ã€‚è¿™é‡Œå…¶å®å¹¶æ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œå› ä¸ºä»…ä»…åªæœ‰ä¸€ä¸ªä¾èµ–è€Œå·²ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çš„åˆ—è¡¨è§†å›¾å¹¶ä¸æ˜¯ä¸€ä¸ªæ­»æ°”æ²‰æ²‰çš„å±•ç¤ºè€Œå·²ï¼ŒæŸäº›çŠ¶æ€ä¸‹è¿˜éœ€è¦ä»¬è¿›è¡Œå¯¼èˆªåˆ°æŸè§†å›¾æ§åˆ¶å™¨çš„å·¥ä½œã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“æ¥è®²ï¼Œæˆ‘ä»¬æƒ³è®©ç”¨æˆ·åœ¨ç‚¹å‡»æ¶ˆæ¯åˆ—è¡¨ä¸­æŸä¸ª cell çš„æ—¶å€™ï¼Œå¯¼èˆªåˆ°ä¸€ä¸ªæ–°çš„è§†å›¾ä¸­ã€‚æˆ‘ä»¬ä¸ºè¿™ä¸ªæ–°çš„è§†å›¾åˆ›å»ºä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ &lt;code&gt;MessageViewController&lt;/code&gt;ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿå•ç‹¬æŸ¥çœ‹æŸæ¡æ¶ˆæ¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿå›å¤è¯¥æ¶ˆæ¯ã€‚ä¸ºäº†è¯¥åŠŸèƒ½ï¼Œæˆ‘ä»¬å®ç°äº† &lt;code&gt;MessageSender&lt;/code&gt; ç±»ï¼Œå½“åˆ›å»ºè¯¥ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†å‰é¢é‚£ä¸ªæ–°çš„è§†å›¾æ§åˆ¶å™¨ä¼ é€’ç»™ä»–ï¼Œä»£ç ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;override func tableView(_Â tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    let message = messages[indexPath.row]()
    let viewController = MessageViewController(message: message, sender: sender)
    navigationController?.pushViewController(viewController, animated: true)
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é—®é¢˜æ¥äº†ï¼Œ&lt;code&gt;MessageViewController&lt;/code&gt; éœ€è¦æœ‰ä¸€ä¸ª &lt;code&gt;MessageSender&lt;/code&gt; å®ä¾‹ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä½¿å¾— &lt;code&gt;MessageListViewController&lt;/code&gt; çœ‹åˆ°è¯¥ç±»ã€‚ä¸€ç§åŠæ³•å°±æ˜¯ç®€å•çš„ï¼Œå°† sender åŠ å…¥åˆ° åˆ—è¡¨è§†å›¾æ§åˆ¶å™¨çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class MessageListViewController: UITableViewController {
    init(loader: MessageLoader, sender: MessageSender) {
        ...
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸€æ—¦å¦‚ä¸Šé¢è¿™æ ·å¼€å§‹å†™ä»£ç ï¼Œæˆ‘ä»¬å°±é€æ­¥çš„è¿›å…¥åºå¤§åˆå§‹åŒ–æ–¹æ³•çš„ä¸å½’è·¯ä¸Šå’¯ï¼Œç„¶åä½¿å¾— &lt;code&gt;MessageListViewController&lt;/code&gt; ä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ç”¨ï¼ˆä¹Ÿä¼šè®©è°ƒç”¨è¿™å¾ˆå›°æƒ‘ï¼Œä¸ºä»€ä¹ˆä¸€ä¸ªåˆ—è¡¨è§†å›¾æ§åˆ¶å™¨è¿˜éœ€è¦å…³å¿ƒæŸä¸ªå‘é€æ¶ˆæ¯çš„äººï¼Ÿï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆï¼‰ï¼Œå°±æ˜¯æŠŠ MessageSender åšæˆä¸€ä¸ªå•ä¾‹ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ¨ä»»ä½•åœ°æ–¹å–åˆ°ä»–çš„å€¼ï¼Œä¹Ÿå¯ä»¥éšæ—¶å°†å•ä¾‹å¯¹è±¡æ³¨å…¥&lt;code&gt;MessageViewController&lt;/code&gt; ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;let viewController = MessageViewController(
    message: message,
    sender: MessageSender.shared
)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶è€Œï¼Œå°±å¦‚ &lt;a href=&#34;https://www.swiftbysundell.com/posts/avoiding-singletons-in-swift&#34;&gt;Avoiding singletons in Swift&lt;/a&gt; è¿™ç¯‡æ–‡ç« ä¸­è®²çš„ï¼Œå•ä¾‹è¿™ç§æ–¹å¼ä¼šä¼´éšä¸€äº›æ˜æ˜¾çš„ç¼ºé™·ï¼Œå¯¼è‡´æˆ‘ä»¬ä¼šéš¾ä»¥çœ‹æ¸…ä¾èµ–å…³ç³»ï¼Œä»è€Œå¯¹æ•´ä¸ªæ¡†æ¶éƒ½éš¾ä»¥ç†è§£ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å·¥å‚æ¨¡å¼æ¥æ•‘åœº&#34;&gt;å·¥å‚æ¨¡å¼æ¥æ•‘åœº&lt;/h2&gt;

&lt;p&gt;Wouldn&amp;rsquo;t it be nice if we could just skip all of the above, and enable MessageListViewController to be completely unaware of MessageSender, and all other dependencies that any subsequent view controllers might need?&lt;/p&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿé¿å…æ‰ä¸Šé¢è¿™äº›é—®é¢˜ï¼Œèƒ½å¤Ÿä½¿å¾— &lt;code&gt;MessageListViewController&lt;/code&gt; å®Œå…¨ä¸å…³å¿ƒ &lt;code&gt;MessageSender&lt;/code&gt;ï¼Œç”šè‡³æ˜¯åç»­çš„è§†å›¾æ§åˆ¶å™¨çš„å…¶ä»–ä¾èµ–ï¼Œå²‚ä¸æ˜¯å¾ˆçˆ½ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬æœ‰æŸç§å½¢å¼çš„å·¥å‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å…¶ä¼ å…¥æŒ‡å®šçš„ messageï¼Œç„¶åå¾ˆæ–¹ä¾¿çš„äº§å‡ºä¸€ä¸ª &lt;code&gt;MessageViewController&lt;/code&gt; å‡ºæ¥ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼Œå°±èƒ½å¤Ÿå¾ˆæ–¹ä¾¿å¹¶ä¸”ç®€æ´çš„å®ç°ä¸Šé¢çš„ç†æƒ³ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;let viewController = factory.makeMessageViewController(for: message)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚ &lt;a href=&#34;https://www.swiftbysundell.com/posts/using-the-factory-pattern-to-avoid-shared-state-in-swift?rq=factories&#34;&gt;Using the factory pattern to avoid shared state in Swift&lt;/a&gt; è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œå…³äºå·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘æœ€å–œæ¬¢çš„ä¸€ç‚¹å°±æ˜¯ï¼Œä»–èƒ½å¤Ÿä½¿å¾—ä½ å°†æŸä¸ªå¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ä¸¤è€…è§£è€¦ï¼Œä¹Ÿèƒ½ä½¿å¾—è®¸å¤šå¯¹è±¡å’Œè¿™äº›å¯¹è±¡çš„ä¾èµ–ä¹‹é—´æœ‰ä¸€ä¸ªç›¸å¯¹è§£è€¦çš„å…³ç³»ï¼Œè¿›è€Œèƒ½ä½¿å¾—æˆ‘ä»¬æƒ³é‡æ„ä»£ç æˆ–è€…ä¿®æ”¹æŸäº›éƒ¨åˆ†çš„æ—¶å€™ç›¸å¯¹æ›´å®¹æ˜“ä¸€äº›ã€‚&lt;/p&gt;

&lt;h3 id=&#34;é‚£æˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢&#34;&gt;é‚£æˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå·¥å‚åè®®ï¼Œè¯¥åè®®ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿåœ¨å¹¶ä¸çŸ¥é“æŸä¸ªè§†å›¾æ§åˆ¶å™¨çš„ä¾èµ–é¡¹æˆ–è€…å…¶åˆå§‹åŒ–æ–¹æ³•çš„å‰æä¸‹ï¼Œå¾ˆå®¹æ˜“çš„åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­åˆ›å»ºå‡ºæˆ‘ä»¬éœ€è¦çš„ä»»æ„çš„è§†å›¾æ§åˆ¶å™¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;protocol ViewControllerFactory {
    func makeMessageListViewController() -&amp;gt; MessageListViewController
    func makeMessageViewController(for message: Message) -&amp;gt; MessageViewController
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åˆ°è¿™é‡Œæˆ‘ä»¬è¿˜ä¸èƒ½åœæ­¢ã€‚æˆ‘ä»¬åŒæ ·ä¸ºå·¥å‚æ·»åŠ ä¸€äº›é™„ä»¶çš„åè®®ç”¨æ¥åˆ›å»ºè§†å›¾æ§åˆ¶å™¨çš„ä¾èµ–ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªåè®®ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ä¸ºæŸä¸ªåˆ—è¡¨è§†å›¾æ§åˆ¶å™¨ç”Ÿæˆä¸€ä¸ª &lt;code&gt;MessageLoader&lt;/code&gt; å‡ºæ¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;protocol MessageLoaderFactory {
    func makeMessageLoader() -&amp;gt; MessageLoader
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;å•ä¾‹ä¾èµ–&#34;&gt;å•ä¾‹ä¾èµ–&lt;/h2&gt;

&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬å‡†å¤‡å¥½è¿™äº›å·¥å‚åè®®ä¹‹åï¼Œå›åˆ°ä¸Šé¢ &lt;code&gt;MessageListViewController&lt;/code&gt; çš„åœ°æ–¹ï¼Œé‡æ„è¿™æ®µä»£ç ï¼Œæ— éœ€ä½¿ç”¨å…¶ä¾èµ–é¡¹çš„å®ä¾‹è€Œæ˜¯ç®€å•çš„å¼•å…¥ä¸€ä¸ªå·¥å‚å®ä¾‹å³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class MessageListViewController: UITableViewController {
    
    
    typealias Factory = MessageLoaderFactory &amp;amp; ViewControllerFactory

    private let factory: Factory
    
    private lazy var loader = factory.makeMessageLoader()

    init(factory: Factory) {
        self.factory = factory
        super.init(nibName: nil, bundle: nil)
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢è¿™ä¹ˆåšï¼Œæˆ‘ä»¬å¯ä»¥åšåˆ°ä¸¤ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æˆ‘ä»¬å°†ä¸€å †ä¾èµ–é¡¹ç®€åŒ–æˆäº†ä¸€ä¸ªå•ä¸€çš„å·¥å‚ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MessageListViewController&lt;/code&gt; æ— éœ€å†éœ€å†å…³å¿ƒ &lt;code&gt;MessageViewController&lt;/code&gt; çš„ä¾èµ–é¡¹äº†&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;ä¸€ä¸ªä½¿ç”¨-container-çš„ä¾‹å­&#34;&gt;ä¸€ä¸ªä½¿ç”¨ Container çš„ä¾‹å­&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯¥å®ç°å·¥å‚åè®®äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ª &lt;code&gt;DependencyContainer&lt;/code&gt;ï¼Œè¯¥å¯¹è±¡ä¼šåŒ…å«æˆ‘ä»¬åº”ç”¨ä¸­é‚£äº›æ­£å¸¸æƒ…å†µä¸‹ä¼šè¢«ç›´æ¥ç”¨æ¥ä½œä¸ºä¾èµ–çš„æ ¸å¿ƒå·¥å…·å¯¹è±¡ä»¬ã€‚è¿™äº›ä¸ä»…ä»…åŒ…æ‹¬ç±»ä¼¼ä¹‹å‰ &lt;code&gt;MessageSender&lt;/code&gt;ï¼Œä¹ŸåŒ…æ‹¬æ›´åŠ åº•å±‚çš„ä¸šåŠ¡é€»è¾‘ä¸Šçš„ç±»ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯èƒ½ä¼šç”¨åˆ° &lt;code&gt;NetworkManager&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class DependencyContainer {
    private lazy var messageSender = MessageSender(networkManager: networkManager)
    private lazy var networkManager = NetworkManager(urlSession: .shared)
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä»ä¸Šé¢è¿™æ®µä»£ç ï¼Œä½ èƒ½çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ‡’åŠ è½½å±æ€§ä»¥ä¾¿èƒ½å¤Ÿåœ¨åˆå§‹åŒ–è¯¥å¯¹è±¡çš„æ—¶å€™èƒ½å¤Ÿå¼•ç”¨ç›¸åŒç±»ä¸­çš„å…¶ä»–å±æ€§ã€‚è¿™æ˜¯è®¾ç½®ä½ ä¾èµ–å…³ç³»çš„ä¸€ç§éå¸¸æ–¹ä¾¿è€Œä¸”ä¼˜é›…çš„æ–¹å¼ï¼Œä½ å¯ä»¥åˆ©ç”¨ç¼–è¯‘å™¨å¸®åŠ©ä½ é¿å…æ¯”å¦‚&lt;a href=&#34;https://en.wikipedia.org/wiki/Circular_dependency&#34;&gt;å¼•ç”¨å¾ªç¯&lt;/a&gt;ç­‰é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬ä¸º &lt;code&gt;DependencyContainer&lt;/code&gt; å®ç°æˆ‘ä»¬çš„å·¥å‚åè®®ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå°†è¯¥å·¥å‚æ³¨å…¥å„ç§è§†å›¾æ§åˆ¶å™¨æˆ–å…¶ä»–å¯¹è±¡ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;extension DependencyContainer: ViewControllerFactory {
    func makeMessageListViewController() -&amp;gt; MessageListViewController {
        return MessageListViewController(factory: self)
    }

    func makeMessageViewController(for message: Message) -&amp;gt; MessageViewController {
        return MessageViewController(message: message, sender: messageSender)
    }
}

extension DependencyContainer: MessageLoaderFactory {
    func makeMessageLoader() -&amp;gt; MessageLoader {
        return MessageLoader(networkManager: networkManager)
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;åˆ†å¸ƒå¼çš„æ‰€æœ‰æƒ&#34;&gt;åˆ†å¸ƒå¼çš„æ‰€æœ‰æƒ&lt;/h2&gt;

&lt;p&gt;æœ€åä¸€æ­¥äº†ï¼Œæˆ‘ä»¬åœ¨å“ªé‡Œå®é™…å‚¨å­˜ä¾èµ–å­˜å‚¨å™¨ï¼Œè°åº”è¯¥æ‹¥æœ‰å®ƒï¼Ÿå®ƒåº”è¯¥åœ¨å“ªé‡Œè®¾ç½®ï¼Ÿè¿™é‡Œæœ‰äº›æ¯”è¾ƒ cool çš„äº‹æƒ…å°±æ˜¯ï¼Œç”±äºæˆ‘ä»¬æŠŠä¾èµ–å®¹å™¨ä½œä¸ºå¯¹è±¡ä»¬æ‰€éœ€è¦çš„å·¥å‚çš„ä¸€ç§å®ç°ï¼Œè€Œå¯¹è±¡ä»¬å¼ºæŒæœ‰å…¶å·¥å‚ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å…¶å®æ— éœ€åœ¨ä»»ä½•åœ°æ–¹å‚¨å­˜è¯¥ä¾èµ–å®¹å™¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœ &lt;code&gt;MessageListViewController&lt;/code&gt; æ˜¯æˆ‘ä»¬åº”ç”¨çš„åˆå§‹åŒ–è§†å›¾æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„åˆ›å»ºä¸€ä¸ª &lt;code&gt;DependencyContainer&lt;/code&gt; çš„å®ä¾‹ä¼ å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;let container = DependencyContainer()
let listViewController = container.makeMessageListViewController()

window.rootViewController = UINavigationController(
    rootViewController: listViewController
)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ— éœ€ä¿ç•™ä»»ä½•å…¨å±€çš„å˜é‡æˆ–è€…åœ¨ app delegate ä¸­ä½¿ç”¨å¯é€‰å±æ€§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨å·¥å‚åè®®å’Œå®¹å™¨é…ç½®ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ï¼Œå…¶å¯ä»¥é¿å…éœ€è¦ä¼ é€’å¤§é‡ä¾èµ–è€Œåˆ›å»ºå¾ˆå¤æ‚çš„åˆå§‹åŒ–æ–¹æ³•ã€‚å®ƒå¯ä»¥ä½¿å¾—ä¾èµ–æ³¨å…¥ä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ï¼Œä½¿å¾—ä½ èƒ½å¤Ÿå¯¹è‡ªå·±åˆ›å»ºçš„å¯¹è±¡å®é™…çš„ä¾èµ–å…³ç³»æœ‰å¾ˆæ˜æ™°çš„åˆ¤æ–­ï¼Œä¹Ÿä½¿å¾—æµ‹è¯•æ›´åŠ ç®€å•ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºæˆ‘ä»¬èƒ½å¤ŸæŠŠå·¥å‚å®šä¹‰ä¸ºåè®®ï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨æµ‹è¯•ä¸­é€šè¿‡ç»™å®šä¸åŒæµ‹è¯•æŒ‡å®šç‰ˆæœ¬çš„å…·ä½“å®ç°æ¥æ¨¡æ‹Ÿè¾“å‡ºã€‚æœªæ¥æˆ‘ä¼šå†™å¤§é‡å…³äºæ¨¡æ‹Ÿæ•°æ®ä»¥åŠå¦‚ä½•åœ¨æµ‹è¯•ä¸­å……åˆ†åˆ©ç”¨ä¾èµ–æ³¨å…¥çš„åšæ–‡ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>æ¨¡å—åŒ– Xcode å·¥ç¨‹</title>
      <link>https://hechen.xyz/post/modular-xcode-projects/</link>
      <pubDate>Sun, 19 Nov 2017 18:17:15 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/modular-xcode-projects/</guid>
      
        <description>

&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡ï¼š&lt;a href=&#34;https://ppinera.es/2017/09/29/modular-xcode-projects.html&#34;&gt;Modular Xcode projects&lt;/a&gt;
åŸä½œè€… &amp;amp; Copyright &lt;a href=&#34;http://twitter.com/pepibumur&#34;&gt;@pepibumur&lt;/a&gt;
ç¿»è¯‘ï¼š&lt;a href=&#34;https://twitter.com/OgreMergO&#34;&gt;@OgreMergO&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½¿ç”¨ Xcode æ„å»ºæ¨¡å—åŒ–çš„å·¥ç¨‹å°±éœ€è¦å¯¹å·¥ç¨‹ç»“æ„ä»¥åŠå…¶åŸºç¡€æ¦‚å¿µæœ‰å¾ˆå¥½çš„ç†è§£æ‰è¡Œã€‚&lt;!-- more --&gt; æˆ‘ä»¬å¹³æ—¶ä¸æ€ä¹ˆå…³æ³¨å·¥ç¨‹ç»“æ„æœ¬èº«ï¼Œåªæœ‰åœ¨å·¥ç¨‹é€æ¸å˜å¤§ï¼Œè¦æ·»åŠ æ›´å¤šä¾èµ–çš„æ—¶å€™æ‰ä¼šæ³¨æ„çš„åˆ°ã€‚è€Œå³ä½¿åˆ°äº†è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¤§å¤šæ•°çš„å·¥ç¨‹éƒ½ä¼šä½¿ç”¨  &lt;a href=&#34;https://cocoapods.org/&#34;&gt;CocoaPods&lt;/a&gt; æ¥è®¾ç½®é‚£äº›ä¾èµ–é¡¹ï¼Œæˆ–è€… &lt;a href=&#34;https://github.com/carthage&#34;&gt;Carthage&lt;/a&gt;, åè€…è™½ç„¶æ²¡æœ‰å¸®æˆ‘ä»¬åšä¾èµ–æ€§çš„è®¾ç½®ï¼Œä½†æ˜¯ä½¿å¾—æˆ‘ä»¬ä¼šæ›´å®¹æ˜“çš„ï¼Œé€šè¿‡åœ¨å·¥ç¨‹çš„ build phase é€‰é¡¹ä¸­æ·»åŠ ä¸€äº›å†…å®¹ï¼Œè¾¾åˆ°åŒæ ·çš„ç›®çš„ã€‚å½“é…ç½®é¡¹è¶Šæ¥è¶Šå¤æ‚ï¼Œæˆ‘ä»¬å°±å¾ˆå®¹æ˜“äº§ç”Ÿå›°æƒ‘ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰å®Œå…¨æŒæ¡ Xcode å·¥ç¨‹ä¸­æ‰€æ¶‰åŠçš„æ‰€æœ‰å…ƒç´ ã€‚æˆ‘ç»å¸¸è¢«é—®åˆ°çš„é—®é¢˜å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æˆ‘èƒ½ä¸èƒ½åœ¨å·¥ç¨‹é‡ŒåŒæ—¶ä½¿ç”¨ Carthageï¼ŒCocoapods ä»¥åŠè‡ªå·±ä¸ªäººçš„ä¾èµ–è®¾ç½®ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æˆ‘æ·»åŠ äº†ä¾èµ–ï¼Œä½†æ˜¯å½“æ¨¡æ‹Ÿå™¨æ‰“å¼€ App çš„æ—¶å€™ Crash äº†ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºä»€ä¹ˆæˆ‘éœ€è¦åªåœ¨æŸäº› targets é‡ŒåµŒå…¥ frameworkï¼Ÿ&lt;/li&gt;
&lt;li&gt;æˆ‘çš„ framework åº”è¯¥æ˜¯é™æ€çš„è¿˜æ˜¯åŠ¨æ€çš„ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä¼šå¼•å¯¼ä½ éå† Xcode Project ä¸­çš„å„ä¸ªå…ƒç´ ï¼ŒæŒ‡å¯¼ä½ å¦‚ä½•é€šè¿‡æ”¹å˜è¿™äº›å…ƒç´ æ¥æ¨¡å—åŒ–ä½ çš„è®¾ç½®é¡¹ã€‚æˆ‘å¸Œæœ›ä¸‹æ¬¡ä½ é‡åˆ°ä¸Šé¢è¿™äº›é—®é¢˜çš„æ—¶å€™ï¼Œä½ ä¸éœ€è¦å†èŠ±å¤§é‡æ—¶é—´å– Stack Overflow ä¸ŠæŸ¥è¿™äº›ç¡®å®šçš„ç­”æ¡ˆã€‚&lt;/p&gt;

&lt;h3 id=&#34;elements&#34;&gt;Elements âš’&lt;/h3&gt;

&lt;h4 id=&#34;target&#34;&gt;Target&lt;/h4&gt;

&lt;p&gt;å·¥ç¨‹ï¼ˆProjectsï¼‰éƒ½æ˜¯ç”±å¤šä¸ªæ›´å°çš„å«åš target çš„å•å…ƒç»„æˆçš„ã€‚è¿™äº› target åŒ…å«ç¼–è¯‘ç‰¹å®šå¹³å°äº§å“ï¼Œæ¯”å¦‚ frameworks, libraries, apps, testing bundles, extensions ç­‰æ‰€éœ€è¦çš„é…ç½®ã€‚ ä½ å¯ä»¥åœ¨&lt;a href=&#34;https://github.com/xcodeswift/xcproj/blob/master/Sources/xcproj/PBXProductType.swift&#34;&gt;è¿™é‡Œ&lt;/a&gt;çœ‹åˆ° target æ‰€æœ‰å¯ç”¨çš„ç±»å‹ã€‚ Target å¯ä»¥ç›¸äº’ä¾èµ–ï¼Œå½“ä¸€ä¸ª target A ä¾èµ–å¦å¤–ä¸€ä¸ª target B çš„æ—¶å€™ï¼Œtarget B å°±ä¼šè¢«å…ˆæ„å»ºå‡ºæ¥ä»¥ä¾¿ target A ä½¿ç”¨å…¶äº§å‡ºã€‚è€Œ target çš„é…ç½®é¡¹ä¼šæ¶‰åŠä»¥ä¸‹å‡ ä¸ªåœ°æ–¹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Info.plist æ–‡ä»¶&lt;/strong&gt;: è¯¥æ–‡ä»¶åŒ…å«äº§å‡ºç‰¹å®šçš„è®¾ç½®é¡¹ï¼Œæ¯”å¦‚ ç‰ˆæœ¬ã€App çš„åå­—æˆ–è€… App çš„ç±»å‹ï¼Œä½ å¯ä»¥åœ¨&lt;a href=&#34;https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html&#34;&gt;è¿™é‡Œ&lt;/a&gt;è¯¦ç»†äº†è§£è¿™ä¸ªæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Entitlements&lt;/strong&gt;: å…¶æŒ‡å®šäº†åº”ç”¨çš„èƒ½åŠ›ã€‚å¦‚æœåœ¨æˆæƒæ–‡ä»¶ä¸­æŒ‡å®šçš„èƒ½åŠ›å’Œå¼€å‘è€…å¹³å°ä¸Šè®¾ç½®çš„æ— æ³•åŒ¹é…ï¼Œç­¾åè¿‡ç¨‹å°±ä¼šå‡ºé”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Build settings&lt;/strong&gt;: å¦‚å…¶åå­—æ‰€æè¿°çš„é‚£æ ·ï¼Œè¿™äº›éƒ½æ˜¯æ„å»º target æ‰€å¿…è¦çš„è®¾ç½®é¡¹ã€‚æ„å»ºè®¾ç½®é¡¹è¦ä¹ˆåœ¨ target è‡ªèº«å®šä¹‰æˆ–è€…åœ¨ &lt;code&gt;xcconfig&lt;/code&gt; æ–‡ä»¶ä¸­å®šä¹‰ã€‚ä¸€ä¸ª target çš„é…ç½®é¡¹å¯ä»¥ç»§æ‰¿è€Œæ¥ï¼Œé¦–å…ˆæ˜¯é…ç½®æ–‡ä»¶æœ¬èº«ï¼Œå…¶æ¬¡æ˜¯ target çš„é…ç½®é¡¹ï¼Œæœ€åæ˜¯ project é…ç½®é¡¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Build phases&lt;/strong&gt;: æ„å»ºæµæ°´çº¿ç”± build phase å®šä¹‰ã€‚å½“ä¸€ä¸ª target è¢«åˆ›å»ºå‡ºæ¥ä¹‹åï¼Œå…¶åŒ…å«é»˜è®¤çš„æ„å»ºé˜¶æ®µï¼ˆåŒ…å« *æ„å»ºæºç ã€æ‹·è´èµ„æºç­‰*ï¼‰ï¼Œä½†æ˜¯ä½ å¯ä»¥è‡ªè¡Œæ·»åŠ ä½ éœ€è¦çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè¿™äº›é˜¶æ®µé‡Œï¼Œæœ‰ä¸ª shell script phase å…è®¸ä½ åœ¨æ„å»ºè¿‡ç¨‹ä¸­æ‰§è¡Œä¸€äº›è„šæœ¬ã€‚è¿™äº›è„šæœ¬å¯ä»¥è¯»å– Xcode æš´éœ²å‡ºæ¥çš„é‚£äº›&lt;a href=&#34;http://ppinera.es/2017/09/15/modular-xcode-projects.html&#34;&gt;æ„å»ºå‚æ•°&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åŸºäº&lt;code&gt;.xcconfig&lt;/code&gt;æ–‡ä»¶çš„å¯ç»„åˆæ€§ä»¥åŠå…¶å¯é‡ç”¨æ€§çš„è€ƒè™‘ï¼Œå¼ºçƒˆå»ºè®®ä½ åœ¨è¿™äº›æ–‡ä»¶ä¸­å®šä¹‰ä½ é‚£äº›ç¼–è¯‘è®¾ç½®ã€‚Target çš„é…ç½®ï¼Œæ¯”å¦‚ build setting ã€build phase ç­‰çš„å˜æ›´éƒ½ä½“ç°åœ¨ &lt;code&gt;.pbxproj&lt;/code&gt; æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„plist æ–‡ä»¶ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ Git ç®¡ç†æˆ‘ä»¬çš„å·¥ç¨‹çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶å¾ˆå®¹æ˜“å‡ºç°å†²çªã€‚å½“ç„¶ï¼Œæ›´æ–° &lt;code&gt;pbxproj&lt;/code&gt; æ–‡ä»¶ä¸­é…ç½®çš„æœ€ç®€å•æ–¹å¼å°±æ˜¯ä½¿ç”¨ Xcodeï¼Œå…¶äº†è§£å¦‚ä½•ä»è¿™äº›æ–‡ä»¶ä¸­è¯»å–é…ç½®å’Œå‘å…¶ä¸­å†™å…¥é…ç½®ã€‚å¦‚æœä½ å¯¹ä¸ä½¿ç”¨ Xcode æ›´æ–° &lt;code&gt;pbxproj&lt;/code&gt; æ–‡ä»¶æ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥è¯•è¯• &lt;a href=&#34;https://github.com/cocoapods/xcodeproj&#34;&gt;Xcodeproj&lt;/a&gt; æˆ–è€… &lt;a href=&#34;https://github.com/swift-xcode/xcodeproj&#34;&gt;xcproj&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ„å»ºè¿™äº› target çš„è¾“å‡ºè¦ä¹ˆæ˜¯æ¯”å¦‚ appï¼Œextension æˆ–è€…æµ‹è¯•æ–‡ä»¶ç­‰ &lt;strong&gt;bundles&lt;/strong&gt;ï¼Œè¦ä¹ˆå°±æ˜¯&lt;strong&gt;intermediate products&lt;/strong&gt; ï¼Œä¾‹å¦‚ library æˆ–è€…é‚£äº›å°è£…äº†ä»£ç å’Œèµ„æºæ–‡ä»¶ç”¨æ¥ç»™åˆ«çš„ target ä½¿ç”¨çš„ frameworkã€‚è¿™äº› Target çš„è¾“å‡ºå†…å®¹ä½ å¯ä»¥åœ¨å·¥ç¨‹æ–‡ä»¶ä¸­çš„ &lt;code&gt;Products&lt;/code&gt; çš„ Group ä¸‹æ‰¾åˆ°ï¼Œå¦‚æœæœ‰çº¢è‰²çš„æ–‡ä»¶å¼•ç”¨è¡¨ç¤ºæ²¡æœ‰ product è¾“å‡ºï¼Œå¾ˆå¤§å¯èƒ½æ˜¯ä½ è¿˜æ²¡æœ‰æ„å»ºè¿‡è¿™ä¸ª targetã€‚&lt;/p&gt;

&lt;h4 id=&#34;scheme&#34;&gt;Scheme&lt;/h4&gt;

&lt;p&gt;Xcode å·¥ç¨‹ä¸­å¦å¤–ä¸€ä¸ªè¦ç´ æ˜¯ schemeã€‚ ä¸€ä¸ªå·¥ç¨‹å¯ä»¥åŒ…å«å¤šä¸ª schemeï¼Œä»–ä»¬å¯ä»¥è¢«å…±äº«ï¼Œä½œä¸ºå·¥ç¨‹çš„ä¸€éƒ¨åˆ†è¢«äººä»¬ä½¿ç”¨ã€‚è¿™äº› scheme æŒ‡å®šäº† Xcode ä¸­æ¯ä¸ªå…·ä½“åŠ¨ä½œçš„é…ç½®ï¼Œè¿™äº›åŠ¨ä½œåŒ…æ‹¬ï¼š&lt;strong&gt;run&lt;/strong&gt;ï¼Œ&lt;strong&gt;test&lt;/strong&gt;ï¼Œ&lt;strong&gt;profile&lt;/strong&gt;ï¼Œ&lt;strong&gt;analyze&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;archive&lt;/strong&gt;ã€‚ ç»†çš„æ¥è®²ï¼Œå¯ä»¥æŒ‡å®šå“ªäº› target éœ€è¦è¢«æ„å»ºï¼Œä»¥ä»€ä¹ˆé¡ºåºæ„å»ºç”šè‡³é’ˆå¯¹æ¯ä¸€ç§åŠ¨ä½œæŒ‡å®šä¸åŒçš„é…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;å…³äº scheme çš„ç¼–è¯‘é…ç½®æœ‰ä¸€äº›ä¸œè¥¿è¦è®²ã€‚å½“æˆ‘ä»¬æŒ‡å®šé’ˆå¯¹å“ªäº›åŠ¨ä½œæ„å»ºå“ªäº› target çš„æ—¶å€™ï¼Œåœ¨ä¸‹é¢ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŒ‡å®šæ¯ä¸ª target çš„ä¾èµ–é¡¹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å¦‚æœä¾èµ–é¡¹æ˜¯æ˜¯ç›¸åŒ project ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”å·²ç»åœ¨ &lt;code&gt;Target dependencies&lt;/code&gt; çš„ &lt;code&gt;Build Phases&lt;/code&gt; ä¸­å®šä¹‰è¿‡ï¼›&lt;/li&gt;
&lt;li&gt;å¼€å¯äº† &lt;code&gt;Find implicit dependencies&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç¬¬ 2 ç‚¹ä¸­å¼€å¯çš„æ ‡è¯†ï¼Œæ„å»ºè¿‡ç¨‹å¿…é¡»æ‰¾åˆ° target çš„ä¾èµ–é¡¹ï¼Œå¹¶ä¸”å…ˆè¡Œæ„å»ºã€‚å¦å¤–ï¼Œå¦‚æœä½ å¼€å¯äº†&lt;code&gt;Parallelize build&lt;/code&gt; çš„è¯ï¼Œä¸€æ—¦ target ç›¸äº’ä¹‹é—´æ²¡æœ‰ä¾èµ–çš„è¯ï¼Œå°±èƒ½å¤Ÿå¹¶è¡Œæ„å»ºï¼Œå› è€Œä¼šèŠ‚çœä¸€éƒ¨åˆ†æ—¶é—´ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªæœ‰é—®é¢˜çš„æ„å»ºé…ç½®ä¼šå¯¼è‡´ä½ ç¼–è¯‘ target çš„æ—¶å€™å‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚ &lt;code&gt;Framework XXX not found&lt;/code&gt;ã€‚å¦‚æœä½ æ›¾ç»æˆ–è€…å½“å‰é‡åˆ°äº†ç±»ä¼¼çš„æŠ¥é”™ï¼Œæ£€æŸ¥ä¸€ä¸‹åœ¨æ„å»ºæ¯ä¸ª scheme çš„æ—¶å€™ï¼Œä½ çš„ target çš„æ‰€æœ‰ä¾èµ–æ˜¯å¦å·²ç»è¢«æ„å»ºã€‚&lt;/p&gt;

&lt;p&gt;scheme æ–‡ä»¶å®šä¹‰æ˜¯å­˜å‚¨åœ¨ &lt;code&gt;Project.xcodeproj/xcshareddata/xcodeproj.xcscheme&lt;/code&gt; è·¯å¾„ä¸‹çš„ä¸€ä¸ªæ ‡å‡†çš„ XML æ–‡æœ¬ï¼Œå› æ­¤ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨ä»»æ„ XML ç¼–è¾‘å™¨æ¥ä¿®æ”¹å®ƒã€‚&lt;/p&gt;

&lt;h4 id=&#34;workspace&#34;&gt;Workspace&lt;/h4&gt;

&lt;p&gt;å¤šä¸ª project æ–‡ä»¶è¢«ç»„åˆæˆä¸€ä¸ª workspaceã€‚å½“ project è¢«æ·»åŠ åˆ°ä¸€ä¸ª workspace çš„æ—¶å€™ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å…¶ schemes ä¼šå‡ºç°åœ¨ workspace çš„ scheme åˆ—è¡¨ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;project å½¼æ­¤å¯ä»¥äº§ç”Ÿä¾èµ–å…³ç³»ï¼Œåæ–‡ä¼šè®²åˆ°ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å’Œ scheme ç±»ä¼¼ï¼Œworkspace ä¹Ÿæ˜¯æ™®é€šçš„ XML æ–‡ä»¶ï¼Œä¿®æ”¹èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wGXI5fy.png&#34; alt=&#34;å·¥ç¨‹æ„å»ºç»„åˆä¸­çš„æ¯ä¸€ä¸ªåŸºç¡€å…ƒç´ ï¼š targetã€schemeã€project ä»¥åŠ workspace æ˜¯å¦‚ä½•è¢«ç»„ç»‡èµ·æ¥çš„&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;dependencies&#34;&gt;Dependencies ğŸŒ±&lt;/h4&gt;

&lt;p&gt;æ¯ä¸ª target éƒ½å¯ä»¥æœ‰ä¾èµ–ï¼Œè¿™äº›ä¾èµ–æ˜¯ target éœ€è¦é“¾æ¥çš„é‚£äº› framework ä»¥åŠ libraryç­‰ï¼Œå…¶åŒ…å«äº†èƒ½å¤Ÿè¢« target å…±äº«çš„æºä»£ç ä»¥åŠèµ„æºã€‚è¿™äº›ä¾èµ–é¡¹å¯ä»¥è¢«é™æ€æˆ–è€…åŠ¨æ€çš„é“¾æ¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;é™æ€é“¾æ¥ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µï¼›&lt;/li&gt;
&lt;li&gt;åº“ï¼ˆLibraryï¼‰ä¸­çš„ä»£ç æ–‡ä»¶ä¼šè¢«åŒ…å«åˆ°åº”ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼ˆä¼šå¢å¤§åº”ç”¨çš„äºŒè¿›åˆ¶å¤§å°ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;åº“ä½¿ç”¨ .a ä½œä¸ºæ–‡ä»¶åç¼€ï¼Œå…¶æ¥è‡ª (ar)chive file3 typeï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœç›¸åŒçš„åº“è¢«å¤šæ¬¡é“¾æ¥ï¼Œç¼–è¯‘å™¨ä¼šç”±äº duplicated symbols ç¼–è¯‘å¤±è´¥ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;åŠ¨æ€é“¾æ¥ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ¨¡å—åœ¨åº”ç”¨å¯åŠ¨æˆ–è€…è¿è¡Œè¿‡ç¨‹ä¸­è¢«åŠ è½½ï¼›&lt;/li&gt;
&lt;li&gt;åº”ç”¨æˆ–è€…æ‰©å±•çš„ target éƒ½å¯ä»¥å…±äº«ç›¸åŒçš„åŠ¨æ€åº“ï¼ˆä»…è¢«å¤åˆ¶ä¸€ä»½ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…³äº framework å’Œ libraryï¼ˆæ— è®ºæ˜¯é™æ€é“¾æ¥è¿˜æ˜¯åŠ¨æ€é“¾æ¥ï¼‰çš„åŒºåˆ«åœ¨äºå‰è€…å¯ä»¥åœ¨ç›¸åŒçš„ bundle ä¸­åŒ…å«å¤šä¸ªç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥åŒ…å«é¢å¤–çš„èµ„æºæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ª Library æ˜¯ä¸€ä¸ª .a æ–‡ä»¶ï¼Œå…¶æ¥æºäº å½’æ¡£ï¼ˆarchiveï¼‰æ–‡ä»¶ç±»å‹ã€‚ä¸€ä¸ªå•ä¸€çš„å½’æ¡£æ–‡ä»¶ä»…æ”¯æŒå•ä¸€çš„æ¶æ„ã€‚å¦‚æœéœ€è¦æ‰“åŒ…å¤šä¸ªæ¶æ„ï¼Œåˆ™éœ€è¦å°†å…¶æ‰“åŒ…æˆèƒ–Match-OäºŒè¿›åˆ¶ï¼ˆ&lt;strong&gt;fat Match-O binary&lt;/strong&gt;ï¼‰ï¼Œè¯¥äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä¸€ç§å®¹å™¨æ ¼å¼ï¼Œå…¶å°†æ”¯æŒä¸åŒæ¶æ„çš„Mach-Oæ‰“åŒ…åœ¨ä¸€èµ·ã€‚å¦‚æœæˆ‘ä»¬æƒ³ç”Ÿæˆã€ä¿®æ”¹ä¸€ä¸ªèƒ–äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…ä»å…¶ä¸­æå–æŸä¸ªç‰¹å®šæ¶æ„çš„åº“çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·&lt;code&gt;lipo&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½ å¯ä»¥åœ¨&lt;a href=&#34;https://pewpewthespells.com/blog/static_and_dynamic_libraries.html&#34;&gt;è¿™é‡Œ&lt;/a&gt;äº†è§£æ›´å¤šå…³äº frameworks/libraries ä»¥åŠ static/dynamic çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qKHdwhp.png&#34; alt=&#34;åŠ¨æ€é“¾æ¥å’Œé™æ€é“¾æ¥çš„åŒºåˆ«&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åº”ç”¨çš„ä¾èµ–é¡¹åˆ†ä¸ºé¢„ç¼–è¯‘è¿‡çš„ï¼ˆ&lt;strong&gt;precompiled&lt;/strong&gt;ï¼‰å’Œæœªç»ç¼–è¯‘è¿‡ï¼ˆ&lt;strong&gt;not-compiled&lt;/strong&gt;ï¼‰ä¸¤ç±»ã€‚&lt;/p&gt;

&lt;h5 id=&#34;precompiled-dependencies&#34;&gt;Precompiled dependencies&lt;/h5&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/carthage&#34;&gt;Carthage&lt;/a&gt; æ˜¯è¿™ç±»å‹ä¾èµ–çš„å…¸å‹ä»£è¡¨ã€‚æŸäº› SDKï¼Œæ¯”å¦‚ &lt;a href=&#34;https://github.com/CocoaPods/Specs/blob/master/Specs/0/3/5/Firebase/4.2.0/Firebase.podspec.json#L23&#34;&gt;Firebase&lt;/a&gt; å°±æ˜¯ä½œä¸ºç¼–è¯‘è¿‡çš„ä¾èµ–æ¥å‘å¸ƒçš„ã€‚å½“é¢„ç¼–è¯‘è¿‡çš„ä¾èµ–æ˜¯åº“ï¼ˆlibraryï¼‰çš„æ—¶å€™ï¼Œè¿™äº›ä¾èµ–å°±åŒ…å« &lt;code&gt;.a&lt;/code&gt; çš„åº“åŠä¸€ä¸ªå…¬å…±å¤´æ–‡ä»¶ï¼ŒåŒ…å«äº†è¯¥åº“æ‰€æš´éœ²å‡ºçš„å…¬å…±æ¥å£ã€‚å½“è¿™äº›ä¾èµ–æ˜¯ framework çš„æ—¶å€™ï¼Œè¿™äº›ä¾èµ–å°±ä»¥åŒ…å«äº†åº“å’Œèµ„æºæ–‡ä»¶çš„ &lt;code&gt;.framework&lt;/code&gt; æ–‡ä»¶å‘å¸ƒã€‚&lt;/p&gt;

&lt;p&gt;å½“æˆ‘ä»¬çš„ app ä¾èµ–çš„æ˜¯é¢„ç¼–è¯‘ä¾èµ–çš„æ—¶å€™ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™äº›ä¾èµ–ä¹Ÿæ˜¯ä¾ç…§æˆ‘ä»¬ app æ‰€æ„å»ºæ¶æ„æ¥æ„å»ºå‡ºæ¥çš„ã€‚ä¸€æ—¦å…¶ä¸­ç¼ºå¤±æŸä¸ªæ¶æ„çš„ä»£ç ï¼Œæˆ‘ä»¬å°±ä¼šåœ¨ç¼–è¯‘ app çš„æ—¶å€™æ”¶åˆ°ç¼–è¯‘é”™è¯¯ã€‚ä¸€ä¼šå„¿åæ–‡ä¼šçœ‹åˆ°ï¼ŒCarthage ä½¿ç”¨ lipo å·¥å…·ç”Ÿæˆé‚£äº›åŒ…å«æ¨¡æ‹Ÿå™¨æˆ–è€…çœŸæœºæ‰€å¿…é¡»çš„æ¶æ„çš„ framework çš„ï¼ŒåŒæ—¶æ ¹æ®æ„å»ºé…ç½®æ¥å‰”é™¤æ‰é‚£äº›ä¸éœ€è¦çš„ frameworkã€‚&lt;/p&gt;

&lt;h5 id=&#34;non-compiled-dependencies&#34;&gt;Non-compiled dependencies&lt;/h5&gt;

&lt;p&gt;&lt;a href=&#34;https://cocoapods.org/&#34;&gt;CocoaPods&lt;/a&gt; æ˜¯è¯¥ç§ç±»å‹çš„å…¸å‹ä»£è¡¨ã€‚ä¾èµ–é¡¹è¢«å®šä¹‰åœ¨æˆ‘ä»¬è¦é“¾æ¥çš„ frameworks/libraries çš„ target ä¸­ã€‚è¿™é‡Œæœ‰å¤šç§æ–¹å¼åœ¨ Xcode ä¸­æŒ‡å®šæˆ‘ä»¬çš„ target ä¾èµ–å…¶ä»– target çš„è¾“å‡ºã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœè¿™äº› target åˆ†å¸ƒåœ¨åŒä¸€ä¸ª project ä¸­&lt;/strong&gt;ï¼Œä½ å¯ä»¥åœ¨ Build Phase çš„&lt;em&gt;Target dependencies&lt;/em&gt; ä¸­æŒ‡å®šä¾èµ–ã€‚ Xcode ä¼šåœ¨ç¼–è¯‘è¯¥ target çš„æ—¶å€™é¦–å…ˆç¼–è¯‘è¿™äº›æŒ‡å®šçš„ä¾èµ–é¡¹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœè¿™äº› target åˆ†å¸ƒåœ¨ä¸åŒçš„ project ä¸­&lt;/strong&gt;ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨*Scheme*æ¥å®šä¹‰è¿™äº› target ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚åœ¨ scheme çš„ Build éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è¦è¢«æ„å»ºçš„ target ä»¥åŠä»¥ä»€ä¹ˆé¡ºåºæ„å»ºï¼ˆåŸºäºä»–ä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼‰ã€‚å¦‚æœä½ å¼€å¯äº†*Find implicit dependencies*æ ‡è¯†ï¼ŒXcode èƒ½å¤Ÿæ ¹æ®æ¯ä¸ª target çš„è¾“å…¥è¾“å‡ºæ¥çŒœæµ‹ä¾èµ–ã€‚å¦‚æœ scheme ä¸­æœ‰é”™è¯¯é…ç½®ï¼Œä½ å°±ä¼šå¾—åˆ°ç±»ä¼¼&lt;code&gt;xxxx.framework not found&lt;/code&gt;çš„é”™è¯¯ã€‚å¦‚æœåœ¨ framework ä¹‹é—´å‡ºç°äº†å¾ªç¯ä¾èµ–ä¹Ÿä¼šæŠ¥ç±»ä¼¼çš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;å…³äºä¾èµ–é¡¹å’Œé…ç½®é¡¹æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼šæ‰€æœ‰ä¾èµ–é¡¹çš„é…ç½®ä¸€å®šè¦å®Œå…¨åŒ¹é…ã€‚å¦‚æœä½ åœ¨ä½¿ç”¨ Alpha é…ç½®é¡¹æ„å»ºä½ çš„ appï¼Œä½†æ˜¯å…¶ä¾èµ–é¡¹ä¸­ä½†å‡¡å‡ºç°äº†ä¸åŒ…å«è¿™ç§é…ç½®ï¼Œç¼–è¯‘è¿‡ç¨‹éƒ½ä¼šå› ä¸ºæ‰¾ä¸åˆ°æŸä¸ª framework è€Œå¤±è´¥ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼ŒXcode ä¸ä¼šç¼–è¯‘è¯¥ framework ä½†æ˜¯ä¸æŠ¥ä»»ä½•é”™è¯¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/TrXKUTJ.png&#34; alt=&#34;å„ä¸ªä¾èµ–é¡¹æ˜¯å¦‚ä½•åŸºäº project çš„é…ç½®å¾—åˆ°ç¼–è¯‘çš„&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;linking-with-xcode&#34;&gt;Linking withÂ Xcode&lt;/h3&gt;

&lt;p&gt;Target æœ¬èº«å¯ä»¥é“¾æ¥å…¶ä»– target çš„è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Xcode ä¸­çš„å·¥å…·ï¼Œæ¯”å¦‚ scheme æˆ–è€… target dependencies æ¥æŒ‡å®šä¾èµ–ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•é€šè¿‡å®šä¹‰è¿™äº›ä¾èµ–çš„é“¾æ¥å…³ç³»æ¥å°†å®ƒä»¬èä¸ºä¸€ä½“çš„ï¼Ÿ&lt;/p&gt;

&lt;h4 id=&#34;1-åŠ¨æ€æˆ–è€…é™æ€é“¾æ¥-libraries-å’Œ-frameworks&#34;&gt;1. åŠ¨æ€æˆ–è€…é™æ€é“¾æ¥ libraries å’Œ frameworks&lt;/h4&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼å®šä¹‰é“¾æ¥ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€ä¸ªæ„å»ºé˜¶æ®µï¼ˆbuild phaseï¼‰ï¼š&lt;/strong&gt;ï¼Œåœ¨æ‰€æœ‰å¯ç”¨çš„ build phase ä¸­ï¼Œæœ‰ä¸€ä¸ªæ˜¯å®šä¹‰é“¾æ¥çš„ï¼Œ*Link Binary With Libraries*ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æŸä¸ª target çš„ä¾èµ–é¡¹ï¼Œè¿™äº›ä¾èµ–é¡¹å¯ä»¥æ¥è‡ªäºåŒä¸€ä¸ª projectï¼Œä¹Ÿå¯ä»¥æ¥è‡ªåŒä¸€ä¸ª workspace ä¸­çš„å…¶ä»– projectã€‚è¿™ä¸ª build phase è¢« Xcode ç”¨æ¥è¯†åˆ« target è¢«æ„å»ºæ—¶æ‰€éœ€çš„ä¾èµ–é¡¹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–è¯‘å™¨æ„å»ºè®¾ç½®ï¼š&lt;/strong&gt;ä¸€ä¸ª build phase ä¸­æ‰€å®šä¹‰çš„å†…å®¹ä¼šè¢«è½¬æ¢æˆç¼–è¯‘å™¨å‚æ•°ã€‚å…¶ä¸­æŸäº›å†…å®¹ä½ ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰ç¼–è¯‘è®¾ç½®é¡¹åšåˆ°ï¼š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FRAMEWORK_SEARCH_PATHS&lt;/code&gt;ï¼šå®šä¹‰ç¼–è¯‘å™¨æ‰€é“¾æ¥çš„ framework æ‰€åœ¨è·¯å¾„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIBRARY_SEARCH_PATHS&lt;/code&gt;ï¼šå®šä¹‰ç¼–è¯‘å™¨æ‰€é“¾æ¥çš„ library æ‰€åœ¨è·¯å¾„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OTHER_LDFLAGS&lt;/code&gt; *(Other Linker Flags)*ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code&gt;-l&lt;/code&gt;å‚æ•°æŒ‡å®šé“¾æ¥çš„ libraryï¼Œæ¯”å¦‚&lt;code&gt;-l&amp;quot;1PasswordExtension&amp;quot; -l&amp;quot;Adjust&amp;quot;&lt;/code&gt;ã€‚å¦‚æœéœ€è¦é“¾æ¥ä¸€ä¸ª frameworkï¼Œå°±éœ€è¦ä½¿ç”¨&lt;code&gt;-framework&lt;/code&gt;å‚æ•°ï¼Œæ¯”å¦‚ï¼š&lt;code&gt;-framework &amp;quot;GoogleSignIn&amp;quot; -framework &amp;quot;HockeySDK&amp;quot;&lt;/code&gt;ã€‚å¦‚æœæˆ‘ä»¬å°è¯•é“¾æ¥ä¸€ä¸ªæ— æ³•åœ¨ä¸Šæ–¹æŒ‡å®šè·¯å¾„ä¸­æ‰¾åˆ°çš„ framework æˆ–è€… library çš„è¯ï¼Œç¼–è¯‘è¿‡ç¨‹å°±ä¼šå¤±è´¥ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;2-æš´éœ²åº“çš„å¤´æ–‡ä»¶&#34;&gt;2. æš´éœ²åº“çš„å¤´æ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;Library çš„å¤´æ–‡ä»¶éœ€è¦æš´éœ²ç»™ä¾èµ–è¯¥åº“çš„ targeã€‚ä¸ºäº†åšåˆ°è¿™ä¸ªï¼Œæœ‰ä¸€ä¸ªç¼–è¯‘è®¾ç½®é¡¹ï¼š&lt;code&gt;HEADER_SEARCH_PATHS&lt;/code&gt;ç”¨æ¥æŒ‡å®šå¤´æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚å¦‚æœæˆ‘ä»¬é“¾æ¥æŸä¸ªåº“ï¼Œä½†æ˜¯å¿˜è®°æš´éœ²è¯¥åº“çš„å¤´æ–‡ä»¶ï¼Œç¼–è¯‘è¿‡ç¨‹å°±ä¼šå› ä¸ºæ‰¾ä¸åˆ°å…¶å¤´æ–‡ä»¶è€Œå¤±è´¥ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-å°†-framework-åµŒå…¥åˆ°åº”ç”¨ä¸­&#34;&gt;3. å°† Framework åµŒå…¥åˆ°åº”ç”¨ä¸­&lt;/h4&gt;

&lt;p&gt;App çš„ target é“¾æ¥åŠ¨æ€ frameworkï¼Œéœ€è¦æŠŠè¿™äº›ä¾èµ–é¡¹å¤åˆ¶åˆ°åº”ç”¨çš„ bundle ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä½œ &lt;strong&gt;framework embedding&lt;/strong&gt;ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Xcode çš„&lt;strong&gt;Copy Files Phase&lt;/strong&gt;ï¼Œå…¶æ‹·è´ è¿™äº› framework åˆ° &lt;code&gt;Frameworks&lt;/code&gt;ç›®å½•ä¸­ã€‚ä¸ä»…ä»…éœ€è¦æŠŠè¿™äº›ç›´æ¥ä¾èµ–é¡¹åµŒå…¥åº”ç”¨ä¸­ï¼Œè¿˜åŒ…æ‹¬ç›´æ¥ä¾èµ–æ‰€ä¾èµ–çš„é¡¹ç›®ã€‚å¦‚æœç¼ºå°‘ä»»æ„çš„ frameworkï¼Œå½“æˆ‘ä»¬å°è¯•æ‰“å¼€ app çš„æ—¶å€™éƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;æ¡ˆä¾‹å­¦ä¹ &#34;&gt;æ¡ˆä¾‹å­¦ä¹ Â ğŸ‘¨â€ğŸ’»&lt;/h3&gt;

&lt;p&gt;åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šåˆ†æä»¥ä¸‹ Cocopods å’Œ Carthage æ˜¯å¦‚ä½•è´¯å½»ä¸Šé¢è¿™äº›æ¦‚å¿µæ¥ç®¡ç†ä½ çš„å·¥ç¨‹ä¾èµ–çš„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;cocoapods&#34;&gt;CocoaPods&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yYLLsbQ.png&#34; alt=&#34;CocoaPods&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Cocoapods è§£æä½ çš„å·¥ç¨‹ä¾èµ–ï¼Œå¹¶å°†å®ƒä»¬èåˆåˆ°ä½ çš„å·¥ç¨‹ä¸­ã€‚è™½ç„¶ç›´æ¥ä¿®æ”¹ä½ çš„å·¥ç¨‹é…ç½®æ˜¯ä¸å¤ªæ¨èçš„ï¼Œä½†æ˜¯å®ƒä»æœ€åˆçš„ç‰ˆæœ¬å·²ç»æœ‰äº†å¾ˆå¤§çš„æå‡ï¼Œç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å‡ ä¹ä¸éœ€è¦å¯¹ project åšå¾ˆå¤šæ”¹å˜ã€‚é‚£ä¹ˆå®ƒåº•å±‚åˆ°åº•æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å®ƒåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼ˆprojectï¼‰&lt;em&gt;(&lt;/em&gt;&lt;code&gt;*Pods.xcodeproj*&lt;/code&gt;&lt;em&gt;)&lt;/em&gt; ï¼Œå…¶åŒ…å«äº†æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œæ¯ä¸ªä¾èµ–é¡¹ä»¥ target çš„å½¢å¼å­˜åœ¨ã€‚æ¯ä¸ª target å„è‡ªç¼–è¯‘éœ€è¦è¢«é“¾æ¥åˆ° app ä¸­çš„ä¾èµ–é¡¹ï¼›&lt;/li&gt;
&lt;li&gt;å®ƒåˆ›å»ºä¸€ä¸ªé¢å¤–çš„ targetï¼Œå…¶ä¾èµ–äºå…¶ä»–æ‰€æœ‰çš„ä¾èµ–é¡¹ã€‚è¯¥ target æ˜¯ä¸€ä¸ª umbrella targetï¼Œç”¨æ¥è§¦å‘å…¶ä»– target çš„ç¼–è¯‘ã€‚è¿™æ ·åšä¹Ÿæœ€å°ç¨‹åº¦çš„å‡å°‘äº†ä½ çš„ project ä¸­æ‰€éœ€è¦çš„æ”¹å˜ã€‚é€šè¿‡é“¾æ¥è¿™ä¸ª targetï¼ŒXcode ä¼šå…ˆç¼–è¯‘å…¶æ‰€æœ‰ä¾èµ–é¡¹ï¼Œç„¶åæ˜¯ä½ çš„ appï¼›&lt;/li&gt;
&lt;li&gt;å®ƒåˆ›å»ºäº†ä¸€ä¸ª workspaceï¼ŒåŒ…å«äº†ä½ çš„ project ä»¥åŠ Pods projectï¼›&lt;/li&gt;
&lt;li&gt;Frameworks å’Œ libraries ä½¿ç”¨&lt;code&gt;.xcconfig&lt;/code&gt;æ–‡ä»¶é“¾æ¥ã€‚è¿™äº›æ–‡ä»¶è¢«åŠ åˆ°äº†ä½ çš„ project ç¾¤ç»„ä¸­ï¼Œå¹¶ä¸”è¢«è®¾ç½®ä¸ºä½  project ä¸­ target çš„é…ç½®é¡¹ï¼›&lt;/li&gt;
&lt;li&gt;åµŒå…¥è¿‡ç¨‹æ˜¯é€šè¿‡ä¸€ä¸ªæ„å»ºé˜¶æ®µè„šæœ¬ï¼ˆbuild phase scriptï¼‰æ¥åšåˆ°çš„ã€‚ç±»ä¼¼çš„ï¼Œæ‰€æœ‰çš„ framework æ‰€éœ€è¦çš„èµ„æºä¹Ÿé€šè¿‡ä¸€ä¸ªæ„å»ºé˜¶æ®µï¼ˆbuild phaseï¼‰æ¥å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†æ•´ä¸ªè®¾ç½®è¿‡ç¨‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/UARMUhl.png&#34; alt=&#34;CocoaPods å¦‚ä½•å°†ä¾èµ–é¡¹èåˆåˆ°æ•´ä¸ª Project ä¸­&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;carthage&#34;&gt;Carthage&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/IUXCxhQ.png&#34; alt=&#34;Carthage&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Carthage çš„æ–¹å¼å’Œ CocoaPods æ¯”èµ·æ¥å¤§ä¸åŒã€‚é™¤äº†ä¾èµ–é¡¹çš„è§£æï¼Œè¯¥å·¥å…·æ˜¯è¿˜ä¸€ç§å»ä¸­å¿ƒåŒ–çš„æ¨¡å¼ï¼Œå…¶ç”Ÿæˆé‚£äº›éœ€è¦è¢«é“¾æ¥æˆ–è€…åµŒå…¥åˆ° app çš„ä¾èµ–é¡¹çš„é¢„ç¼–è¯‘ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Carthage è§£æä¾èµ–é¡¹ï¼Œå¹¶ä¸”ç¼–è¯‘å®ƒä»¬ç”Ÿæˆä½ èƒ½å¤Ÿé“¾æ¥åˆ° app ä¸­çš„åŠ¨æ€ frameworkï¼Œæˆ–è€…ä¸ºäº†è°ƒè¯•æ‰€éœ€è¦çš„ç¬¦å·ã€‚è¿™äº› framework æ˜¯ fat frameworkï¼Œæ”¯æŒæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºçš„æ¶æ„ï¼›&lt;/li&gt;
&lt;li&gt;è¿™äº› framework è¢«ç”¨æˆ·ä½¿ç”¨ &lt;em&gt;Link Binary With Libraries&lt;/em&gt; çš„æ„å»ºé˜¶æ®µï¼ˆbuild phaseï¼‰æ‰‹åŠ¨çš„é“¾æ¥ï¼›&lt;/li&gt;
&lt;li&gt;åµŒå…¥è¿‡ç¨‹ä½¿ç”¨ Carthage æä¾›çš„è„šæœ¬å®Œæˆã€‚è¿™ä¸ªè„šæœ¬ä¼šå‰”é™¤é‚£äº›æˆ‘ä»¬æ­£åœ¨æ„å»ºç›®æ ‡æ‰€ä¸å¿…è¦çš„æ¶æ„ç‰ˆæœ¬ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åŒæ ·çš„è„šæœ¬ï¼Œå¤åˆ¶ç¬¦å·åˆ°åˆé€‚çš„æ–‡ä»¶å¤¹ï¼Œä½¿å¾—è°ƒè¯•èƒ½å¤Ÿæ­£å¸¸è¿›è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/HXqtoDl.png&#34; alt=&#34;Carthage æ˜¯å¦‚ä½•ç”Ÿæˆä¾èµ–é¡¹çš„ framework å’Œ symbol&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;references&#34;&gt;References&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.knowstack.com/framework-vs-library-cocoa-ios/&#34;&gt;Framework vs Library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://pewpewthespells.com/blog/static_and_dynamic_libraries.html&#34;&gt;Static and dynamic libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://pewpewthespells.com/blog/buildsettings.html&#34;&gt;Xcode Build Settings Reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/content/technotes/tn2435/_index.html&#34;&gt;Embedding Frameworks in an App&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/content/documentation/MacOSX/Conceptual/BPFrameworks/Frameworks.html&#34;&gt;Introduction to Framework Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cocoanetics.com/2015/04/skipping-copy-phase-strip/&#34;&gt;Skippy Copy Phase Strip&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
      
    </item>
    
    <item>
      <title>å¤„ç† Swift ä¸­éå¯é€‰çš„å¯é€‰å€¼ç±»å‹</title>
      <link>https://hechen.xyz/post/handling-non-optional-optionals-in-swift/</link>
      <pubDate>Tue, 14 Nov 2017 21:53:52 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/handling-non-optional-optionals-in-swift/</guid>
      
        <description>

&lt;p&gt;å¯é€‰å€¼ï¼ˆoptionalsï¼‰æ— å¯äº‰è®®çš„æ˜¯ &lt;code&gt;swift&lt;/code&gt; è¯­è¨€ä¸­æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯å’Œå…¶ä»–è¯­è¨€ï¼Œä¾‹å¦‚ &lt;code&gt;Objective-C&lt;/code&gt; çš„æœ€å¤§åŒºåˆ«ã€‚é€šè¿‡å¼ºåˆ¶å¤„ç†é‚£äº›æœ‰å¯èƒ½å‡ºç° &lt;code&gt;nil&lt;/code&gt; çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å°±èƒ½å†™å‡ºæ›´æœ‰é¢„æµ‹æ€§çš„ä»¥åŠæ›´å¥å£®çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶è€Œï¼Œæœ‰äº›æ—¶å€™å¯é€‰å€¼å¯èƒ½ä¼šè‡´ä½ äºå°´å°¬çš„å¢ƒåœ°ï¼Œå°¤å…¶æ˜¯ä½ ä½œä¸ºå¼€å‘è€…äº†è§£ï¼ˆç”šè‡³æ˜¯æœ‰äº›çŒœæµ‹çš„æˆåˆ†åœ¨ï¼‰ï¼Œæœ‰çš„ç‰¹å®šå˜é‡å§‹ç»ˆæ˜¯éç©ºï¼ˆnon-nilï¼‰çš„ï¼Œå³ä½¿å®ƒæ˜¯ä¸€ä¸ªå¯é€‰ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ä¸­å¤„ç†è§†å›¾çš„æ—¶å€™ï¼š&lt;/p&gt;

&lt;!-- more --&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TableViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;tableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UITableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;

    &lt;span class=&#34;kr&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;tableView&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UITableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bounds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addSubview&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tableView&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;viewModelDidUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;viewModel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ViewModel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;tableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reloadData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™ä¹Ÿæ˜¯å¯¹äºå¾ˆå¤š Swift ç¨‹åºå‘˜äº‰è®ºæ¯”è¾ƒæ¿€çƒˆçš„åœ°æ–¹ï¼Œç¨‹åº¦ä¸äºšäºè®¨è®º tabs å’Œ spaces çš„ç”¨æ³•ã€‚æœ‰çš„äººä¼šè¯´ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;æ—¢ç„¶å®ƒæ˜¯ä¸€ä¸ªå¯é€‰å€¼ï¼Œä½ å°±åº”è¯¥æ—¶åˆ»ä½¿ç”¨ &lt;code&gt;if let&lt;/code&gt; æˆ–è€… &lt;code&gt;guard let&lt;/code&gt; çš„æ–¹å¼è¿›è¡Œè§£åŒ…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç„¶è€Œå¦å¤–ä¸€äº›äººåˆ™é‡‡ç”¨å®Œå…¨ç›¸åï¼Œè¯´ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;æ—¢ç„¶ä½ çŸ¥é“è¿™ä¸ªå˜é‡åœ¨ä½¿ç”¨çš„æ—¶å€™ä¸ä¼šä¸º &lt;code&gt;nil&lt;/code&gt;ï¼Œä½¿ç”¨ &lt;code&gt;!&lt;/code&gt; å¼ºåˆ¶è§£åŒ…å¤šå¥½ã€‚å´©æºƒä¹Ÿè¦æ¯”è®©ä½ çš„ç¨‹åºå¤„äºä¸€ä¸ªæœªçŸ¥çŠ¶æ€è¦å¥½å§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æœ¬è´¨ä¸Šæ¥è®²ï¼Œæˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„æ˜¯è¦ä¸è¦é‡‡ç”¨é˜²å¾¡æ€§ç¼–ç¨‹ï¼ˆ&lt;a href=&#34;https://en.wikipedia.org/wiki/Defensive_programming&#34;&gt;defensive programming&lt;/a&gt;ï¼‰çš„é—®é¢˜ã€‚æˆ‘ä»¬æ˜¯è¯•å›¾è®©ç¨‹åºä»ä¸€ä¸ªæœªçŸ¥çŠ¶æ€æ¢å¤è¿˜æ˜¯ç®€å•çš„æ”¾å¼ƒï¼Œç„¶åè®©å®ƒå´©æºƒæ‰ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å¦‚æœéå¾—è®©æˆ‘å¯¹è¿™ä¸ªé—®é¢˜ç»™å‡ºä¸€ä¸ªç­”æ¡ˆçš„è¯ï¼Œæˆ‘æ›´å€¾å‘äºåè€…ã€‚æœªçŸ¥çŠ¶æ€çœŸçš„å¾ˆéš¾è¿½è¸ª bugï¼Œä¼šå¯¼è‡´æ‰§è¡Œå¾ˆå¤šä¸æƒ³æ‰§è¡Œçš„é€»è¾‘ï¼Œé‡‡ç”¨é˜²å¾¡æ€§ç¼–ç¨‹å°±ä¼šä½¿å¾—ä½ çš„ä»£ç å¾ˆéš¾è¿½è¸ªï¼Œå‡ºç°é—®é¢˜å¾ˆéš¾è¿½è¸ªã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ï¼Œæˆ‘ä¸å¤ªå–œæ¬¢ç»™å‡ºä¸€ä¸ªäºŒé€‰ä¸€çš„ç­”æ¡ˆã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥å¯»æ‰¾ä¸€äº›æŠ€æœ¯æ‰‹æ³•ï¼Œç”¨æ›´ç²¾å¦™çš„æ–¹å¼çš„è§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®ƒçœŸçš„å¯é€‰çš„å—&#34;&gt;å®ƒçœŸçš„å¯é€‰çš„å—ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;é‚£äº›å¯é€‰ç±»å‹çš„ï¼Œä½†æ˜¯è¢«ä»£ç é€»è¾‘çœŸå®éœ€è¦çš„å˜é‡å’Œå±æ€§ï¼Œå®é™…ä¸Šæ˜¯æ¶æ„ç‘•ç–µçš„ä¸€ä¸ªä½“ç°ã€‚å¦‚æœåœ¨æŸäº›åœ°æ–¹ç¡®å®éœ€è¦å®ƒï¼Œä½†æ˜¯å®ƒåˆä¸åœ¨ï¼Œå°±ä¼šä½¿å¾—ä½ çš„ä»£ç é€»è¾‘å¤„äºæœªçŸ¥çŠ¶æ€ï¼Œé‚£ä¹ˆå®ƒå°±ä¸åº”è¯¥æ˜¯å¯é€‰ç±»å‹çš„ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œåœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¯é€‰å€¼ç¡®å®å¾ˆéš¾é¿å…ï¼ˆå°¤å…¶æ˜¯å’Œç‰¹å®šçš„ç³»ç»Ÿ API äº¤äº’çš„æ—¶å€™ï¼‰ï¼Œé‚£å¯¹äºå¤§éƒ¨åˆ†è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æœ‰ä¸€äº›æŠ€æœ¯æ¥å¤„ç†ä»è€Œé¿å…å¯é€‰å€¼ã€‚&lt;/p&gt;

&lt;h3 id=&#34;lazy-è¦æ¯”éå¯é€‰çš„å¯é€‰å€¼æ›´å¥½&#34;&gt;lazy è¦æ¯”éå¯é€‰çš„å¯é€‰å€¼æ›´å¥½&lt;/h3&gt;

&lt;p&gt;æŸäº›å±æ€§çš„å€¼éœ€è¦åœ¨å…¶çˆ¶ç±»åˆ›å»ºä¹‹åå†ç”Ÿæˆï¼ˆæ¯”å¦‚è§†å›¾æ§åˆ¶å™¨ä¸­çš„é‚£äº›è§†å›¾ï¼Œåº”è¯¥åœ¨ &lt;code&gt;loadView()&lt;/code&gt;æˆ–è€… &lt;code&gt;viewDidLoad()&lt;/code&gt;æ–¹æ³•ä¸­è¢«åˆ›å»ºï¼‰ï¼Œå¯¹äºè¿™ç§å±æ€§è¦é¿å…å…¶å¯é€‰ç±»å‹çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ &lt;code&gt;lazy&lt;/code&gt; å±æ€§ã€‚ä¸€ä¸ª&lt;code&gt;lazy&lt;/code&gt;å±æ€§æ˜¯å¯ä»¥æ˜¯éå¯é€‰ç±»å‹çš„ï¼ŒåŒæ—¶ä¹Ÿä¸åœ¨å…¶çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•é‡Œè¢«éœ€è¦ï¼Œå®ƒä¼šåœ¨å…¶ç¬¬ä¸€æ¬¡è¢«è·å–çš„æ—¶å€™åˆ›å»ºå‡ºæ¥ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œä½¿ç”¨ lazy æ¥æ”¹é€  tableView å±æ€§ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TableViewController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;lazy&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;tableView&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UITableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

    &lt;span class=&#34;kr&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;tableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bounds&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addSubview&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;viewModelDidUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;viewModel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ViewModel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;tableView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reloadData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ ·ï¼Œæ²¡æœ‰å¯é€‰å€¼äº†ï¼Œä¹Ÿä¸ä¼šæœ‰æœªçŸ¥çŠ¶æ€å’¯ğŸ‰&lt;/p&gt;

&lt;h3 id=&#34;é€‚å½“çš„ä¾èµ–ç®¡ç†è¦æ¯”éå¯é€‰çš„å¯é€‰å€¼è¦å¥½&#34;&gt;é€‚å½“çš„ä¾èµ–ç®¡ç†è¦æ¯”éå¯é€‰çš„å¯é€‰å€¼è¦å¥½&lt;/h3&gt;

&lt;p&gt;å¯é€‰å€¼ç±»å‹å¦å¤–ä¸€ç§å¸¸ç”¨çš„åœºæ™¯å°±æ˜¯ç”¨æ¥æ‰“ç ´å¾ªç¯ä¾èµ–ï¼ˆ&lt;a href=&#34;https://en.wikipedia.org/wiki/Circular_dependency&#34;&gt;circular dependencies&lt;/a&gt;ï¼‰ã€‚æœ‰çš„æ—¶å€™ï¼Œä½ å°±é™·å…¥ A ä¾èµ– Bï¼ŒB åˆä¾èµ– A çš„æƒ…å†µï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UserManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;weak&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;commentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CommentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;userDidPostComment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;totalNumberOfComments&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;logOutCurrentUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logOut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clearCache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;CommentManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;weak&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;userManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UserManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;composer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;composer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CommentComposer&lt;/span&gt;
                  &lt;span class=&#34;n&#34;&gt;didPostComment&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;userManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userDidPostComment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;clearCache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code&gt;UserManager&lt;/code&gt; å’Œ &lt;code&gt;CommentManager&lt;/code&gt; ä¹‹é—´æœ‰ä¸€ä¸ªå¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œå®ƒä»¬äºŒè€…éƒ½æ²¡æ³•å‡è®¾è‡ªå·±æ‹¥æœ‰å¯¹æ–¹ï¼Œä½†æ˜¯å®ƒä»¬éƒ½åœ¨å„è‡ªçš„ä»£ç é€»è¾‘é‡Œä¾èµ–å½¼æ­¤ã€‚è¿™é‡Œå°±å¾ˆå®¹æ˜“äº§ç”Ÿ bugã€‚&lt;/p&gt;

&lt;p&gt;é‚£è¦è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª &lt;code&gt;CommentComposer&lt;/code&gt; æ¥åšä¸€ä¸ªåè°ƒè€…ï¼Œè´Ÿè´£é€šçŸ¥&lt;code&gt;UserManager&lt;/code&gt; å’Œ &lt;code&gt;CommentManager&lt;/code&gt;äºŒäººä¸€ä¸ªè¯„è®ºäº§ç”Ÿäº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;CommentComposer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;commentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CommentManager&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;userManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UserManager&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;lazy&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;textView&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UITextView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CommentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
         &lt;span class=&#34;n&#34;&gt;userManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UserManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;userManager&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;postComment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;comment&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;textView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;userManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userDidPostComment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é€šè¿‡è¿™ç§å½¢å¼ï¼ŒUserManager å¯ä»¥å¼ºæŒæœ‰ CommentManager ä¹Ÿä¸äº§ç”Ÿä»»ä½•ä¾èµ–å¾ªç¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UserManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;commentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CommentManager&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CommentManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;commentManager&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;userDidPostComment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Comment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;totalNumberOfComments&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬åˆä¸€æ¬¡çš„ç§»é™¤äº†æ‰€æœ‰çš„å¯é€‰ç±»å‹ï¼Œä»£ç ä¹Ÿæ›´å¥½é¢„æµ‹äº†ğŸ‰ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä¼˜é›…çš„å´©æºƒ-crashing-gracefully&#34;&gt;ä¼˜é›…çš„å´©æºƒï¼ˆCrashing gracefullyï¼‰&lt;/h3&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢å‡ ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ä»£ç åšä¸€äº›è°ƒæ•´ï¼Œç§»é™¤äº†å¯é€‰ç±»å‹ä»è€Œæ’é™¤äº†ä¸ç¡®å®šæ€§ã€‚ç„¶è€Œï¼Œæœ‰çš„æ—¶å€™ï¼Œç§»é™¤å¯é€‰ç±»å‹æ˜¯ä¸å¯èƒ½çš„ã€‚è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä½ åœ¨åŠ è½½ä¸€ä¸ªæœ¬åœ°çš„åŒ…å«é’ˆå¯¹ä½  App çš„é…ç½®é¡¹çš„ JSON æ–‡ä»¶ï¼Œè¿™ä¸ªæ“ä½œæœ¬èº«ä¸€å®šä¼šå­˜åœ¨å¤±è´¥çš„æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦æ·»åŠ é”™è¯¯å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;ç»§ç»­ä¸Šé¢è¿™ä¸ªåœºæ™¯ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥çš„æ—¶å€™ç»§ç»­æ‰§è¡Œä»£ç å°±ä¼šä½¿å¾—ä½ çš„ app è¿›å…¥ä¸€ä¸ªæœªçŸ¥çŠ¶æ€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½çš„æ–¹å¼è®©å®ƒå´©æºƒã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªå´©æºƒæ—¥å¿—ï¼Œå¸Œæœ›è¿™ä¸ªé—®é¢˜èƒ½å¤Ÿåœ¨ç”¨æˆ·æ„ŸçŸ¥ä¹‹å‰æ—©æ—©çš„è¢«æˆ‘ä»¬çš„æµ‹è¯•äººå‘˜ä»¥åŠ QA å¤„ç†æ‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘ä»¬å¦‚ä½•å´©æºƒã€‚ã€‚ã€‚æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯æ·»åŠ  &lt;code&gt;!&lt;/code&gt; æ“ä½œç¬¦ï¼Œé’ˆå¯¹è¿™ä¸ªå¯é€‰å€¼å¼ºåˆ¶è§£åŒ…ï¼Œå°±ä¼šåœ¨å…¶æ˜¯ nil çš„æ—¶å€™å‘ç”Ÿå´©æºƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;configuration&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loadConfiguration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è™½ç„¶è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å®ƒæœ‰ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€æ—¦è¿™æ®µä»£ç å´©æºƒï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°çš„åªæœ‰ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;fatal error: unexpectedly found nil while unwrapping an Optional value&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿™ä¸ªé”™è¯¯ä¿¡æ¯å¹¶ä¸å‘Šè¯‰æˆ‘ä»¬ä¸ºä»€ä¹ˆå‘ç”Ÿè¿™ä¸ªé”™è¯¯ï¼Œåœ¨å“ªé‡Œå‘ç”Ÿçš„ï¼Œç»™ä¸äº†æˆ‘ä»¬ä»€ä¹ˆçº¿ç´¢æ¥è§£å†³å®ƒã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ guard å…³é”®å­—ï¼Œç»“åˆ &lt;code&gt;preconditionFailure()&lt;/code&gt; å‡½æ•°ï¼Œåœ¨ç¨‹åºé€€å‡ºçš„æ—¶å€™ç»™å‡ºå®šåˆ¶æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;k&#34;&gt;guard&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;configuration&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loadConfiguration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;preconditionFailure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Configuration couldn&amp;#39;t be loaded. &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;
                        &lt;span class=&#34;s&#34;&gt;&amp;#34;Verify that Config.JSON is valid.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸Šé¢è¿™æ®µä»£ç å‘ç”Ÿå´©æºƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±èƒ½è·å¾—æ›´å¤šæ›´æœ‰æ•ˆçš„é”™è¯¯ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;fatal error: Configuration couldnâ€™t be loaded. Verify that Config.JSON is valid.: file /Users/John/AmazingApp/Sources/AppDelegate.swift, line 17&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿™æ ·ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªæ›´æ¸…æ™°çš„è§£å†³é—®é¢˜çš„åŠæ³•ï¼Œèƒ½å¤Ÿå‡†ç¡®çš„çŸ¥é“è¿™ä¸ªé—®é¢˜åœ¨æˆ‘ä»¬ä»£ç é‡Œçš„å“ªä¸ªæœªçŸ¥å‘ç”Ÿçš„ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å¼•å…¥-require-åº“&#34;&gt;å¼•å…¥ Require åº“&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨ä¸Šé¢çš„ guard-let-preconditionFailure çš„æ–¹æ¡ˆè¿˜æ˜¯æœ‰ä¸€äº›å†—é•¿ï¼Œç¡®å®è®©æˆ‘ä»¬å‘ƒä»£ç æ›´éš¾é©¾é©­ã€‚æˆ‘ä»¬ä¹Ÿç¡®å®ä¸å¸Œæœ›åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œå å¾ˆå¤šç¯‡å¹…å»äº›è¿™ç§ä»£ç ï¼Œæˆ‘ä»¬æƒ³æ›´ä¸“æ³¨äºæˆ‘ä»¬çš„ä»£ç é€»è¾‘ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨ &lt;code&gt;Require&lt;/code&gt;ã€‚å®ƒåªæ˜¯ç®€å•çš„åœ¨å¯é€‰å€¼æ·»åŠ ç®€å•çš„ &lt;code&gt;require()&lt;/code&gt; æ–¹æ³•ï¼Œä½†èƒ½å¤Ÿä½¿å¾—è°ƒç”¨çš„åœ°æ–¹æ›´ç®€æ´ã€‚ç”¨è¿™ç§æ–¹æ³•æ¥å¤„ç†ä¸Šé¢åŠ è½½ &lt;code&gt;JSON&lt;/code&gt; æ–‡ä»¶çš„ä»£ç å°±å¯ä»¥è¿™æ ·å†™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;configuration&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loadConfiguration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Verify that Config.JSON is valid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œä¼šç»™å‡ºä¸‹é¢çš„é”™è¯¯ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;fatal error: Required value was nil. Debugging hint: Verify that Config.JSON is valid: file /Users/John/AmazingApp/Sources/AppDelegate.swift, line 17&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;Require&lt;/code&gt; çš„å¦ä¸€ä¸ªä¼˜åŠ¿å°±æ˜¯å®ƒå’Œè°ƒç”¨ &lt;code&gt;preconditionFailure()&lt;/code&gt; æ–¹æ³•ä¸€æ ·ä¹Ÿä¼šæŠ›å¼‚å¸¸ &lt;code&gt;NSException&lt;/code&gt;ï¼Œå°±èƒ½ä½¿å¾—é‚£äº›å¼‚å¸¸ä¸ŠæŠ¥å·¥å…·èƒ½å¤Ÿæ•è·å¼‚å¸¸å‘ç”Ÿæ—¶å€™çš„å…ƒæ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;ä½ å¦‚æœæƒ³åœ¨è‡ªå·±ä»£ç ä¸­ä½¿ç”¨çš„è¯ï¼Œ&lt;a href=&#34;https://github.com/JohnSundell/Require.git&#34;&gt;Require ç°åœ¨åœ¨ Github ä¸Šå¼€æºäº†&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæ€»ç»“æ¥çœ‹ï¼Œåœ¨ &lt;code&gt;Swift&lt;/code&gt; è¯­è¨€é‡Œå¤„ç†é‚£äº›éå¯é€‰çš„å¯é€‰å€¼ï¼Œæˆ‘æœ‰å‡ ç‚¹è‡ªå·±çš„è´´å¿ƒå°æç¤ºç»™å¤§å®¶ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;lazy&lt;/code&gt; å±æ€§è¦æ¯”éå¯é€‰çš„å¯é€‰å€¼è¦æ›´å¥½&lt;/li&gt;
&lt;li&gt;é€‚å½“çš„ä¾èµ–ç®¡ç†è¦æ¯”éå¯é€‰çš„å¯é€‰å€¼è¦å¥½&lt;/li&gt;
&lt;li&gt;å½“ä½ ä½¿ç”¨éå¯é€‰çš„å¯é€‰å€¼çš„æ—¶å€™ï¼Œä¼˜é›…çš„å´©æºƒ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦‚æœæœ‰ä»»ä½•é—®é¢˜ã€å»ºè®®æˆ–è€…åé¦ˆï¼Œéƒ½æ¬¢è¿éšæ—¶åœ¨ &lt;a href=&#34;https://twitter.com/johnsundell&#34;&gt;Twitter&lt;/a&gt; ä¸Šè”ç³»æˆ‘ï¼Œæˆ‘éå¸¸ä¹æ„å¬åˆ°ä½ ä»¬å¸Œæœ›æˆ‘åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« é‡Œè°ˆè®ºå“ªäº›ä¸»é¢˜å“¦ã€‚&lt;/p&gt;

&lt;p&gt;è°¢è°¢é˜…è¯»ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ç†è§£å“åº”è€…å’Œå“åº”é“¾</title>
      <link>https://hechen.xyz/post/understanding-responders-and-the-responder-chain/</link>
      <pubDate>Mon, 13 Nov 2017 21:22:44 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/understanding-responders-and-the-responder-chain/</guid>
      
        <description>

&lt;p&gt;Apps æ˜¯é€šè¿‡å“åº”è€…ï¼ˆresponderï¼‰å¯¹è±¡æ¥æ¥æ”¶å’Œå¤„ç†äº‹ä»¶çš„ã€‚ä¸€ä¸ªå“åº”è€…å¯¹è±¡æ˜¯ UIResponder ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬å¸¸è§çš„ UIViewï¼ŒUIViewController ä»¥åŠ UIApplication éƒ½æ˜¯ UIResponder çš„å­ç±»ã€‚ UIKit è‡ªåŠ¨å¸®ä½ ç®¡ç†ç€è¿™äº› responder ç›¸å…³çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬äº‹ä»¶æ˜¯å¦‚ä½•ä»ä¸€ä¸ª responder ä¼ é€’ç»™å¦ä¸€ä¸ª responder çš„ç­‰ç­‰ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ä½ çš„ app ä¸­äº‹ä»¶ä¼ é€’çš„é»˜è®¤è¡Œä¸ºã€‚&lt;/p&gt;

&lt;p&gt;UIKit ä¼šæŠŠå¤§éƒ¨åˆ†çš„äº‹ä»¶éƒ½ä¼ é€’ç»™æœ€é€‚åˆçš„ responder å¯¹è±¡æ¥å¤„ç†ã€‚å¦‚æœè¯¥ responder æ— æ³•å¤„ç†è¯¥äº‹ä»¶ï¼ŒUIKit å°±ä¼šç»§ç»­æŠŠè¯¥äº‹ä»¶æ²¿ç€å½“å‰çš„å“åº”è€…é“¾ä¼ é€’åˆ°ä¸‹ä¸€ä¸ª responderã€‚å“åº”è€…é“¾å°±æ˜¯ä½ çš„ App ä¸­æ‰€æœ‰å“åº”è€…çš„åŠ¨æ€é…ç½®ï¼Œä¹Ÿå› ä¸ºå…¶æ˜¯åŠ¨æ€çš„ï¼Œä½ çš„ App ä¸­ä¸å¯èƒ½åªå­˜åœ¨å•ä¸€çš„å“åº”è€…é“¾ã€‚ç”±äºäº‹ä»¶æ€»æ˜¯ä»ç‰¹å®šçš„å“åº”è€…é‚£é‡Œæµè½¬åˆ°æ›´é€šç”¨çš„å“åº”è€…é‚£é‡Œï¼Œå› æ­¤å¾ˆå®¹æ˜“ç¡®å®šæŸå“åº”è€…é“¾ä¸­ä¸‹ä¸€ä¸ªå“åº”è€…æ˜¯è°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ª view çš„ä¸‹ä¸€ä¸ªå“åº”è€…æ˜¯å…¶ superview æˆ–è€…è´Ÿè´£ç®¡ç†å®ƒçš„ view controllerã€‚äº‹ä»¶å°±æ˜¯è¿™æ ·åœ¨å“åº”è€…é“¾ä¸­ä¼ é€’ç›´åˆ°å…¶è¢«å¤„ç†æ‰ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹å›¾1 è¡¨æ˜ä¸€ä¸ªç•Œé¢ä¸­åŒ…å«äº† ä¸€ä¸ª Labelï¼Œä¸€ä¸ª text fieldï¼Œä¸€ä¸ª button ä»¥åŠä¸¤ä¸ª background view çš„ App ä¸­å“åº”é“¾æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚å¦‚æœ text field ä¸å¤„ç†æŸä¸ªäº‹ä»¶ï¼ŒUIKit å°±ä¼šæŠŠè¯¥äº‹ä»¶å‘é€ç»™ text field çš„çˆ¶çº§ UIView å¯¹è±¡ï¼ŒåŒæ ·çš„ï¼Œå¦‚æœè¯¥å¯¹è±¡ä¾ç„¶å¤„ç†ä¸äº†ï¼Œå°±ä¼šä¼ é€’ç»™è¯¥ view å¯¹è±¡çš„ windowã€‚å¦‚æœ window å¯¹è±¡ä¹Ÿä¾ç„¶æ— æ³•å¤„ç†è¯¥äº‹ä»¶ï¼ŒUIKit æœ€ç»ˆä¼šæŠŠè¯¥äº‹ä»¶ä¼ é€’ç»™ UIApplication å¯¹è±¡ï¼Œä¸€èˆ¬ä¸Šè¯¥ UIApplication å¯¹è±¡æ˜¯ App çš„ delegate å¯¹è±¡å¹¶ä¸”æ˜¯ UIResponder å®ä¾‹ï¼Œå½“ç„¶è¿™ä¸ªæ—¶å€™å·²ç»è„±ç¦»äº†å“åº”è€…é“¾äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://ws4.sinaimg.cn/large/006tKfTcly1flgs9djns2j30zp0lyac6.jpg&#34; alt=&#34;å›¾1 - ä¸€ä¸ªå“åº”è€…é“¾çš„ä¾‹å­&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é’ˆå¯¹æ¯ä¸€ä¸ªäº‹ä»¶ï¼ŒUIKit éƒ½ä¼šæŒ‡å®šä¸€ä¸ªç¬¬ä¸€å“åº”è€…ï¼ˆfirst responderï¼‰ï¼Œç„¶åæŠŠè¯¥äº‹ä»¶é¦–å…ˆå‘é€ç»™å¯¹è±¡å¤„ç†ã€‚è¿™ä¸ªç¬¬ä¸€å“åº”è€…åŸºäºäº‹ä»¶ç±»å‹è€Œä¸åŒã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Touch events.&lt;/strong&gt; ç¬¬ä¸€å“åº”è€…æ˜¯ Touch å‘ç”Ÿæ‰€åœ¨çš„ viewã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Press events.&lt;/strong&gt; ç¬¬ä¸€å“åº”è€…æ˜¯å½“å‰ç„¦ç‚¹æ‰€åœ¨çš„å“åº”è€…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Motion event.&lt;/strong&gt; ç¬¬ä¸€å“åº”è€…æ˜¯ä½ æ˜¾å¼æŒ‡å®šç”¨ä»¥å¤„ç†äº‹ä»¶çš„å¯¹è±¡ã€‚ Core Motion å¤„ç†æ‰€æœ‰çš„å’ŒåŠ é€Ÿå™¨ã€æ°”å‹ä»ªä»¥åŠç£åŠ›è®¡ç›¸å…³çš„äº‹ä»¶ã€‚Motion events ä¸éšå“åº”è€…é“¾æµåŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shake-motion events.&lt;/strong&gt; ç¬¬ä¸€å“åº”è€…æ˜¯ä½ æˆ–è€… UIKit æ¡†æ¶æŒ‡å®šçš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Remote-control events.&lt;/strong&gt; ç¬¬ä¸€å“åº”è€…æ˜¯ä½ æˆ–è€… UIKit æ¡†æ¶æŒ‡å®šçš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Editing-menu messages.&lt;/strong&gt; ç¬¬ä¸€å“åº”è€…æ˜¯ä½ æˆ–è€… UIKit æ¡†æ¶æŒ‡å®šçš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Controls å‘å…¶å…³è”çš„å¯¹è±¡å‘é€åŠ¨ä½œæ¶ˆæ¯æœ¬èº«ä¸æ˜¯äº‹ä»¶ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿäº«å—åˆ°å“åº”è€…é“¾çš„å¥½å¤„ã€‚å½“ä¸€ä¸ª Control çš„ target object æ˜¯ nil çš„æ—¶å€™ï¼ŒUIKit å°±ä¼šåœ¨è¯¥ target object çš„å“åº”è€…é“¾ä¸Šå¯»æ‰¾åˆé€‚çš„å¯¹è±¡ç”¨ä»¥å¦¥å–„å¤„ç†åŠ¨ä½œæ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼ŒUIKit ç¼–è¾‘æŒ‰é’®ä½¿ç”¨è¿™ç§è¡Œä¸ºæ¥å¯»æ‰¾å“åº”è€…å¯¹è±¡æ¥æ‰§è¡Œ&lt;code&gt;cut:&lt;/code&gt;, &lt;code&gt;copy:&lt;/code&gt; æˆ–è€… &lt;code&gt;paste:&lt;/code&gt; ç­‰æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸€ä¸ª view è‡ªèº«è¿˜æœ‰é™„åŠ çš„æ‰‹åŠ¿è¯†åˆ«å™¨çš„è¯ï¼Œè¯¥æ‰‹åŠ¿è¯†åˆ«å™¨ä¼šå»¶è¿Ÿé’ˆå¯¹è¯¥ view çš„ touch å’Œ press äº‹ä»¶çš„ä¼ é€’ã€‚&lt;code&gt;delaysTouchesBegan&lt;/code&gt;, &lt;code&gt;delaysTouchesEnded&lt;/code&gt; ä»¥åŠ &lt;code&gt;UIGestureRecognizer&lt;/code&gt; çš„ &lt;code&gt;cancelsTouchesInView&lt;/code&gt; å±æ€§éƒ½æ˜¯ç”¨æ¥å†³å®šè¿™äº› touches ä»€ä¹ˆæ—¶é—´ä»¥åŠä»¥ä»€ä¹ˆæ–¹å¼è¢«å»¶è¿Ÿå¤„ç†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è¯†åˆ«åŒ…å«-touch-äº‹ä»¶çš„å“åº”è€…&#34;&gt;è¯†åˆ«åŒ…å« Touch äº‹ä»¶çš„å“åº”è€…&lt;/h2&gt;

&lt;p&gt;UIKit ä½¿ç”¨åŸºäºè§†å›¾çš„ç¢°æ’æ£€æµ‹ï¼ˆhit-testingï¼‰æ¥å†³å®š touch äº‹ä»¶å‘ç”Ÿçš„åœ°ç‚¹ã€‚å…·ä½“è€Œè¨€ï¼ŒUIKit  æ‹¿è¯¥ touch çš„ä½ç½®å’Œè§†å›¾å±‚çº§ä¸­æ‰€æœ‰çš„è§†å›¾å¯¹è±¡çš„ bounds è¿›è¡Œæ¯”è¾ƒã€‚UIView çš„ &lt;code&gt;hitTest:withEvent:&lt;/code&gt; æ–¹æ³•ä¼šæ¸¸å†æ•´ä¸ªè§†å›¾å±‚çº§ï¼Œæ‰¾åˆ°è¯¥ touch äº‹ä»¶å‘ç”Ÿæ‰€åœ¨çš„è§†å›¾æ ‘æœ€åº•ç«¯çš„è§†å›¾ï¼Œå…¶ä¹Ÿå°±æ˜¯å¤„ç†è¯¥ touch äº‹ä»¶çš„ç¬¬ä¸€å“åº”è€…ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ª touch çš„ä½ç½®å‘ç”Ÿåœ¨æŸä¸ªè§†å›¾çš„å¤–å›´ï¼Œ&lt;code&gt;hitTest:withEvent:&lt;/code&gt;æ–¹æ³•å°±ä¼šå¿½ç•¥è¯¥è§†å›¾å’Œå…¶æ‰€æœ‰å­è§†å›¾ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å°† view çš„&lt;code&gt;clipsToBounds&lt;/code&gt;å±æ€§è®¾ç½®ä¸º NO çš„åŒ–ï¼Œå³ä½¿å…¶å­è§†å›¾å°†è¯¥ touch åŒ…å«åœ¨è‡ªå·±é¢†åŸŸä¹Ÿæ˜¯æ— æ•ˆçš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å°±è¿™æ ·ï¼ŒUIKit æŒç»­ä¸æ–­çš„æŠŠæ¯ä¸ª touch æŒ‡æ´¾ç»™åŒ…å«è¯¥ touch çš„è§†å›¾ã€‚å½“ touch å‘ç”Ÿçš„æ—¶å€™ï¼ŒUIKit åˆ›å»ºä¸€ä¸ª &lt;code&gt;UITouch&lt;/code&gt; å¯¹è±¡ï¼Œç›´åˆ° touch ç»“æŸè¯¥å¯¹è±¡æ‰ä¼šè¢«é‡Šæ”¾ã€‚å½“ touch ä½ç½®æˆ–è€…å…¶ä»–å‚æ•°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼ŒUIKit å°±æ›´æ–°è¿™ä¸ª UITouch å¯¹è±¡çš„ä¿¡æ¯ã€‚å½“ç„¶ï¼Œå…¶ä¸­æœ‰çš„å±æ€§å½“ç„¶æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ¯”å¦‚è¯¥ touch é™„å±çš„ viewï¼Œç”šè‡³å½“ touch ä½ç½®å·²ç»è¶…å‡ºåŸå§‹ view çš„å¤–å›´çš„æ—¶å€™ï¼ŒUITouch å¯¹è±¡ä¸­çš„ view å±æ€§ä¾ç„¶ä¿æŒå’Œä¹‹å‰ä¸€æ ·ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å˜æ›´å“åº”è€…é“¾&#34;&gt;å˜æ›´å“åº”è€…é“¾&lt;/h2&gt;

&lt;p&gt;ä½ å¯ä»¥é€šè¿‡è¦†å†™å“åº”è€…çš„ nextResponder å±æ€§æ¥æ”¹å˜å“åº”è€…é“¾ã€‚è®¸å¤š UIKit çš„ç±»å·²ç»è¦†å†™äº†è¯¥æ–¹æ³•å¹¶ä¸”è¿”å›äº†ç‰¹å®šçš„å¯¹è±¡ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å¦‚æœä½ è¦†å†™äº†ä»»æ„ç±»çš„ &lt;code&gt;nextResponder&lt;/code&gt; å±æ€§ï¼Œé‚£è¯¥å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå“åº”è€…å°±æ˜¯ä½ è¿”å›çš„é‚£ä¸ªï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIView&lt;/code&gt;
2.1 å¦‚æœè¯¥è§†å›¾æ˜¯æŸä¸ªè§†å›¾æ§åˆ¶å™¨çš„æ ¹è§†å›¾ï¼ˆroot viewï¼‰ï¼Œå…¶ä¸‹ä¸€ä¸ªå“åº”è€…å°±æ˜¯è¯¥è§†å›¾æ§åˆ¶å™¨ï¼›
2.2 å¦‚æœè¯¥è§†å›¾ä¸æ˜¯æŸä¸ªè§†å›¾æ§åˆ¶å™¨çš„æ ¹è§†å›¾ï¼Œå…¶ä¸‹ä¸€ä¸ªå“åº”è€…å°±æ˜¯è¯¥è§†å›¾çš„çˆ¶è§†å›¾ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIViewController&lt;/code&gt;
3.1 å¦‚æœè¯¥è§†å›¾æ§åˆ¶å™¨çš„è§†å›¾æ˜¯æŸä¸ª window çš„æ ¹è§†å›¾ï¼ˆroot viewï¼‰ï¼Œå…¶ä¸‹ä¸€ä¸ªå“åº”è€…å°±æ˜¯ windowï¼›
3.2 å¦‚æœè¯¥è§†å›¾æ§åˆ¶å™¨æ˜¯ç”±å¦ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨å±•ç¤ºå‡ºæ¥çš„ï¼Œå…¶ä¸‹ä¸€ä¸ªå“åº”è€…å°±æ˜¯é‚£ä¸ªè§†å›¾æ§åˆ¶å™¨ï¼ˆpresenting view controllerï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIWindow&lt;/code&gt;  window çš„ä¸‹ä¸€ä¸ªå“åº”è€…å°±æ˜¯ &lt;code&gt;UIApplication&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UIApplication&lt;/code&gt;  UIApplication å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå“åº”è€…æ˜¯ App delegateï¼Œè€Œä¸”è¦æ±‚è¯¥ delegate å¿…é¡»æ˜¯ &lt;code&gt;UIRepsponder&lt;/code&gt; çš„å®ä¾‹å¹¶ä¸”ä¸èƒ½æ˜¯ä¸€ä¸ªè§†å›¾ã€è§†å›¾æ§åˆ¶å™¨æˆ–è€… &lt;code&gt;UIApplication&lt;/code&gt; å¯¹è±¡è‡ªå·±ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>Capturing objects in Swift closures</title>
      <link>https://hechen.xyz/post/capturing-objects-in-swift-closures/</link>
      <pubDate>Sun, 12 Nov 2017 20:56:50 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/capturing-objects-in-swift-closures/</guid>
      
        <description>

&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡ï¼š&lt;a href=&#34;https://www.swiftbysundell.com/posts/capturing-objects-in-swift-closures&#34;&gt;Capturing objects in Swift closures&lt;/a&gt;
åŸä½œè€… &lt;a href=&#34;https://twitter.com/johnsundell&#34;&gt;@johnsundell&lt;/a&gt;
ç¿»è¯‘ï¼š&lt;a href=&#34;https://twitter.com/OgreMergO&#34;&gt;@OgreMergO&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è‡ªä» Block åœ¨ iOS4 è¢«å¼•å…¥ Objective-C çš„ä¸–ç•Œä¹‹åå°±æˆä¸ºäº† Apple å„å¹³å°ä¸Šæœ€æ—¶é«¦çš„ API çš„é‡è¦ç»„æˆéƒ¨åˆ†äº†ã€‚å½“ Swift è¯­è¨€å‡ºç°çš„æ—¶å€™ï¼Œblocks çš„æ¦‚å¿µå°±æ‘‡èº«ä¸€å˜é€šè¿‡ closure çš„å½¢å¼å¼•å…¥ï¼Œæˆä¸ºäº†ç›®å‰æˆ‘ä»¬å¯èƒ½æ¯ä¸€å¤©éƒ½åœ¨ç”¨çš„è¯­è¨€ç‰¹æ€§ä¹‹ä¸€äº†ã€‚&lt;/p&gt;

&lt;p&gt;Closure ç›®å‰å·²ç»è¢«æˆ‘ä»¬å¹¿æ³›çš„ä½¿ç”¨äº†ï¼Œå³ä½¿å¦‚æ­¤ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™è¿˜æ˜¯éœ€è¦æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œå¹¶ä¸”éœ€è¦åšå¾ˆå¤šé¢å¤–çš„æ“ä½œã€‚è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ¥è¿‘è·ç¦»çš„äº†è§£ closureï¼Œä¸»è¦æ˜¯äº†è§£å…¶æ•è·å˜é‡çš„æœºåˆ¶ä»¥åŠé‚£äº›èƒ½å¤Ÿæ›´å¥½çš„è®©æˆ‘ä»¬æ¥å¤„ç†å˜é‡æ•è·çš„æŠ€æœ¯ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¼Ÿå¤§çš„-escape&#34;&gt;ä¼Ÿå¤§çš„ escape&lt;/h2&gt;

&lt;p&gt;Closure æœ‰ä¸¤ç§ç±»å‹ï¼šescaping å’Œ non-escapingã€‚å½“ä¸€ä¸ª closure æ˜¯ escapingï¼ˆä½¿ç”¨ &lt;code&gt;@escaping&lt;/code&gt; ä¿®é¥°é—­åŒ…å‚æ•°ï¼‰çš„ï¼Œä¹Ÿå°±æ„å‘³ç€å…¶ä¼šè¢«ä»¥å„ç§å½¢å¼å­˜å‚¨ä¸‹æ¥ï¼ˆæ— è®ºæ˜¯é€šè¿‡ property è¿˜æ˜¯è¢«å…¶ä»– closure æ•è·ï¼‰ã€‚ç›¸åï¼ŒNon-Escaping çš„ã€€closure æ„å‘³ç€å…¶ä¸èƒ½è¢«å­˜å‚¨ï¼Œè€Œä¸”åœ¨ä½¿ç”¨å®ƒçš„åœ°æ–¹å°±å¿…é¡»ç›´æ¥è¢«æ‰§è¡Œã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼š å¯ä»¥å‚è§ &lt;a href=&#34;http://hechen.info/2017/11/12/autoclosure-escape/&#34;&gt;ã€Š@autoclosure &amp;amp;&amp;amp; @escapeã€‹&lt;/a&gt; ä¸€æ–‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„ä¾‹å­å°±æ˜¯å½“ä½ åœ¨ä¸€ä¸ªé›†åˆç±»å‹ä¸Šä½¿ç”¨å‡½æ•°å¼æ“ä½œçš„æ—¶å€™ï¼Œä¾‹å¦‚ &lt;code&gt;forEach&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;[1, 2, 3].forEach { number in
    ...
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œclosure éƒ½ç›´æ¥ä½œç”¨äºé›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œä¹Ÿå°±æ— éœ€æŠŠè¯¥é—­åŒ…å˜ä¸º escaping çš„ã€‚&lt;/p&gt;

&lt;p&gt;è€Œ escaping çš„ closures æœ€å¸¸è§çš„å°±æ˜¯åœ¨é‚£äº›å¼‚æ­¥ API ä¸­ï¼Œä¾‹å¦‚ &lt;code&gt;DispatchQueue&lt;/code&gt;ã€‚ä¾‹å¦‚ï¼Œå½“ä½ å¼‚æ­¥æ‰§è¡ŒæŸ closure çš„æ—¶å€™ï¼Œè¿™ä¸ª closure å°±ä¼š escapeã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;DispatchQueue.main.async {
    ...
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œè¿™ä¸¤ç§çš„åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿ ç”±äº escaping çš„ closure ä¼šè¢«ä»¥æŸç§å½¢å¼å­˜å‚¨ä¸‹æ¥ï¼Œå› æ­¤ï¼Œè¿™äº› closure ä¼šåŒæ—¶å­˜å‚¨å½“å‰å…¶æ‰€å¤„çš„ä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶å°±ä¼šæŠŠä¸Šä¸‹æ–‡ä¸­ç”¨åˆ°çš„å€¼æˆ–è€…å¯¹è±¡éƒ½æ•è·ï¼ˆcaptureï¼‰åˆ°ï¼Œä»¥è‡³äºå½“è¯¥ closure è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰€éœ€ç”¨åˆ°çš„å†…å®¹æ²¡æœ‰ä¸¢å¤±ã€‚å®è·µä¸­æœ€å¸¸è§çš„å°±æ˜¯åœ¨ closure ä¸­ä½¿ç”¨ self çš„ APIï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦æŸç§åŠæ³•æ˜¾å¼çš„æ•è· selfã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ•è·-å¼•ç”¨å¾ªç¯&#34;&gt;æ•è· &amp;amp; å¼•ç”¨å¾ªç¯&lt;/h2&gt;

&lt;p&gt;å› ä¸º escaping çš„ closures ä¼šè‡ªåŠ©æ•è·åœ¨å…¶å†…éƒ¨ä½¿ç”¨çš„ä»»ä½•å€¼å’Œå¯¹è±¡ï¼Œå› æ­¤å¾ˆå®¹æ˜“å‘ç”Ÿå¼•ç”¨å¾ªç¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢æè¿°çš„æ˜¯ä¸€ä¸ª view controller è¢«å…¶å­˜å‚¨çš„ viewModel çš„ closure æ•è·çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class ListViewController: UITableViewController {
    private let viewModel: ListViewModel

    init(viewModel: ListViewModel) {
        self.viewModel = viewModel

        super.init(nibName: nil, bundle: nil)

        viewModel.observeNumberOfItemsChanged {
            // This will cause a retain cycle, since our view controller
            // retains its view model, which in turn retains the view
            // controller by capturing it in an escaping closure.
            self.tableView.reloadData()
        }
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æœ€å¸¸è§çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä½ ä»¬å¤§éƒ¨åˆ†äººä¹Ÿéƒ½ä¼šç”¨çš„è§£å†³æ–¹å¼ï¼Œé€šè¿‡å¼±å¼•ç”¨çš„æ–¹å¼æ‰“ç ´è¿™ä¸ªå¾ªç¯å¼•ç”¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;viewModel.observeNumberOfItemsChanged { [weak self] in
    self?.tableView.reloadData()
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;æ•è·-context-è€Œä¸æ˜¯æ•è·-self&#34;&gt;æ•è· context è€Œä¸æ˜¯æ•è· self&lt;/h2&gt;

&lt;p&gt;ä¸Šé¢æåˆ°çš„ [weak self] çš„è§£å†³æ–¹æ¡ˆå·²ç»æ˜¯ä½ å¸Œæœ›é¿å…å¼•ç”¨å¾ªç¯çš„æœ€å¸¸ç”¨ï¼Œä¹Ÿå¸¸å¸¸æ˜¯æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆäº†ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿæœ‰ä¸€äº›é—®é¢˜ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å¾ˆå®¹æ˜“å¿˜æ‰å†™ï¼Œå°¤å…¶æ˜¯ç¼–è¯‘å™¨åˆæ²¡æ£€æŸ¥å‡ºæ¥æ½œåœ¨çš„å¼•ç”¨å¾ªç¯çš„æ—¶å€™ï¼›&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å½“ä½ å¸Œæœ›ä» weak self ä¸­å¼ºæŒæœ‰ self çš„æ—¶å€™è¿˜éœ€è¦å†™ä¸€å †ä»£ç ï¼ˆweak strong danceï¼‰ï¼Œä¾‹å¦‚ä¸‹é¢è¿™æ®µä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;dataLoader.loadData(from: url) { [weak self] data in
guard let strongSelf = self else {
    return
}

let model = try strongSelf.parser.parse(data, using: strongSelf.schema)
strongSelf.titleLabel.text = model.title
strongSelf.textLabel.text = model.text
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªå¯é€‰çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ä¸è¦æ•è· selfï¼Œè€Œå»æ•è·é‚£äº›é—­åŒ…ä¸­æ‰€éœ€è¦çš„å¯¹è±¡å³å¯ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ labels å’Œ schema ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ•è·å®ƒä»¬è€Œä¸è‡³äºå¼•å‘å¼•ç”¨å¾ªç¯ï¼ˆå› ä¸ºå…¶ä¹Ÿå¹¶ä¸æŒæœ‰ closure æœ¬èº«ï¼‰ï¼Œä¸‹é¢æ˜¯ä¸ªè§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ä½¿ç”¨ context çš„ tuple æ¥è§£å†³ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;// We define a context tuple that contains all of our closure&amp;#39;s dependencies
let context = (
    parser: parser,
    schema: schema,
    titleLabel: titleLabel,
    textLabel: textLabel
)

dataLoader.loadData(from: url) { data in
    // We can now use the context instead of having to capture &amp;#39;self&amp;#39;
    let model = try context.parser.parse(data, using: context.schema)
    context.titleLabel.text = model.title
    context.textLabel.text = model.text
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;é€šè¿‡æ˜¾å¼ä¼ é€’å‚æ•°è€Œä¸æ˜¯éšå¼çš„æ•è·&#34;&gt;é€šè¿‡æ˜¾å¼ä¼ é€’å‚æ•°è€Œä¸æ˜¯éšå¼çš„æ•è·&lt;/h2&gt;

&lt;p&gt;è¿™é‡Œï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ•è·å¯¹è±¡çš„æ–¹å¼ï¼Œå°±æ˜¯æ˜¾å¼çš„æŠŠè¿™äº›å¯¹è±¡é€šè¿‡å‚æ•°ä¼ å…¥ã€‚è¿™ç§æ‰‹æ³•æˆ‘åœ¨è®¾è®¡æˆ‘çš„ [Image Engine]() é¡¹ç›®ä¸­çš„ Event API çš„æ—¶å€™ç”¨åˆ°äº†ï¼Œè¿™ä¸ª API å°±æ˜¯å½“ä½¿ç”¨ closure æ¥ç›‘å¬ event çš„æ—¶å€™ï¼Œéœ€è¦ä½ ä¼ é€’ä¸€ä¸ª observer ç»™å®ƒã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œä½ æŠŠ self ä¼ å…¥è¿›æ¥çš„åŒæ—¶ä¹Ÿä½¿å¾—å…¶è¢«ä¼ é€’åˆ°äº† event çš„ closure ä¸­äº†ï¼Œè¿™ä¹Ÿä½¿å¾— self è¢«éšå¼çš„å¸¦å…¥ï¼Œä½ ä¹Ÿæ— éœ€æ‰‹åŠ¨çš„æ•è·å®ƒäº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;actor.events.moved.addObserver(self) { scene in
    ...
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å›åˆ°ä¹‹å‰çš„ ListViewController çš„ä¾‹å­ä¸­ï¼Œçœ‹ä¸€çœ‹å½“æˆ‘ä»¬è¦ç›‘å¬å…¶ viewModel çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•é€šè¿‡ä¸Šé¢è¿™ç§æ‰‹æ³•æ¥å®ç°åŒæ ·çš„ API çš„ã€‚è¿™ç§æ–¹å¼æ­£å¥½ä½¿å¾—æˆ‘ä»¬å¯ä»¥å°†è¦ reload çš„ tableView ä½œä¸ºè§‚æµ‹è€…ä¼ é€’ï¼Œå®ç°ä¸€ä¸ªå¾ˆä¼˜é›…çš„è°ƒç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;viewModel.numberOfItemsChanged.addObserver(tableView) { tableView in
    tableView.reloadData()
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“ç„¶ï¼Œéœ€è¦å®ç°ä¸Šé¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›äº‹æƒ…ï¼Œå°±åƒ Image Engine çš„äº‹ä»¶ç³»ç»Ÿå¦‚ä½•å·¥ä½œç±»ä¼¼ã€‚æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„ Event ç±»å‹ï¼Œå…¶å¯ä»¥è®°å½•é‚£äº›è§‚æµ‹é—­åŒ…ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class Event {
    private var observers = [() -&amp;gt; Void]()
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šä¼ ä¸¤ä¸ªå‚æ•°è¿›æ¥ï¼Œä¸€ä¸ªæ˜¯å¼•ç”¨ç±»å‹çš„è§‚æµ‹è€…ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå½“è§‚å¯ŸåŠ¨ä½œä¸€æ—¦è§¦å‘ï¼Œè¯¥é—­åŒ…å°±ä¼šè¢«è°ƒç”¨ã€‚æ ¸å¿ƒå°±åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¼šå°è£…è¯¥é—­åŒ…ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨é—­åŒ…ä¸­å¼±æ•è·è¯¥è§‚æµ‹è€…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;func addObserver&amp;lt;T: AnyObject&amp;gt;(_ observer: T, using closure: @escaping (T) -&amp;gt; Void) {
    observers.append { [weak observer] in
        observer.map(closure)
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ ·å°±ä½¿å¾—æˆ‘ä»¬åªéœ€è¦åšè¿™ä¹ˆä¸€æ¬¡ weak/string çš„æ“ä½œï¼Œä¹Ÿä¸å½±å“å…¶è°ƒç”¨çš„åœ°æ–¹ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ª trigger æ–¹æ³•æ¥ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿè§¦å‘äº‹ä»¶æœ¬èº«ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;func trigger() {
    for observer in observers {
        observer()
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åå›åˆ° &lt;code&gt;ListViewModel&lt;/code&gt;ï¼Œä¸º &lt;code&gt;numberOfItemsChanged&lt;/code&gt; æ–¹æ³•æ·»åŠ äº‹ä»¶ï¼Œå½“æŸä¸ªæ¡ä»¶æ»¡è¶³çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;class ListViewModel {
    let numberOfItemsChanged = Event()
    var items: [Item] { didSet { itemsDidChange(from: oldValue) } }

    private func itemsDidChange(from previousItems: [Item]) {
        if previousItems.count != items.count {
            numberOfItemsChanged.trigger()
        }
    }
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šé¢æ‰€çœ‹åˆ°çš„ï¼ŒåŸºäº event çš„ API çš„æœ€å¤§ä¼˜åŠ¿å°±æ˜¯æœ€å¤§ç¨‹åº¦ä¸Šé¿å…äº†å¼•ç”¨å¾ªç¯çš„å‘ç”Ÿã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ä¸ºä»»æ„ç±»å‹çš„è§‚å¯Ÿäº‹ä»¶é‡ç”¨ç›¸åŒçš„æ‰§è¡Œä»£ç ã€‚å½“ç„¶ï¼Œä¸Šé¢çš„ demo ä¸­ Event å®ç°éå¸¸ç®€å•ï¼Œç¼ºä¹ä¸€äº›é«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚é’ˆå¯¹è§‚å¯Ÿè€…çš„ç§»é™¤ç­‰ç­‰ï¼Œä½†æ˜¯å¯¹äºç®€å•ä½¿ç”¨å·²ç»è¶³å¤Ÿäº†ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¼šåœ¨ä¹‹åçš„åšæ–‡ä¸­è¯¦ç»†çš„è®²è¿°äº‹ä»¶é©±åŠ¨çš„ç¼–ç¨‹èŒƒå¼ï¼Œä½ ä¹Ÿå¯ä»¥è¯¦ç»†çœ‹ä¸‹åœ¨ Image Engine é¡¹ç›®ä¸­çš„ &lt;a href=&#34;https://github.com/JohnSundell/ImagineEngine/blob/master/Sources/Core/API/Event.swift&#34;&gt;Event ç±»å‹çš„å®Œæ•´å®ç°&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;Closure è‡ªåŠ¨æ•è·å…¶å†…éƒ¨æ‰€ä½¿ç”¨çš„å¯¹è±¡å’Œå€¼æœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„ç‰¹è‰²ï¼Œå®ƒä½¿å¾— closure æœ¬èº«å˜å¾—éå¸¸å¥½ç”¨ã€‚ä½†æ˜¯ï¼Œæ•è·åŒæ—¶ä¹Ÿå¼•å…¥äº†ä¸€äº› bug å’Œå¼•ç”¨å¾ªç¯çš„é—®é¢˜ï¼Œç”šè‡³æœ€åä½¿å¾—ä»£ç å˜å¾—å¤æ‚å’Œéš¾ä»¥ç†è§£ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œæˆ‘å¹¶ä¸æ˜¯å»ºè®®å¤§å®¶åœ¨æ‰€æœ‰çš„åœºæ™¯ä¸‹å»é¿å…æ•è·å‘ç”Ÿï¼Œè€Œæ˜¯æƒ³é€šè¿‡è¿™ç¯‡æ–‡ç« æä¾›ç»™å¤§å®¶ä¸€äº›æ•è· self çš„é€‰æ‹©ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ç»å…¸çš„ [weak self] æ˜¯æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå¦å¤–ä¸€äº›åœºæ™¯åˆ™å¯ä»¥ä½¿ç”¨æŸäº›æ‰‹æ³•æ¥å¸®åŠ©ä½ æŠŠè‡ªå·±çš„é—­åŒ…ä»£ç å†™çš„æ›´å®¹æ˜“ä½¿ç”¨ï¼Œä¹Ÿæ›´å®¹æ˜“ç†è§£å§ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>@autoclosure &amp;&amp; @escape</title>
      <link>https://hechen.xyz/post/autoclosure-escape/</link>
      <pubDate>Sun, 12 Nov 2017 20:01:54 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/autoclosure-escape/</guid>
      
        <description>

&lt;p&gt;æˆ‘ä»¬çŸ¥é“åœ¨ &lt;code&gt;swift&lt;/code&gt; ä¸­ï¼Œé—­åŒ…ï¼ˆclosureï¼‰æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå› æ­¤å¯ä»¥è¢«å½“ä½œå‚æ•°ä¼ é€’ï¼Œåœ¨å­¦ä¹  swift çš„è¿‡ç¨‹ä¸­ç»å¸¸ä¼šçœ‹åˆ°æŸäº›å…³é”®å­—ä¿®é¥°è¯¥é—­åŒ…ï¼Œ&lt;code&gt;@autoclosure&lt;/code&gt;ï¼Œ &lt;code&gt;@escape&lt;/code&gt; å°±æ˜¯å…¶ä¸­æ¯”è¾ƒå¸¸è§çš„ä¸¤ç§å…³é”®å­—ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;escape-å’Œ-nonescape&#34;&gt;@escape å’Œ @nonescape&lt;/h3&gt;

&lt;p&gt;å½“ä¸€ä¸ªé—­åŒ…è¢«å½“ä½œå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å½“è¯¥å‡½æ•°å†…å®¹æ‰§è¡Œå®Œæ¯•è¿”å›ä¹‹åï¼Œè¯¥é—­åŒ…æ‰ä¼šè¢«æ‰§è¡Œï¼Œæˆ‘ä»¬å°±ç§°è¯¥é—­åŒ…è¦ escape æŸä¸ªå‡½æ•°ï¼Œé‚£ &lt;code&gt;@escape&lt;/code&gt; å…³é”®å­—å°±æ˜¯ç”¨æ¥è¡¨ç¤ºè¯¥é—­åŒ…æ˜¯å…è®¸åœ¨å‡½æ•°è¿”å›ä¹‹åè¢«è°ƒç”¨çš„ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ç”¨ swift å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­æ¥çœ‹ï¼Œå¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;completionHandlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;someFunctionWithEscapingClosure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;completionHandlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;someFunctionWithEscapingClosure(_:)&lt;/code&gt; çš„å‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå‡½æ•°å†…éƒ¨ä¼šæŠŠä¼ å…¥çš„é—­åŒ…å­˜åˆ°ä¹‹å‰å£°æ˜çš„æ•°ç»„é‡Œä»¥ä¾¿ä¹‹åè¿›è¡Œè°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨å‡½æ•°å‚æ•°çš„å£°æ˜éƒ¨åˆ†æ·»åŠ äº† &lt;code&gt;@escaping&lt;/code&gt; å…³é”®å­—ï¼Œå¦‚æœè¿™é‡Œä¸æ·»åŠ çš„è¯ï¼Œå°±ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;error: passing non-escaping parameter &lt;span class=&#34;s1&#34;&gt;&amp;#39;completionHandler&amp;#39;&lt;/span&gt; to &lt;span class=&#34;k&#34;&gt;function&lt;/span&gt; expecting an @escaping closure
    completionHandlers.append&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;completionHandler&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;    &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é’ˆå¯¹æ ‡è®°äº† @escaping å…³é”®å­—å«ä¹‰ä»£è¡¨ä½ å¿…é¡»åœ¨è¯¥é—­åŒ…å†…éƒ¨æ˜¾å¼çš„ä½¿ç”¨ self å…³é”®å­—ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­åˆåˆ—ä¸¾äº†å¦å¤–ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;someFunctionWithNonescapingClosure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;closure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;closure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;SomeClass&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;doSomething&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;someFunctionWithEscapingClosure&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;someFunctionWithNonescapingClosure&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;instance&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SomeClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;doSomething&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// Prints &amp;#34;200&amp;#34;&lt;/span&gt;
 
&lt;span class=&#34;n&#34;&gt;completionHandlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?()&lt;/span&gt;
&lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// Prints &amp;#34;100â€&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;someFunctionWithEscapingClosure(_:)&lt;/code&gt; æ˜¯ä¸€ä¸ªå¯é€ƒé€¸çš„é—­åŒ…ï¼Œæ„å‘³ç€ä½ éœ€è¦æ˜¾ç¤ºçš„è°ƒç”¨ self å…³é”®å­—ï¼Œ è€Œ &lt;code&gt;someFunctionWithNonescapingClosure(_:)&lt;/code&gt; æ˜¯éé€ƒé€¸çš„é—­åŒ…ï¼Œæ„å‘³ç€ä½ å¯ä»¥éšå¼çš„è°ƒç”¨ selfã€‚&lt;/p&gt;

&lt;h3 id=&#34;autoclosure&#34;&gt;@autoclosure&lt;/h3&gt;

&lt;h4 id=&#34;ä¾‹å­è®²è§£&#34;&gt;ä¾‹å­è®²è§£&lt;/h4&gt;

&lt;p&gt;é€šè¿‡ä¸€ä¸ªğŸŒ°æ¥è¯´æ˜ &lt;code&gt;@autoclosure&lt;/code&gt; å…³é”®å­—åˆ°åº•èµ·åˆ°ä»€ä¹ˆä½œç”¨ã€‚&lt;/p&gt;

&lt;p&gt;è€ƒè™‘ä¸‹é¢è¿™ä¸ªå‡½æ•° fï¼Œå…¶éœ€ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œç±»å‹æ˜¯ &lt;code&gt;()-&amp;gt; Bool&lt;/code&gt; çš„é—­åŒ…ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;predicate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;predicate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;It&amp;#39;s true&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åé€šè¿‡ä¼ å…¥ç¬¦åˆæ­¤ç±»å‹çš„é—­åŒ…è¿›è¡Œè°ƒç”¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;predicate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// &amp;#34;It&amp;#39;s true&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¿½ç•¥ä¼ å…¥é—­åŒ…çš„ &lt;code&gt;{&lt;/code&gt; å’Œ &lt;code&gt;}&lt;/code&gt; ï¼Œç¼–è¯‘å°±ä¼šé”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;predicate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// error: &amp;#39;&amp;gt;&amp;#39; produces &amp;#39;Bool&amp;#39;, not the expected contextual result type &amp;#39;() -&amp;gt; Bool&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æ–‡æ¡£ä¸­æ‰€è¯´ï¼Œä¸€ä¸ª autoclosure (è‡ªä¸»é—­åŒ…ï¼Ÿ)æ˜¯è¿™æ ·ä¸€ç§é—­åŒ…: å½“æŸä¸ªè¡¨è¾¾å¼è¢«å½“åšå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ä¼šè¢« wrap æˆä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…æ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œå…¶è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œè¿”å›çš„æ˜¯å…¶ wrap çš„è¡¨è¾¾å¼çš„å€¼ã€‚swift æä¾›è¿™ç§è¯­æ³•ç³–å°±èƒ½å¤Ÿè®©ä½ çœç•¥ {} è€Œç›´æ¥å†™ä¸€ä¸ªè¡¨è¾¾å¼ã€‚&lt;/p&gt;

&lt;p&gt;ç»“åˆä¸Šé¢çš„ä¾‹å­æ¥çœ‹ï¼Œå½“ä½ å†™ä¸ªè¡¨è¾¾å¼ç±»ä¼¼ 2 &amp;gt; 1 ä¼ ç»™å‡½æ•° f çš„æ—¶å€™ï¼Œè¯¥è¡¨è¾¾å¼ä¼šè¢«è‡ªåŠ¨åŒ…è£¹åˆ°ä¸€ä¸ªé—­åŒ…ä¸­ï¼Œä¼šè‡ªåŠ¨å¤„ç†ä¸º { 2 &amp;gt; 1 } è€Œä¼ é€’ç»™å‡½æ•° fã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;predicate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;@autoclosure&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;predicate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;It&amp;#39;s true&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;predicate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// It&amp;#39;s true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;âš ï¸ @autoclosure å¹¶ä¸æ”¯æŒå¸¦æœ‰è¾“å…¥å‚æ•°çš„å†™æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½¢å¦‚ () -&amp;gt; T çš„å‚æ•°æ‰èƒ½ç®€åŒ–&lt;/p&gt;

&lt;h4 id=&#34;delay-evaluation&#34;&gt;Delay Evaluation&lt;/h4&gt;

&lt;p&gt;swift æä¾›äº† ?? æ“ä½œç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;nickName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;fullName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;John Appleseed&amp;#34;&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;informalGreeting&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Hi &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nickName&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fullName&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æœæŸ Optional å­˜åœ¨å°±ä¼šè¿”å›å…¶å€¼ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šè¿”å›åé¢çš„é»˜è®¤å€¼ï¼Œå½“æˆ‘ä»¬å»çœ‹ ?? çš„å®ç°çš„æ—¶å€™èƒ½çœ‹åˆ°å¦‚ä¸‹å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;@autoclosure&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;@autoclosure&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;çœ‹å¾—å‡ºæ¥ &lt;code&gt;??&lt;/code&gt; æ˜¯ä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ï¼Œoptional æŒ‡ä»£ ?? å‰é¢çš„è¾“å…¥ï¼ŒdefaultValue æŒ‡ä»£ &lt;code&gt;??&lt;/code&gt; åé¢çš„å‚æ•°ï¼Œé‚£æˆ‘ä»¬å°±ä¼šæƒ³ï¼Œæˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­ &lt;code&gt;fullName&lt;/code&gt; åªæ˜¯ä¸€ä¸ª &lt;code&gt;String&lt;/code&gt;ï¼Œæ€ä¹ˆå˜æˆ &lt;code&gt;() -&amp;gt; T&lt;/code&gt; ç±»å‹çš„å‘¢ï¼Ÿ è¿™ä¸ªå°±çœ‹å‰é¢çš„ &lt;code&gt;@autoclosure&lt;/code&gt; çš„å¨åŠ›äº†ï¼Œå‰é¢è®²è¿‡äº†ï¼Œè¯¥å…³é”®å­—æŠŠè¡¨è¾¾å¼çš„å€¼å°è£…æˆé—­åŒ…å¹¶ä¸”è¿”å›è¯¥è¡¨è¾¾å¼çš„å€¼äº†ã€‚ å…¶å®ä¼ å…¥è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ &lt;code&gt;{ fullName }&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å¯ä»¥æƒ³åˆ°è¯¥æ–¹æ³•çš„å®ç°åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼Œï¼ˆå½“ç„¶ fullName ä¸º String ç±»å‹ï¼Œåº”è¯¥ä¼šé‡è½½ç¬¬äºŒä¸ªå‡½æ•°å®ç°ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;??&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;@autoclosure&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;kr&#34;&gt;optional&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼Œä½¿ç”¨ &lt;code&gt;@autoclosure&lt;/code&gt; æ¥ä¿®é¥°çš„è¡¨è¾¾å¼å¯ä»¥å®ç°å»¶è¿Ÿè®¡ç®—ï¼Œä¹Ÿå°±æ˜¯è¯´ç›´åˆ°è¯¥é—­åŒ…è¢«è°ƒç”¨ä¹‹å‰ï¼Œé—­åŒ…é‡Œæ‰€è¢«åŒ…è£¹çš„è¡¨è¾¾å¼éƒ½ä¸ä¼šè¿›è¡Œå–å€¼è®¡ç®—ï¼Œä¹Ÿå°±é¿å…äº†ä¸€å®šçš„å¼€é”€ï¼Œå°¤å…¶æ˜¯ä¸Šé¢é»˜è®¤å€¼æ˜¯å¤æ‚è®¡ç®—å¾—åˆ°çš„è¯ã€‚&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äº iOS10 Notification çš„é‚£äº›äº‹å„¿</title>
      <link>https://hechen.xyz/post/ios-notification/</link>
      <pubDate>Sat, 20 May 2017 10:10:54 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/ios-notification/</guid>
      
        <description>

&lt;h3 id=&#34;æ¦‚è§ˆ&#34;&gt;æ¦‚è§ˆ&lt;/h3&gt;

&lt;p&gt;æ¨é€é€šçŸ¥æˆ‘ä»¬å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œå¯ä»¥è¯´å‡ ä¹æ¯ä¸ªä½¿ç”¨æ™ºèƒ½æ‰‹æœºçš„äººæ¯å¤©éƒ½ä¼šè¢«ä¸åŒçš„é€šçŸ¥ &lt;em&gt;æ‰“æ‰°&lt;/em&gt; åˆ°ï¼Œæ­£å¼å› ä¸ºåˆé€‚çš„æ¨é€æ˜¯å¸å¼•ç”¨æˆ·æ³¨æ„åŠ›çš„åˆ©å™¨ï¼Œå…¶æˆä¸ºäº†å„ App å¸å¼•ç”¨æˆ·ï¼Œå°†ç”¨æˆ·å¸¦å›åˆ° App æœ¬èº«ï¼Œæå‡ç”¨æˆ·çš„æ´»è·ƒåº¦çš„ä¸€ç§å¿…è¦çš„æ–¹å¼ã€‚å½“ç„¶è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨é€æœ¬èº«æ˜¯ä¸€ä»¶å¯¹ç”¨æˆ·å½±å“ç‰¹åˆ«å¤§çš„äº‹æƒ…ï¼Œæ¯•ç«Ÿæ³¨æ„åŠ›è¢«æ‰“æ–­ï¼Œå› æ­¤åˆé€‚çš„æ¨é€æ—¶æœºä¹Ÿæ˜¯å„ä¸ª App å¼€å‘è€…æ‰€è¦æ³¨æ„çš„ï¼Œå¦åˆ™å°±ä¼šæˆä¸ºç”¨æˆ·å‹¿æ‰°åå•é‡Œçš„ä¸€å‘˜äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä¹‹å‰åˆšå¼€å§‹å­¦ä¹  iOS å¼€å‘çš„æ—¶å€™è¿˜æ•´ç†äº†ä¸‹å½“æ—¶éƒ¨ç½² iOS è¿œç¨‹æ¨é€çš„æµç¨‹ï¼Œè¯¦è§ï¼š&lt;a href=&#34;http://hechen.info/2015/07/30/iOS-Push-Notification/&#34;&gt;iOS è¿œç«¯æ¨é€éƒ¨ç½²è¯¦è§£&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¤§è‡´å›é¡¾ä¸€ä¸‹ iOS å¹³å°å…³äºæ¨é€éƒ½æœ‰å“ªäº›å†ç¨‹ï¼Ÿ&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;å†å²&#34;&gt;å†å²&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&amp;lt;= iOS 6&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;è¿œç¨‹æ¨é€é€šçŸ¥ ï¼ˆiOS 3ï¼‰&lt;/li&gt;
&lt;li&gt;æœ¬åœ°é€šçŸ¥ ï¼ˆiOS 4ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;iOS 7  å‚è€ƒ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¼•å…¥ Silent Remote Notifications&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;iOS 8  å‚è€ƒ &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2014/713/&#34;&gt;WWDC 2014 Session 713&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¼•å…¥ Actionable Notifications&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹ Notification çš„æƒé™è¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;iOS 9  å‚è€ƒ &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2015/720/&#34;&gt;WWDC 2015 Session 720&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¼•å…¥ Text Input Action&lt;/li&gt;
&lt;li&gt;UIUserNotificationActionBehavior&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;iOS 10 å‚è€ƒ &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2016/707&#34;&gt;WWDC 707 Introduction to Notifications&lt;/a&gt; &amp;amp;&amp;amp; &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2016/708&#34;&gt;WWDC 708 Advanced Notifications&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;UserNotification Framework&lt;/li&gt;
&lt;li&gt;Extensions&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;WWDC 2016 å¤§ä¼šä¸Šï¼ŒApple åœ¨ iOS 10 ä¸Šå¼•å…¥äº† &lt;strong&gt;UserNotification&lt;/strong&gt; æ¡†æ¶ï¼Œå¯ä»¥è¯´æ˜¯å¯¹ä¹‹å‰çš„å„ç§ä»£ç åšäº†ä¸€æ¬¡é‡æ„ã€‚è¯¥æ¡†æ¶ç»Ÿä¸€äº†é€šçŸ¥çš„è¡Œä¸ºï¼Œå°¤å…¶æ˜¯é’ˆå¯¹è¿œç¨‹æ¨é€å’Œæœ¬åœ°æ¨é€ä¸å†æœ‰ä¸¤å¥—å®Œå…¨ä¸åŒçš„ä½¿ç”¨æ–¹å¼äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å˜åŒ–&#34;&gt;å˜åŒ–&lt;/h3&gt;

&lt;p&gt;å…³äº iOS 10 ä¸Š UserNotification æ¡†æ¶çš„å˜åŒ–ï¼Œä¸»è¦ä»å‡ ä¸ªæ–¹é¢æ¥è®²è¿°ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æƒé™ç”³è¯·&lt;/li&gt;
&lt;li&gt;æ¨é€å†…å®¹å˜æ›´&lt;/li&gt;
&lt;li&gt;æ¨é€ç®¡ç†&lt;/li&gt;
&lt;li&gt;Extensions&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&#34;æƒé™ç”³è¯·&#34;&gt;æƒé™ç”³è¯·&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;requestAuthorization&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sound&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;badge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;granted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;granted&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// ç”¨æˆ·å…è®¸è¿›è¡Œé€šçŸ¥&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;è¿œç¨‹æ¨é€&#34;&gt;è¿œç¨‹æ¨é€&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å‘ APNs è¯·æ±‚ tokenï¼š&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// iOS 10 support&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;cp&#34;&gt;#available&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;iOS&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  
    &lt;span class=&#34;cp&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;requestAuthorization&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:[.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;badge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;alert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;sound&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]){&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;granted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;cp&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registerForRemoteNotifications&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// iOS 9 support&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;cp&#34;&gt;#available&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;iOS&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  

&lt;span class=&#34;cp&#34;&gt;UIApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;registerUserNotificationSettings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;UIUserNotificationSettings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;types&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;badge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;sound&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;alert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;cp&#34;&gt;categories&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;UIApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registerForRemoteNotifications&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…³äºæ³¨å†Œè¿œç¨‹é€šçŸ¥çš„å›è°ƒæ–¹æ³•ä¸€è‡´ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// AppDelegate.swift&lt;/span&gt;
 &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIApplication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;didRegisterForRemoteNotificationsWithDeviceToken&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;tokenString&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hexString&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Get Push token: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tokenString&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;payloads&#34;&gt;Payloads&lt;/h4&gt;

&lt;p&gt;&amp;lt;  iOS 10&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
   &lt;span class=&#34;nt&#34;&gt;&amp;#34;aps&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;
     &lt;span class=&#34;nt&#34;&gt;&amp;#34;alert&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Test&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
     &lt;span class=&#34;nt&#34;&gt;&amp;#34;sound&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
     &lt;span class=&#34;nt&#34;&gt;&amp;#34;badge&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;iOS 10 ç³»ç»Ÿæä¾›äº†æ›´ä¸ºä¸°å¯Œçš„ç»“æ„ï¼Œæ¯”å¦‚å¯ä»¥æŒ‡å®š Titleï¼ŒSubtitle ç­‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
   &lt;span class=&#34;nt&#34;&gt;&amp;#34;aps&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;
     &lt;span class=&#34;nt&#34;&gt;&amp;#34;alert&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;
       &lt;span class=&#34;nt&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;This is a title&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
       &lt;span class=&#34;nt&#34;&gt;&amp;#34;subtitle&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;This is a subtitle&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
       &lt;span class=&#34;nt&#34;&gt;&amp;#34;body&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;This is body&amp;#34;&lt;/span&gt;
     &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
     &lt;span class=&#34;nt&#34;&gt;&amp;#34;sound&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
     &lt;span class=&#34;nt&#34;&gt;&amp;#34;badge&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
   &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç”šè‡³ï¼Œç°åœ¨å¯ä»¥æ”¯æŒå¤šåª’ä½“çš„å±•ç¤ºäº†ï¼Œåœ¨ payload ä¸Šä¹Ÿæœ‰ç›¸åº”çš„ä½“ç°ï¼Œä¾‹å¦‚ä¸‹é¢å‡ ä¾‹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ”¯æŒå›¾ç‰‡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;aps&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;alert&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Title: Notification Demo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;subtitle&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Subtitle: show iOS 10 support!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;body&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;The Main Body For Notification!&amp;#34;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;mutable-content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://pic1.zhimg.com/v2-0314056e4f13141b6ca2277078ec067c.jpg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ”¯æŒéŸ³é¢‘&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;    
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;aps&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;alert&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Title: Notification Demo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;subtitle&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Subtitle: show iOS 10 support!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;body&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;The Main Body For Notification!&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;mutable-content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;audio&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://hao.1015600.com/upload/ring/000/982/d9924a7f4e4ab06e52a11dfdd32ffae1.mp3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…·ä½“æ‰€æœ‰çš„ Key å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ &lt;a href=&#34;https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html&#34;&gt;Payload Key Reference&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„åˆ°æœ‰ä¸ª key:  launch-image ï¼Œå¯ä»¥æŒ‡å®šç”¨æˆ·ç‚¹å‡»é€šçŸ¥å¯åŠ¨ App çš„æ—¶å€™çš„ Launch Image&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;å¯ä»¥æ’¤é”€å’Œæ›´æ–°é€šçŸ¥äº†&#34;&gt;å¯ä»¥æ’¤é”€å’Œæ›´æ–°é€šçŸ¥äº†ï¼&lt;/h4&gt;

&lt;p&gt;UserNotification æ¡†æ¶ API æä¾›äº†é€šçŸ¥çš„æ›´æ–°å’Œæ’¤é”€çš„æ¥å£ã€‚å…·ä½“åŠŸèƒ½ä¸»è¦åŒ…å«å‡ ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åˆ é™¤æœªå±•ç¤ºçš„é€šçŸ¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;trigger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNTimeIntervalNotificationTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;repeats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;identifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Constants&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pendingRemoveNotificationIdentifier&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title1Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;remove pending notification error: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request added: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request removed: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;removePendingNotificationRequests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;withIdentifiers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ›´æ–°æœªå±•ç¤ºçš„é€šçŸ¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;trigger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNTimeIntervalNotificationTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;repeats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;identifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Constants&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pendingUpdateNotificationIdentifier&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title1Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;update pending notification error: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request added: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; with title1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newTrigger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNTimeIntervalNotificationTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;repeats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                
            &lt;span class=&#34;c1&#34;&gt;// Add new request with the same identifier to update a notification.&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newRequest&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title2Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;update delivered notification error: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request updated: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; with title2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åˆ é™¤å·²ç»å±•ç¤ºçš„é€šçŸ¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;trigger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNTimeIntervalNotificationTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;repeats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;identifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Constants&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pendingUpdateNotificationIdentifier&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title1Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;update pending notification error: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request added: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; with title1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newTrigger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNTimeIntervalNotificationTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;repeats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                
            &lt;span class=&#34;c1&#34;&gt;// Add new request with the same identifier to update a notification.&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newRequest&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title2Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;update delivered notification error: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request updated: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; with title2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ›´æ–°å·²ç»å±•ç¤ºçš„é€šçŸ¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;trigger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNTimeIntervalNotificationTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;repeats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;identifier&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Constants&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deliveredUpdateNotificationIdentifier&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title1Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request added: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; with title1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            
        &lt;span class=&#34;n&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newTrigger&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNTimeIntervalNotificationTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;repeats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                
            &lt;span class=&#34;c1&#34;&gt;// Add new request with the same identifier to update a notification.&lt;/span&gt;
            &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;newRequest&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title2Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newTrigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;UNUserNotificationCenter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                        
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;bp&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Notification request updated: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;\(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; with title2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å½“ç„¶ï¼Œä¸Šè¿°å‡æ˜¯é’ˆå¯¹æœ¬åœ°é€šçŸ¥çš„æ“ä½œï¼Œå…³äºè¿œç¨‹æ¨é€é€šçŸ¥ï¼Œç›®å‰åªæ”¯æŒæ›´æ–°é€šçŸ¥ï¼Œè¿œç¨‹æ¨é€å¯ä»¥è¿›è¡Œé€šçŸ¥çš„æ›´æ–°ï¼Œåœ¨ä½¿ç”¨ Provider API å‘ APNs æäº¤è¯·æ±‚æ—¶ï¼Œåœ¨ HTTP/2 çš„ header ä¸­ apns-collapse-id key çš„å†…å®¹å°†è¢«ä½œä¸ºè¯¥æ¨é€çš„æ ‡è¯†ç¬¦è¿›è¡Œä½¿ç”¨ã€‚å¤šæ¬¡æ¨é€åŒä¸€æ ‡è¯†ç¬¦çš„é€šçŸ¥å³å¯è¿›è¡Œæ›´æ–°ã€‚&lt;/p&gt;

&lt;h4 id=&#34;notification-extension&#34;&gt;Notification Extension&lt;/h4&gt;

&lt;p&gt;iOS 10 ä¸­æœ€é‡è¦çš„ä¸€ä¸ªå˜åŒ–å°±æ˜¯ Extensionï¼Œä» iMessage Extension åˆ° SiriKit ä¸­æä¾›çš„  Intent Extension ç­‰ï¼Œé‚£å¯¹äº UserNotification æ¥è®²å°±æ˜¯ä¸‹é¢è¿™ä¸¤ç§ Extensionï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/18D62919-DA73-4D3D-9B05-6071E6945764-1.png&#34; alt=&#34;18D62919-DA73-4D3D-9B05-6071E6945764&#34; /&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Service Extension&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…·ä½“è€Œè¨€ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æ”¶åˆ°é€šçŸ¥ä¹‹åï¼Œåœ¨å±•ç¤ºç»™ç”¨æˆ·ä¹‹å‰ ï¼Œä¹Ÿå°±æ˜¯ä»¥Banner æˆ–è€… Alert çš„å½¢å¼ æˆ–è€… è¿›å…¥é€šçŸ¥ä¸­å¿ƒä¹‹å‰ï¼Œç»™æˆ‘ä»¬ä¸€æ¬¡æˆªå–å¹¶å¤„ç†çš„æœºä¼šï¼Œè¿™æ ·å°±ç»™å¼€å‘è€…æä¾›äº†é’ˆå¯¹æ¨é€é€šçŸ¥å†åŠ å·¥çš„æ‰‹æ®µï¼Œå¹¶ä¸”è¿œç¨‹æ¨é€å¤šåª’ä½“ä¹Ÿæ˜¯é€šè¿‡ Service Extension æ¥å®ç°çš„ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨åœ¨æœ¬æœºæˆªå–æ¨é€å¹¶æ›¿æ¢å†…å®¹çš„æ–¹å¼ï¼Œå¯ä»¥å®Œæˆç«¯åˆ°ç«¯ (end-to-end) çš„æ¨é€åŠ å¯†ã€‚ä½ åœ¨æœåŠ¡å™¨æ¨é€ payload ä¸­åŠ å…¥åŠ å¯†è¿‡çš„æ–‡æœ¬ï¼Œåœ¨å®¢æˆ·ç«¯æ¥åˆ°é€šçŸ¥åä½¿ç”¨é¢„å…ˆå®šä¹‰æˆ–è€…è·å–è¿‡çš„å¯†é’¥è¿›è¡Œè§£å¯†ä¹‹åå†æ˜¾ç¤ºã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿æ¨é€ä¿¡é“è¢«ç¬¬ä¸‰æ–¹æˆªå–ï¼Œå…¶ä¸­æ‰€ä¼ é€’çš„å†…å®¹ä¹Ÿè¿˜æ˜¯å®‰å…¨çš„ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼æ¥å‘é€å¯†ç æˆ–è€…æ•æ„Ÿä¿¡æ¯ï¼Œå¯¹äºä¸€äº›é‡‘èä¸šåŠ¡åº”ç”¨å’ŒèŠå¤©åº”ç”¨æ¥è¯´ï¼Œåº”è¯¥æ˜¯å¿…å¤‡çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç”Ÿæˆ Extension ä¹‹åï¼Œç³»ç»Ÿå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†æ¨¡æ¿ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NotificationService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationServiceExtension&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;contentHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UNNotificationContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)?&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;bestAttemptContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNMutableNotificationContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// 1&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;didReceive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;withContentHandler&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;contentHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaping&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UNNotificationContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;contentHandler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;contentHandler&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;bestAttemptContent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutableCopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNMutableNotificationContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;bestAttemptContent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bestAttemptContent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;contentHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bestAttemptContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// 2&lt;/span&gt;
    &lt;span class=&#34;kr&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;serviceExtensionTimeWillExpire&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Called just before the extension will be terminated by the system.&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Use this as an opportunity to deliver your &amp;#34;best attempt&amp;#34; at modified content, otherwise the original push payload will be used.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;contentHandler&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;contentHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;bestAttemptContent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;bestAttemptContent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;contentHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bestAttemptContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;Content Extension
iOS 10 SDK æ–°åŠ çš„å¦ä¸€ä¸ª Content Extension å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰é€šçŸ¥çš„è¯¦ç»†é¡µé¢çš„è§†å›¾ã€‚ ä¸‹å›¾ä¸­å°±æ˜¯å‡ æ¬¾å¸‚é¢ä¸Šç›®å‰å·²ç»å®ç°è¿‡è‡ªå®šä¹‰ Content Extension çš„ App æˆªå›¾ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç¬¬ä¸€ä¸ª PriceTag App çš„é€šçŸ¥æ ·å¼ï¼Œå®é™…ä¸Šæ˜¯é»˜è®¤çš„ç³»ç»Ÿæ˜¾ç¤ºè¡Œä¸ºã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/IMG_AD4882D0ECDE-1.jpeg&#34; alt=&#34;IMG_AD4882D0ECDE-1&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ã€‚å¦‚æœä¸æƒ³é»˜è®¤æ˜¾ç¤ºé€šçŸ¥å†…å®¹ï¼Œéœ€è¦åœ¨ Content Extension çš„ info.plist æ–‡ä»¶ä¸­æ·»åŠ  UNNotificationExtensionDefaultContentHidden  å¹¶è®¾ç½®ä¸º YES&lt;/p&gt;

&lt;h4 id=&#34;æ”¯æŒå¤šåª’ä½“èµ„æºåœ¨é€šçŸ¥ä¸­å¿ƒçš„å±•ç¤º&#34;&gt;æ”¯æŒå¤šåª’ä½“èµ„æºåœ¨é€šçŸ¥ä¸­å¿ƒçš„å±•ç¤º&lt;/h4&gt;

&lt;p&gt;iOS 10 ä¸­å¦ä¸€ä¸ªæ¯”è¾ƒæ˜¾è‘—çš„ç‰¹ç‚¹å°±æ˜¯æ”¯æŒäº†å¤šåª’ä½“çš„æ¨é€å’Œå±•ç¤ºã€‚å¼€å‘è€…ç°åœ¨å¯ä»¥åœ¨é€šçŸ¥ä¸­åµŒå…¥å›¾ç‰‡ã€éŸ³é¢‘ç”šè‡³è§†é¢‘ï¼Œè¿™æå¤§ä¸°å¯Œäº†æ¨é€å†…å®¹çš„å¯è¯»æ€§å’Œè¶£å‘³æ€§ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æœ¬åœ°æ¨é€æ”¯æŒ
æœ¬åœ°é€šçŸ¥æ·»åŠ å¤šåª’ä½“æ¯”è¾ƒç®€å•ä¸€äº›ï¼Œåªéœ€è¦é€šè¿‡æœ¬åœ°ç£ç›˜ä¸Šçš„æ–‡ä»¶ URL åˆ›å»ºä¸€ä¸ª UNNotificationAttachment å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡æ”¾åˆ°æ•°ç»„ä¸­èµ‹å€¼ç»™ content çš„ attachments å±æ€§å°±è¡Œäº†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;content&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNMutableNotificationContent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Image Notification&amp;#34;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Show me an image!&amp;#34;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imageURL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Bundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;forResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;withExtension&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;attachment&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UNNotificationAttachment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;imageAttachment&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;imageURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;attachments&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;attachment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è¿œç¨‹æ¨é€æ”¯æŒ&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;é¦–å…ˆéœ€è¦åœ¨ payloads ç»“æ„ä¸­æ·»åŠ å¯¹å¯Œåª’ä½“çš„æ”¯æŒï¼Œaps å­—å…¸ä¸­æ·»åŠ å­—æ®µ&lt;code&gt;mutable-content&lt;/code&gt;å¹¶ç½®ä¸º 1 æ¥æ ‡è¯†è¯¥è¿œç¨‹é€šçŸ¥æ˜¯éœ€è¦æ”¯æŒã€‚ ç„¶åå¯ä»¥åœ¨ payloads ä¸­æ·»åŠ èµ„æºåœ°å€ï¼Œå¯ä»¥æ˜¯æœ¬åœ°çš„èµ„æºï¼Œä¹Ÿå¯ä»¥æ˜¯éœ€è¦ App ä¸‹è½½çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-JSON&#34; data-lang=&#34;JSON&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;aps&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;alert&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Image Notification&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;body&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Show me an image from web!&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;mutable-content&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;zh_image&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://pic1.zhimg.com/v2-0314056e4f13141b6ca2277078ec067c.jpg&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…·ä½“æ”¯æŒå¤šåª’ä½“æ–‡ä»¶çš„å¯Œåª’ä½“ç±»å‹ä»¥åŠæ¯ä¸€ç§ç±»å‹æ‰€æ”¯æŒçš„å¤§å°è¯¦å®˜æ–¹æ–‡æ¡£  &lt;a href=&#34;https://developer.apple.com/reference/usernotifications/unnotificationattachment&#34;&gt;UNNotificationAttachment&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä¸€æ—¦è¿œç¨‹æ¨é€åœ¨ aps ä¸­æ·»åŠ  mutable-content çš„key å¹¶è®¾ç½®ä¸º 1 ä¹‹åï¼ŒiOS ç³»ç»Ÿæ¥æ”¶åˆ°è¯¥æ¨é€ä¹‹åå°±ä¼šå”¤èµ·æˆ‘ä»¬é…å¥—çš„ Service Extension æ¥åšè¿›ä¸€æ­¥å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­ä¸‹è½½å¯¹åº” zh_image é“¾æ¥çš„å›¾ç‰‡ï¼Œç„¶åç”Ÿæˆ Attachment å†ä¸¢ç»™ç³»ç»Ÿå¤„ç†å³å¯ã€‚ è¯¦ç»†åšæ³•å°±æ˜¯åœ¨ä¸Šä¸€èŠ‚è®² Service Extension ä¸­çš„ &lt;code&gt;didReceive&lt;/code&gt; ä¸­å†™ç›¸åº”é€»è¾‘å³å¯ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œè¿™é‡Œçš„å¤„ç†æ—¶é—´æ˜¯å­˜åœ¨æ—¶é—´é™åˆ¶çš„ï¼Œå¦‚æœå¤„ç†è¶…æ—¶ç³»ç»Ÿå°±ä¼šå›æ”¶è¯¥ Extensionï¼Œå¹¶ä¸”è°ƒç”¨ &lt;code&gt;serviceExtensionTimeWillExpire&lt;/code&gt; æ–¹æ³•ï¼Œå› æ­¤æ¯ä¸ªäººæ”¶åˆ°å¸¦æœ‰é™„ä»¶çš„æ¨é€ä¹‹åä¸ä¸€å®šå±•ç¤ºç›¸åŒï¼Œä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æƒ…å†µï¼Œç¬¬ä¸€å¼ å’Œç¬¬äºŒå¼ å°±å±äºæ­£å¸¸è®¾ç½®äº†é™„ä»¶çš„æƒ…å†µï¼Œè€Œç¬¬ä¸‰å¼ å°±æ˜¯æ²¡æœ‰åœ¨æœ‰é™æ—¶é—´å†…æ­£ç¡®è®¾ç½®é™„ä»¶çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/14953507334611.png&#34; alt=&#34;æœªæˆåŠŸè®¾ç½®é™„ä»¶çš„æƒ…å†µ&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;æ¨é€è¯ä¹¦çš„é…ç½®&#34;&gt;æ¨é€è¯ä¹¦çš„é…ç½®&lt;/h4&gt;

&lt;p&gt;ä¸‹å›¾æ˜¯è·å–æ¨é€é€šçŸ¥è¯ä¹¦å¹¶å°†å…¶æ³¨å†Œåˆ° Leancloud çš„æµç¨‹ï¼Œæœ€å…³é”®çš„åœ°æ–¹å…¶å®å°±æ˜¯éœ€è¦åœ¨æœ¬æœºç”Ÿæˆ CSR æ–‡ä»¶æäº¤åˆ° Apple Developer Website ç”Ÿæˆ Push Certification æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ä¸»è¦æœ‰å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;AppID å…³äº Remote Push çš„ æ³¨å†Œ&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆæ¨é€è¯ä¹¦&lt;/li&gt;
&lt;li&gt;è½¬æ¢è¯ä¹¦ä¸º P12 æ–‡ä»¶ï¼Œå¹¶æä¾›ç»™ Leancloud&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/02.png&#34; alt=&#34;02&#34; /&gt;&lt;/p&gt;

&lt;p&gt;XCode 8 çš„ Auto Signing å·²ç»çœå»äº†éš¾ä»¥åçŠ¶çš„å¤æ‚ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€ç‚¹å°äº‹æƒ…æˆ‘ä»¬éœ€è¦åšã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iOS App IDs - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.01.22.png&#34; alt=&#34;iOS App IDs - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.01.22&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/0CB09A98-0D9B-4E76-BA7C-9A1766CFEC42.png&#34; alt=&#34;0CB09A98-0D9B-4E76-BA7C-9A1766CFE&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/Add - iOS Certificates - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.07.47.png&#34; alt=&#34;Add - iOS Certificates - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.07.47&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬éœ€è¦ç”Ÿæˆ CSR æ–‡ä»¶ ï¼ŒæŒ‰ç…§æŒ‡å®šæ­¥éª¤æŒ‰éƒ¨å°±ç­æ¥å°±è¡Œï¼Œæœ€åä¼šç”Ÿæˆ é»˜è®¤æ–‡ä»¶ &lt;em&gt;CertificateSigningRequest.certSigningRequest&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/Finder Finder, ä»Šå¤© at ä¸‹åˆ4.59.55.png&#34; alt=&#34;Finder Finder, ä»Šå¤© at ä¸‹åˆ4.59.55&#34; /&gt;
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/è¯ä¹¦åŠ©ç† è¯ä¹¦åŠ©ç†, ä»Šå¤© at ä¸‹åˆ5.05.42.png&#34; alt=&#34;è¯ä¹¦åŠ©ç† è¯ä¹¦åŠ©ç†, ä»Šå¤© at ä¸‹åˆ5.05.42&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥ç€ä¹‹å‰çš„æ­¥éª¤ï¼Œé€‰æ‹© CSR æ–‡ä»¶ä¸Šä¼ ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/Add - iOS Certificates - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.09.07.png&#34; alt=&#34;Add - iOS Certificates - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.09.07&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šä¼ æˆåŠŸä¹‹åå°±ä¼šç”Ÿæˆ Push è¯ä¹¦ï¼Œä¸‹è½½åˆ°æœ¬æœºå®‰è£…ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/Add - iOS Certificates - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.09.58.png&#34; alt=&#34;Add - iOS Certificates - Apple Developer Google Chrome, ä»Šå¤© at ä¸‹åˆ5.09.58&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;demo-æ¼”ç¤º-knuff-https-github-com-knuffapp-knuff&#34;&gt;Demo æ¼”ç¤º  &lt;a href=&#34;https://github.com/KnuffApp/Knuff&#34;&gt;Knuff&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;å‚è€ƒèµ„æ–™&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/index.html#//apple_ref/doc/uid/TP40008194-CH3-SW1&#34;&gt;Local and Remote Notification Programming Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/reference/usernotifications&#34;&gt;UserNotifications å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://wereadteam.github.io/2017/03/13/Signature/&#34;&gt;iOS App ç­¾åçš„åŸç†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/@scomper/æ¢ç©¶-iphone-çš„åå°åˆ·æ–°-a7a96cb426d4&#34;&gt;iPhone çš„åå°åˆ·æ–°&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>é˜…è¯»ã€Šåƒåœ¾å›æ”¶çš„ç®—æ³•ä¸å®ç°ã€‹</title>
      <link>https://hechen.xyz/post/reading-garbage-collection/</link>
      <pubDate>Sun, 12 Feb 2017 16:38:24 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/reading-garbage-collection/</guid>
      
        <description>

&lt;p&gt;å‰ä¸€é˜µå­ ã€Šåƒåœ¾å›æ”¶çš„ç®—æ³•ä¸å®ç°ã€‹ è¿™æœ¬ä¹¦æ¯”è¾ƒç«ï¼Œæ­£å¥½æœ¬äººä¹Ÿå¯¹åƒåœ¾å›æ”¶è¿™ä¸ªæ¦‚å¿µæŒºæ„Ÿå…´è¶£çš„ï¼Œå°±è€ç€æ€§å­ä¸€ç‚¹ä¸€ç‚¹å•ƒï¼Œåˆ°ä»Šå¤©åªèƒ½è¯´ç£•ç£•ç»Šç»Šçš„çœ‹äº†å¤§éƒ¨åˆ†ï¼Œå®ç°ç¯‡åªçœ‹äº† Python çš„éƒ¨åˆ†ï¼Œå‰©ä½™çš„å…³äº Dalvik VMã€Rubinius ä»¥åŠ V8 çš„åƒåœ¾å›æ”¶å¹¶æœªå¤šçœ‹ï¼Œä¸»è¦è¿˜æ˜¯è‡ªå·±å¯¹ Javascriptï¼ŒRuby ç­‰è¯­è¨€æœªæœ‰æ·±å…¥å­¦ä¹ ï¼Œæˆ‘æ·±ä»¥ä¸ºåªæœ‰ç»“åˆè¿™ç§è¯­è¨€æœ¬èº«çš„è¯­è¨€ç‰¹æ€§æ¥çœ‹å¯¹åº”çš„åƒåœ¾å›æ”¶å®ç°æ‰æœ‰æ„ä¹‰ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯æ€»ç»“ä¸‹å­¦ä¹ åˆ°çš„ä¸€äº›ä¸»è¦çš„çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;çŸ¥è¯†ç‚¹æ€»ç»“&#34;&gt;çŸ¥è¯†ç‚¹æ€»ç»“&lt;/h3&gt;

&lt;p&gt;å¯¹äºå®ç°ç¯‡æ€ç»´å¯¼å›¾é‡Œä¹Ÿæœªæœ‰å±•å¼€ï¼Œä¹‹åç­‰æŠŠ Rubyã€Javascript ç­‰è¯­è¨€ç†Ÿæ‚‰ä¹‹åå†åšæ·±å…¥çš„é˜…è¯»å§ã€‚ã€‚ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/GCç®—æ³•.png&#34; alt=&#34;GCç®—æ³•&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>è§£æ PNChart ç¬¬ä¸‰æ–¹åº“</title>
      <link>https://hechen.xyz/post/read-sourcecode-of-pnchart/</link>
      <pubDate>Sun, 12 Feb 2017 16:36:54 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/read-sourcecode-of-pnchart/</guid>
      
        <description>

&lt;h3 id=&#34;å­¦ä¹ -pnchart&#34;&gt;å­¦ä¹  PNChart&lt;/h3&gt;

&lt;p&gt;æœ¬ç¯‡æ–‡ç« å†™ä½œæ—¶ï¼Œ&lt;strong&gt;PChart&lt;/strong&gt; ç‰ˆæœ¬å·ä¸º &lt;code&gt;0.8.9&lt;/code&gt;.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h4 id=&#34;ä»£ç ç»“æ„&#34;&gt;ä»£ç ç»“æ„&lt;/h4&gt;

&lt;h5 id=&#34;å¯è§†åŒ–å±•ç¤ºç±»å‹&#34;&gt;å¯è§†åŒ–å±•ç¤ºç±»å‹&lt;/h5&gt;

&lt;p&gt;é¦–å…ˆï¼Œç›®å‰ PNChart æä¾›å¤šè¾¾å…­ç§å›¾çš„å¯è§†åŒ–å±•ç¤ºã€‚åˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;PNLineChart
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/PNLineChart.png&#34; alt=&#34;PNLineChart-w621&#34; /&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;PNScatterChart
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/PNScatterChart.png&#34; alt=&#34;PNScatterChart-w621&#34; /&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;PNRadarChart
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/PNRadarChart.png&#34; alt=&#34;PNRadarChart&#34; /&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;PNPieChart
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/PNPieChart.png&#34; alt=&#34;PNPieChart&#34; /&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;PNBarChart
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/PNBarChart.png&#34; alt=&#34;PNBarChart&#34; /&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;PNCircleChart
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/PNCircleChart.png&#34; alt=&#34;PNCircleChart&#34; /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&#34;ç±»å›¾&#34;&gt;ç±»å›¾&lt;/h5&gt;

&lt;p&gt;é¦–å…ˆæ¥çœ‹æœ€ä¸»è¦çš„é›†ä¸­å›¾ç‰‡çš„ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/14867986596626.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­é™¤äº† &lt;code&gt;PNCircleChart&lt;/code&gt; ä»¥å¤–ï¼Œå…¶ä½™å‡ç»§æ‰¿äº† &lt;code&gt;PNGenericChart&lt;/code&gt;ç±»ã€‚&lt;/p&gt;

&lt;p&gt;å…¶ä¸­å›¾ç‰‡å’Œå¤–ç•Œçš„äº¤äº’å›è°ƒæ˜¯é€šè¿‡ PNChartDelegate æ¥è¿›è¡Œçš„ï¼Œè¦åŒ…å«è¿™ä¹ˆå¤šç§ç±»å‹å›¾ç‰‡çš„å›è°ƒï¼Œæ¥å£è‡ªç„¶æ— æ³•å†™çš„æ›´åŠ ä¼˜é›…ï¼Œçœ‹è¿™ä¸ªåè®®å®šä¹‰çš„æ–¹æ³•å°±èƒ½çœ‹å‡ºæ¥ã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/14867993267852.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åŒæ—¶ï¼Œé’ˆå¯¹æ¯ä¸€ç§å›¾å½¢ç±»åˆ«ï¼Œä¹Ÿæœ‰ç›¸å¯¹åº”çš„ Model ç±»å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/14868010321036.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç›®å‰è®¾è®¡æ¥çœ‹å¹¶ä¸æ˜¯å¾ˆç»Ÿä¸€ï¼Œå…¶ä¸­å’Œå¤–ç•Œè¿›è¡Œå¯¹æ¥çš„æ•°æ®ç±»å‹å®šä¹‰ä¸º &lt;code&gt;PNxxChartData&lt;/code&gt;ï¼Œè€Œè¯¥å…·ä½“çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹æ•°æ®ç±»å‹å°±ç”¨&lt;code&gt;PNxxChartDataItem&lt;/code&gt; ç±»å‹æ¥æ ‡è¯†ï¼Œå› ä¸ºå…·ä½“çš„å›¾å½¢åŒ–ä¸šåŠ¡ä¸åŒï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„&lt;code&gt;PNChart&lt;/code&gt;éƒ½ä¼šä½¿ç”¨è€…ä¸¤è€…ï¼Œæ¯”å¦‚ &lt;code&gt;PNBarChart&lt;/code&gt; ç›®å‰å°±å®Œå…¨ä¸ä½¿ç”¨ç±»ä¼¼çš„è®¾è®¡ï¼Œè€Œæ˜¯ç›´æ¥æŒ‡å®šYè½´çš„å€¼ï¼Œè¿˜æœ‰&lt;code&gt;PNCircleChart&lt;/code&gt;ä¹Ÿå¦‚æ­¤ï¼Œåªéœ€æŒ‡å®š Total å’Œ current å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰å‰©ä½™å‡ ä¸ªè¾…åŠ©ç±»ï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/14868112330724.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;PNColor ç±»åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š&lt;code&gt;imageFromColor:&lt;/code&gt; ï¼Œç”ŸæˆæŸç§é¢œè‰²çš„å›¾ç‰‡ï¼Œè€Œåœ¨å…¶æ‰€å®šä¹‰çš„æ–‡ä»¶ PNColor.h ä¸­å®šä¹‰äº†å¾ˆå¤šå¸¸ç”¨é¢œè‰²çš„å®ï¼›&lt;/li&gt;

&lt;li&gt;&lt;p&gt;PNLineChartColorRange ç±»å‹æ˜¯å®šä¹‰åœ¨ PNLineChartData.h æ–‡ä»¶ä¸­ä¸€ä¸ªç±»å‹ï¼Œä¸»è¦æ˜¯æŒ‡å®šæŠ˜çº¿å›¾ä¸Šï¼Œå‘½ä¸­æŒ‡å®šçš„æ•°å€¼åŒºåŸŸæ—¶æ˜¾ç¤ºç‰¹å®šçš„é¢œè‰²ï¼›å¦‚ä¸‹æ‰€ç¤ºä»£ç ï¼Œå½“ Y è½´å…ƒç´ æ˜¯ 10 ~ 30 ä¹‹é—´ï¼Œæ˜¾ç¤ºçº¢è‰²æŠ˜çº¿ï¼Œå½“ Y è½´å…ƒç´ æ˜¯ 100 ~ 200 ä¹‹é—´ï¼Œæ˜¾ç¤ºç´«è‰²æŠ˜çº¿ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;n&#34;&gt;PNLineChartData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data01&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PNLineChartData&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;data01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rangeColors&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;l&#34;&gt;@[&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PNLineChartColorRange&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;initWithRange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIColor&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;redColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PNLineChartColorRange&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;initWithRange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSMakeRange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIColor&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;purpleColor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
    &lt;span class=&#34;l&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;PNChartLabelç±»å®šä¹‰ UILabelï¼Œåº“ä¸­æ‰€ç”¨åˆ°çš„ Label å‡ä¸ºè¯¥ç±»å‹ï¼Œä¸»è¦æ˜¯åšäº†ä¸€äº›é€šç”¨çš„é…ç½®ç½¢äº†ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>å¦‚ä½•ä½¿ç”¨UIBezierPathå®ç°ä¸€ä¸ªå¼¹æ€§è§†å›¾åŠ¨ç”»</title>
      <link>https://hechen.xyz/post/elastic-view-animation-using-uibezierpath/</link>
      <pubDate>Wed, 02 Dec 2015 18:53:51 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/elastic-view-animation-using-uibezierpath/</guid>
      
        <description>

&lt;p&gt;Heyï¼
&lt;a href=&#34;https://github.com/gontovnik/DGElasticPullToRefresh&#34;&gt;DGElasticPullToRefresh&lt;/a&gt;å±•ç¤ºå¦‚ä½•å®ç°ä¸€ä¸ªå¼¹æ€§æ•ˆæœã€‚æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NzdoFS9.gif&#34; alt=&#34;DGElasticPullToRefresh.gif&#34; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š
Xcode 7
Swift 2.0&lt;/p&gt;

&lt;p&gt;è¦æ±‚ï¼š
å¼€å‘è€…è‡³å°‘å¯¹UIBezierPathå’ŒUIGestureRecognizeræœ‰ä¸€å®šçš„äº†è§£.&lt;/p&gt;

&lt;h3 id=&#34;ç†è§£ä¸šåŠ¡é€»è¾‘&#34;&gt;ç†è§£ä¸šåŠ¡é€»è¾‘&lt;/h3&gt;

&lt;p&gt;ä½ å¯èƒ½ä»ä¸Šé¢çš„æ•ˆæœå›¾ä¸Šå¯ä»¥çœ‹åˆ°ä¸€äº›ç«¯å€ªï¼Œè¿™ä¸ªåŠ¨ç”»ä¸­æˆ‘ä»¬ä¸»è¦ä½¿ç”¨åˆ°äº†UIBezierPathæ¥å®ç°ä¸Šé¢è¿™ç§æ•ˆæœã€‚
æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªè´å¡å°”æ›²çº¿è·¯å¾„çš„CAShapeLayerï¼Œç„¶åå½“ä½ çš„æ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»åŠ¨çš„æ—¶å€™æˆ‘ä»¬å°†ç§»åŠ¨æ‰€æœ‰çš„æ§åˆ¶ç‚¹æ¥å‘ˆç°åŠ¨ç”»ã€‚æ¯ä¸€ä¸ªæ§åˆ¶ç‚¹ä¼šä½¿ç”¨ä¸€ä¸ªå¯è§çš„UIViewæ¥è¡¨ç¤ºã€‚ä¸‹é¢æœ‰å‡ å¼ å›¾æ¥æ¼”ç¤ºå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘å°†æ‰€æœ‰çš„æ§åˆ¶ç‚¹æ ‡è¯†æˆäº†çº¢è‰²ï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/DGElasticPullToRefreshControlPoints1.png&#34; alt=&#34;ControlPoints1&#34; /&gt;
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/DGElasticPullToRefreshControlPoints2.png&#34; alt=&#34;ControlPoints2&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒç« å›¾ç‰‡ä¸­å°†æ¯ä¸ªè¡¨ç¤ºæ§åˆ¶ç‚¹çš„Viewçš„å˜é‡åç§°æ ‡è®°å‡ºæ¥äº†ï¼Œå¦‚L3ï¼ŒL2ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å½“ä½ çš„æ‰‹æŒ‡é‡Šæ”¾çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æ’­æ”¾SpringåŠ¨ç”»ï¼Œè®©æ‰€æœ‰çš„æ§åˆ¶ç‚¹å‘å…¶åˆå§‹ä½ç½®ä»¥ä¸€å®šçš„å›å¼¹æ•ˆæœç§»åŠ¨ã€‚å½“æ‰€æœ‰çš„è§†å›¾åœ¨åŠ¨ç”»æ’­æ”¾è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ—¶åˆ»è®¡ç®—å¹¶æˆ‘ä»¬çš„è´å¡å°”æ›²çº¿ï¼ˆæ¯ä¸€å¸§éƒ½è¿›è¡Œè®¡ç®—ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å‡†å¤‡ä½¿ç”¨CADisplayLinkï¼ŒCADisplayLinkåœ¨ä¸»å¾ªç¯ä¸­è¿è¡Œè€Œä¸”æ¯ä¸€å¸§éƒ½ä¼šå»æ‰§è¡ŒæŒ‡å®šçš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A CADisplayLink object is a timer object that allows your application to synchronize its drawing to the refresh rate of the display.    - Apple doc&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è®©æˆ‘ä»¬å¼€å§‹Codeå§~&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;build&#34;&gt;Build&lt;/h3&gt;

&lt;p&gt;åˆ›å»ºä¸€ä¸ªå•è§†å›¾æ§åˆ¶å™¨ï¼Œç„¶åå°†ä¸‹é¢è¿™äº›ä»£ç ç²˜è´´åˆ°viewController.swiftæ–‡ä»¶çš„ç±»å£°æ˜ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;// MARK: -
// MARK: Vars

private let minimalHeight: CGFloat = 50.0  
private let shapeLayer = CAShapeLayer()

// MARK: -

override func loadView() {  
    super.loadView()

    shapeLayer.frame = CGRect(x: 0.0, y: 0.0, width: view.bounds.width, height: minimalHeight)
    shapeLayer.backgroundColor = UIColor(red: 57/255.0, green: 67/255.0, blue: 89/255.0, alpha: 1.0).CGColor
    view.layer.addSublayer(shapeLayer)

    view.addGestureRecognizer(UIPanGestureRecognizer(target: self, action: &amp;#34;panGestureDidMove:&amp;#34;))
}

// MARK: -
// MARK: Methods

func panGestureDidMove(gesture: UIPanGestureRecognizer) {  
    if gesture.state == .Ended || gesture.state == .Failed || gesture.state == .Cancelled {

    } else {
        shapeLayer.frame.size.height = minimalHeight + max(gesture.translationInView(view).y, 0)
    }
}

override func preferredStatusBarStyle() -&amp;gt; UIStatusBarStyle {  
    return .LightContent
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬åšçš„å·¥ä½œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š
1. å£°æ˜äº†ä¸¤ä¸ªå˜é‡ï¼šshapeLayer å’Œ minimalHeightã€‚å‰è€…æ˜¯ç”¨æ¥è¡¨ç¤ºè´å¡å°”æ›²çº¿çš„ï¼Œåè€…æ˜¯ç”¨æ¥å®šä¹‰shapeLayeræœ€å°çš„é«˜åº¦å€¼ï¼›
2. å°†shapeLayeræ·»åŠ åˆ°viewçš„layerä¸­ï¼›
3. æ·»åŠ äº†ä¸€ä¸ªpanæ‰‹åŠ¿åˆ°viewä¸­ï¼Œå¹¶ä¸ºè¯¥æ‰‹åŠ¿æ·»åŠ panGestureDidMoveç›®æ ‡æ–¹æ³•ï¼Œå½“æ‰‹æŒ‡ç§»åŠ¨çš„æ—¶å€™å°±ä¼šè¢«è°ƒç”¨ï¼Œæˆ‘ä»¬åœ¨è¯¥æ–¹æ³•ä¸­ä¿®æ”¹shapeLayerçš„é«˜åº¦ï¼›
4. é‡å†™çˆ¶ç±»çš„preferredStatusBarStyleæ–¹æ³•æ¥ç¡®ä¿æˆ‘ä»¬çš„UIæ›´ç¾è§‚ä¸€äº›ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åç¼–è¯‘ä½ çš„ç¨‹åºï¼Œç¡®ä¿å®ç°äº†ä»¥ä¸‹æ•ˆæœï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/DGElasticPullToRefreshBuilds1.gif&#34; alt=&#34;Builds1&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä»¶äº‹æƒ…éƒ½åœ¨æŒ‰ç€æˆ‘ä»¬æœŸå¾…çš„å‘ˆç°ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹ç‘•ç–µã€‚é‚£å°±æ˜¯shapeLayerçš„é«˜åº¦å˜åŒ–æœ‰ä¸€å®šçš„å»¶è¿Ÿï¼ˆåŠ¨ç”»ï¼‰ï¼Œé‚£æ˜¯å› ä¸ºéšå¼åŠ¨ç”»çš„åŸå› ã€‚æˆ‘ä»¬ç¡®å®šä¸éœ€è¦è¿™æ ·çš„åŠ¨ç”»ï¼Œå› æ­¤åœ¨å°†shapeLayeræ·»åŠ åˆ°viewçš„sublayersä¸­ä¹‹å‰ç¦ç”¨è¯¥layerå…³äºpositionã€boundsä»¥åŠpathçš„éšå¼åŠ¨ç”»ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;shapeLayer.actions = [&amp;#34;position&amp;#34; : NSNull(), &amp;#34;bounds&amp;#34; : NSNull(), &amp;#34;path&amp;#34; : NSNull()]  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åå†æ¬¡è¿è¡Œï¼Œä¼šçœ‹åˆ°å»¶è¿Ÿçš„åŠ¨ç”»æ•ˆæœæ²¡æœ‰äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/DGElasticPullToRefreshBuilds2.gif&#34; alt=&#34;Builds2&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†æœ€å¼€å§‹æ‰€è¯´çš„é‚£äº›æ§åˆ¶ç‚¹ï¼ˆL3, L2, L1, C, R1, R2, R3ï¼‰åŠ å…¥åˆ°ç¨‹åºé‡Œï¼Œç„¶ååŠ å…¥å¿…è¦çš„é€»è¾‘ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;é¦–å…ˆï¼Œå£°æ˜ä¸€ä¸ªmaxWaveHeightå˜é‡ï¼Œå®šä¹‰è¿™ä¸ªå˜é‡çš„åŸå› ä»…ä»…æ˜¯å¸Œæœ›è®©æˆ‘ä»¬æœ€ç»ˆçš„æ•ˆæœå¥½çœ‹ä¸€äº›è€Œå·²ã€‚å¦‚æœä½ ä¸æŒ‡å®šè¿™ä¸ªæœ€å¤§å€¼ï¼Œæœ€ç»ˆçš„æ•ˆæœä¼šçœ‹èµ·æ¥å¾ˆä¸‘çš„ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;private let maxWaveHeight: CGFloat = 100.0  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ä¸ºæˆ‘ä»¬çš„æ§åˆ¶ç‚¹è§†å›¾å£°æ˜å˜é‡ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;private let l3ControlPointView = UIView()  
private let l2ControlPointView = UIView()  
private let l1ControlPointView = UIView()  
private let cControlPointView = UIView()  
private let r1ControlPointView = UIView()  
private let r2ControlPointView = UIView()  
private let r3ControlPointView = UIView()  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å°†ä¸Šé¢å®šä¹‰çš„æ§åˆ¶ç‚¹è§†å›¾è®¾ç½®ä¸º3*3çš„sizeï¼Œç„¶åèƒŒæ™¯è‰²è®¾ç½®ä¸ºçº¢è‰²ï¼ˆè¿™é‡Œæˆ‘ä»¬åªæ˜¯æš‚æ—¶å¸Œæœ›èƒ½å¤Ÿæ›´æ–¹ä¾¿æ¼”ç¤ºï¼Œæœ€ç»ˆå®Œæˆçš„æ—¶å€™ä¼šè®©å®ƒä»¬ä¸å¯è§çš„ï¼‰ï¼Œç„¶åå°†è¿™äº›æ§åˆ¶ç‚¹æ·»åŠ åˆ°Viewå­è§†å›¾ä¸­ã€‚å°†ä¸‹é¢è¿™äº›ä»£ç æ‹·è´åˆ°loadViewæ–¹æ³•çš„å°¾éƒ¨ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;l3ControlPointView.frame = CGRect(x: 0.0, y: 0.0, width: 3.0, height: 3.0)  
l2ControlPointView.frame = CGRect(x: 0.0, y: 0.0, width: 3.0, height: 3.0)  
l1ControlPointView.frame = CGRect(x: 0.0, y: 0.0, width: 3.0, height: 3.0)  
cControlPointView.frame = CGRect(x: 0.0, y: 0.0, width: 3.0, height: 3.0)  
r1ControlPointView.frame = CGRect(x: 0.0, y: 0.0, width: 3.0, height: 3.0)  
r2ControlPointView.frame = CGRect(x: 0.0, y: 0.0, width: 3.0, height: 3.0)  
r3ControlPointView.frame = CGRect(x: 0.0, y: 0.0, width: 3.0, height: 3.0)

l3ControlPointView.backgroundColor = .redColor()  
l2ControlPointView.backgroundColor = .redColor()  
l1ControlPointView.backgroundColor = .redColor()  
cControlPointView.backgroundColor = .redColor()  
r1ControlPointView.backgroundColor = .redColor()  
r2ControlPointView.backgroundColor = .redColor()  
r3ControlPointView.backgroundColor = .redColor()

view.addSubview(l3ControlPointView)  
view.addSubview(l2ControlPointView)  
view.addSubview(l1ControlPointView)  
view.addSubview(cControlPointView)  
view.addSubview(r1ControlPointView)  
view.addSubview(r2ControlPointView)  
view.addSubview(r3ControlPointView)  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªUIViewçš„æ‰©å±•ï¼Œå°†å…¶æ”¾åˆ°ViewControllerçš„å£°æ˜ä¸Šæ–¹ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;extension UIView {  
func dg_center(usePresentationLayerIfPossible: Bool) -&amp;gt; CGPoint {
    if usePresentationLayerIfPossible, let presentationLayer = layer.presentationLayer() as? CALayer {
        return presentationLayer.position
    }
    return center
}
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å½“UIViewä»ä¸€å¸§åˆ°å¦å¤–ä¸€å¸§è¿›è¡ŒåŠ¨ç”»çš„æ—¶å€™ï¼Œä½ ä¼šè¯•å›¾å»å–å¾—UIView.frameï¼Œè€ŒUIView.centerä¼šæä¾›ç»™ä½ åŠ¨ç”»æœ€ç»ˆçš„å€¼è€Œä¸æ˜¯æ¯ä¸€å¸§çš„è¿‡æ¸¡å€¼ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ‰©å±•æ–¹æ³•æä¾›ç»™æˆ‘ä»¬UIView.layer.presentationLayerçš„å®æ—¶ä½ç½®ï¼›
&amp;gt;  presentationLayerçš„è¯¦ç»†ä¿¡æ¯å¯ä»¥åœ¨&lt;a href=&#34;https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/#//apple_ref/occ/instm/CALayer/presentationLayer&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt; ä¸­æŸ¥çœ‹&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å£°æ˜ä¸€ä¸ªcurrentPath()æ–¹æ³•ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;private func currentPath() -&amp;gt; CGPath {  
let width = view.bounds.width

let bezierPath = UIBezierPath()

bezierPath.moveToPoint(CGPoint(x: 0.0, y: 0.0))
bezierPath.addLineToPoint(CGPoint(x: 0.0, y: l3ControlPointView.dg_center(false).y))
bezierPath.addCurveToPoint(l1ControlPointView.dg_center(false), controlPoint1: l3ControlPointView.dg_center(false), controlPoint2: l2ControlPointView.dg_center(false))
bezierPath.addCurveToPoint(r1ControlPointView.dg_center(false), controlPoint1: cControlPointView.dg_center(false), controlPoint2: r1ControlPointView.dg_center(false))
bezierPath.addCurveToPoint(r3ControlPointView.dg_center(false), controlPoint1: r1ControlPointView.dg_center(false), controlPoint2: r2ControlPointView.dg_center(false))
bezierPath.addLineToPoint(CGPoint(x: width, y: 0.0))

bezierPath.closePath()

return bezierPath.CGPath
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ³•è¿”å›shapeLayerå½“å‰çš„CGPathã€‚å®ƒç”¨åˆ°äº†æˆ‘ä»¬å‰é¢æ‰€å®šä¹‰å’Œè®¨è®ºçš„æ§åˆ¶ç‚¹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å£°æ˜updateShapeLayeræ–¹æ³•ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;func updateShapeLayer() {  
shapeLayer.path = currentPath()
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This function will be called when we need shapeLayer to be updated. It is not a private func because we are going to use Selector() for CADisplayLink.&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ³•ä¼šåœ¨shapeLayeréœ€è¦æ›´æ–°çš„æ—¶å€™è°ƒç”¨ã€‚
- å£°æ˜layoutControlPointsæ–¹æ³•ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;private func layoutControlPoints(baseHeight baseHeight: CGFloat, waveHeight: CGFloat, locationX: CGFloat) {  
    let width = view.bounds.width

    let minLeftX = min((locationX - width / 2.0) * 0.28, 0.0)
    let maxRightX = max(width + (locationX - width / 2.0) * 0.28, width)

    let leftPartWidth = locationX - minLeftX
    let rightPartWidth = maxRightX - locationX

    l3ControlPointView.center = CGPoint(x: minLeftX, y: baseHeight)
    l2ControlPointView.center = CGPoint(x: minLeftX + leftPartWidth * 0.44, y: baseHeight)
    l1ControlPointView.center = CGPoint(x: minLeftX + leftPartWidth * 0.71, y: baseHeight + waveHeight * 0.64)
    cControlPointView.center = CGPoint(x: locationX , y: baseHeight + waveHeight * 1.36)
    r1ControlPointView.center = CGPoint(x: maxRightX - rightPartWidth * 0.71, y: baseHeight + waveHeight * 0.64)
    r2ControlPointView.center = CGPoint(x: maxRightX - (rightPartWidth * 0.44), y: baseHeight)
    r3ControlPointView.center = CGPoint(x: maxRightX, y: baseHeight)
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™ä¸€éƒ¨åˆ†å¯èƒ½éœ€è¦è§£é‡Šä¸‹è¿™äº›å˜é‡çš„èŒè´£ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;baseHeight - baseçš„é«˜åº¦ã€‚  baseHeight + waveHeight = æˆ‘ä»¬æ‰€éœ€è¦çš„æ€»é«˜åº¦ï¼›&lt;/li&gt;
&lt;li&gt;waveHeight - æ›²çº¿çš„æ³¢æµªé«˜åº¦ï¼Œæˆ‘ä»¬å‰é¢çš„maxWaveHeightä¸ºå…¶è®¾å®šä¸€ä¸ªæœ€å¤§å€¼ï¼›&lt;/li&gt;
&lt;li&gt;locationX - æ‰‹æŒ‡åœ¨è§†å›¾ä¸­çš„ä½ç½®çš„Xåæ ‡&lt;/li&gt;
&lt;li&gt;width - æ˜¾è€Œæ˜“è§ï¼Œæˆ‘ä»¬è§†å›¾çš„å®½åº¦ï¼›&lt;/li&gt;
&lt;li&gt;minLeftX - å®šä¹‰l3ControlPointViewçš„åæ ‡Xå€¼çš„æœ€å°å€¼ï¼Œè¿™ä¸ªå€¼å¯ä»¥æ˜¯è´Ÿå€¼ï¼›&lt;/li&gt;
&lt;li&gt;maxRightX - å’ŒminLeftXç±»ä¼¼ï¼Œå®šä¹‰r3ControlPointViewçš„åæ ‡Xå€¼çš„æœ€å¤§å€¼ï¼›&lt;/li&gt;
&lt;li&gt;leftPartWidth - å®šä¹‰ minLeftX å’Œ locationXä¹‹é—´çš„è·ç¦»ï¼›&lt;/li&gt;
&lt;li&gt;rightPartWidth -  å®šä¹‰ locationX å’Œ maxRightXä¹‹é—´çš„è·ç¦»ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨è¿™äº›å€¼æ¥è®¾å®šæˆ‘ä»¬çš„æ§åˆ¶ç‚¹å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œæˆ‘ä½¿ç”¨äº†PaintCodeï¼Œç„¶åå†…éƒ¨å»ºç«‹è´å¡å°”æ›²çº¿ï¼Œä¸æ–­çš„è¯•ç›´åˆ°ä»¤æˆ‘æ»¡æ„
çš„æ•ˆæœæ—¶ï¼Œæˆ‘å°±å°†è¿™äº›å€¼æ›¿æ¢åˆ°ç¨‹åºä¸­å³å¯ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;æ›´æ–°æˆ‘ä»¬çš„panGestureDidMoveæ–¹æ³•ï¼Œè¿™æ ·å½“æˆ‘ä»¬æ‰‹æŒ‡ç§»åŠ¨çš„æ—¶å€™æ‰€æœ‰çš„æ§åˆ¶ç‚¹ä¹Ÿèƒ½ç§»åŠ¨ã€‚ç”¨ä»¥ä¸‹çš„ä»£ç æ›¿æ¢panGestureDidMoveæ–¹æ³•ä¸­çš„å†…å®¹ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;func panGestureDidMove(gesture: UIPanGestureRecognizer) {  
if gesture.state == .Ended || gesture.state == .Failed || gesture.state == .Cancelled {

} else {
    let additionalHeight = max(gesture.translationInView(view).y, 0)

    let waveHeight = min(additionalHeight * 0.6, maxWaveHeight)
    let baseHeight = minimalHeight + additionalHeight - waveHeight

    let locationX = gesture.locationInView(gesture.view).x

    layoutControlPoints(baseHeight: baseHeight, waveHeight: waveHeight, locationX: locationX)
    updateShapeLayer()
}
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æˆ‘ä»¬æ‰€åšçš„å°±æ˜¯è®¡ç®—waveé«˜åº¦ï¼ŒåŸºç¡€é«˜åº¦ä»¥åŠæ‰‹æŒ‡çš„ä½ç½®ï¼Œç„¶åè°ƒç”¨layoutControlPointså»å¸ƒå±€å„ä¸ªæ§åˆ¶ç‚¹ï¼Œç„¶åè°ƒç”¨updateShapeLayeræ¥æ›´æ–°æˆ‘ä»¬çš„shapeLayerçš„pathã€‚&lt;/p&gt;

&lt;p&gt;What we do is calculate wave height, base height, location of the finger and call our function: layoutControlPoints to layout control points and updateShapeLayer to update our shape layer path.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;åœ¨loadViewæ–¹æ³•å°¾éƒ¨æ·»åŠ ä¸¤è¡Œä»£ç ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨æ‰“å¼€appçš„æ—¶å€™æ­£ç¡®çš„æ˜¾ç¤ºï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;layoutControlPoints(baseHeight: minimalHeight, waveHeight: 0.0, locationX: view.bounds.width / 2.0)  
updateShapeLayer()  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ä¿®æ”¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;shapeLayer.backgroundColor = UIColor(red: 57/255.0, green: 67/255.0, blue: 89/255.0, alpha: 1.0).CGColor  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;shapeLayer.fillColor = UIColor(red: 57/255.0, green: 67/255.0, blue: 89/255.0, alpha: 1.0).CGColor  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åˆ°è¿™é‡Œï¼Œæ•ˆæœåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/DGElasticPullToRefreshBuilds3.gif&#34; alt=&#34;Build3&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åä¸€ä»¶è¦åšçš„äº‹æƒ…å°±æ˜¯ï¼ŒæŠŠæˆ‘ä»¬é‡Šæ”¾æ‰‹æŒ‡ä¹‹åçš„å›å¼¹åŠ¨ç”»æ•´åˆè¿›å»ã€‚
è¿˜æ˜¯è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥å§ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å®šä¹‰displayLinkå˜é‡ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;private var displayLink: CADisplayLink!&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨loadViewæ–¹æ³•çš„æœ«å°¾è¿›è¡Œåˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;displayLink = CADisplayLink(target: self, selector: Selector(&amp;#34;updateShapeLayer&amp;#34;))  
        displayLink.addToRunLoop(NSRunLoop.mainRunLoop(), forMode: NSDefaultRunLoopMode)
        displayLink.paused = true&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ï¼Œæˆ‘ä»¬çš„CADisplayLinkå¯¹è±¡ä¼šåœ¨æ¯ä¸€å¸§éƒ½è°ƒç”¨æŒ‡å®šçš„æ–¹æ³•ï¼ˆè¿™é‡Œå°±æ˜¯æŒ‡å®šçš„updateShapeLayerï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å°±å¯ä»¥åœ¨UIViewçš„åŠ¨ç”»æœŸé—´å®æ—¶çš„æ›´æ–°shapeLayerçš„pathäº†ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å®šä¹‰animatingå˜é‡ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;private var animating = false {  
didSet {
    view.userInteractionEnabled = !animating
    displayLink.paused = !animating
}
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™ä¸ªå¯ä»¥æ§åˆ¶ç”¨æˆ·äº¤äº’æ˜¯å¦å¼€å¯ä»¥åŠdisplayLinkçš„åœæ­¢å’Œæ’­æ”¾ï¼ˆåŠ¨ç”»æ’­æ”¾æœŸé—´ä½ è‚¯å®šä¸å¸Œæœ›ç”¨æˆ·çš„äº¤äº’ç›´æ¥å°±æŠŠåŠ¨ç”»æ•ˆæœç»™ç ´åäº†ã€‚ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;private func currentPath() -&amp;gt; CGPath {  
    let width = view.bounds.width

    let bezierPath = UIBezierPath()

    bezierPath.moveToPoint(CGPoint(x: 0.0, y: 0.0))
    bezierPath.addLineToPoint(CGPoint(x: 0.0, y: l3ControlPointView.dg_center(animating).y))
    bezierPath.addCurveToPoint(l1ControlPointView.dg_center(animating), controlPoint1: l3ControlPointView.dg_center(animating), controlPoint2: l2ControlPointView.dg_center(animating))
    bezierPath.addCurveToPoint(r1ControlPointView.dg_center(animating), controlPoint1: cControlPointView.dg_center(animating), controlPoint2: r1ControlPointView.dg_center(animating))
    bezierPath.addCurveToPoint(r3ControlPointView.dg_center(animating), controlPoint1: r1ControlPointView.dg_center(animating), controlPoint2: r2ControlPointView.dg_center(animating))
    bezierPath.addLineToPoint(CGPoint(x: width, y: 0.0))

    bezierPath.closePath()

    return bezierPath.CGPath
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ›´æ–°currentPathæ–¹æ³•ï¼Œå°†dg_centeræ–¹æ³•å‚æ•°æ¢ä¸ºanimatingå‚æ•°ä»…å½“åŠ¨ç”»éœ€è¦çš„æ—¶å€™æ‰æä¾›layerçš„å‡†ç¡®è¿‡æ¸¡å€¼ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;æœ€åä¸€æ­¥å°±æ˜¯éœ€è¦æ›´æ–°panGestureDidMoveæ–¹æ³•ä¸­çš„ifåˆ¤æ–­è¯­å¥ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;if gesture.state == .Ended || gesture.state == .Failed || gesture.state == .Cancelled {  
let centerY = minimalHeight

animating = true
UIView.animateWithDuration(0.9, delay: 0.0, usingSpringWithDamping: 0.57, initialSpringVelocity: 0.0, options: [], animations: { () -&amp;gt; Void in
    self.l3ControlPointView.center.y = centerY
    self.l2ControlPointView.center.y = centerY
    self.l1ControlPointView.center.y = centerY
    self.cControlPointView.center.y = centerY
    self.r1ControlPointView.center.y = centerY
    self.r2ControlPointView.center.y = centerY
    self.r3ControlPointView.center.y = centerY
    }, completion: { _ in
        self.animating = false
})
} else {
let additionalHeight = max(gesture.translationInView(view).y, 0)

let waveHeight = min(additionalHeight * 0.6, maxWaveHeight)
let baseHeight = minimalHeight + additionalHeight - waveHeight

let locationX = gesture.locationInView(gesture.view).x

layoutControlPoints(baseHeight: baseHeight, waveHeight: waveHeight, locationX: locationX)
updateShapeLayer()
}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æˆ‘ä»¬å·²ç»ä¸ºUIViewæ·»åŠ äº†SprintåŠ¨ç”»ï¼Œè®©æˆ‘ä»¬çš„æ§åˆ¶ç‚¹èƒ½å¤Ÿé€šè¿‡å¾ˆä¼˜é›…çš„å›å¼¹æ•ˆæœå›åˆ°å®ƒä»¬çš„ä½ç½®ã€‚ä½ å¯ä»¥ä¿®æ”¹ä»¥ä¸Šçš„å˜é‡å€¼æ¥ä½¿ä½ çš„åŠ¨ç”»çœ‹èµ·æ¥æ›´ä¼˜ç¾ï¼Œæ›´å¥½çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬åœ¨è®¾å¤‡ä¸Šè¿è¡Œä¸‹çœ‹çœ‹èƒ½å¤Ÿè®©ä½ éœ‡æƒŠçš„æ•ˆæœï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/DGElasticPullToRefreshBuilds4.gif&#34; alt=&#34;Build4&#34; /&gt;
å½“ç„¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¸å¤ªæƒ³æ˜¾ç¤ºè¿™äº›çº¢è‰²çš„ç‚¹ã€‚ä½ å¯ä»¥åœ¨loadViewæ–¹æ³•ä¸­ç§»é™¤é‚£äº›è®¾ç½®è¿™äº›æ§åˆ¶ç‚¹çš„frameä»¥åŠèƒŒæ™¯è‰²çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¬¡è¿è¡Œä»£ç æ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/DGElasticPullToRefreshBuilds5.gif&#34; alt=&#34;Build5&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ•ˆæœå¾ˆå®Œç¾ï¼Œä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æœ‰ä¸€ä»¶äº‹æƒ…æˆ‘ä»¬å¿˜è®°åšäº†ï¼Œå°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æ”¹å˜shapeLayerçš„é«˜åº¦ï¼Œæˆ‘ä»¬ä»…ä»…ä¿®æ”¹äº†pathçš„é«˜åº¦ã€‚è¿™ä¸ªä¸å¤Ÿå®Œç¾ï¼Œéœ€è¦ä¿®å¤å®ƒã€‚æˆ‘æƒ³è¿™ä¸ªå¯¹äºä½ æ¥è¯´åº”è¯¥æ˜¯ä¸é”™çš„ä½œä¸šã€‚å°½æƒ…ä¿®æ”¹frameã€pathä»¥åŠæ‰€æœ‰å˜é‡çš„å€¼å§ï¼&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªDemoçš„æºç åœ¨&lt;a href=&#34;https://github.com/gontovnik/DGElasticBounceTutorial&#34;&gt;è¿™é‡Œ&lt;/a&gt;
&lt;a href=&#34;https://github.com/gontovnik/DGElasticPullToRefresh&#34;&gt;DGElasticPullToRefresh&lt;/a&gt;çš„æºç åœ¨è¿™é‡Œ&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      
    </item>
    
    <item>
      <title>Objective-Cä¸­Categoryçš„ä¸€ç‚¹ä¸œè¥¿</title>
      <link>https://hechen.xyz/post/objective-c%E4%B8%ADcategory%E7%9A%84%E4%B8%80%E7%82%B9%E4%B8%9C%E8%A5%BF/</link>
      <pubDate>Mon, 14 Sep 2015 15:36:07 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/objective-c%E4%B8%ADcategory%E7%9A%84%E4%B8%80%E7%82%B9%E4%B8%9C%E8%A5%BF/</guid>
      
        <description>

&lt;p&gt;Objective-Cä¸­çš„åˆ†ç±»ï¼ˆcategoryï¼‰æ˜¯ä¸€ç§ç¼–è¯‘æ—¶çš„æ‰‹æ®µï¼Œå…¶å…è®¸æˆ‘ä»¬é€šè¿‡ç»™æŸä¸ªå·²çŸ¥ç±»æ·»åŠ æ–¹æ³•æ¥æ‰©å……è¯¥ç±»çš„ä¸€ç§æ–¹å¼ã€‚å½“ç„¶è¿™å…¶ä¸­æ˜¯æœ‰é™åˆ¶çš„ï¼Œå°±æ˜¯ä¸èƒ½ç»™å·²çŸ¥ç±»æ·»åŠ æ–°çš„å®ä¾‹å˜é‡ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;å¦‚ä¸‹ä»£ç å±•ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;ç±»&lt;code&gt;MyClass&lt;/code&gt;ä¸ºä¸€ä¸ªç®€å•çš„ç±»ï¼Œå…¶ä¸­æœ‰å®ä¾‹æ–¹æ³• &lt;code&gt;-print&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;Foundation/Foundation.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; : &lt;span class=&#34;nc&#34;&gt;NSObject&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-MyClass.m&#34; data-lang=&#34;MyClass.m&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-MyClass.m&#34; data-lang=&#34;MyClass.m&#34;&gt;#&lt;span class=&#34;n&#34;&gt;import&lt;/span&gt; &amp;#34;&lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&amp;#34;
&lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;implementation&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(@&lt;/span&gt;&amp;#34;&lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;...&amp;#34;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å‘ä¸ºMyClasså†æ·»åŠ ä¸€ä¸ªæ–¹æ³•Helloï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ†ç±»çš„æ–¹æ³•å®ç°ï¼Œæˆ‘ä»¬ä¸ºå…¶æ·»åŠ åˆ†ç±»MyAddition1å’ŒMyAddition2ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition1)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@property&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nonatomic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass+MyAddition1.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition1)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;hello&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;hello!!!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­MyAdditionä¸ºåˆ†ç±»çš„åç§°ï¼Œè€Œæ–‡ä»¶åå­—çº¦å®šä¿—æˆç”¨â€œç±»å+æ‰©å±•åâ€çš„å½¢å¼ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿä¸ºMyClassç±»æ·»åŠ helloæ–¹æ³•äº†ï¼Œå¦‚ä¸‹è°ƒç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass+MyAddition1.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Category çš„ä½¿ç”¨åœºæ™¯ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š
1. éœ€æ±‚å˜æ›´ï¼Œéœ€è¦ä¸ºå·²çŸ¥ç±»æ·»åŠ æ–¹æ³•ï¼›
2. å°†ç±»çš„ä¸åŒæ¨¡å—å®ç°åˆ’åˆ†: a)å…·ä½“å¯ä»¥å°†ç±»çš„å®ç°åˆ†å¼€åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œé¢ï¼› b)å°†ä¸åŒåŠŸèƒ½çš„åˆ†ç±»æ–‡ä»¶äº¤ç”±ä¸åŒçš„å¼€å‘è€…å®ç°ï¼›
3. æƒ³ä¸ºAppleåŸºç¡€ç±»åº“æ·»åŠ è‡ªå·±éœ€è¦çš„æ–¹æ³•ï¼Œå®é™…ä¸Šå’Œ1ç›¸ä¼¼ï¼›&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯åˆ†ç±»çš„ä½¿ç”¨ç›®å‰ä¹Ÿæœ‰éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š
1. Categoryå¯ä»¥è®¿é—®åŸæœ‰ç±»çš„å®ä¾‹å˜é‡ï¼Œä½†ä¸èƒ½æ·»åŠ å®ä¾‹å˜é‡ï¼›
2. Categoryä¸­å®ç°å’ŒåŸæœ‰ç±»ä¸­ç›¸åŒç­¾åçš„æ–¹æ³•æ—¶ï¼Œä¼šè¦†ç›–åŸæœ‰ç±»çš„æ–¹æ³•ï¼›&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è¿™ä¸¤ç‚¹å‡å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ï¼š&lt;/p&gt;

&lt;h3 id=&#34;ä¸ºåˆ†ç±»æ·»åŠ å®ä¾‹å˜é‡&#34;&gt;ä¸ºåˆ†ç±»æ·»åŠ å®ä¾‹å˜é‡&lt;/h3&gt;

&lt;p&gt;ä¸ºåˆ†ç±»æ·»åŠ å®ä¾‹å˜é‡ä¸»è¦é€šè¿‡å…³è”å¯¹è±¡çš„æ–¹æ³•ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition1)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@property&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nonatomic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass+MyAddition1.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;objc/objc-runtime.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition1)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;setName:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;objc_setAssociatedObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_COPY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_getAssociatedObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;key&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;å¦‚æœè°ƒç”¨è¢«åˆ†ç±»è¦†ç›–æ‰çš„åŸæ–¹æ³•&#34;&gt;å¦‚æœè°ƒç”¨è¢«åˆ†ç±»è¦†ç›–æ‰çš„åŸæ–¹æ³•&lt;/h4&gt;

&lt;p&gt;å®é™…ä¸Šï¼Œé€šè¿‡æŸ¥çœ‹Objc runtimeæºç å¯ä»¥è·çŸ¥ï¼Œåˆ†ç±»æ–¹æ³•å¹¶ä¸æ˜¯ç»å¯¹æ„ä¹‰ä¸Šçš„è¦†ç›–åŸæœ‰ç±»çš„æ–¹æ³•ï¼Œåªæ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™è°ƒç”¨é¡ºåºå¯¼è‡´è€Œå·²ï¼Œè¿™æ¶‰åŠåˆ°Objc runtimeçš„ä¸€äº›å†…å®¹ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä¸‹è½½åˆ°çš„è¿è¡Œæ—¶æºç ä¸­objc-runtime-new.mmæ–‡ä»¶ä¸­æœ‰attachCategoryMethodsæ–¹æ³•ï¼Œå…¶å°±æ˜¯å°†ç±»çš„åˆ†ç±»æ–¹æ³•æ·»åŠ åˆ°ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å»çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// objc-runtime-new.mm
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; 
&lt;span class=&#34;nf&#34;&gt;attachCategoryMethods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;category_list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flushCaches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PrintReplacedMethods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;printReplacements&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;isMeta&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isMetaClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;_malloc_internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Count backwards through cats to get newest categories first
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mcount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;BOOL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fromBundle&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cat_method_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;isMeta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;mlists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mcount&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;fromBundle&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromBundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;attachMethodLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mlists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mcount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fromBundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flushCaches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;_free_internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é‚£&lt;code&gt;attachCategoryMethods&lt;/code&gt;çš„å·¥ä½œå°±æ˜¯å°†æ‰€æœ‰åˆ†ç±»çš„å®ä¾‹æ–¹æ³•åˆ—è¡¨è¿›è¡Œæ‹¼æ¥ï¼Œå½¢æˆæ›´å¤§çš„&lt;code&gt;mlists&lt;/code&gt;è¡¨ï¼Œç„¶åè½¬äº¤ç»™&lt;code&gt;attachMethodLists&lt;/code&gt;æ–¹æ³•æ¥æ‰§è¡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; 
&lt;span class=&#34;nf&#34;&gt;attachMethodLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addedLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addedCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
                  &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;baseMethods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;methodsFromBundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
                  &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flushCaches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;rwlock_assert_writing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runtimeLock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Don&amp;#39;t scan redundantly
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scanForCustomRR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UseGC&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasCustomRR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scanForCustomAWZ&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UseGC&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasCustomAWZ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// There exist RR/AWZ special cases for some class&amp;#39;s base methods. 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// But this code should never need to scan base methods for RR/AWZ: 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// default RR/AWZ cannot be set before setInitialized().
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// Therefore we need not handle any special cases here.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;baseMethods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scanForCustomRR&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scanForCustomAWZ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Method list array is nil-terminated.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// Some elements of lists are nil; we must filter them out.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oldBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RW_METHOD_ARRAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method_lists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;oldBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;oldBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oldCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldCount&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addedCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addedLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// only non-nil entries get added
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;_malloc_internal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Add method lists to array.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// Reallocate un-fixed method lists.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// The new methods are PREPENDED to the method list array.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addedCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;method_list_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addedLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Fixup selectors if necessary
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isMethodListFixedUp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fixupMethodList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;methodsFromBundle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*sort*/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Scan for method implementations tracked by the class&amp;#39;s flags
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scanForCustomRR&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;methodListImplementsRR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setHasCustomRR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;scanForCustomRR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scanForCustomAWZ&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;methodListImplementsAWZ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setHasCustomAWZ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;scanForCustomAWZ&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Update method caches
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;flushCaches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;cache_eraseMethods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        
        &lt;span class=&#34;c1&#34;&gt;// Fill method list array
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mlist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Copy old methods to the method list array
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;oldLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// nil-terminate
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method_lists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RW_METHOD_ARRAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newBuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method_list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newLists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RW_METHOD_ARRAY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ³¨æ„ä¸Šé¢ä»£ç ä¸­æ³¨é‡Šcopy old methods to the method list arrayï¼Œå¯ä»¥è·çŸ¥è¯¥ç±»åŸæœ‰çš„æ–¹æ³•è¢«è¿½åŠ åˆ°äº†æ–°æ–¹æ³•åˆ—è¡¨çš„åé¢ï¼Œå› æ­¤å¯ä»¥äº†è§£å¦‚æœcategoryå’ŒåŸæ¥çš„éƒ½ç”±methodAæ–¹æ³•ï¼Œé‚£newListsä¸­è‚¯å®šå­˜åœ¨ä¸¤ä¸ªmethodAæ–¹æ³•ã€‚è€Œè¿è¡Œæ—¶åœ¨æŸ¥æ‰¾ç±»æ–¹æ³•çš„æ—¶å€™æ˜¯åœ¨æ–¹æ³•åˆ—è¡¨ä¸­æŒ‰åºæŸ¥æ‰¾çš„ï¼Œä¸€æ—¦å‘ç°å¯¹åº”ç­¾åçš„æ–¹æ³•åˆ™å°±è¿”å›ï¼Œå› æ­¤è¢«åç½®çš„åŸæœ‰æ–¹æ³•è‡ªç„¶è€Œç„¶å°±è¢«æ–¹æ³•åˆ—è¡¨å‰é¢çš„åŒç­¾åæ–¹æ³•æ‰€è¦†ç›–äº†ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œå¦‚æœè¿˜æœ‰ä¸€ä¸ªåˆ†ç±»ä¹Ÿè¦†ç›–äº†åŒæ ·çš„æ–¹æ³•ï¼Œé¡ºåºåˆæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿæ ¹æ®æ–‡ä»¶çš„ç¼–è¯‘é¡ºåºï¼Œæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œå…³äºç¼–è¯‘é¡ºåºã€‚ã€‚ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosXCodeç¼–è¯‘é¡ºåºè°ƒæ•´.png&#34; alt=&#34;XCodeæ–‡ä»¶ç¼–è¯‘é¡ºåºè°ƒæ•´&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ˜ç™½äº†è¿™ç§æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è°ƒç”¨ç±»çš„è¢«è¦†ç›–çš„æ–¹æ³•ï¼Œåˆ™é€šè¿‡æŸ¥æ‰¾ç±»çš„å®ä¾‹æ–¹æ³•åˆ—è¡¨ä¸­å¯¹åº”ç­¾åçš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•åˆ—è¡¨å‰é¢çš„è‡ªç„¶å°±æ˜¯åˆ†ç±»æ‰€å¯¹åº”çš„æ–¹æ³•ï¼Œè€Œæœ€åä¸€ä¸ªåˆ™æ˜¯MyClassçš„åŸæœ‰æ–¹æ³•äº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;Foundation/Foundation.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; : &lt;span class=&#34;nc&#34;&gt;NSObject&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;MyClass&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸ºMyClassæ·»åŠ åˆ†ç±»MyAddition1ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition1)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass+MyAddition1.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition1)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;MyAddition1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åå†æ·»åŠ &lt;code&gt;MyAddition2&lt;/code&gt;åˆ†ç±»ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition2)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass+MyAddition2.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(MyAddition2)&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;MyAddition2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“æˆ‘ä»¬å°†æ•´ä¸ªæ–‡ä»¶ç¼–è¯‘ä¹‹åæˆ‘ä»¬å°±å¯ä»¥è·å¾—MyClassæ‰€æœ‰çš„æ–¹æ³•äº†ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;#34;MyClass.h&amp;#34;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt;objc/objc-runtime.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;@autoreleasepool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        
        &lt;span class=&#34;kt&#34;&gt;Class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        
        &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;my&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;methodCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;Method&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;methodList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;class_copyMethodList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;methodCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            
            &lt;span class=&#34;kt&#34;&gt;IMP&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lastImp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lastSel&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSInteger&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;methodCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;Method&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;methodList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;methodName&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;stringWithCString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sel_getName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method_getName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;encoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSUTF8StringEncoding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
				&lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;methodName: %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;methodName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;methodName&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;isEqualToString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;print&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;lastImp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method_getImplementation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;lastSel&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method_getName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        
            &lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lastImp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lastImp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;my&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lastSel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            
            &lt;span class=&#34;n&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;methodList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä»£ç å†…å®¹å°±æ˜¯å°†ç±»æ‰€å¯¹åº”çš„æ–¹æ³•åˆ—è¡¨å–å‡ºï¼Œæ‰¾åˆ°æœ€åä¸€ä¸ªå¯¹åº”åç§°çš„æ–¹æ³•ï¼Œå–å¾—å‡½æ•°æŒ‡é’ˆï¼Œç„¶åä¼ å…¥å‚æ•°æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;26&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;59.793&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;88888&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10428876&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MyAddition2&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;26&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;59.794&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;88888&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10428876&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;methodName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;26&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;59.795&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;88888&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10428876&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;methodName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;26&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;59.795&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;88888&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10428876&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;methodName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;38.941&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;88888&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10428876&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MyClass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“æˆ‘ä»¬ä½¿ç”¨printæ–¹æ³•æ—¶ï¼Œæ‰“å°ä¸ºMyAddition2ä¸­çš„å®ç°ï¼Œå¹¶ä¸”MyClassç±»æ–¹æ³•åˆ—è¡¨ä¸­æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å‡ä¸ºprintï¼Œå–å‡ºåˆ—è¡¨ä¸­æœ€åä¸€ä¸ªprintå¹¶è°ƒç”¨æ‰“å°ç»“æœä¸ºMyClassç±»åŸæœ‰ç±»ä¸­çš„å®ç°ã€‚æ­¤æ—¶å°±è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ã€‚
å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è°ƒæ•´ä¸‹MyClass+MyAddition1.mæ–‡ä»¶å’ŒMyClass+MyAddition2.mæ–‡ä»¶çš„é¡ºåºéªŒè¯ä¸‹ï¼Œç»“æœMyClassé»˜è®¤è¾“å‡ºä¸ºMyAddition1.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ç†è§£Objective-Cè¿è¡Œæ—¶</title>
      <link>https://hechen.xyz/post/understanding-the-objective-c-runtime/</link>
      <pubDate>Mon, 07 Sep 2015 17:55:33 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/understanding-the-objective-c-runtime/</guid>
      
        <description>

&lt;p&gt;Objective-C è¿è¡Œæ—¶å¯¹äºåˆšåˆšè¸å…¥ Cocoa/Objective ä¸–ç•Œçš„äººæ˜¯å¾ˆå®¹æ˜“å¿½
ç•¥çš„ Objective-C è¯­è¨€çš„ç‰¹æ€§ä¹‹ä¸€ã€‚åŸå› å°±æ˜¯å°½ç®¡ Objective-C æ˜¯ä¸€é—¨å‡ ä¸ªå°æ—¶ä¹‹å†…å…¥é—¨çš„è¯­è¨€ï¼Œä½†æ˜¯æŠ•èº« Cocoa çš„æ–°æ‰‹ä»¬ä¼šèŠ±è´¹å¤§é‡æ—¶é—´åœ¨ Cocoa æ¡†æ¶ä¸­ï¼Œè¯•å›¾ææ¸…æ¥šä»–åˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚&lt;!-- more --&gt; æˆ‘è§‰å¾—æ¯ä¸ªå¼€å‘è€…éƒ½åº”è¯¥å¯¹å…¶æœ‰æ·±å…¥çš„äº†è§£ï¼Œæ˜ç™½ä¸€äº›å†…éƒ¨çš„å®ç°ç»†èŠ‚ï¼Œè€Œä¸ä»…ä»…åªçŸ¥é“ä»£ç  &lt;code&gt;[target doMethodWith:var]&lt;/code&gt; ä¼šè¢«ç¼–è¯‘å™¨è½¬æ¢æˆ &lt;code&gt;objc_msgSend(target,@selector(doMethodWith:),var1);&lt;/code&gt; è€Œå·²ã€‚äº†è§£ Objective-C è¿è¡Œæ—¶çš„åŸç†æœ‰åŠ©äºä½ å¯¹ Objective-C è¯­è¨€æœ‰æ›´æ·±å…¥çš„ç†è§£ï¼Œæ¸…æ¥šä½ å¾— App æ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚æˆ‘è§‰å¾—è¿™å¯¹æ— è®ºæ˜¯ Mac/iPhone æ–°æ‰‹æˆ–è€…è€æ‰‹éƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h4 id=&#34;objective-cè¿è¡Œæ—¶æ˜¯å¼€æºçš„&#34;&gt;Objective-Cè¿è¡Œæ—¶æ˜¯å¼€æºçš„&lt;/h4&gt;

&lt;p&gt;Objective-C è¿è¡Œæ—¶æ˜¯å¼€æºçš„ï¼Œä½ å¯ä»¥éšæ—¶ä» &lt;a href=&#34;http://opensource.apple.com&#34;&gt;Apple&lt;/a&gt; è·å–åˆ°ã€‚å®é™…ä¸ŠæŸ¥çœ‹ Objective-C è¿è¡Œæ—¶æºç æ˜¯æˆ‘ææ¸…æ¥šè¿™ä¸ªè¯­è¨€æ˜¯æ€ä¹ˆè¿ä½œçš„é¦–é€‰æ–¹æ³•ï¼Œè€Œä¸æ˜¯å»æŸ¥çœ‹å’Œå®ƒç›¸å…³çš„è‹¹æœæ–‡æ¡£ã€‚ä½ å¯ä»¥åˆ°&lt;a href=&#34;http://opensource.apple.com/tarballs/objc4/objc4-437.1.tar.gz&#34;&gt;è¿™é‡Œ&lt;/a&gt; ä¸‹è½½åˆ°è¿è¡Œæ—¶çš„æºç ï¼ˆæˆªæ­¢åˆ°è¯‘è€…ç¿»è¯‘çš„æ—¶å€™ï¼Œæœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶æ˜¯objc4-647.tar.gzï¼‰ã€‚&lt;/p&gt;

&lt;h4 id=&#34;åŠ¨æ€-vs-é™æ€&#34;&gt;åŠ¨æ€ Vs. é™æ€&lt;/h4&gt;

&lt;p&gt;Objective-C æ˜¯ä¸€é—¨åŠ¨æ€çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥å°†ç¼–è¯‘é“¾æ¥æ—¶å†³å®šçš„äº‹æƒ…æ¨è¿Ÿåˆ°è¿è¡Œæ—¶è¿›è¡Œã€‚è¿™å°±ç»™äº†ä½ å¾ˆå¤§çš„çµæ´»æ€§ï¼Œä½ å¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€è¦é‡å®šå‘æ¶ˆæ¯åˆ°é€‚å½“çš„å¯¹è±¡ä¸Šï¼Œä½ ç”šè‡³å¯ä»¥äº¤æ¢æ–¹æ³•å®ç°ï¼ˆè¯‘è€…æ³¨ï¼šmethod swizzlingï¼Œæ–¹æ³•è°ƒé…ï¼Œå¼€å‘è€…å¸¸ç”¨æ­¤æŠ€æœ¯å‘åŸæœ‰å®ç°ä¸­æ·»åŠ æ–°åŠŸèƒ½ï¼‰ã€‚è€Œè¿è¡Œæ—¶å¯ä»¥ä½¿å¯¹è±¡æ˜ç™½è‡ªå·±å¯ä»¥å“åº”å“ªäº›æ¶ˆæ¯ï¼Œä¸èƒ½å“åº”å“ªäº›æ¶ˆæ¯ï¼ˆè¯‘è€…æ³¨ï¼šintrospect å†…çœï¼‰ï¼Œå¹¶æ­£ç¡®çš„æ´¾å‘æ¶ˆæ¯ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼š å†…çœï¼ˆintrospectionï¼‰æ˜¯é¢å‘å¯¹è±¡è¯­è¨€å’Œç¯å¢ƒçš„ä¸€ä¸ªå¼ºå¤§ç‰¹æ€§ï¼ŒObjective-Cå’ŒCocoaåœ¨è¿™ä¸ªæ–¹é¢å°¤å…¶çš„ä¸°å¯Œã€‚å†…çœæ˜¯å¯¹è±¡æ­ç¤ºè‡ªå·±ä½œä¸ºä¸€ä¸ªè¿è¡Œæ—¶å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯çš„ä¸€ç§èƒ½åŠ›ã€‚è¿™äº›è¯¦ç»†ä¿¡æ¯åŒ…æ‹¬å¯¹è±¡åœ¨ç»§æ‰¿æ ‘ä¸Šçš„ä½ç½®ï¼Œå¯¹è±¡æ˜¯å¦éµå¾ªç‰¹å®šçš„åè®®ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥å“åº”ç‰¹å®šçš„æ¶ˆæ¯ã€‚NSObjectåè®®å’Œç±»å®šä¹‰äº†å¾ˆå¤šå†…çœæ–¹æ³•ï¼Œç”¨äºæŸ¥è¯¢è¿è¡Œæ—¶ä¿¡æ¯ï¼Œä»¥ä¾¿æ ¹æ®å¯¹è±¡çš„ç‰¹å¾è¿›è¡Œè¯†åˆ«ã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒ: &lt;a href=&#34;https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/Introspection/Introspection.html&#34;&gt;Objective-C çš„ Introspection&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘ä»¬å°†è¿™äº›ç‰¹å¾å’ŒCè¯­è¨€è¿›è¡Œå¯¹æ¯”æ¥çœ‹ï¼Œåœ¨Cä¸­ï¼Œä½ ä»&lt;code&gt;main()&lt;/code&gt;å‡½æ•°å¼€å§‹ï¼Œç„¶åæŒ‰é¡ºåºä»ä¸Šå¾€ä¸‹å†™ä½ çš„ä»£ç é€»è¾‘æˆ–è€…æ‰§è¡Œå‡½æ•°æ–¹æ³•ã€‚Cç»“æ„ä½“æ˜¯æ— æ³•å°†è¯·æ±‚è½¬å‘åˆ°å…¶ä»–ç›®æ ‡å¯¹è±¡æ¥æ‰§è¡Œæ–¹æ³•çš„ã€‚ä½ å¾ˆå¯èƒ½å†™äº†å¦‚ä¸‹ç±»ä¼¼çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt; stdio.h &amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt; 
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç¼–è¯‘å™¨è§£æã€ä¼˜åŒ–ç„¶åå°†ä¼˜åŒ–åçš„ä»£ç è½¬æ¢æˆå¦‚ä¸‹çš„æ±‡ç¼–è¯­è¨€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;align&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x90&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;globl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_main&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;_main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;Leh_func_begin1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;pushq&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbp&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;Llabel1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movq&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rsp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbp&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;Llabel2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;subq&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rsp&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;Llabel3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movq&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rsi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rax&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;edi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ecx&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ecx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movq&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;xorb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;al&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;al&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;leaq&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcx&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movq&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rcx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rdi&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;call&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_printf&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movl&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;movl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;eax&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;addq&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rsp&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;popq&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbp&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;Leh_func_end1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cstring&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;LC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asciz&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åå°†å…¶å’ŒCåº“é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒObjective-Cè¯­è¨€æ•´ä¸ªè¿‡ç¨‹å’Œä¸Šé¢ç±»ä¼¼ï¼Œä¸è¿‡ä»£ç çš„äº§ç”Ÿä¾èµ–Objective-Cè¿è¡Œæ—¶çš„å…·ä½“è¡¨ç°ï¼ˆè¯‘è€…æ³¨ï¼šè¿è¡Œæ—¶æŒ‰ç…§ä¸åŒæƒ…å†µï¼Œç”Ÿæˆä¸åŒçš„ä»£ç å§ï¼‰ã€‚å½“æˆ‘ä»¬åˆšæ¥è§¦Objective-Cè¯­è¨€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½è¢«å‘ŠçŸ¥åƒå¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;doSomethingWithVar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;var1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¼šè¢«è½¬æ¢æˆ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;n&#34;&gt;objc_msgSend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;@selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;doSomethingWithVar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:),&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;var1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è€Œé™¤äº†è¿™äº›ï¼Œæˆ‘ä»¬ä¼¼ä¹å°±ä¸æ¸…æ¥šè¿è¡Œæ—¶è¿˜å¹²äº†ä»€ä¹ˆã€‚&lt;/p&gt;

&lt;h4 id=&#34;ä»€ä¹ˆæ˜¯-objective-c-è¿è¡Œæ—¶&#34;&gt;ä»€ä¹ˆæ˜¯ Objective-C è¿è¡Œæ—¶ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;Objective-C Runtime æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶åº“ï¼Œä¸»è¦æ˜¯ç”±Cè¯­è¨€å’Œæ±‡ç¼–è¯­è¨€å†™æˆï¼Œä¸º C è¯­è¨€æ·»åŠ é¢å‘å¯¹è±¡çš„èƒ½åŠ›è€Œåˆ›é€ äº† Objective-Cï¼ˆè¯‘è€…æ³¨ï¼šæ­£æ˜¯ OC Runtimeï¼Œæ‰æœ‰ OC è¿™é—¨è¯­è¨€ï¼‰ã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥åŠ è½½ç±»ä¿¡æ¯ï¼Œè¿›è¡Œæ–¹æ³•æ´¾å‘ä»¥åŠæ–¹æ³•è½¬å‘ç­‰ç­‰ã€‚Objective-C è¿è¡Œæ—¶æœ€é‡è¦çš„å°±æ˜¯ä¸ºObjective-Cè¯­è¨€çš„é¢å‘å¯¹è±¡ç‰¹æ€§çš„å®ç°æä¾›äº†æ‰€æœ‰çš„åŸºç¡€æ”¯æ’‘ã€‚&lt;/p&gt;

&lt;h4 id=&#34;objective-c-è¿è¡Œæ—¶æœ¯è¯­&#34;&gt;Objective-C è¿è¡Œæ—¶æœ¯è¯­&lt;/h4&gt;

&lt;p&gt;åœ¨æˆ‘ä»¬è¿›ä¸€æ­¥äº†è§£æ•´ä¸ªè¿è¡Œæ—¶ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€äº›æ¥ä¸‹æ¥å‡ºç°çš„æœ¯è¯­ã€‚æˆªè‡³ç›®å‰Macå’ŒiPhoneçš„å¼€å‘è€…å…³å¿ƒçš„æœ‰ä¸¤ä¸ªè¿è¡Œæ—¶ï¼šModern Runtime &amp;amp; Legacy Runtime ã€‚å‰è€…è¦†ç›–æ‰€æœ‰64ä½Mac OS X çš„appå’Œæ‰€æœ‰çš„iOS appï¼Œåè€…è¦†ç›–å…¶ä½™çš„ï¼ˆå…¨éƒ¨çš„Mac OS X 32ä½ Appï¼‰ã€‚å…³äºæ–¹æ³•ï¼Œè¿™é‡Œæœ‰ä¸¤ç§åŸºæœ¬ç±»å‹çš„æ–¹æ³•ï¼Œä¸€ç§æ˜¯å®ä¾‹æ–¹æ³•ï¼ˆ&amp;rsquo;-&amp;lsquo;å¼€å¤´ï¼Œ ä¾‹å¦‚&lt;code&gt;-(void)doFoo&lt;/code&gt;ï¼Œä½œç”¨äºå¯¹è±¡å®ä¾‹ï¼‰ï¼Œå¦ä¸€ç§æ˜¯ç±»æ–¹æ³•ï¼ˆ&amp;rsquo;+&amp;lsquo;å¼€å¤´ï¼Œä¾‹å¦‚&lt;code&gt;+(id)alloc&lt;/code&gt;ï¼‰ã€‚æ–¹æ³•å°±åƒCè¯­è¨€ä¸­çš„å‡½æ•°ç±»ä¼¼ï¼Œä¸€æ®µä»£ç å®Œæˆä¸€ä¸ªå°çš„ä»»åŠ¡ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;movieTitle&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;@&amp;#34;Futurama: Into the Wild Green Yonder&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Selector&lt;/strong&gt;&lt;br /&gt;
Objective-Cä¸­çš„Selectorï¼ˆé€‰æ‹©å­ï¼‰æ˜¯ä¸€ä¸ªé‡è¦çš„Cæ•°æ®ç»“æ„ï¼Œç”¨ä»¥æ ‡è¯†ä½ è¦ä¸€ä¸ªå¯¹è±¡æ‰§è¡Œçš„Objective-Cæ–¹æ³•ã€‚åœ¨è¿è¡Œæ—¶ä¸­ï¼ŒSelectorçš„å®šä¹‰åº”è¯¥å’Œä¸‹é¢è¿™æ ·ç±»ä¼¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_selector&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç”¨æ³•å°±åƒä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aSel&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;@selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;movieTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Message&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;getMovieTitleForObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Objective-Cä¸­çš„æ–¹æ³•ç”±ä¸¤ä¸ªæ–¹æ‹¬å·[]ç»„æˆï¼Œæ‹¬å·ä¸­é—´æ˜¯ä½ å°†è¦å°†æ¶ˆæ¯å‘å¾€çš„ç›®æ ‡å¯¹è±¡å’Œä½ å°†è¦è¯¥å¯¹è±¡æ‰§è¡Œçš„æ–¹æ³•ä»¥åŠæ‰€éœ€è¦å‘é€çš„å‚æ•°åˆ—è¡¨ã€‚Objective-Cä¸­çš„æ¶ˆæ¯å’ŒCå‡½æ•°ç±»ä¼¼ï¼Œä½†æ˜¯åˆä¸åŒã€‚ä½ å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯å¹¶ä¸æ„å‘³ç€è¯¥å¯¹è±¡å°±ä¸€å®šä¼šæ‰§è¡Œå®ƒã€‚è¿™ä¸ªå¯¹è±¡ä¼šæ£€æŸ¥è¯¥æ¶ˆæ¯çš„å‘é€è€…ï¼Œç„¶ååŸºäºè¯¥å‘é€è€…è¦ä¹ˆæ‰§è¡Œä¸€ä¸ªä¸åŒçš„æ–¹æ³•æˆ–è€…å°†è¯¥æ¶ˆæ¯è½¬å‘ç»™å¦å¤–çš„ä¸åŒçš„å¯¹è±¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Class&lt;/strong&gt;
å¦‚æœä½ çœ‹è¿‡Runtimeä¸­å…³äºç±»çš„å®šä¹‰ä¿¡æ¯ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_class&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_object&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;Class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;isa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™å…¶ä¸­æœ‰ä¸€äº›äº‹æƒ…è¦æ³¨æ„ã€‚
æ¯ä¸€ä¸ªObjective-Cç±»æ‹¥æœ‰ä¸€ä¸ªç»“æ„ä½“ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªç»“æ„ä½“ã€‚æ‰€æœ‰çš„å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªisaæŒ‡é’ˆã€‚æ‰€æœ‰çš„Objective-Cè¿è¡Œæ—¶éœ€è¦è¿™ä¸ªisaæŒ‡é’ˆï¼Œç”¨ä»¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡å…·ä½“çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œç„¶ååˆ¤åˆ«å…¶æ˜¯å¦èƒ½å¤Ÿå“åº”ä½ æ‰€æ´¾å‘è¿‡æ¥çš„æ¶ˆæ¯ã€‚
æœ€åæˆ‘ä»¬è¿˜æ³¨æ„åˆ°äº†idæŒ‡é’ˆï¼Œè¿™ä¸ªidæŒ‡é’ˆä»…ä»…å‘Šè¯‰æˆ‘ä»¬å…¶æŒ‡å‘çš„æ˜¯Objective-Cå¯¹è±¡ï¼Œä»…æ­¤è€Œå·²ã€‚å½“ä½ æ‹¥æœ‰ä¸€ä¸ªidæŒ‡é’ˆï¼Œä½ å¯ä»¥æŸ¥è¯¢è¯¥å¯¹è±¡çš„ç±»å‹ï¼Œç„¶åæŸ¥çœ‹è¯¥ç±»å‹æ˜¯å¦å¯ä»¥å“åº”æŸä¸ªæ–¹æ³•ç­‰ç­‰ã€‚è¿˜æœ‰å°±æ˜¯å½“ä½ çŸ¥é“äº†å½“å‰æ‰€æŒ‡å‘çš„å…·ä½“å¯¹è±¡çš„å…·ä½“ç±»åˆ«ï¼Œä½ å°±å¯ä»¥åšå‡ºæ›´å…·ä½“çš„åŠ¨ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Blocks&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½ ä¹Ÿå¯ä»¥åœ¨LLVM/Clangæ–‡æ¡£ä¸­å¯¹Blocks çš„å®šä¹‰ä¸­å‘ç°å’Œä¸Šé¢ç±»ä¼¼çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Block_literal_1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// initialized to &amp;amp;_NSConcreteStackBlock or &amp;amp;_NSConcreteGlobalBlock
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reserved&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Block_descriptor_1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
         &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reserved&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// NULL
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// sizeof(struct Block_literal_1)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;c1&#34;&gt;// optional helper functions
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;         &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;copy_helper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
         &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dispose_helper&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;descriptor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// imported variables
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Blocksè¢«è®¾è®¡æˆèƒ½å¤Ÿä¸Objective-Cè¿è¡Œæ—¶å…¼å®¹ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«å½“åšå¯¹è±¡å¤„ç†ï¼Œå¹¶å¯ä»¥å“åº”æ¶ˆæ¯ï¼ˆåƒ&lt;code&gt;-retain&lt;/code&gt;, &lt;code&gt;-release&lt;/code&gt;, &lt;code&gt;-copy&lt;/code&gt;ç­‰ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;IMP&lt;/strong&gt;ï¼ˆMethod Implementationsï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;IMP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,...);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;IMPæ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„å‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•æ‰§è¡Œå¤„ã€‚å¦‚æœä½ åˆšæ¥è§¦Objective-Cè¯­è¨€ï¼Œä½ ä¸éœ€è¦ç›´æ¥å’Œè¿™äº›ä¸œè¥¿æ‰“äº¤é“ï¼Œä½†æ˜¯æ…¢æ…¢æ·±å…¥ä¹‹åæ¥è§¦çš„å°±å¤šäº†ã€‚åé¢æˆ‘ä»¬ä¼šçœ‹åˆ°è¿™ä¹Ÿæ˜¯Objective-Cè¿è¡Œæ—¶å”¤é†’æ–¹æ³•çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Objective-C Classes&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Objective-C çš„ç±»å†…éƒ¨æœ‰äº›ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿä¸€ä¸ªObjective-Cçš„ç±»çš„æ ·å­å¤§ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyClass&lt;/span&gt; : &lt;span class=&#34;nc&#34;&gt;NSObject&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// vars
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;NSInteger&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// methods
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;doFoo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯è¿è¡Œæ—¶è¿˜ä¼šè¿½åŠ æ›´å¤šçš„å†…å®¹ä»¥ä¾¿è·Ÿè¸ªï¼ˆç±»æ¯ä¸€æ—¶åˆ»çš„çŠ¶æ€ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#if !__OBJC2__
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kt&#34;&gt;Class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;super_class&lt;/span&gt;                                        &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;                                         &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;version&lt;/span&gt;                                             &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;                                                &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance_size&lt;/span&gt;                                       &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_ivar_list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ivars&lt;/span&gt;                             &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_method_list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;methodLists&lt;/span&gt;                    &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_cache&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt;                                 &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_protocol_list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;protocols&lt;/span&gt;                     &lt;span class=&#34;n&#34;&gt;OBJC2_UNAVAILABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç±»ä¸­åŒ…å«ä¸€ä¸ªæŒ‡å‘å…¶çˆ¶ç±»çš„å¼•ç”¨ï¼Œè¯¥ç±»çš„åå­—ã€å®ä¾‹å˜é‡ã€æ–¹æ³•é›†åˆã€ç¼“å­˜ä»¥åŠè¯¥ç±»éµå¾ªçš„åè®®åˆ—è¡¨ã€‚è¿è¡Œæ—¶éœ€è¦è¿™äº›ä¿¡æ¯ä»¥ä¾¿å“åº”é‚£äº›åˆ†å‘åˆ°è¯¥ç±»æˆ–è€…ç±»å®ä¾‹å¯¹è±¡ä¸Šå¾—æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å› æ­¤ç±»å®šä¹‰äº†å¯¹è±¡è€Œä¸æ˜¯å¯¹è±¡æœ¬èº«-é‚£è¿™åˆæ˜¯å¦‚ä½•å®ç°çš„&#34;&gt;å› æ­¤ç±»å®šä¹‰äº†å¯¹è±¡è€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œé‚£è¿™åˆæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;æ­£å¦‚æˆ‘å‰é¢è¯´è¿‡çš„ï¼ŒObjective-Cç±»æœ¬èº«ä¹ŸåŒæ ·æ˜¯å¯¹è±¡ï¼ˆè¯‘è€…æ³¨ï¼šæ„å‘³ç€ä½ å¯ä»¥å‘ä¸€ä¸ªç±»å‘é€æ¶ˆæ¯ï¼‰ï¼Œè¿è¡Œæ—¶é€šè¿‡åˆ›å»ºå…ƒç±»æ¥å¤„ç†å®ƒä»¬ã€‚å½“ä½ å‘é€ç±»ä¼¼&lt;code&gt;[NSObject alloc]&lt;/code&gt;çš„æ¶ˆæ¯æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯å‘ç±»å¯¹è±¡å‘é€äº†æ¶ˆæ¯ï¼Œè€Œè¿™ä¸ªç±»å¯¹è±¡éœ€è¦æ˜¯&lt;strong&gt;å…ƒç±»&lt;/strong&gt;çš„å®ä¾‹ï¼Œè€Œå…ƒç±»æœ¬èº«åˆæ˜¯&lt;strong&gt;æ ¹å…ƒç±»&lt;/strong&gt;çš„ä¸€ä¸ªå®ä¾‹ã€‚
å½“ä½ è¯´ä¸€ä¸ªç±»ç»§æ‰¿è‡ªNSObjectï¼Œé‚£å°±æ„å‘³ç€ä½ çš„ç±»æŒ‡å‘NSObjectä½œä¸ºå…¶çˆ¶ç±»ã€‚è€Œæ‰€æœ‰çš„å…ƒç±»æŒ‡å‘æ ¹å…ƒç±»ä½œä¸ºå®ƒä»¬çš„çˆ¶ç±»ï¼Œæ‰€æœ‰çš„å…ƒç±»éƒ½ä»…åŒ…å«é‚£äº›å®ƒèƒ½å¤Ÿå“åº”çš„æ¶ˆæ¯ä¸­çš„ç±»æ–¹æ³•ã€‚æ‰€ä»¥å½“ä½ å‘ä¸€ä¸ªç±»å¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œä¾‹å¦‚&lt;code&gt;[NSObject alloc]&lt;/code&gt;çš„æ—¶å€™ï¼Œ&lt;code&gt;objc_msgSend()&lt;/code&gt;å®é™…ä¸Šä¼šæŸ¥çœ‹å…ƒç±»æ¥ç¡®å®šè¯¥å¯¹è±¡æ˜¯å¦èƒ½å¤Ÿå“åº”è¯¥æ¶ˆæ¯ï¼Œé‚£å¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªèƒ½å“åº”è¯¥æ¶ˆæ¯çš„æ–¹æ³•ï¼Œå°±åœ¨è¯¥å¯¹è±¡ä¸Šæ‰§è¡Œå®ƒã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼šObjective-Cç±»ä½“ç³»ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src=&#34;https://i.imgur.com/D7GUGKB.png&#34; alt=&#34;ios-runtime-class&#34; /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;ä¸ºä»€ä¹ˆæˆ‘ä»¬éƒ½è¦ç»§æ‰¿è‡ªappleçš„ç±»å‘¢&#34;&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬éƒ½è¦ç»§æ‰¿è‡ªAppleçš„ç±»å‘¢ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;å½“ä½ åˆšè¸å…¥Cocoaå¼€å‘çš„æ—¶å€™ï¼Œå¾ˆå¤šä»£ç ä¾‹å­éƒ½å‘Šè¯‰ä½ è¿™æ ·åšï¼šå…ˆç»§æ‰¿NSObjectç±»ç„¶åå†è¿›è¡Œå…¶ä»–ç¼–ç ã€‚ä½ ä¹Ÿä¹åœ¨å…¶ä¸­ï¼Œç¡®å®äº«å—åˆ°äº†å¾ˆå¤šç»§æ‰¿è‡ªAppleç±»æ‰€æä¾›çš„ä¾¿åˆ©ã€‚ä½†æ˜¯ä½ ç”šè‡³å¯èƒ½éƒ½æ²¡æœ‰å‘ç°å®é™…ä¸Šä½ çš„ç±»åœ¨å’ŒObjective-Cè¿è¡Œæ—¶æ‰“äº¤é“ã€‚å½“ä½ ä¸ºæˆ‘ä»¬çš„ç±»å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œåƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;object&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªä½ è¦æ‰§è¡Œçš„æ¶ˆæ¯å°±æ˜¯&lt;code&gt;+alloc&lt;/code&gt;ã€‚å¦‚æœä½ [æŸ¥çœ‹æ–‡æ¡£][6]ï¼Œé‡Œé¢ä¼šè®²åˆ°â€œä¸€ä¸ªæ–°ç”Ÿå®ä¾‹çš„isaå®ä¾‹ä¼šè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªæè¿°è¯¥ç±»ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼Œå…¶ä½™çš„å®ä¾‹å˜é‡çš„å†…å­˜å‡è¢«è®¾ç½®ä¸ºç©ºã€‚â€æ‰€ä»¥é€šè¿‡ç»§æ‰¿è‡ªAppleçš„ç±»ï¼Œæˆ‘ä»¬ä¸ä»…ç»§æ‰¿äº†ä¸€äº›å¾ˆæ£’çš„å±æ€§ï¼ŒåŒæ—¶ä¹Ÿç»§æ‰¿äº†è¿™äº›åœ¨å†…å­˜ä¸Šåˆ†é…ç©ºé—´ï¼ˆå¤§å°æ˜¯æˆ‘ä»¬ç±»çš„å¤§å°ï¼‰ï¼Œåˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ï¼ˆå°±æ˜¯åˆ›å»ºè¿è¡Œæ—¶æ‰€æœŸæœ›çš„å¸¦æœ‰isaæŒ‡é’ˆçš„æ•°æ®ç»“æ„ï¼‰ã€‚&lt;/p&gt;

&lt;h4 id=&#34;ç±»ç¼“å­˜-objc-cache-cache-æ˜¯ä»€ä¹ˆ&#34;&gt;ç±»ç¼“å­˜ï¼ˆobjc_cache* cacheï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h4&gt;

&lt;p&gt;å½“Objective-Cè¿è¡Œæ—¶é€šè¿‡ä¸€ä¸ªå¯¹è±¡çš„isaæŒ‡é’ˆæ£€æŸ¥å¯¹è±¡çš„æ—¶å€™ï¼Œå®ƒä¼šæ‰¾åˆ°èƒ½å¤Ÿæ‰§è¡Œå¾ˆå¤šæ–¹æ³•çš„ç±»ã€‚ç„¶åä½ åªéœ€è¦è°ƒç”¨å…¶ä¸­å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æ¯æ¬¡è¿è¡Œæ—¶åœ¨è¿›è¡Œä¸€æ¬¡æŸ¥è¯¢åŠ¨ä½œæ—¶éœ€è¦æŸ¥æ‰¾ç±»åˆ†å‘è¡¨ä¸­æ‰€æœ‰çš„selectorsè¿™ä¸ªåŠ¨ä½œæ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç±»ä¼šç”±cacheè¿™ä¸ªä¸œè¥¿ï¼Œå½“ä½ æŸ¥è¯¢ä¸€ä¸ªç±»ä½“ç³»ä¸­çš„æ´¾å‘è¡¨çš„æ—¶å€™ï¼Œä¸€æ—¦æ‰¾åˆ°å¯¹åº”çš„selectoræ—¶ï¼Œå°±å°†è¯¥selectoræ”¾åˆ°cacheä¸­ã€‚å½“&lt;code&gt;objc_msgSend()&lt;/code&gt;æ–¹æ³•åœ¨ä¸€ä¸ªç±»ä¸­æŸ¥è¯¢selectoræ—¶ï¼Œä¼šå…ˆåœ¨cacheä¸­æŸ¥æ‰¾ï¼Œè¿™ä¸ªç†è®ºçš„åŸºç¡€å°±æ˜¯å¦‚æœä½ æ›¾ç»è°ƒç”¨è¿‡ä¸€ä¸ªç±»çš„æ¶ˆæ¯ï¼Œä½ æœ‰å¾ˆå¤§å¯èƒ½åœ¨ä¹‹åè¿˜è°ƒç”¨åŒæ ·çš„æ–¹æ³•ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šCACHEçš„å±€éƒ¨æ€§åŸç†ï¼‰ã€‚æ‰€ä»¥æŒ‰ç…§è¿™æ ·è€ƒè™‘ï¼Œå¦‚æœæˆ‘ä»¬å…ˆåœ¨æœ‰ä¸€ä¸ªNSObjectçš„å­ç±»MyObjectå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyObject&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;-(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;setVarA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:@&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blah&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…·ä½“å‘ç”Ÿäº†ä»¥ä¸‹å‡ ç‚¹ï¼š
1. &lt;code&gt;[MyObject alloc]&lt;/code&gt;é¦–å…ˆè¢«æ‰§è¡Œï¼ŒMyObjectç±»æ²¡æœ‰å®ç°è¯¥æ–¹æ³•ï¼Œå› æ­¤åœ¨è¯¥ç±»ä¸­æ²¡æœ‰æ‰¾åˆ°&lt;code&gt;+alloc&lt;/code&gt;æ–¹æ³•ï¼Œæ¥ç€é¡ºç€superclassæŒ‡é’ˆæ‰¾åˆ°å…¶çˆ¶ç±»&lt;code&gt;NSObject&lt;/code&gt;ï¼›
2. æˆ‘ä»¬è¯¢é—®&lt;code&gt;NSObject&lt;/code&gt;ç±»æ˜¯å¦èƒ½å¤Ÿå“åº”&lt;code&gt;+alloc&lt;/code&gt;æ–¹æ³•ï¼Œè€Œå®ƒèƒ½å¤Ÿå“åº”ã€‚&lt;code&gt;+alloc&lt;/code&gt;æ–¹æ³•æ£€æŸ¥æ¥å—è€…ç±»ï¼ˆä¹Ÿå°±æ˜¯&lt;code&gt;MyObject&lt;/code&gt;ï¼‰ï¼Œåˆ†é…è¯¥ç±»å¤§å°çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œç„¶ååˆå§‹åŒ–å…¶isaæŒ‡é’ˆæŒ‡å‘&lt;code&gt;MyObject&lt;/code&gt;ç±»ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‹¥æœ‰ä¸€ä¸ªå®ä¾‹äº†ï¼ŒåŒæ—¶ç¨æ—©æˆ‘ä»¬å°†&lt;code&gt;+alloc&lt;/code&gt;æ–¹æ³•æ”¾ç½®äº&lt;code&gt;NSObject&lt;/code&gt;çš„ç±»ç¼“å­˜ï¼ˆcacheï¼‰ä¸­ï¼›
3. åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬éƒ½æ˜¯åœ¨å‘é€ç±»æ–¹æ³•ï¼Œæ­¤åˆ»æˆ‘ä»¬éœ€è¦å‘ä¸€ä¸ªå®ä¾‹å¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œè¿™é‡Œç®€å•çš„è°ƒç”¨&lt;code&gt;-init&lt;/code&gt;æ–¹æ³•æˆ–è€…æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼ˆdesignated initializerï¼‰ï¼Œå½“ç„¶æˆ‘ä»¬çš„ç±»å®ç°äº†è¯¥æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å°†&lt;code&gt;-(id)init&lt;/code&gt;æ–¹æ³•æ”¾ç½®äºcacheä¸­ï¼›
4. æ¥ä¸‹æ¥&lt;code&gt;self = [super init]&lt;/code&gt;è¢«è°ƒç”¨ï¼Œ&lt;code&gt;super&lt;/code&gt;æ˜¯ä¸€ä¸ªç¥å¥‡çš„å…³é”®å­—ï¼ˆ&lt;strong&gt;magic keyword&lt;/strong&gt;ï¼‰ï¼Œå…¶æŒ‡å‘ç±»çš„çˆ¶ç±»ï¼Œä¹Ÿå³&lt;code&gt;NSObject&lt;/code&gt;ï¼Œæˆ‘ä»¬è°ƒç”¨&lt;code&gt;NSObject&lt;/code&gt;çš„&lt;code&gt;init&lt;/code&gt;æ–¹æ³•ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿é¢å‘å¯¹è±¡ç¼–ç¨‹çš„é›†æˆä½“ç³»èƒ½å¤Ÿæ­£ç¡®è¿è¡Œï¼Œåœ¨ä½ æ­£ç¡®åˆå§‹åŒ–è‡ªèº«å˜é‡ä¹‹å‰éœ€è¦å…ˆåˆå§‹åŒ–è¯¥ç±»çš„æ‰€æœ‰çˆ¶ç±»çš„å˜é‡ï¼Œå¦‚æœä½ éœ€è¦ï¼Œä½ è¿˜å¯ä»¥è¦†å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚åœ¨è¯¥ä¾‹ä¸­ï¼Œå¯¹äºNSObjectç±»æ¥è¯´å¹¶æ²¡æœ‰å¤šå°‘ç‰¹åˆ«é‡è¦çš„æ“ä½œè¦è¿›è¡Œï¼Œä¸è¿‡è¿™å¹¶ä¸æ˜¯å¸¸æ€ã€‚æœ‰æ—¶å€™åˆå§‹åŒ–ä¸­ä¼šåšéå¸¸é‡è¦çš„äº‹æƒ…ï¼Œè€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt; Foundation/Foundation.h&amp;gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt; 
&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyObject&lt;/span&gt; : &lt;span class=&#34;nc&#34;&gt;NSObject&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@property&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;retain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MyObject&lt;/span&gt;
 
&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;setAString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@synthesize&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;

 
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSAutoreleasePool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSAutoreleasePool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
 
    &lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
 
    &lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSArray&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj4&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSArray&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;initWithObjects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;Hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
      
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;obj1 class is %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;obj2 class is %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]));&lt;/span&gt;
  
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;obj3 class is %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj3&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;obj4 class is %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj4&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]));&lt;/span&gt;
  
    &lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj5&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
  
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;obj5 class is %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj5&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;obj6 class is %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSStringFromClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj6&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]));&lt;/span&gt;
          
    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;drain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æœä½ æ˜¯åˆšåˆšæ¥è§¦Cocoaï¼Œæˆ‘è®©ä½ çŒœä»¥ä¸Šä»£ç æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Œä½ å¾ˆå¯èƒ½ä¼šç»™å‡ºè¿™æ ·çš„ç»“æœï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;n&#34;&gt;NSMutableArray&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;NSMutableArray&lt;/span&gt; 
&lt;span class=&#34;n&#34;&gt;NSArray&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;NSArray&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½†å®é™…ä¸Šæ˜¯å¦‚ä¸‹ç»“æœï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;n&#34;&gt;obj1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__NSPlaceholderArray&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;obj2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSCFArray&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;obj3&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__NSPlaceholderArray&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;obj4&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSCFArray&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;obj5&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;obj6&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼šï¼ˆæœ¬æœºXCode 7 beta6 è¿è¡Œç»“æœå¦‚ä¸‹ï¼šï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;07&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;06.922&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5185&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1441448&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__NSPlaceholderArray&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;07&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;11.201&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5185&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1441448&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__NSArrayM&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;07&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;17.987&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5185&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1441448&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj3&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__NSPlaceholderArray&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;07&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;18.503&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5185&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1441448&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj4&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__NSArrayI&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;07&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;32.228&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5185&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1441448&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj5&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;2015&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;09&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mo&#34;&gt;07&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;33.478&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ObjMessage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5185&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1441448&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj6&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MyObject&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åŸå› å°±æ˜¯Objective-Cè¯­è¨€è¿™é‡Œä½¿ç”¨&lt;code&gt;+alloc&lt;/code&gt;æ–¹æ³•è¿”å›æŸä¸ªç±»çš„å¯¹è±¡ï¼Œä½†éšå&lt;code&gt;-init&lt;/code&gt;æ–¹æ³•åˆå¯èƒ½è¿”å›å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚&lt;/p&gt;

&lt;h4 id=&#34;é‚£-objc-msgsend-æ–¹æ³•éƒ½å‘ç”Ÿäº†ä»€ä¹ˆå‘¢&#34;&gt;é‚£ objc_msgSend æ–¹æ³•éƒ½å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;å®é™…ä¸Š&lt;code&gt;objc_msgSend()&lt;/code&gt;æ–¹æ³•å†…éƒ¨å‘ç”Ÿäº†è®¸å¤šäº‹æƒ…ã€‚å¦‚ä¸‹æˆ‘ä»¬æœ‰è¿™æ ·çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;printMessageWithString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç¼–è¯‘å™¨ä¼šæŠŠå…¶ç¿»è¯‘æˆå¦‚ä¸‹æ‰€ç¤ºä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;n&#34;&gt;objc_msgSend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;@selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;printMessageWithString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;@&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡ç›®æ ‡å¯¹è±¡çš„isaæŒ‡é’ˆæ¥æŸ¥è¯¢è¯¥ç±»æˆ–è€…å…¶ç»§æ‰¿ä½“ç³»ä¸­çš„çˆ¶ç±»æ˜¯å¦èƒ½å¤Ÿå“åº” &lt;code&gt;@selector(printMessageWithString:)&lt;/code&gt;ã€‚å‡è®¾æˆ‘ä»¬åœ¨ç±»çš„æ´¾å‘è¡¨æˆ–è€…å®ƒçš„cacheä¸­æ‰¾åˆ°äº†è¯¥selectorï¼Œç„¶åæˆ‘ä»¬é€šè¿‡è¯¥å‡½æ•°æŒ‡é’ˆæ¥æ‰§è¡Œè¯¥æ–¹æ³•ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥äº†è§£&lt;code&gt;objc_msgSend()&lt;/code&gt;æ–¹æ³•æ°¸è¿œä¸ä¼šè¿”å›ï¼Œå®ƒä»æ‰§è¡Œå¼€å§‹ï¼Œé€šè¿‡æŒ‡é’ˆæŸ¥æ‰¾åˆ°ä½ çš„æ–¹æ³•æ‰§è¡Œï¼Œç„¶åæ˜¯ä½ çš„æ–¹æ³•æ‰§è¡Œä¹‹åè¿”å›ï¼Œå› æ­¤çœ‹èµ·æ¥å¥½åƒ&lt;code&gt;objc_msgSend()&lt;/code&gt;æ–¹æ³•è¿”å›ä¼¼çš„ã€‚Bill Bumgarnerå¯¹æ­¤è¿‡ç¨‹æœ‰æ›´å¤šçš„ç»†èŠ‚æ¢ç´¢ï¼ˆ&lt;a href=&#34;http://www.friday.com/bbum/2009/12/18/objc_msgsend-part-1-the-road-map&#34;&gt;Part 1&lt;/a&gt;, &lt;a href=&#34;http://www.friday.com/bbum/2009/12/18/objc_msgsend-tour-part-3-the-fast-path&#34;&gt;Part 2&lt;/a&gt; &amp;amp; &lt;a href=&#34;http://www.friday.com/bbum/2009/12/18/objc_msgsend-tour-part-2-setting-the-stage&#34;&gt;Part 3&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘è¿™é‡Œæ€»ç»“ä¸‹ä»–æ‰€è®²çš„ï¼Œä¹Ÿå°±æ˜¯ä½ ä¼šåœ¨è¿è¡Œæ—¶ä»£ç ä¸­çœ‹åˆ°çš„ï¼š
1. æ£€æŸ¥é‚£äº›å¿½ç•¥æ‰çš„Selectorså’ŒShort Circutï¼Œ å¾ˆæ˜æ˜¾å¦‚æœæˆ‘ä»¬è¿è¡Œåœ¨åƒåœ¾å›æ”¶ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥æ‰é’ˆå¯¹&lt;code&gt;-retain&lt;/code&gt;ï¼Œ&lt;code&gt;-release&lt;/code&gt;ç­‰çš„è°ƒç”¨ï¼›&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ£€æŸ¥é‚£äº›nilçš„ç›®æ ‡ã€‚ä¸åƒå…¶ä»–è¯­è¨€ï¼ŒObjective-Cä¸­å‘nilæ´¾å‘æ¶ˆæ¯æ˜¯åˆæ³•çš„ã€‚å½“ç„¶ä½ è‚¯å®šä¹Ÿæœ‰å¾ˆå¤šç†ç”±å¸Œæœ›è¿™æ ·ã€‚è¿™é‡Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªéç©ºçš„ç›®æ ‡ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨è¯¥ç±»ä¸­æ‰¾åˆ°IMPï¼Œæˆ‘ä»¬é¦–å…ˆæŸ¥æ‰¾è¯¥ç±»çš„ç¼“å­˜ï¼ˆcacheï¼‰ï¼Œå¦‚æœæ‰¾åˆ°æˆ‘ä»¬ä¾¿é€šè¿‡ç¼“å­˜ä¸­çš„æŒ‡é’ˆè·³è½¬åˆ°è¯¥å‡½æ•°æ‰§è¡Œå¤„ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°è¯¥IMPï¼Œæˆ‘ä»¬ä¾¿ç´§æ¥ç€æŸ¥æ‰¾ç±»çš„æ´¾å‘è¡¨ï¼ˆdispatch tableï¼‰ï¼Œå¦‚æœæ‰¾åˆ°åŒæ ·è·³è½¬åˆ°å‡½æ•°æ‰§è¡Œå¤„ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å¦‚æœç±»çš„æ´¾å‘è¡¨ä¸­ä¹Ÿæœªæ‰¾åˆ°æˆ‘ä»¬å°±éœ€è¦è§¦å‘æ¶ˆæ¯åˆ†å‘æœºåˆ¶äº†ï¼Œè¿™æ„å‘³ç€æœ€ç»ˆä½ å¾—ä»£ç ä¼šè¢«ç¼–è¯‘å™¨è½¬æ¢æˆäº†Cå‡½æ•°ã€‚å› æ­¤ä¸€ä¸ªå¦‚ä¸‹æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;-(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;doComputeWithNum:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;aNum&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¼šè¢«è½¬æ¢æˆå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aClass_doComputeWithNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aClass&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;aNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Objective-Cè¿è¡Œæ—¶é€šè¿‡è§¦å‘æŒ‡å‘è¿™äº›æ–¹æ³•çš„å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨ä½ çš„æ–¹æ³•ã€‚å‘Šè¯‰ä½ ï¼Œä½ æ²¡æ³•ç›´æ¥è°ƒç”¨è¿™äº›è½¬æ¢ä¹‹åçš„æ–¹æ³•ï¼Œå°½ç®¡Cocoaæ¡†æ¶ç¡®å®æä¾›äº†èƒ½å¤Ÿè·å–è¿™äº›æŒ‡é’ˆçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//declare C function pointer
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;computeNum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
 
&lt;span class=&#34;c1&#34;&gt;//methodForSelector is COCOA &amp;amp; not ObjC Runtime
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//gets the same function pointer objc_msgSend gets
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;computeNum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;methodForSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;@selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;doComputeWithNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:)];&lt;/span&gt;
 
&lt;span class=&#34;c1&#34;&gt;//execute the C function pointer returned by the runtime
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;computeNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;@selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;doComputeWithNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:),&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥è·å–åˆ°åœ¨è¿è¡Œæ—¶ç›´æ¥è·å–è¯¥æ–¹æ³•å¹¶è°ƒç”¨å®ƒã€‚ç”šè‡³åœ¨ä½ ç¡®è®¤ä¸€ä¸ªæŒ‡å®šçš„æ–¹æ³•éœ€è¦è¢«æ‰§è¡Œçš„æ—¶å€™å¯ä»¥ç»•è¿‡è¿è¡Œæ—¶æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯Objective-Cè¿è¡Œæ—¶å¦‚ä½•è°ƒç”¨ä½ çš„æ–¹æ³•çš„ï¼Œä½†è¿˜æ˜¯ä½¿ç”¨&lt;code&gt;objc_msgSend()&lt;/code&gt;æ–¹æ³•ä¸ºå¥½ã€‚&lt;/p&gt;

&lt;h4 id=&#34;objective-c-æ¶ˆæ¯è½¬å‘&#34;&gt;Objective-C æ¶ˆæ¯è½¬å‘&lt;/h4&gt;

&lt;p&gt;åœ¨Objective-Cä¸­ï¼Œå‘ä¸€ä¸ªæ ¹æœ¬ä¸çŸ¥é“æ€ä¹ˆå“åº”æ–¹æ³•çš„å¯¹è±¡å‘é€æ–¹æ³•æ˜¯åˆæ³•çš„ï¼ˆä¹Ÿå¯èƒ½æ˜¯è¯¥è¯­è¨€å†…éƒ¨è®¾è®¡å“²ç†ï¼‰ã€‚Appleè¿™æ ·åšçš„å…¶ä¸­ä¸€ä¸ªåŸå› å°±æ˜¯æ¨¡æ‹ŸObjective-Cè¯­è¨€åŸç”Ÿä¸æ”¯æŒçš„å¤šé‡ç»§æ‰¿ã€‚æˆ–è€…ä½ ä¹Ÿè®¸æƒ³æŠ½è±¡åŒ–è‡ªå·±çš„è®¾è®¡ï¼Œéšè—è¯¥æ¶ˆæ¯å“åº”èƒŒåçš„å…¶ä»–ç±»æˆ–è€…å¯¹è±¡ã€‚è¿™å¯¹äºè¿è¡Œæ—¶ç³»ç»Ÿä¹Ÿæ˜¯éå¸¸å¿…è¦çš„ã€‚å®ƒçš„å·¥ä½œæµç¨‹å¤§ä½“æ˜¯è¿™æ ·ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;è¿è¡Œæ—¶åœ¨è¯¥ç±»æˆ–è€…å…¶ç»§æ‰¿ä½“ç³»ä¸­çš„ç¼“å­˜ä¸­å’Œæ´¾å‘è¡¨ä¸­æŸ¥æ‰¾ï¼Œç„¶åæŸ¥æ‰¾å¤±è´¥ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Objective-Cè¿è¡Œæ—¶åœ¨æ‰€å±å¯¹è±¡çš„ç±»ä¸Šè°ƒç”¨&lt;code&gt;+ (BOOL) resolveInstanceMethod:(SEL)aSEL&lt;/code&gt;ç±»æ–¹æ³•ï¼Œè¯¥ç±»ç»™äºˆä½ ä¸€æ¬¡æœºä¼šæ¥æ–°å¢ä¸€ä¸ªå¤„ç†é€‰æ‹©å­&lt;code&gt;aSEL&lt;/code&gt;çš„æ–¹æ³•ï¼Œç„¶åå‘Šè¯‰è¿è¡Œæ—¶ä½ å·²ç»è§£å†³äº†è¯¥æ–¹æ³•ï¼Œæ¶ˆæ¯è½¬å‘æœºåˆ¶ä¼šæ‰¾åˆ°è¯¥æ–¹æ³•ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦‚ä¸‹ç¤ºä¾‹ï¼Œä½ å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fooMethod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;Doing Foo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨&lt;code&gt;class_addMethod()&lt;/code&gt;æ–¹æ³•ç±»è§£å†³å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;+(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;BOOL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;resolveInstanceMethod:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;aSEL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aSEL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;@selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;doFoo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;class_addMethod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aSEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;IMP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fooMethod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;v@:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;YES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;resolveInstanceMethod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­æ–¹æ³•&lt;code&gt;class_addMethod()&lt;/code&gt;ä¸­çš„&lt;code&gt;v@:&lt;/code&gt;æ ‡æ˜äº†æ–¹æ³•çš„è¿”å›ç±»å‹ä»¥åŠå…¶å‚æ•°ç±»å‹ã€‚ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶æ–‡æ¡£ä¸­[Type Encodings][10]åˆ†æŸ¥çœ‹åˆ°è¯¦ç»†çš„è¯´æ˜ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å¦‚æœ2ä¸­&lt;code&gt;+(BOOL)resolveInstanceMethod:(SEL)aSEL&lt;/code&gt;è¿”å›NOè¡¨ç¤ºæ— æ³•è§£æè¯¥æ–¹æ³•çš„è¯ï¼Œè¿è¡Œæ—¶æ¥ç€è°ƒç”¨&lt;code&gt;- (id)forwardingTargetForSelector:(SEL) aSelector&lt;/code&gt;æ¥ç»™ä½ å†ä¸€æ¬¡æœºä¼šæ˜¯å¦èƒ½å¤Ÿå°†è¯¥æ¶ˆæ¯è½¬å‘ç»™å…¶ä»–æ¥æ”¶è€…æ¥å¤„ç†ã€‚è¿™è¦æ¯”ä¹‹åè¿è¡Œå®Œæ•´çš„æ¶ˆæ¯è½¬å‘&lt;code&gt;- (void)forwardInvocation:(NSInvocation *)anInvocation&lt;/code&gt;è¦å¥½ã€‚ä½ å¯ä»¥è¿™æ ·æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;forwardingTargetForSelector:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;aSelector&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aSelector&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;@selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;mysteriousMethod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alternateObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;forwardingTargetForSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¾ˆæ˜æ˜¾ï¼Œä½ è‚¯å®šä¸æƒ³è¿”å› selfï¼Œå¦åˆ™ä¼šå¼•èµ·æ­»å¾ªç¯ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å¦‚æœä¸Šä¸€æ­¥æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„ç›®æ ‡å¯¹è±¡æ¥æ‰§è¡Œä¸Šé¢çš„æ¶ˆæ¯ï¼Œæ¥ç€è¿è¡Œæ—¶ä¼šå°è¯•æœ€åä¸€æ­¥ &lt;code&gt;- (void)forwardInvocation:(NSInvocation *)anInvocation&lt;/code&gt;ã€‚ä½ å¯èƒ½æ²¡è§è¿‡NSInvocationï¼Œå®ƒå®é™…ä¸Šæ˜¯Objective-Cè¯­è¨€ä¸­çš„æ¶ˆæ¯ç±»å‹ã€‚ä¸€æ—¦ä½ æœ‰ä¸€ä¸ªNSInvocationï¼Œä½ åŸºæœ¬ä¸Šèƒ½å¤Ÿæ”¹å˜è¿™ä¸ªæ¶ˆæ¯çš„ä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬å…¶ç›®æ ‡ã€é€‰æ‹©å­ä»¥åŠå‚æ•°ã€‚æ‰€ä»¥ä½ å¯ä»¥è¿™æ ·åšï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;forwardInvocation:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSInvocation&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;invocation&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;SEL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invSEL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invocation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;altObject&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;respondsToSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invSEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invocation&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;invokeWithTarget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;altObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; 
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;doesNotRecognizeSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;invSEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä½ ç»§æ‰¿è‡ªNSObjectç±»ï¼Œå®ƒæ‰€å®ç°çš„&lt;code&gt;- (void)forwardInvocation:(NSInvocation *)anInvocation&lt;/code&gt;å†…éƒ¨ä»…ä»…ç®€å•çš„è°ƒç”¨äº†&lt;code&gt;-doesNotRecognizeSelector:&lt;/code&gt;æ–¹æ³•ï¼Œå¦‚æœä½ æƒ³ç»™è‡ªå·±æœ€åä¸€æ¬¡æœºä¼šåšä¸€äº›äº‹æƒ…çš„è¯ï¼Œä½ å¯ä»¥é‡è½½è¯¥æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h4 id=&#34;non-fragile-ivars-modern-runtime&#34;&gt;Non Fragile ivars (Modern Runtime)&lt;/h4&gt;

&lt;p&gt;ä¸€ä¸ªModern Runtimeæ–°å¢åŠ çš„æ¦‚å¿µå°±æ˜¯Non Fragile ivarsã€‚å½“ç¼–è¯‘å™¨ç¼–è¯‘æˆ‘ä»¬çš„ç±»æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªå˜é‡å¸ƒå±€æ¥æ˜¾ç¤ºæ¯æ¬¡æˆ‘ä»¬ä»ä»€ä¹ˆä½ç½®å»å–æˆ‘ä»¬çš„å®ä¾‹å˜é‡ï¼Œå…¶åº•å±‚çš„å®ç°ç»†èŠ‚æ˜¯è¿™æ ·çš„ï¼ŒæŸ¥çœ‹ç±»æˆå‘˜å˜é‡å’Œç±»å¯¹è±¡æŒ‡é’ˆæŒ‡å‘ä½ç½®çš„åç§»ï¼Œè¯»å–è¯¥å˜é‡å¤§å°çš„å­—èŠ‚å°±å¯ä»¥å°†è¯¥å˜é‡è¯»å–å‡ºæ¥ã€‚æ‰€ä»¥ä½ å¾—å˜é‡å¸ƒå±€å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼Œå·¦ä¾§åˆ—æ ‡æ˜å­—èŠ‚åç§»é‡ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/35waSjN.png&#34; alt=&#34;NSObject å¸ƒå±€&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬æœ‰NSObjectç±»å‹çš„å˜é‡å¸ƒå±€ï¼Œç„¶åæˆ‘ä»¬ç»§æ‰¿NSObjectæ¥æ‰©å±•å®ƒï¼Œå¹¶æ·»åŠ è‡ªå·±çš„å˜é‡ï¼Œè¿™åœ¨Appleå‘å¸ƒæ–°ç‰ˆæœ¬OSX SDKä¹‹å‰éƒ½è¿è¡Œè‰¯å¥½ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/xPo1FAw.png&#34; alt=&#34;NSObject å¸ƒå±€&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çš„ä»£ç å°±æ— æ³•æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬è‡ªå®šä¹‰å¯¹è±¡ä¸­çš„å†…å®¹è¢«æ“¦å‡ºäº†ï¼Œå› ä¸ºNSObjectå¢åŠ äº†ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œè€ŒMyObjectç±»æˆå‘˜å˜é‡å¸ƒå±€åœ¨ç¼–è¯‘æ—¶å·²ç»ç¡®å®šï¼Œæœ‰ä¸¤ä¸ªæˆå‘˜å˜é‡å’ŒåŸºç±»çš„å†…å­˜åŒºåŸŸé‡å ã€‚å”¯ä¸€èƒ½å¤Ÿé˜»æ­¢è¿™ä¸ªå‘ç”Ÿçš„å°±æ˜¯Appleç»´æŒå®ƒä¹‹å‰çš„å¸ƒå±€ç­–ç•¥ï¼Œä½†æ˜¯ä¸€æ—¦è¿™æ ·ä»–ä»¬çš„æ¡†æ¶å°±æ— æ³•å†å¾€å‰å‘å±•äº†ï¼Œå› ä¸ºå®ƒä»¬çš„å˜é‡å¸ƒå±€å·²ç»å›ºåŒ–äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ˆä¹Ÿå°±æ˜¯fragile ivarsï¼‰ä½ åªèƒ½é€šè¿‡é‡æ–°ç¼–è¯‘è¿™äº›ç»§æ‰¿è‡ªAppleç±»çš„ç±»æ¥ä½¿å¾—ä»£ç å¾—ä»¥å…¼å®¹ã€‚é‚£åœ¨ non fragile ivarsä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/w9Fxvpa.png&#34; alt=&#34;NSObject å¸ƒå±€&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨Non Fragile ivarsä¸‹ç¼–è¯‘å™¨è™½ç„¶ç”Ÿæˆäº†å’Œfragile ivarsåŒæ ·çš„å¸ƒå±€ï¼Œä½†æ˜¯è¿è¡Œæ—¶ä¼šé€šè¿‡è®¡ç®—åŸºç±»å¤§å°ï¼ŒåŠ¨æ€è°ƒæ•´MyObjectç±»æˆå‘˜å¸ƒå±€ã€‚ç»“æœå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚&lt;/p&gt;

&lt;h4 id=&#34;objective-c-å…³è”å¯¹è±¡&#34;&gt;Objective-C å…³è”å¯¹è±¡&lt;/h4&gt;

&lt;p&gt;æœ€è¿‘å¼•å…¥Mac OS X 10.6ç³»ç»Ÿæœ‰ä¸€ä¸ªç‰¹æ€§ç§°ä½œâ€œå…³è”å¼•ç”¨â€ã€‚Objective-Cä¸åƒå…¶ä»–è¯­è¨€ï¼Œå…¶åŸç”Ÿä¸æ”¯æŒå‘å¯¹è±¡åŠ¨æ€æ·»åŠ å˜é‡ã€‚æ‰€ä»¥åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ éƒ½å¿…é¡»è¦è´¹å¾ˆå¤§çš„åŠ²ï¼Œç¼–è¯‘æ•´ä¸ªä½“ç³»ç»“æ„æ¥å‡è£…è‡ªå·±å‘ç±»ä¸­æ·»åŠ ä¸€ä¸ªå˜é‡ã€‚ä¸è¿‡åœ¨Mac OS X 10.6ç³»ç»Ÿä¸­ï¼ŒObjective-C è¿è¡Œæ—¶åŸç”Ÿæ”¯æŒï¼ˆåŠ¨æ€æ·»åŠ å˜é‡ï¼‰ã€‚å¦‚æœæˆ‘ä»¬æƒ³å‘æ¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç±»ä¸­æ·»åŠ ä¸€ä¸ªå˜é‡ï¼Œä¾‹å¦‚å‘NSViewç±»ä¸­æ·»åŠ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#import &amp;lt; Cocoa/Cocoa.h&amp;gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//Cocoa
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt; objc/runtime.h&amp;gt; //objc runtime apiâ€™s&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt; 
&lt;span class=&#34;k&#34;&gt;@interface&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NSView&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(CustomAdditions)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@property&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;retain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NSImage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;customImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@implementation&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;NSView&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;(CustomAdditions)&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//has a unique address (identifier)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt; 
&lt;span class=&#34;p&#34;&gt;-(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSImage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;customImage&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;objc_getAssociatedObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;p&#34;&gt;-(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;setCustomImage:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSImage&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;image&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;objc_setAssociatedObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                             &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_RETAIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨[runtime.h][11]ï¼Œï¼ˆè¯‘è€…æ³¨ï¼šæœ€æ–°ç‰ˆ [runtime.h][12]ï¼‰æ–‡ä»¶ä¸­çœ‹åˆ°å‘&lt;code&gt;objc_setAssociatedObject()&lt;/code&gt;ä¼ é€’çš„å‡ ä¸ªé€‰é¡¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* Associative References */&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Policies related to associative references.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * These are options to objc_setAssociatedObject()
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_ASSIGN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;           &lt;span class=&#34;cm&#34;&gt;/**&amp;lt; Specifies a weak reference to the associated object. */&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_RETAIN_NONATOMIC&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/**&amp;lt; Specifies a strong reference to the associated object. 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                                            *   The association is not made atomically. */&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_COPY_NONATOMIC&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/**&amp;lt; Specifies that the associated object is copied. 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                                            *   The association is not made atomically. */&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_RETAIN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mo&#34;&gt;01401&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;       &lt;span class=&#34;cm&#34;&gt;/**&amp;lt; Specifies a strong reference to the associated object.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                                            *   The association is made atomically. */&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_COPY&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mo&#34;&gt;01403&lt;/span&gt;          &lt;span class=&#34;cm&#34;&gt;/**&amp;lt; Specifies that the associated object is copied.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                                            *   The association is made atomically. */&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™äº›å’Œä½ é€šè¿‡&lt;code&gt;@property&lt;/code&gt;æ–¹å¼ä¼ é€’çš„é€‰é¡¹ç›¸å»åˆã€‚&lt;/p&gt;

&lt;h4 id=&#34;æ··åˆçš„è™šè¡¨æ´¾ç”Ÿ&#34;&gt;æ··åˆçš„è™šè¡¨æ´¾ç”Ÿ&lt;/h4&gt;

&lt;p&gt;å¦‚æœä½ æŸ¥çœ‹Modern runtime ä»£ç ï¼Œä½ ä¼šåœ¨[objc-runtime-new.m]()ï¼ˆè¯‘è€…æ³¨ï¼š æœ€æ–°ç‰ˆobjc runtimeæºç ä¸º[objc-runtime-new.mm][14] å·²ç»å»æ‰äº†è¿™ä¸ªç‰¹æ€§ï¼Œè¯‘è€…å‘ç°ä»[objc4-551.1][15]ç‰ˆæœ¬å¼€å§‹å°±ä¸æ”¯æŒäº†ï¼Œä¸è¿‡è¯»è€…è¿˜æ˜¯å¯ä»¥å€Ÿé‰´ä¸‹ä¹‹å‰ç‰ˆæœ¬çš„å®ç°æ–¹å¼ã€‚ï¼‰ä¸­å‘ç°è¿™ä¸ªï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/***********************************************************************
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* vtable dispatch
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* Every class gets a vtable pointer. The vtable is an array of IMPs.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* The selectors represented in the vtable are the same for all classes
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   (i.e. no class has a bigger or smaller vtable).
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* Each vtable index has an associated trampoline which dispatches to 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   the IMP at that index for the receiver class&amp;#39;s vtable (after 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   checking for NULL). Dispatch fixup uses these trampolines instead 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   of objc_msgSend.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* Fragility: The vtable size and list of selectors is chosen at launch 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   time. No compiler-generated code depends on any particular vtable 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   configuration, or even the use of vtable dispatch at all.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* Memory size: If a class&amp;#39;s vtable is identical to its superclass&amp;#39;s 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   (i.e. the class overrides none of the vtable selectors), then 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   the class points directly to its superclass&amp;#39;s vtable. This means 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   selectors to be included in the vtable should be chosen so they are 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   (1) frequently called, but (2) not too frequently overridden. In 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   particular, -dealloc is a bad choice.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* Forwarding: If a class doesn&amp;#39;t implement some vtable selector, that 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   selector&amp;#39;s IMP is set to objc_msgSend in that class&amp;#39;s vtable.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* +initialize: Each class keeps the default vtable (which always 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   redirects to objc_msgSend) until its +initialize is completed.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   Otherwise, the first message to a class could be a vtable dispatch, 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   and the vtable trampoline doesn&amp;#39;t include +initialize checking.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;* Changes: Categories, addMethod, and setImplementation all force vtable 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   reconstruction for the class and all of its subclasses, if the 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*   vtable selectors are affected.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;**********************************************************************/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™èƒŒåçš„åŸç†å°±æ˜¯ï¼Œè¿è¡Œæ—¶è¯•å›¾å»å­˜å‚¨ä½ æœ€è¿‘è°ƒç”¨è¿‡çš„é€‰æ‹©å­ï¼ˆselectorï¼‰ä»¥ä¾¿èƒ½å¤Ÿä¸ºä½ çš„AppåŠ é€Ÿï¼Œå› ä¸ºå…¶æ¯”&lt;code&gt;objc_msgSend&lt;/code&gt;æ–¹æ³•ä½¿ç”¨æ›´å°‘çš„æŒ‡ä»¤ã€‚è¿™ä¸ª&lt;code&gt;vTable&lt;/code&gt;å­˜å‚¨ä½ æœ€è¿‘å…¨å±€è°ƒç”¨çš„16ä¸ªé€‰æ‹©å­ï¼Œå®é™…ä¸Šï¼Œåœ¨ä»£ç æ–‡ä»¶å¾€ä¸‹æ¥ç€çœ‹ä½ å°±ä¼šçœ‹åˆ°åƒåœ¾å›æ”¶å’Œéåƒåœ¾å›æ”¶ç±»å‹çš„Appçš„é»˜è®¤é€‰æ‹©å­ï¼ˆselectorsï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultVtable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;s&#34;&gt;&amp;#34;allocWithZone:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;alloc&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;class&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;self&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isKindOfClass:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;respondsToSelector:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isFlipped&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;length&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;objectForKey:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;objectAtIndex:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isEqualToString:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isEqual:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;retain&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;release&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;autorelease&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultVtableGC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;s&#34;&gt;&amp;#34;allocWithZone:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;alloc&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;class&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;self&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isKindOfClass:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;respondsToSelector:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isFlipped&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;length&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;objectForKey:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;objectAtIndex:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isEqualToString:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;isEqual:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;hash&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;addObject:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
    &lt;span class=&#34;s&#34;&gt;&amp;#34;countByEnumeratingWithState:objects:count:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;å› æ­¤ä½ å¦‚ä½•èƒ½çŸ¥é“ä½ æ­£åœ¨å’Œå®ƒæ‰“äº¤é“å‘¢&#34;&gt;å› æ­¤ä½ å¦‚ä½•èƒ½çŸ¥é“ä½ æ­£åœ¨å’Œå®ƒæ‰“äº¤é“å‘¢ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;å½“ä½ è¿›è¡Œè°ƒè¯•çš„æ—¶å€™ï¼Œä½ ä¼šåœ¨ä½ çš„è°ƒè¯•æ ˆä¸­çœ‹åˆ°ç¨åè®²è§£åˆ°çš„æŸäº›æ–¹æ³•çš„èº«å½±ã€‚ä½ å°±æŠŠè¿™äº›æ–¹æ³•æŒ‰ç…§&lt;code&gt;objc_msgSend()&lt;/code&gt;æ–¹æ³•æ¥å¯¹å¾…å°±è¡Œï¼Œä¸è¿‡è¿™äº›æ–¹æ³•éƒ½æ˜¯ä¸ºäº†è°ƒè¯•ï¼Œå…·ä½“æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ã€‚
1.  å½“è¿è¡Œæ—¶æ­£åœ¨å°†ä½ æ‰€æœ‰è°ƒç”¨çš„è¿™äº›æ–¹æ³•ä¸­çš„å…¶ä¸­ä¸€ä¸ªæ’å…¥åˆ°è™šè¡¨ï¼ˆvTableï¼‰ä¸­æ—¶ï¼Œä¼šè°ƒç”¨&lt;code&gt;objc_msgSend_fixup&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;è€Œå½“&lt;code&gt;objc_msgSend_fixedup&lt;/code&gt;å‘ç”Ÿæ—¶ï¼Œè¡¨æ˜ä½ å½“å‰æ‰€è°ƒç”¨çš„ä¸€ä¸ªæ–¹æ³•æœ¬åº”è¯¥å­˜åœ¨äºè™šè¡¨ä¸­&lt;code&gt;objc_msgSend_vtable[0-15]&lt;/code&gt;çš„ä½ç½®ï¼Œä½†å´å¹¶ä¸åœ¨&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ä½ å¯èƒ½ä¼šçœ‹åˆ°&lt;code&gt;objc_msgSend_vtable5&lt;/code&gt;ç±»ä¼¼çš„ä¸œè¥¿ï¼Œå…¶æ„å‘³ç€ä½ æ­£åœ¨è°ƒç”¨è™šè¡¨ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚è¿è¡Œæ—¶å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€è°ƒæ•´è™šè¡¨ä¸­çš„å†…å®¹ã€‚å› æ­¤ä½ ä¸åº”è¯¥æœŸæœ›è¿™æ¬¡ä»£ç å¾ªç¯è°ƒç”¨çš„&lt;code&gt;objc_msgSend_vtable10&lt;/code&gt;å¯¹åº”äº†&lt;code&gt;-length&lt;/code&gt;æ–¹æ³•ï¼Œè€Œä¹‹åæ¯æ¬¡ä»£ç å¾ªç¯è¿˜ä¾ç„¶ä¼šè¿™æ ·ã€‚ï¼ˆå› ä¸ºvTableä¹Ÿåœ¨ä¸æ–­å˜åŒ–ä¸­ï¼‰&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¯‘è€…æ³¨ï¼šå‚è€ƒ&lt;a href=&#34;http://www.sealiesoftware.com/blog/archive/2011/06/17/objc_explain_objc_msgSend_vtable.html&#34;&gt;[objc explain]: objc_msgSend_vtable&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h4&gt;

&lt;p&gt;æˆ‘å¸Œæœ›ä½ ä»¬èƒ½å¤Ÿå–œæ¬¢ä»¥ä¸Šè¿™äº›ä¸œè¥¿ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°äº†æˆ‘å’ŒDes Moines Cocoaheadså…³äºObjective-C runtimeçš„è°ˆè¯ï¼ˆæˆ‘ä»¬çš„è®¨è®ºä¼°è®¡èƒ½æ‰“åŒ…ä¸€ç®©ç­ï¼‰ã€‚Objective-C Runtimeæ˜¯ä¸€é¡¹å¾ˆäº†ä¸èµ·çš„å·¥ç¨‹ï¼Œå®ƒä¸ºæˆ‘ä»¬Cocoa/Objective-Cä¸‹åˆ¶ä½œçš„Appsæ³¨å…¥èƒ½é‡ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå®ç°å¾ˆå¤šæˆ‘ä»¬è®¤ä¸ºç†æ‰€å½“ç„¶çš„ç‰¹æ€§ã€‚å¸Œæœ›ä½ èƒ½å¤Ÿçœ‹ä¸€çœ‹Appleå®˜æ–¹æ–‡æ¡£å¯¹Objective-Cè¿è¡Œæ—¶çš„è®²è§£ï¼Œè¿™æ ·èƒ½å¤Ÿä½¿ä½ æ›´å¥½çš„åˆ©ç”¨Objective-Cè¿è¡Œæ—¶ã€‚è°¢è°¢ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å‚è€ƒé“¾æ¥&#34;&gt;å‚è€ƒé“¾æ¥&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html&#34;&gt;Objective-C Runtime Programming Guide&lt;/a&gt;
&lt;a href=&#34;https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/index.html&#34;&gt;Objective-C Runtime Reference&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>æˆ‘ä»¬æ˜¯å¦‚ä½•åˆ›å»ºiOSç‰ˆçš„Guillotineèœå•åŠ¨ç”»çš„</title>
      <link>https://hechen.xyz/post/how-we-created-guillotine-menu-animation-for-ios/</link>
      <pubDate>Tue, 01 Sep 2015 15:52:07 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/how-we-created-guillotine-menu-animation-for-ios/</guid>
      
        <description>

&lt;p&gt;ä½ æ˜¯å¦æ›¾ç»æœ‰è¿‡è¿™æ ·çš„ç–‘é—®ï¼Ÿä¸ºä»€ä¹ˆappä¸­å‡ ä¹æ˜¯æ¸…ä¸€è‰²çš„&lt;strong&gt;ä¾§&lt;/strong&gt;è¾¹æ ï¼ˆsidebarï¼‰ï¼Œä¸ºä»€ä¹ˆä¸æŠŠå®ƒåšæˆ&lt;strong&gt;top&lt;/strong&gt;Baræˆ–è€…&lt;strong&gt;bottom&lt;/strong&gt;Barï¼Œç”šè‡³&lt;strong&gt;corner&lt;/strong&gt;Barå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å°†è¦è°ˆåˆ°çš„å°±æ˜¯å½“å‰å¯¼èˆªæ¡åŠ¨ç”»çš„ä¸€ä¸ªæ–°è¶‹åŠ¿ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;åŠ¨ç”»å¾ˆæœ‰è¶£ï¼Œä½†æ›´é‡è¦çš„æ˜¯èƒ½å‘æŒ¥å¾ˆå¤§çš„ä½œç”¨ï¼Œå®ƒä»¬å¯ä»¥æ”¹å˜ä½ æ€è€ƒé—®é¢˜çš„æ–¹å¼ï¼Œä½¿å¾—ä½ çš„äº§å“æ›´å¥½ç”¨å¹¶æå‡çš„appæ•´ä½“çš„ç”¨æˆ·ä½“éªŒã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¦å±•ç¤ºçš„æ˜¯è®¾è®¡å¸ˆ&lt;strong&gt;Vitaly Rubtsov&lt;/strong&gt;çš„ä¸€ä¸ªéå¸¸æ£’çš„ç‚¹å­ï¼š&lt;/p&gt;

&lt;p&gt;â€œæ¯ä¸ªè®¾è®¡å¸ˆéƒ½æœ‰é‚£ä¹ˆä¸€åˆ»æ„Ÿåˆ°æ— èŠã€‚å› ä¸ºå‡ ä¹æ‰€æœ‰ï¼ˆå¯¹åŠ¨ç”»ï¼‰çš„å®Œå–„ä¿®è¡¥ã€è£å‰ªä»¥åŠè§„æ ¼è®¾å®šéƒ½ç»™ä»–ä»¬ç•™ä¸‹äº†å¾ˆå°‘å‘æŒ¥æƒ³è±¡çš„ä½™åœ°ã€‚è€Œæ¯å½“è¿™äº›æ—¶å€™ï¼Œæˆ‘å°±ä¼šé©±ä½¿è‡ªå·±æ‰“å¼€Adobe After Effectsè½¯ä»¶ç„¶ååˆ›ä½œä¸€äº›æ¯”è¾ƒæœ‰è¶£çš„ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;p&gt;å½“æˆ‘å¼€å§‹æƒ³æˆ‘è¦åˆ›å»ºä¸€ä¸ªä»€ä¹ˆä¸œè¥¿çš„æ—¶å€™ï¼Œæˆ‘çªç„¶æœ‰ä¸ªæƒ³æ³•ï¼Œé€šå¸¸ä¾§è¾¹æ éƒ½ä»å±å¹•å·¦ä¾§åˆ’å‡ºï¼ŒåŒæ—¶å°†æ‰€æœ‰çš„å†…å®¹éƒ½ç§»åŠ¨åˆ°å³ä¾§ä½ç½®ã€‚è¿™ç§ä¼ ç»Ÿä¾§è¾¹æ çš„å®ç°æ–¹å¼å¤ªè¿‡æ— èŠäº†ã€‚é‚£å¦‚æœæˆ‘ä»¬å°†ä¾§è¾¹æ å˜æˆä¸Šè¾¹æ ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿå®ƒä»é¡µé¢çš„ä¸Šæ–¹æ‰è½ç„¶åä»¥ä¸€ç§ç‰¹åˆ«çš„æ–¹å¼å‘ˆç°ï¼Œå¬èµ·æ¥å¾ˆæ£’ä¸æ˜¯å—ï¼Ÿâ€œ&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Vitaly&lt;/strong&gt;è®¾è®¡çš„topBaråŠ¨ç”»ç”±æˆ‘ä»¬çš„iOSå¼€å‘å·¥ç¨‹å¸ˆ&lt;strong&gt;Maksym Lazebnyi&lt;/strong&gt;ä½¿ç”¨&lt;code&gt;swift&lt;/code&gt;è¯­è¨€å®ç°ï¼Œå¹¶ä¸”å¼€å‘è€…ç»™äº†å®ƒä¸€ä¸ªå¾ˆæœ‰è¶£çš„åå­—â€”â€” &lt;strong&gt;Guillotine Menu&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Q2GueMC.gif&#34; alt=&#34;Guillotine Menu Animation&#34; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;æˆ‘ä»¬æ˜¯å¦‚ä½•å¼€å‘guillotine-menuçš„&#34;&gt;æˆ‘ä»¬æ˜¯å¦‚ä½•å¼€å‘Guillotine Menuçš„ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;by Makssym Lazebnyi&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„iOSå›¢é˜Ÿè§åˆ°è¿‡å¾ˆå¤šå®ç°è¿™ç§åŠ¨ç”»æ•ˆæœçš„æ–¹æ³•ã€‚æˆ‘ä»¬é€‰æ‹©äº†å…¶ä¸­ä¸€ç§æ–¹å¼å®ç°ï¼Œè¿™ç§æ–¹å¼å…è®¸å¼€å‘è€…åœ¨Storyboardä¸­ä»¥ä»»ä½•æ–¹å¼è‡ªå®šä¹‰èœå•ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†å®ç°æˆ‘ä»¬çš„è½¬åœºåŠ¨ç”»ï¼ˆtransitioning animationï¼‰ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªUIStoryboardSegueçš„å­ç±»å’Œä¸€ä¸ªè‡ªå®šä¹‰åŠ¨ç”»ç®¡ç†å™¨ï¼ˆcustom animation controllerï¼‰ã€‚åŸºæœ¬ä¸Šè¿™å°±æ˜¯ä½ å®ç°è¯¥åŠ¨ç”»æ‰€éœ€è¦åšçš„å…¨éƒ¨å·¥ä½œï¼Œé™¤éä½ æƒ³è®©å®ƒæ›´ç‚«é…·ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿç¡®å®æƒ³è¿™æ ·åšï¼Œå› æ­¤è¿˜åˆ›å»ºäº†ä¸€äº›è¾…åŠ©çš„ç±»ã€‚&lt;/p&gt;

&lt;p&gt;æ•´ä½“ä¸Šï¼Œä½ éœ€è¦ä¸‰ä¸ªç±»ä»¥åŠä¸€ä¸ª&lt;code&gt;UIView&lt;/code&gt;çš„æ‰©å±•ç±»æ¥åˆ›å»ºè¿™ä¸ªåŠ¨ç”»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;GuillotineMenuSegue&lt;/code&gt;.  è¯¥ç±»æ˜¯ç»§æ‰¿è‡ª&lt;code&gt;UIStoryboardSegue&lt;/code&gt;ç±»ã€‚æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥æ¨¡æ€æ˜¾ç¤ºèœå•ï¼Œå¹¶å®ç°ç”± &lt;code&gt;GuillotineMenuTransitionAnimation&lt;/code&gt;ç±»æ§åˆ¶çš„å‘ˆç°åŠ¨ç”»ã€‚ &lt;code&gt;GuillotineMenuSegue&lt;/code&gt;å…è®¸ä½ ä¸ºèœå•æ·»åŠ é€æ˜åº¦ï¼Œå½“ç„¶æœ¬æ–‡å¹¶æ²¡æœ‰åšè¿™ä¸ªå·¥ä½œã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;GuillotineMenuTransitionAnimation&lt;/code&gt;.  è¯¥ç±»æ˜¯ä¸ºäº†è‡ªå®šä¹‰å‘ˆç°  &lt;code&gt;GuillotineMenuViewController&lt;/code&gt; ç±»ä¸­è§†å›¾çš„åŠ¨ç”»æ‰€ç”¨ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;. è¯¥ç±»æ˜¯ä¸€ä¸ªUIViewControllerçš„å­ç±»ï¼Œå­˜æ”¾èœå•è§†å›¾æ‰€ç”¨ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä¸ºUIViewæ·»åŠ äº†æ‰©å±•æ–¹æ³•ä»¥ä¾¿èƒ½ä¸ºå­è§†å›¾æ·»åŠ çº¦æŸæ¥æ›´å¥½çš„é€‚åº”çˆ¶è§†å›¾ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€ä¸€å¯¹æ¯ä¸€ä¸ªç±»è¿›è¡Œé˜è¿°ã€‚&lt;/p&gt;

&lt;h4 id=&#34;guillotinemenusegue&#34;&gt;GuillotineMenuSegue&lt;/h4&gt;

&lt;p&gt;è¿™ä¸ªç±»ä¸­æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹ï¼Œæˆ‘åªæåŠä¸€äº›å…³é”®ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¯¥ç±»é‡è½½çš„initæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥ç›®æ ‡è§†å›¾æ§åˆ¶å™¨ï¼ˆdestination view controllerï¼‰æ˜¯å¦éµå®ˆ&lt;code&gt;GuillotineAnimationProtocol&lt;/code&gt; åè®®ï¼ˆè¯¥åè®®æˆ‘ä»¬åé¢ä¼šè®²åˆ°ï¼‰ã€‚åœ¨é‡è½½çš„performæ–¹æ³•ä¸­æˆ‘ä»¬å°†selfè®¾ç½®æˆä¸€ä¸ªè¿‡æ¸¡åŠ¨ç”»çš„ä»£ç†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä»£ç†æ–¹æ³• &lt;code&gt;animationControllerForPresentedController&lt;/code&gt; ä¸­æˆ‘ä»¬ä½¿ç”¨å…³è”å¯¹è±¡å°†&lt;code&gt;GuillotineMenuSegue&lt;/code&gt;çš„å®ä¾‹å¯¹è±¡ï¼ˆ&lt;strong&gt;self&lt;/strong&gt;ï¼‰å…³è”åˆ°å…·ä½“çš„å°†è¦å‘ˆç°çš„è§†å›¾æ§åˆ¶å™¨ä¸­ï¼Œè¿™æ ·å½“menu view controllerå‘ˆç°åœ¨å±å¹•ä¸Šçš„æ—¶å€™ï¼Œsegueå®ä¾‹ä¸ä¼šè¢«é”€æ¯ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šä»£ç å¦‚ä¸‹ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIViewControllerAnimatedTransitioning&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;animationControllerForPresentedController:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;presented&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;presentingController:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;presenting&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;sourceController:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIViewController&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;source&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å°†segueç¤ºä¾‹selfå…³è”åˆ°å°†è¦å‘ˆç°çš„è¯•å›¾æ§åˆ¶å™¨presentedä¸­ï¼Œè¿™æ ·ç¡®ä¿presentedç”Ÿå‘½å‘¨æœŸå†…segueå®ä¾‹ä¸ä¼šè¢«é‡Šæ”¾
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;objc_setAssociatedObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;presented&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OBJC_ASSOCIATION_RETAIN_NONATOMIC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GuillotineTransitionAnimation&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;initWithMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AnimationModePresentation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h4 id=&#34;guillotinemenutransitionanimation&#34;&gt;GuillotineMenuTransitionAnimation&lt;/h4&gt;

&lt;p&gt;æ‰€æœ‰çš„åŠ¨ç”»å¤„ç†é€»è¾‘éƒ½åœ¨è¿™ä¸ªç±»ä¸­å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;èµ·åˆæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ &lt;code&gt;animateWithDuration usingSpringWithDamping &amp;amp; initialSprintVelocity&lt;/code&gt;æ–¹æ³•ï¼Œä½†æ˜¯å½“æˆ‘ä»¬è®¤çœŸè€ƒè™‘è¿™ä¸ªåŠ¨ç”»ä¹‹åæˆ‘ä»¬æ”¹å˜äº†ä¸»æ„ã€‚æˆ‘ä»¬éœ€è¦å®ç°çš„èœå•åŠ¨ç”»ä¸­ï¼Œå½“èœå•ä»ä¸Šæ–¹æ‰è½ä¹‹åï¼Œéœ€è¦å’Œçˆ¶è§†å›¾çš„å·¦ä¾§è¾¹ç•Œå‘ç”Ÿç¢°æ’ï¼Œäº§ç”Ÿç¢°æ’æ•ˆæœã€‚è€Œä¸Šé¢æ–¹æ³•ä¸­çš„å›å¼¹æ•ˆæœä¼šç©¿è¿‡å·¦è¾¹ç•Œï¼ˆspring through the border of the superviewï¼‰ï¼Œå› æ­¤æˆ‘ä»¬æ”¾å¼ƒäº†è¿™ä¸ªå®ç°æ–¹å¼ï¼Œè½¬è€Œé‡‡ç”¨äº†&lt;code&gt;UIDynamicAnimator&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†å®ç°æˆ‘ä»¬çš„åŠ¨ç”»ï¼Œ&lt;code&gt;GuillotineMenuTransitionAnimation&lt;/code&gt;ç±»å¿…é¡»éµä» &lt;code&gt;UIViewControllerAnimatedTransitioning&lt;/code&gt; åè®®ï¼Œè¯¥åè®®ä¸­æœ‰ä¸¤ä¸ªä»£ç†æ–¹æ³•ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;transitionDuration  åŠ¨ç”»çš„è¿‡æ¸¡æ—¶é—´å¯¹æˆ‘ä»¬å½±å“ä¸æ˜¯å¤ªå¤šï¼Œå› æ­¤ä½ å¯ä»¥è¿”å›ä»»æ„çš„æ—¶é—´å€¼ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;animationDuration å½“èœå•å¼€å¯å’Œå…³é—­å‡ä¼šè°ƒç”¨è¯¥æ–¹æ³•&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;###æˆ‘ä»¬å¦‚ä½•è®¡ç®—åŠ¨ç”»çš„ä½ç½®ä¿¡æ¯ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬éœ€è¦äº†è§£åŠ¨ç”»ä¸­æ¯ä¸€åˆ»çš„ç²¾ç¡®ä½ç½®ã€‚&lt;code&gt;GuillotineMenuTransitionAnimation&lt;/code&gt;ç±»éœ€è¦&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;æä¾›menu buttonä¸­å¿ƒçš„åæ ‡æ¥åšä¸ºæ—‹è½¬åŠ¨ç”»çš„é”šç‚¹ï¼ˆanchorPointï¼‰ã€‚å¦å¤–è¿˜éœ€è¦&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;æä¾›ä¸€äº›å…¶ä»–å±æ€§ï¼Œå› æ­¤æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåè®®&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;ï¼Œè§†å›¾æ§åˆ¶å™¨é€šè¿‡éµå®ˆè¯¥åè®®è¿”å›æˆ‘ä»¬æ‰€éœ€è¦çš„å‡ ä¸ªå±æ€§ã€‚
ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt; &lt;span class=&#34;kr&#34;&gt;@objc&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;protocol&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;GuillotineAnimationProtocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NSObjectProtocol&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;navigationBarHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CGFloat&lt;/span&gt;
      &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;anchorPoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CGPoint&lt;/span&gt;
      &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hostTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;
 &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼šObjective-Cç‰ˆæœ¬ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objc&#34; data-lang=&#34;objc&#34;&gt;&lt;span class=&#34;k&#34;&gt;@protocol&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;GuillotineAnimationProtocol&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSObject&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CGFloat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;navigationBarHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CGPoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;anchorPoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hostTitle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™ä¸‰ä¸ªæ–¹æ³•çš„æ„ä¹‰å¦‚ä¸‹ï¼š
- &lt;strong&gt;navigationBarHeight&lt;/strong&gt;  &lt;code&gt;GuillotineMenuViewController&lt;/code&gt;å¼€å§‹æ˜¾ç¤ºåŠ¨ç”»çš„æ—¶å€™éœ€è¦æ—‹è½¬90åº¦ï¼ŒåŒæ—¶è¦†ç›–å¯¼èˆªæ¡ï¼ˆnavigation barï¼‰ã€‚æˆ‘ä»¬éœ€è¦å°†&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;ä¸­çš„è§†å›¾ä½ç½®è®¾ç½®æˆ&lt;code&gt;CGPoint(0ï¼ŒnavigationBarHeight)&lt;/code&gt;ï¼›&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;anchorPoint&lt;/strong&gt; æä¾›æˆ‘ä»¬åŠ¨ç”»çš„æ—‹è½¬è½´å¿ƒï¼Œè¿™é‡Œæ˜¯&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;ä¸­çš„menu buttonçš„ä¸­å¿ƒä½ç½®ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;hostTitle&lt;/strong&gt; ç”¨æ¥è¯¢é—®&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;è·å¾—ä¸»è§†å›¾æ§åˆ¶å™¨çš„æ ‡é¢˜ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;æˆ‘ä»¬å¦‚ä½•å®ç°èœå•è§†å›¾çš„æ‰è½ä»¥åŠæ—‹è½¬&#34;&gt;æˆ‘ä»¬å¦‚ä½•å®ç°èœå•è§†å›¾çš„æ‰è½ä»¥åŠæ—‹è½¬ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;ä¸ºäº†å®ç°æ‰è½ä»¥åŠæ—‹è½¬çš„åŠ¨ç”»ï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;code&gt;UIDynamicAnimator&lt;/code&gt;å¹¶ä¸ºå…¶æ·»åŠ å››ç§åŠ¨åŠ›è¡Œä¸ºï¼š
 ï¼ˆè¯‘è€…æ³¨ï¼šå®é™…ä¸Šå®ç°UIKitåŠ¨åŠ›å­¦ä¸­çš„æ¨åŠ¨åŠ›ã€å¸é™„ã€ç¢°æ’ä»¥åŠè¾…åŠ©è¡Œä¸ºï¼Œè¯¦è§&lt;a href=&#34;http://www.coderyi.com/archives/426&#34;&gt;UIKitåŠ¨åŠ›å­¦&lt;/a&gt;ï¼‰
- &lt;code&gt;UIPushBehavior&lt;/code&gt;  ä¸ºviewæ·»åŠ ä¸€ä¸ªæ‹–æ‹½çš„åŠ›ï¼Œå½“æˆ‘ä»¬éœ€è¦å‘ˆç°æ˜¾ç¤ºåŠ¨ç”»çš„æ—¶å€™ï¼Œæ–½åŠ åˆ°viewçš„åº•éƒ¨ï¼Œå½“æˆ‘ä»¬éœ€è¦å‘ˆç°å…³é—­èœå•çš„åŠ¨ç”»æ—¶ï¼Œæ–½åŠ åˆ°viewçš„é¡¶éƒ¨ï¼›&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;UIAttachmentBehavior&lt;/code&gt; ç›¸å½“äºä¸€ä¸ªé’‰å­åœ¨menu buttonçš„ä¸­å¿ƒç‚¹å°†æ•´ä¸ªviewå›ºå®šä½ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;UICollisionBehavior&lt;/code&gt;  æˆ‘ä»¬ä¸ºviewçš„çˆ¶è§†å›¾ï¼ˆ&lt;strong&gt;superview&lt;/strong&gt;ï¼‰æ·»åŠ äº†ä¸€ä¸ªè¾¹ç•Œï¼Œä»è§†å›¾ä¸­å¿ƒä½ç½®åˆ°å·¦ä¸‹è§’ä½ç½®çš„é•¿åº¦ã€‚ç”¨ä»¥å®ç°&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;åœ¨æ‰è½è·¯å¾„çš„æœ«ç«¯æ¨¡æ‹Ÿç¢°æ’æ•ˆæœï¼ˆè¯‘è€…æ³¨ï¼šå½“èœå•è§†å›¾å…³é—­è€Œå›å¼¹åˆ°ä¸Šæ–¹æ—¶ï¼ŒåŒæ ·éœ€è¦æ·»åŠ boundaryï¼Œä¸è¿‡æ­¤æ—¶æ˜¯åœ¨é¡¶éƒ¨ï¼Œå±å¹•æ°´å¹³æ–¹å‘èœå•è§†å›¾çš„ä¸­å¿ƒä½ç½®åˆ°å…¶å³ä¸‹è§’ä½ç½®ï¼‰ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;UIDynamicItemBehavior&lt;/code&gt; å®ç°èœå•ç¢°æ’å·¦è¾¹ç•Œä¹‹åçš„å›å¼¹æ•ˆæœã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬çš„åŠ¨ç”»æ˜¯è¿™æ ·ï¼Œé¦–å…ˆä½¿ç”¨&lt;code&gt;CGAffineTransformRotate&lt;/code&gt;å°†&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;çš„viewæ—‹è½¬æ­£å‘90åº¦ï¼Œè®¾ç½®è¯¥viewçš„è¾¹æ¡†ä½ç½®ä¸º&lt;code&gt;CGPoint(0, navigationBarHeight)&lt;/code&gt;ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è¯¥viewæ·»åŠ ä»¥ä¸Šæ¯ä¸€ç§éœ€è¦ä½¿ç”¨çš„&lt;code&gt;UIDynamicBehavior&lt;/code&gt;ï¼ˆUIPushBehaviorã€UIAttachmentBehaviorã€UICollisionBehaviorä»¥åŠUIDynamicItemBehaviorï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;UIDynamicAnimator&lt;/code&gt;ä¼šä½¿å¾—èœå•çš„åŠ¨ç”»æŒç»­ï¼Œä¸€ç›´åˆ°æ‰€æœ‰é™„åŠ åœ¨å…¶ä¸Šçš„ç‰©ç†ä½œç”¨åŠ›è¾¾åˆ°å¹³è¡¡ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä»£ç†åè®®&lt;code&gt;UIDynamicAnimatorDelegate&lt;/code&gt;æ¥å‘ŠçŸ¥è§†å›¾æ§åˆ¶å™¨åŠ¨ç”»çš„å®Œæˆæƒ…å†µã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è°ƒç”¨&lt;code&gt;endAppearanceTransition()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„åœ°æ–¹å°±æ˜¯è®¾ç½®&lt;strong&gt;anchorPoint&lt;/strong&gt;ã€‚ä¸ºäº†ä½¿å¾—åŠ¨ç”»æ­£ç¡®å‘ˆç°ï¼Œé”šç‚¹çš„ä½ç½®åˆ°&lt;code&gt;GuillotineMenuViewController&lt;/code&gt;ä¸­è§†å›¾çš„å·¦è¾¹ç•Œçš„è·ç¦»å¿…é¡»å’Œé”šç‚¹åˆ°é¡¶éƒ¨å¯¼èˆªæ¡åº•éƒ¨ä¹‹é—´çš„è·ç¦»ç›¸åŒã€‚è€Œä¸”ï¼Œå½“è®¾å¤‡å‘ç”Ÿæ—‹è½¬ä¹Ÿéœ€è¦ä¿®æ”¹é”šç‚¹ä½ç½®ã€‚ä½†æ˜¯&lt;code&gt;GuillotineMenuTransitionAnimation&lt;/code&gt;ç±»è°ƒç”¨ä»£ç†æ–¹æ³•&lt;code&gt;anchorPoint()&lt;/code&gt;æ˜¯åœ¨&lt;code&gt;viewDidLayoutSubviews()&lt;/code&gt;ç”¨ä¹‹å‰ã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤æˆ‘ä»¬å°†è®¾å¤‡å¤„äºæ°´å¹³æ–¹å‘æ—¶çš„æŒ‰é’®ä½ç½®è¿›è¡Œäº†ç¡¬ç¼–ç &lt;/p&gt;

&lt;p&gt;è¯‘è€…æ³¨ï¼š è®¾å¤‡å¸ƒå±€ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚è®¾å¤‡è¿›è¡Œäº†æ—‹è½¬ï¼Œä¾¿ä¼šè°ƒç”¨&lt;code&gt;viewDidLayoutSubviews()&lt;/code&gt;æ–¹æ³•ï¼Œæœ¬èº«æˆ‘ä»¬å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­åŠ¨æ€è°ƒæ•´æŒ‰é’®ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯é”šç‚¹ä½ç½®ï¼‰ï¼Œå¯æ˜¯è½¬åœºåŠ¨ç”»å¿…é¡»åœ¨è¯¥æ–¹æ³•è°ƒç”¨ä¹‹å‰å–åˆ°é”šç‚¹ä½ç½®ï¼Œå› æ­¤çŸ›ç›¾ã€‚ä½œè€…å°±åœ¨ä»£ç é‡Œç¡¬ç¼–ç å¤„ç†å¸ƒå±€å‘ç”Ÿå˜åŒ–ä¹‹åèœå•æŒ‰é’®çš„ä½ç½®äº†ã€‚&lt;/p&gt;

&lt;h4 id=&#34;uiviewextension&#34;&gt;UIViewExtension&lt;/h4&gt;

&lt;p&gt;é’ˆå¯¹UIViewçš„ç®€å•æ‰©å±•ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å­è§†å›¾æ·»åŠ çº¦æŸä»¥æ›´å¥½çš„é€‚åº”çˆ¶è§†å›¾ã€‚ä»£ç æœ¬èº«å°±å¾ˆå¥½èƒ½å¤Ÿè¯´æ˜åŠŸèƒ½äº†ï¼ˆself explanatoryï¼‰ï¼Œè¿™é‡Œå°±ä¸å™è¿°äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¯‘è€…æ³¨ï¼š é’ˆå¯¹Objective-Cè¯­è¨€çš„ç±»æ‰©å±•å’Œswiftè¯­è¨€ä¸åŒï¼Œåœ¨objcå®ç°ç‰ˆæœ¬ä¸­ï¼Œæ–‡ä»¶åå­—ä¸ºUIView+ConstraintExtension.hå’ŒUIView+ConstraintExtension.m&lt;/p&gt;

&lt;h4 id=&#34;guillotine-menu-view-controller&#34;&gt;Guillotine Menu View Controller&lt;/h4&gt;

&lt;p&gt;ä½ å¯ä»¥ç»§æ‰¿è¯¥è§†å›¾æ§åˆ¶å™¨æˆ–è€…è¿›è¡Œä»»ä½•çš„è‡ªå®šä¹‰ç”šè‡³é‡å†™ã€‚å”¯ä¸€å¿…é¡»è¦è®°å¾—æ˜¯çš„éµå®ˆ&lt;code&gt;GuillotineAnimationProtocol&lt;/code&gt;åè®®ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;ä½ å¦‚ä½•æ‰èƒ½å®šåˆ¶è¯¥åŠ¨ç”»&#34;&gt;ä½ å¦‚ä½•æ‰èƒ½å®šåˆ¶è¯¥åŠ¨ç”»ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;ä½ å¯ä»¥ç”¨ä»»ä½•å¯èƒ½çš„æ–¹å¼æ¥å®šåˆ¶èœå•è§†å›¾ï¼ä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„&lt;code&gt;GuillotineMenuSegue&lt;/code&gt;ï¼Œå…¶ä¸­æºè§†å›¾æ§åˆ¶å™¨å°±æ˜¯ä½ çš„ä¸»è§†å›¾æ§åˆ¶å™¨ï¼ˆhost view controllerï¼‰ï¼Œç›®æ ‡è§†å›¾æ§åˆ¶å™¨å°±æ˜¯ä½ éœ€è¦å‘ˆç°çš„èœå•è§†å›¾æ§åˆ¶å™¨ã€‚&lt;/p&gt;

&lt;p&gt;å®è¯è®²ï¼Œåˆšå¼€å§‹åˆ›å»ºè¿™ä¸ªåŠ¨ç”»çš„æ—¶å€™æˆ‘è‡ªè®¤ä¸ºè¿™æ˜¯ä¸€ä»¶å¾ˆç®€å•çš„äº‹æƒ…ï¼Œè¿™ä¸ªè¿‡ç¨‹åº”è¯¥ä¹Ÿæ²¡ä»€ä¹ˆæŒ‘æˆ˜ã€‚å¯æ˜¯ç°åœ¨æˆ‘ä»¬å¿…é¡»æ‰¿è®¤ï¼Œå¯¹äºiOSå¼€å‘è€…è€Œè¨€è¿™é‡Œé¢è¿˜æœ‰å·¨å¤§çš„æ½œåŠ›å¯æŒ–ã€‚å¦å¤–ï¼Œæˆ‘ä»¬çš„åŠ¨ç”»è¿˜å¯ä»¥ä½œä¸ºä¸€ä¸ªç®€å•çš„åŠ¨ç”»è§†å›¾æ¥ä½¿ç”¨ï¼Œæˆ–è€…ä½œä¸ºä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰å¯¼èˆªæ¡çš„&lt;code&gt;UINavigationViewController&lt;/code&gt;çš„å­ç±»æ¥ä½¿ç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è®¡åˆ’å°†ä¸æ–­æ›´æ–°è¿™é¡¹å·¥ä½œï¼ŒåŠ›å›¾åˆ›é€ ä¸€ä¸ªå®Œæ•´çš„å¸¦è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ•ˆæœçš„&lt;code&gt;UINavigationViewController&lt;/code&gt;çš„å­ç±»ã€‚&lt;/p&gt;

&lt;p&gt;ä½ å¯ä»¥åœ¨ä»¥ä¸‹è¿™å‡ ä¸ªä½ç½®æ‰¾åˆ°æˆ‘ä»¬çš„å·¥ç¨‹æºç ä»¥åŠè®¾è®¡ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Yalantis/GuillotineMenu&#34;&gt;GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dribbble.com/shots/2018249-Side-Topbar-Animation&#34;&gt;Dribbble&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼šObjective-C ç‰ˆæœ¬å®ç°å¯ä»¥å‚è§&lt;a href=&#34;https://github.com/hechen/GuillotineMenu-objc&#34;&gt;GuillotineMenu-objc&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      
    </item>
    
    <item>
      <title>[021] Implement Strstr</title>
      <link>https://hechen.xyz/post/leetcode-021-implementstrstr/</link>
      <pubDate>Fri, 21 Aug 2015 09:14:17 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/leetcode-021-implementstrstr/</guid>
      
        <description>

&lt;h1 id=&#34;é¢˜ç›®-implement-strstr&#34;&gt;é¢˜ç›®ï¼šImplement strStr()&lt;/h1&gt;

&lt;p&gt;Implement strStr().&lt;/p&gt;

&lt;p&gt;Returns the index of the first occurrence of needle in haystack, or -1 if needle is not part of haystack.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&#34;é¢˜æ„&#34;&gt;é¢˜æ„ï¼š&lt;/h2&gt;

&lt;p&gt;è¯¥é¢˜ç›®å°±æ˜¯å®ç°strstr()å‡½æ•°ï¼Œè¯¥å‡½æ•°Cè¯­è¨€åŸå‹å¦‚ä¸‹ï¼šè¿”å›å­—ç¬¦ä¸²str1åœ¨str2ä¸­çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;extern char *strstr(char *str1, const char *str2);&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;è§£æ³•&#34;&gt;è§£æ³•ï¼š&lt;/h2&gt;

&lt;h3 id=&#34;æš´åŠ›æ±‚è§£æ³•&#34;&gt;æš´åŠ›æ±‚è§£æ³•&lt;/h3&gt;

&lt;p&gt;æœ€ç›´æ¥çš„å®ç°æ–¹å¼å°±æ˜¯æš´åŠ›æ±‚è§£æ³•ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;haystack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;needle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bruth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haystack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;needle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bruth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
					&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
						&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæš´åŠ›å­å­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•åœ¨é•¿åº¦ä¸ºNçš„æ–‡æœ¬ä¸­æŸ¥æ‰¾é•¿åº¦ä¸ºMçš„æ¨¡å¼å­—ç¬¦ä¸²éœ€è¦O(NM)æ¬¡å­—ç¬¦ä¸²æ¯”è¾ƒã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„å®ç°æ–¹æ³•è¿›è¡Œä¸€å®šçš„ä¿®æ”¹ï¼Œè®©å¤§å®¶èƒ½çœ‹åˆ°iæŒ‡é’ˆçš„å›é€€ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå½“iæŒ‡é’ˆæŒ‡å‘å­—ç¬¦å’ŒjæŒ‡å‘å­—ç¬¦å‘ç”Ÿå¤±é…ï¼Œiä¾¿ä¼šå›é€€jä¸ªä½ç½®ï¼ˆæ­¤æ—¶jæ˜¯å¤±é…å‰æ¨¡å¼ä¸²çš„åŒ¹é…é¡¹ä¸ªæ•°ï¼‰ï¼ŒåŒæ—¶jæŒ‡å‘æ¨¡å¼ä¸²çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚è¯¥æ®µä»£ç å’Œä¸Šé¢ä»£ç å…¶å®æ˜¯ç­‰æ•ˆçš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
	&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;haystack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;needle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bruth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haystack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;needle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
	&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bruth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é‚£æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°ï¼Œå½“æ¨¡å¼ä¸²ä¸­jæŒ‡å‘ä½ç½®å­—ç¬¦ä¸åŒ¹é…çš„æ—¶å€™ï¼Œå…¶å®å‰é¢é€šè¿‡åŒ¹é…æˆ‘ä»¬å·²ç»è·çŸ¥äº†ä¸€éƒ¨åˆ†æ–‡æœ¬çš„æƒ…å†µï¼Œå› æ­¤å¦‚æœèƒ½å¤Ÿåˆ©ç”¨è¿™ä¸€éƒ¨åˆ†å·²çŸ¥çš„æƒ…å†µæ¥åŠ å¤§æ¨¡å¼ä¸²ç§»åŠ¨çš„æœ‰æ•ˆæ€§ã€‚KMPç®—æ³•å°±æ˜¯åˆ©ç”¨å­—ç¬¦ä¸²åŒ¹é…å¤±æ•ˆä¹‹å‰éƒ¨åˆ†åŒ¹é…çš„è¿™ä¸ªæœ‰ç”¨ä¿¡æ¯ï¼Œé€šè¿‡ä¿æŒæ–‡æœ¬æŒ‡é’ˆä¸å›é€€ï¼Œä»…æœ‰æ•ˆç§»åŠ¨æ¨¡å¼å­—ç¬¦ä¸²çš„ä½ç½®æ¥è¿›è¡Œæœ‰æ•ˆæŸ¥æ‰¾çš„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;kmpç®—æ³•&#34;&gt;KMPç®—æ³•&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm&#34;&gt;KMPç®—æ³•&lt;/a&gt;å¸¸ç”¨äºåœ¨ä¸€ä¸ªæ–‡æœ¬ä¸²Så†…æŸ¥æ‰¾ä¸€ä¸ªæ¨¡å¼ä¸²P çš„å‡ºç°ä½ç½®ï¼Œè¿™ä¸ªç®—æ³•ç”±Donald Knuthã€Vaughan Prattã€James H. Morrisä¸‰äººåŒæ—¶ç‹¬ç«‹å‘ç°ï¼Œåå–è¿™3äººçš„å§“æ°å‘½åæ­¤ç®—æ³•.
å¤§å®¶å¯ä»¥å‚çœ‹&lt;a href=&#34;http://blog.csdn.net/tukangzheng/article/details/38438481&#34;&gt;julyçš„Blog&lt;/a&gt;ï¼Œè®²è§£çš„æ˜¯æˆ‘ç›®å‰çœ‹åˆ°æœ€è¯¦ç»†çš„äº†ã€‚&lt;/p&gt;

&lt;p&gt;KMPç®—æ³•å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;haystack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;needle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haystack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;needle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;c1&#34;&gt;// KMP
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
			&lt;span class=&#34;n&#34;&gt;calculateNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// iç»´æŒä¸å˜ï¼Œjè·³è½¬ä½ç½®ç”±nextæ•°ç»„å†³å®š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;calculateNext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
					&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
					&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
					&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
					&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
      
    </item>
    
    <item>
      <title>[019] BinaryTreePaths</title>
      <link>https://hechen.xyz/post/leetcode-019-binarytreepaths/</link>
      <pubDate>Tue, 18 Aug 2015 16:28:26 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/leetcode-019-binarytreepaths/</guid>
      
        <description>

&lt;h3 id=&#34;é¢˜ç›®&#34;&gt;é¢˜ç›®ï¼š&lt;/h3&gt;

&lt;p&gt;Given a binary tree, return all root-to-leaf paths.
    For example, given the following binary tree:
                           1
                         /   &lt;br /&gt;
                        2     3
                               &lt;br /&gt;
                                5
    All root-to-leaf paths are:
            [&amp;ldquo;1-&amp;gt;2-&amp;gt;5&amp;rdquo;, &amp;ldquo;1-&amp;gt;3&amp;rdquo;]&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;é¢˜æ„&#34;&gt;é¢˜æ„ï¼š&lt;/h3&gt;

&lt;p&gt;éš¾åº¦ä¸å¤§ï¼Œè€ƒå¯Ÿæ ‘çš„éå†&lt;/p&gt;

&lt;h3 id=&#34;è§£æ³•&#34;&gt;è§£æ³•ï¼š&lt;/h3&gt;

&lt;p&gt;C++ç‰ˆæœ¬å®ç°æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;	&lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * Definition for a binary tree node.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * struct TreeNode {
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     int val;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     TreeNode *left;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     TreeNode *right;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * };
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 */&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
			&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;binaryTreePaths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
			&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;results&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;n&#34;&gt;visitTreeNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;results&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;results&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

		&lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;visitTreeNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
					&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;-&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
				&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;int2Str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

				&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
					&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
					&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
					&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
						&lt;span class=&#34;n&#34;&gt;visitTreeNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
					&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
					&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
					&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
						&lt;span class=&#34;n&#34;&gt;visitTreeNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
					&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

			&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;int2Str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;n&#34;&gt;ostringstream&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ss&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;n&#34;&gt;ss&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ss&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCode Ojç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
æ²¡æœ‰å„ç§è¯­è¨€çš„æŸ±çŠ¶å›¾ï¼Œå®˜æ–¹è§£é‡Šç”±äºæ²¡æœ‰å……è¶³çš„æäº¤å¯¼è‡´ï¼Œä¸çŸ¥é“æ˜¯æ–°é¢˜è¿˜æ˜¯å› ä¸ºå¤ªç®€å•å¤§å®¶ç›´æ¥ç•¥è¿‡äº†~&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode019C++.png&#34; alt=&#34;leetCode Binary Tree Paths C++&#34; /&gt;;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>[018] Length Of Last Word</title>
      <link>https://hechen.xyz/post/leetcode-018-lengthoflastword/</link>
      <pubDate>Tue, 18 Aug 2015 16:13:44 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/leetcode-018-lengthoflastword/</guid>
      
        <description>

&lt;h3 id=&#34;é¢˜ç›®&#34;&gt;é¢˜ç›®ï¼š&lt;/h3&gt;

&lt;p&gt;Given a string s consists of upper/lower-case alphabets and empty space characters &amp;lsquo; &amp;lsquo;, return the length
  of last word in the string.
  If the last word does not exist, return 0.
  Note: A word is defined as a character sequence consists of non-space characters only.
            For example, Given s = &amp;ldquo;Hello World&amp;rdquo;, return 5.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;é¢˜æ„&#34;&gt;é¢˜æ„ï¼š&lt;/h3&gt;

&lt;p&gt;éš¾åº¦ä¸å¤§ï¼Œè€ƒè™‘æ‰€æœ‰è¾¹ç•Œæƒ…å†µå³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&#34;è§£æ³•&#34;&gt;è§£æ³•ï¼š&lt;/h3&gt;

&lt;p&gt;C++ç‰ˆæœ¬å®ç°æ–¹æ³•1ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;   &lt;span class=&#34;c1&#34;&gt;// ä»å³å¾€å·¦ä¾æ¬¡éå†å³å¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lengthOfLastWord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
				&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
					&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
					&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCode Ojç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode018C++1.png&#34; alt=&#34;leetCode C++1&#34; /&gt;;&lt;/p&gt;

&lt;p&gt;C++ç‰ˆæœ¬å®ç°æ–¹æ³•2ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// ç›´æ¥åˆ©ç”¨ç°æœ‰è½®å­STL 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lengthOfLastWord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;find_if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbegin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isalpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;find_if_not&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isalpha&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;distance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCode Ojç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode018C++2.png&#34; alt=&#34;leetCode C++2&#34; /&gt;;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>iOS è¿œç«¯æ¨é€éƒ¨ç½²è¯¦è§£</title>
      <link>https://hechen.xyz/post/ios-push-notification/</link>
      <pubDate>Thu, 30 Jul 2015 14:30:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/ios-push-notification/</guid>
      
        <description>

&lt;p&gt;æœ€è¿‘å‡ å¤©è¢«iOSçš„æ¨é€éƒ¨ç½²ç»™ææ‡µäº†ï¼Œç°åœ¨ç‰¹åœ°æ•´ç†ä¸‹å’Œå¤§å®¶è¿›è¡Œåˆ†äº«ã€‚&lt;/p&gt;

&lt;h4 id=&#34;iosè¿œç«¯æ¨é€æœºåˆ¶&#34;&gt;iOSè¿œç«¯æ¨é€æœºåˆ¶&lt;/h4&gt;

&lt;p&gt;APNSï¼Œå…¨ç§°ä¸ºApple Push Notification serviceï¼Œæ˜¯è‹¹æœé€šçŸ¥æ¨é€æœåŠ¡ä¸­æœ€é‡è¦çš„ä¸€ç¯ã€‚å®ƒæ˜¯è‹¹æœé€šçŸ¥æ¨é€æœåŠ¡å™¨ï¼Œä¸ºæ‰€æœ‰iOSè®¾å¤‡ä»¥åŠOS Xè®¾å¤‡æä¾›å¼ºå¤§å¹¶ä¸”å¯é çš„æ¨é€é€šçŸ¥æœåŠ¡ã€‚æ¯ä¸ªæ³¨å†Œé€šçŸ¥æœåŠ¡çš„è®¾å¤‡éƒ½ä¼šå’Œè¯¥æœåŠ¡å™¨è¿›è¡Œé•¿è¿æ¥ï¼Œä»è€Œå®æ—¶è·å–æ¨é€é€šçŸ¥ã€‚å³ä½¿å½“å‰APPä¸åœ¨è¿è¡ŒçŠ¶æ€ï¼Œå½“é€šçŸ¥åˆ°è¾¾çš„æ—¶å€™ä¹Ÿä¼šæœ‰æç¤ºå‘ç”Ÿï¼Œæœ€å¸¸è§çš„å°±æ˜¯çŸ­ä¿¡æœåŠ¡ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;æ¯ä¸€ä¸ªAppå¿…é¡»å‘APNsæ³¨å†Œé€šçŸ¥æœåŠ¡ï¼ŒAPNsä¼šè¿”å›ç»™è®¾å¤‡ä¸€ä¸ªDeviceTokenï¼Œè¯¥Tokenä¸ºAPNsä¸Šé’ˆå¯¹è¯¥è®¾å¤‡çš„å”¯ä¸€æ ‡ç¤ºç¬¦ã€‚Appéœ€è¦å°†è¯¥DeviceTokenè¿”ç»™è‡ªèº«çš„Serverç«¯ä¿å­˜åç»­ä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushshare%20the%20device%20Token.png&#34; alt=&#34;DeviceTokençš„æ“ä½œæµç¨‹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å½“Appå¼€å‘è€…çš„serveréœ€è¦å‘ç‰¹å®šè®¾å¤‡æ¨é€é€šçŸ¥æ—¶ï¼Œå°±ä½¿ç”¨DeviceTokenå’Œå›ºå®šæ ¼å¼æ•°æ®ï¼ˆPush payloadï¼‰å‘ç»™APNsï¼Œç„¶åAPNså°±ä¼šå‘DeviceTokenæŒ‡å®šçš„è®¾å¤‡æ¨é€é€šçŸ¥äº†ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œå•ä¸€æ¨é€
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushPushing%20a%20remote%20notification%20from%20a%20provider%20to%20a%20client%20app.png&#34; alt=&#34;é€šçŸ¥æ–¹æ¨é€ä¸€æ¡è¿œç«¯é€šçŸ¥ç»™å®¢æˆ·ç«¯ä»£ç çš„æ•´ä¸ªæµç¨‹&#34; /&gt;
æˆ–è€…å¤šæ–¹é€šçŸ¥ï¼ŒAPNséƒ½èƒ½ä¸€ä¸€å¯¹åº”ï¼Œé çš„å°±æ˜¯ä¹‹å‰æˆ‘ä»¬æä¾›ç»™å®ƒçš„DeviceTokenã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushPushing%20remote%20notifications%20from%20multiple%20providers%20to%20multiple%20devices.png&#34; alt=&#34;å¤šä¸ªé€šçŸ¥æ–¹å‘å‘ä¸åŒçš„å®¢æˆ·ç«¯æ¨é€é€šçŸ¥çš„æµç¨‹ç¤ºæ„&#34; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&#34;æœ¬åœ°æ¨é€è¯ä¹¦é…ç½®&#34;&gt;æœ¬åœ°æ¨é€è¯ä¹¦é…ç½®&lt;/h4&gt;

&lt;p&gt;æ‰“å¼€ä½ macçš„é’¥åŒ™ä¸²è®¿é—®ï¼Œç„¶åç‚¹å‡»é’¥åŒ™ä¸²è®¿é—®
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushé’¥åŒ™ä¸².png&#34; alt=&#34;æ‰“å¼€é’¥åŒ™ä¸²&#34; /&gt;
éšåå®ƒä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ ç”¨æˆ·ç”µå­é‚®ä»¶ä¿¡æ¯
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦1.png&#34; alt=&#34;ç”ŸæˆCSRæ–‡ä»¶&#34; /&gt;
å°±å¡«å†™ä½ è‹¹æœå¼€å‘è€…è´¦å·çš„åç§°å³å¯ï¼ˆåº”è¯¥æ˜¯ä¸€ä¸ªé‚®ä»¶åç§°ï¼‰ï¼Œç‚¹å‡»ä¿å­˜åˆ°ç£ç›˜çš„é€‰é¡¹ï¼Œç‚¹å‡»ç»§ç»­ï¼Œç‚¹å‡»å­˜å‚¨ï¼Œæ–‡ä»¶åä¸ºï¼šCertificateSigningRequest.certSigningRequestã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦2.png&#34; alt=&#34;ä¿å­˜ç”Ÿæˆçš„CSRæ–‡ä»¶&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬æ‰“å¼€&lt;a href=&#34;developer.apple.com&#34;&gt;è‹¹æœå¼€å‘è€…ä¸­å¿ƒ&lt;/a&gt;  è¿›å…¥Member Center
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦3.png&#34; alt=&#34;è‹¹æœå¼€å‘è€…ä¸­å¿ƒ&#34; /&gt;
ç„¶åç‚¹å‡»å·¦ä¾§åˆ—è¡¨ä¸­ä»»æ„ä¸€é¡¹è¿›å…¥è¯¦æƒ…é¡µé¢ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦4.png&#34; alt=&#34;å¼€å‘è€…ä¸ªäººé¦–é¡µé€‰é¡¹&#34; /&gt;
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦5.png&#34; alt=&#34;é€‰æ‹©IOS Appsä¸­åˆ—è¡¨é¡¹&#34; /&gt;&lt;/p&gt;

&lt;h5 id=&#34;app-id&#34;&gt;APP ID&lt;/h5&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬è¦å¼€å‘çš„APPå»ºç«‹èº«ä»½ä¿¡æ¯ï¼Œå°±æ˜¯AppIDï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œç‚¹å‡»å·¦ä¾§
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushAPPID1.png&#34; alt=&#34;æ·»åŠ AppID&#34; /&gt;
ç‚¹å‡»æ·»åŠ æŒ‰é’®è¿›å…¥æ³¨å†Œé¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥App Idçš„åå­—ä»¥åŠBundleIDï¼Œå…¶ä¸­BundleIDä¸èƒ½æœ‰é€šé…ç¬¦ï¼Œå¦åˆ™æ— æ³•å…·å¤‡æ¨é€åŠŸèƒ½ï¼Œç„¶ååœ¨ä¸‹é¢çš„APP Serviceä¸­å‹¾é€‰Push Notificationä¸€é¡¹
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushAPPID2.png&#34; alt=&#34;å¡«å†™BundleIDä»¥åŠApp ID Description&#34; /&gt;
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushAPPID3.png&#34; alt=&#34;é€‰æ‹©App Service&#34; /&gt;
ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œç„¶åç¡®è®¤æäº¤å³å¯ï¼Œå¤§å®¶æ³¨æ„åˆ°Push Notificationä¸€é¡¹ä¸ºConfigurableï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸ºè¯¥AppIDç”Ÿæˆæ¨é€è¯ä¹¦ï¼Œç­‰æ¨é€è¯ä¹¦ç”Ÿæˆå®Œæ¯•ä¹‹åå¯ä»¥å†å›æ¥æŸ¥çœ‹è¯¥AppID çš„çŠ¶æ€ã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦13.jpg&#34; alt=&#34;ç¡®è®¤æäº¤App ID&#34; /&gt;&lt;/p&gt;

&lt;h5 id=&#34;certificates&#34;&gt;Certificates&lt;/h5&gt;

&lt;p&gt;å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆå¼€å‘è€…è¯ä¹¦å’Œæ¨é€è¯ä¹¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»å·¦ä¾§Cerificationsåˆ—è¡¨ï¼Œé€‰æ‹©æ·»åŠ è¿›å…¥ä¸‹ä¸€é¡µé¢ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦11.png&#34; alt=&#34;æ·»åŠ è¯ä¹¦&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœæ‚¨çš„é¡µé¢å¦‚å›¾æ‰€ç¤ºä¸ºç°è‰²ä¸å¯é€‰ï¼Œè¯´æ˜æ‚¨å·²ç»æ‹¥æœ‰äº†å¼€å‘è€…è¯ä¹¦ã€‚å°±ä¸éœ€è¦å†æ¬¡ç”Ÿæˆäº†ï¼Œå¦‚æœå¯é€‰å°±é€‰æ‹©è¯¥é€‰é¡¹ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦7.png&#34; alt=&#34;é€‰æ‹©è¯ä¹¦ç±»å‹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥è¿›å…¥ä»¥ä¸‹ç•Œé¢ï¼Œé€‰æ‹©ä½ ä¹‹å‰æ·»åŠ çš„AppIDï¼Œä¹‹åç‚¹å‡»Continueå³å¯ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦8.png&#34; alt=&#34;é€‰æ‹©éœ€è¦ç»‘å®šè¯ä¹¦çš„App ID&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åé€‰æ‹©ä¹‹å‰æˆ‘ä»¬ä¿å­˜åœ¨æœ¬åœ°çš„CSRæ–‡ä»¶CertificateSigningRequest.certSigningRequestï¼Œç‚¹å‡»Generateå°±ç”Ÿæˆäº†å¼€å‘è€…çš„è¯ä¹¦ã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦9.png&#34; alt=&#34;ä¸Šä¼ æœ¬æœºCSRæ–‡ä»¶&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åŒç†æˆ‘ä»¬éœ€è¦ç”Ÿæˆæ¨é€æµ‹è¯•è¯ä¹¦ï¼Œç”Ÿæˆæµç¨‹å’Œå¼€å‘è€…è¯ä¹¦ç±»ä¼¼ï¼Œåªæ˜¯åœ¨è¯ä¹¦ç±»å‹é¡µé¢ï¼Œé€‰æ‹©çš„è¯ä¹¦ç±»å‹æ¢æˆäº†Apple Push Notification service SSLã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦10.png&#34; alt=&#34;é€‰æ‹©ç”Ÿæˆè¯ä¹¦ç±»å‹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å½“æˆ‘ä»¬ç”Ÿæˆå¥½æ¨é€è¯ä¹¦ä¹‹åå†å›å¤´çœ‹æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„AppIdï¼Œèƒ½å¤Ÿçœ‹Push Notificationsä¸€é¡¹å·²ç»ä¸ºEnabledäº†ã€‚å½“ç„¶å‘å¸ƒæ¨é€è¯ä¹¦é…ç½®å®Œæ¯•ä¹‹åï¼ŒDistributionä¸€é¡¹ä¹Ÿæ˜¾ç¤ºä¸ºEnableã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦12.jpg&#34; alt=&#34;å†æ¬¡æŸ¥çœ‹APPID çŠ¶æ€&#34; /&gt;&lt;/p&gt;

&lt;h5 id=&#34;provisioning-profiles&#34;&gt;Provisioning Profiles&lt;/h5&gt;

&lt;p&gt;ç¬¬ä¸‰æ­¥ï¼Œéœ€è¦ç”ŸæˆProvisioning Profilesï¼Œè¯¥æ–‡ä»¶å…¶å®å°±æ˜¯ä»¥ä¸Šçš„è¯ä¹¦ã€AppIdä»¥åŠè®¾å¤‡ä¿¡æ¯çš„æ‰“åŒ…é›†åˆï¼Œæˆ‘ä»¬åªè¦åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ç”Ÿæˆä¸åŒç±»å‹Provisioning Profileså³å¯ï¼Œå®ƒä¼šåœ¨åç»­æ‰“åŒ…ipaæ–‡ä»¶çš„æ—¶å€™è¢«åµŒå…¥å®‰è£…åŒ…å†…ã€‚
é¦–å…ˆæˆ‘ä»¬é€‰æ‹©å·¦ä¾§åˆ—è¡¨ä¸­çš„Provisioning Profilesä¸­çš„Allé€‰é¡¹ï¼Œé€‰æ‹©æ·»åŠ 
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushProvision1.png&#34; alt=&#34;æ·»åŠ Provisioning Profilesæ–‡ä»¶&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹‹åé€‰æ‹©ç”Ÿæˆç±»å‹ï¼Œæˆ‘ä»¬è¿™é‡Œä»¥å¼€å‘ç±»å‹ä¸ºä¾‹ï¼Œä¸‹é¢è¿˜æœ‰å‘å¸ƒçš„ä¸¤ç§ç±»å‹ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushProvision2.png&#34; alt=&#34;é€‰æ‹©ç”ŸæˆPPæ–‡ä»¶ç±»å‹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹‹åç‚¹å‡»Continueï¼Œè¿›å…¥ä¸‹ä¸€é¡µé¢ï¼ŒåŒæ ·é€‰æ‹©æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„å…·æœ‰PushæœåŠ¡çš„AppIdï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushProvision3.png&#34; alt=&#34;é€‰æ‹©ç»‘å®šçš„App ID&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œé€‰æ‹©ä¸Šé¢ç”Ÿæˆçš„å¼€å‘è¯ä¹¦ï¼ˆä¸€ä¸€å¯¹åº”çš„ï¼Œå¦‚æœä½ é€‰æ‹©ç”Ÿæˆçš„æ˜¯å‘å¸ƒProvisioning Profilesï¼Œåˆ™ä¼šå‡ºç°å‘å¸ƒè¯ä¹¦ï¼‰ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushProvision4.png&#34; alt=&#34;é€‰æ‹©ä¹‹å‰ç”Ÿæˆçš„å¯¹åº”è¯ä¹¦&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç´§æ¥ç€ï¼Œæˆ‘ä»¬é€‰æ‹©æˆæƒè®¾å¤‡ï¼Œå³ä½ éœ€è¦è¿›è¡Œå¼€å‘çš„è®¾å¤‡ï¼Œè¯¥è®¾å¤‡å¯ä»¥åœ¨å·¦ä¾§Devicesåˆ—è¡¨ä¸­æ·»åŠ ï¼Œéœ€è¦æä¾›è®¾å¤‡çš„UUIDï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©æ‰€æœ‰è®¾å¤‡ï¼Œç‚¹å‡»Continueï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushProvision5.png&#34; alt=&#34;é€‰æ‹©æˆæƒè®¾å¤‡&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬ç»™Provisioning Profilesæ·»åŠ åç§°ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushProvision6.png&#34; alt=&#34;æ·»åŠ Provisioning Profilesåç§°&#34; /&gt;
ç‚¹å‡»Generateå³ç”Ÿæˆæˆ‘ä»¬æ‰€éœ€è¦çš„Provisioning Profileã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®åŒç†ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆå‘å¸ƒç‰ˆçš„å¼€å‘è€…è¯ä¹¦ï¼Œæ¨é€è¯ä¹¦ä»¥åŠå¯¹åº”çš„Provisioning Profilesã€‚æœ€åçš„æ–‡ä»¶æˆ‘ä»¬éƒ½æ”¾åˆ°åŒä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå…¶ä¸­æˆ‘æŠŠå‘å¸ƒçš„ä¸¤ç§ï¼ˆAd Hoc å’Œ Distributionï¼‰éƒ½ä¸€èµ·æå‡ºæ¥ã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushè¯ä¹¦200.png&#34; alt=&#34;ç”Ÿæˆçš„å„ä¸ªè¯ä¹¦ä»¥åŠProvisioning Profileæ–‡ä»¶&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­Push.p12æ–‡ä»¶åç»­ä¼šæåŠ~&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&#34;å¼€å‘ç¯å¢ƒé…ç½®&#34;&gt;å¼€å‘ç¯å¢ƒé…ç½®&lt;/h4&gt;

&lt;p&gt;æˆ‘ä»¬å°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„å¼€å‘è€…è¯ä¹¦&lt;code&gt;ios_development.cer&lt;/code&gt;ä»¥åŠæ¨é€è¯ä¹¦&lt;code&gt;aps_development.cer&lt;/code&gt;åœ¨æœ€åˆç”ŸæˆCSRæ–‡ä»¶çš„MACæœºä¸Šå®‰è£…ï¼ŒåŒå‡»å³å¯å®‰è£…ï¼ŒåŒæ—¶ä¼šæ‰“å¼€é’¥åŒ™ä¸²é¡µé¢ï¼Œå®‰è£…ä¹‹åæˆ‘ä»¬æ‰¾åˆ°ä¹‹å‰ç”ŸæˆCSRæ–‡ä»¶æ—¶ç”Ÿæˆçš„ä¸“ç”¨å¯†é’¥ï¼Œåç§°å°±æ˜¯æˆ‘ä»¬ä¹‹å‰ç”ŸæˆCSRæ–‡ä»¶æ—¶å¡«å†™çš„ï¼Œé€‰æ‹©è¯¥ä¸“ç”¨å¯†é’¥ï¼ŒåŒæ—¶é€‰ä¸­åˆšåˆšå®‰è£…æˆåŠŸçš„æ¨é€è¯ä¹¦ï¼Œï¼ˆ&lt;strong&gt;å¿…é¡»æ³¨æ„ï¼ŒåŒæ—¶é€‰æ‹©ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸“ç”¨å¯†é’¥ä»¥åŠå®‰è£…æˆåŠŸçš„æ¨é€è¯ä¹¦åŒæ—¶å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶&lt;/strong&gt;ï¼‰å³é”®èœå•å¯¼å‡ºï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode6.png&#34; alt=&#34;å¯¼å‡ºä¸“ç”¨å¯†é’¥å’Œæœ¬åœ°å®‰è£…çš„æ¨é€è¯ä¹¦&#34; /&gt;
å¦‚å›¾æˆ‘ä»¬å‘½åPushï¼Œç‚¹å‡»å­˜å‚¨ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode7.png&#34; alt=&#34;ä¿å­˜åˆ°æœ¬åœ°&#34; /&gt;
æ¥ä¸‹æ¥éœ€è¦ä¸ºè¯ä¹¦æ·»åŠ å¯†ç ï¼Œè¿™ä¸ªå¯†ç æ˜¯éœ€è¦æä¾›ç»™æœåŠ¡å™¨çš„ã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode8.png&#34; alt=&#34;æ·»åŠ è¯ä¹¦å¯†ç &#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åæˆ‘ä»¬éœ€è¦é…ç½®æˆ‘ä»¬æœ¬åœ°çš„å¼€å‘ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯XCodeï¼Œç¬¬ä¸€æ­¥æˆ‘ä»¬ç‚¹å‡»XCodeçš„Preferenceæ‰“å¼€XCodeçš„é¦–é€‰é¡¹èœå•ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode1.png&#34; alt=&#34;æ‰“å¼€Preferenceé€‰é¡¹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨Accounté€‰é¡¹ä¸­æ·»åŠ æˆ‘ä»¬çš„å¼€å‘è€…è´¦æˆ·ï¼Œå¦‚æœä¹‹å‰å·²ç»ç™»å½•å°±ä¼šçœ‹åˆ°è¯¥è´¦æˆ·ä¿¡æ¯ï¼Œç„¶åç‚¹å‡»ä¸‹æ–¹çš„View Detailsï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode5.png&#34; alt=&#34;æŸ¥çœ‹è´¦æˆ·ä¿¡æ¯&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹‹åä¼šæ˜¾ç¤ºè¯¥å¼€å‘è€…è´¦æˆ·çš„è¯ä¹¦å’ŒProvisioning Profilesç­‰ä¿¡æ¯ï¼Œè¯¥ä¿¡æ¯ä¼šå’Œä½ å¼€å‘è€…è´¦å·é‡Œé¢æ˜¾ç¤ºçš„ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´å°±ç‚¹å‡»åˆ·æ–°ï¼Œ
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode3.png&#34; alt=&#34;åˆ·æ–°è´¦æˆ·ä¿¡æ¯&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸ä¹…å°±ä¼šå‡ºç°æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„Provisioning Profilesï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨XCodeä¸­Build Settings -&amp;gt; Code Signingä¸­é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„Provisioning Profilesæ–‡ä»¶å³å¯
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode4.png&#34; alt=&#34;XCodeé€‰æ‹©å¯¹åº”çš„Provisioning Profileæ–‡ä»¶&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶æœ¬åœ°å¼€å‘ç¯å¢ƒå·²ç»é…ç½®å®Œæ¯•ã€‚æ¥ä¸‹æ¥å°±å¼€å§‹Codingï¼ŒCodingï¼ŒCodingã€‚ã€‚ã€‚ã€‚&lt;/p&gt;

&lt;h4 id=&#34;è¿œç«¯æ¨é€é€šçŸ¥çš„ä»£ç å®ç°&#34;&gt;è¿œç«¯æ¨é€é€šçŸ¥çš„ä»£ç å®ç°&lt;/h4&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦æ³¨å†Œæ¨é€é€šçŸ¥æœåŠ¡å¹¶è·å–DeviceTokenï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objc&#34; data-lang=&#34;Objc&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objc&#34; data-lang=&#34;Objc&#34;&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;initPushNotificationWithApp:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIApplication&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// æ³¨å†Œé€šçŸ¥æœåŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIDevice&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;currentDevice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;systemVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;floatValue&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;8.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;registerForRemoteNotificationTypes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIRemoteNotificationTypeBadge&lt;/span&gt;
                                                       &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIRemoteNotificationTypeSound&lt;/span&gt;
                                                       &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIRemoteNotificationTypeAlert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// IOS8.0ä»¥ä¸Šç‰ˆæœ¬çš„æ³¨å†Œæ¨é€æ–¹å¼å’Œä»¥å¾€ä¸åŒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;UIUserNotificationSettings&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;settings&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIUserNotificationSettings&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;settingsForTypes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIRemoteNotificationTypeBadge&lt;/span&gt;
                                                                                           &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIRemoteNotificationTypeSound&lt;/span&gt;
                                                                                           &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UIRemoteNotificationTypeAlert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                                                                                 &lt;span class=&#34;nl&#34;&gt;categories&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;registerUserNotificationSettings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;settings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;registerForRemoteNotifications&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æœæ³¨å†ŒæˆåŠŸï¼ŒAPNsä¼šè¿”å›ç»™ä½ è®¾å¤‡çš„tokenï¼ŒiOSç³»ç»Ÿä¼šæŠŠå®ƒä¼ é€’ç»™app delegateä»£ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å¦‚æœæ³¨å†ŒæˆåŠŸï¼Œåˆ™ä¼šæ”¶åˆ°DeviceTokenï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥Tokenå‘ç»™æœåŠ¡å™¨ä¿å­˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;application:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIApplication&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;didRegisterForRemoteNotificationsWithDeviceToken:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;deviceToken&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;PRINT_FUNC&lt;/span&gt;
    
    &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tokenStr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;%@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;deviceToken: %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tokenStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tokenStr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;Device Token Invalid!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	&lt;span class=&#34;c1&#34;&gt;// ç„¶åæˆ‘ä»¬éœ€è¦å°†è¯¥DeviceTokenå‘ç»™æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨è¿›è¡Œä¿å­˜ï¼›
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;sendDeviceToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deviceToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; 
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å¦‚æœæ³¨å†Œå¤±è´¥ï¼Œä¼šæ”¶åˆ°é”™è¯¯ä¿¡æ¯ï¼ŒåŒ…å«é”™è¯¯åŸå› 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;application:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIApplication&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;didFailToRegisterForRemoteNotificationsWithError:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSError&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;PRINT_FUNC&lt;/span&gt;
    
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;***************************************&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;Failed to Register The Notification!!!!&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;error = %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;***************************************&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¹‹åæˆ‘ä»¬å°±å¯ä»¥åœ¨AppDelegateä¸­æ·»åŠ å¤„ç†ä»£ç ï¼Œå½“ç”¨æˆ·ç‚¹å‡»é€šçŸ¥æ çš„é€šçŸ¥æˆ–è€…å¤„äºè¿è¡ŒçŠ¶æ€æ—¶ï¼ŒAppä»£ç ä¼šæ‰§è¡Œ- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfoä»£ç†æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;application:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIApplication&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;didReceiveRemoteNotification:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSDictionary&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;userInfo&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;PRINT_FUNC&lt;/span&gt;
    
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;æ”¶åˆ°æ¨é€é€šçŸ¥: %@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;userInfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// userInfoæ˜¯ä¸€ä¸ªå­—å…¸æ•°æ®ç±»å‹ï¼Œå…·ä½“Key Valueç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›è¡Œåå•†ç¡®å®š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;NSString&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;orderId&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userInfo&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;objectForKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;carryOrderId&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;NSLog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;@&amp;#34;æ”¶åˆ°è®¢å•æ¶ˆæ¯é€šçŸ¥ï¼Œè®¢å•å·ï¼š%@&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;orderId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	
	&lt;span class=&#34;c1&#34;&gt;// .... å…¶ä½™é€»è¾‘ï¼Œæ‹¿åˆ°å…·ä½“å…³é”®ä¿¡æ¯ä¹‹åè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Objective-C&#34; data-lang=&#34;Objective-C&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*! This delegate method offers an opportunity for applications with the &amp;#34;remote-notification&amp;#34; background mode to fetch appropriate new data in response to an incoming remote notification. You should call the fetchCompletionHandler as soon as you&amp;#39;re finished performing that operation, so the system can accurately estimate its power and data cost.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; 
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; This method will be invoked even if the application was launched or resumed because of the remote notification. The respective delegate methods will be invoked first. Note that this behavior is in contrast to application:didReceiveRemoteNotification:, which is not called in those cases, and which will not be invoked if this method is implemented. !*/&lt;/span&gt;
 
&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;application:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIApplication&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;application&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;didReceiveRemoteNotification:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NSDictionary&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;userInfo&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fetchCompletionHandler:&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;^&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIBackgroundFetchResult&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;completionHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘å‘ç°è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨APPå¤„äºåå°æˆ–è€…å‰å°å±•ç¤ºï¼Œä¹Ÿå°±æ˜¯Appå­˜æ´»æœŸä¼šåŒæ ·è°ƒç”¨ï¼Œä½†å½“APPå¹¶æœªå¯åŠ¨æˆ–è€…è¢«åå°é”€æ¯ä¹‹åï¼Œç”¨æˆ·ç‚¹å‡»é€šçŸ¥è±¡è™½ç„¶éƒ½ä¼šè°ƒèµ·Appï¼Œä½†æ˜¯å‰è€…è¿™ä¸ªæ–¹æ³•å°±ä¸ä¼šè¢«è§¦å‘ï¼Œè€Œåè€…ä¾ç„¶ä¼šè¢«è§¦å‘ã€‚æ³¨é‡Šä¸­ä¹Ÿè¯´æ˜äº†è¯¥æ–¹æ³•å³ä½¿åœ¨å…¶ä¸­æˆ–è€…ä¼‘çœ çŠ¶æ€ä¸‹éƒ½ä¼šç”±äºè¿œç«¯é€šçŸ¥è€Œè¢«è°ƒç”¨è€Œä¸”ä¼šä¼˜å…ˆäºä¸Šä¸€ä¸ªæ–¹æ³•ã€‚è€Œä¸”åè€…å¯ä»¥è®©ä½ å’ŒæœåŠ¡å™¨è¿›è¡Œä¸€å®šçš„æ•°æ®äº¤äº’ï¼Œæ¯”å¦‚è®¢å•çŠ¶æ€å˜åŒ–äº†ï¼Œæˆ‘ä»¬åœ¨è¯¥æ–¹æ³•ä¸­å‘æœåŠ¡å™¨è¯·æ±‚æœ€æ–°çš„è®¢å•ä¿¡æ¯ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·æè¿°è¿™ä¸¤ä¸ªæ–¹æ³•çš„ï¼Œä¸€ç›®äº†ç„¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;// Tells the delegate that the running app received a remote notification.
	- application:didReceiveRemoteNotification:

// Tells the app that a remote notification arrived that indicates there is data to be fetched.
	- application:didReceiveRemoteNotification:fetchCompletionHandler:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr /&gt;

&lt;p&gt;####æœåŠ¡å™¨ç«¯ä»£ç å®ç°&lt;/p&gt;

&lt;p&gt;Appleå®˜æ–¹APNsåœ°å€ï¼š
1. æµ‹è¯•åœ°å€ gateway.sandbox.push.apple.com:2195
2. æ­£å¼å‘å¸ƒåœ°å€ gateway.push.apple.com:2195&lt;/p&gt;

&lt;p&gt;ç®€å•çš„é€šçŸ¥æ•°æ®æ ¼å¼ï¼Œä»¥äºŒè¿›åˆ¶å½¢å¼å‘é€ï¼Œç½‘ç»œå­—èŠ‚åºã€‚
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushSimple%20Notification%20Format.png&#34; alt=&#34;ç®€å•çš„æ¨é€é€šçŸ¥æ ¼å¼&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœåŠ¡å™¨ç«¯ä»£ç ä¹Ÿå¯ä»¥è‡ªå·±ä½¿ç”¨åŸç”Ÿçš„Socketå†™ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨Javapnsè¿™ä¸ªå¼€æºä»£ç å®ç°ï¼Œæ¯”è¾ƒç®€å•ï¼ŒPayloadæ•°æ®æ ¼å¼ä¹Ÿå·²ç»è¢«å°è£…ï¼Œä½ åªéœ€è¦addï¼Œaddï¼Œaddã€‚ä»£ç å¦‚ä¸‹ï¼š
å…¶ä¸­å°±éœ€è¦ç”¨åˆ°æˆ‘ä»¬ä¹‹å‰ç”Ÿæˆçš„Push.p12&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;testApplePush&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;java.util.List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;javapns.Push&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;javapns.notification.PushNotificationPayload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;javapns.notification.PushedNotifications&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;testApplePush&lt;/span&gt; 
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; 
       &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;PushNotificationPayload&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PushNotificationPayload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;

          &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;addAlert&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è¿™æ˜¯ä¸€æ¡æ¨é€é€šçŸ¥!&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// é€šçŸ¥ä¸»ä½“å†…å®¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;addBadge&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// è§’æ ‡æ•°å­—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;addSound&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// é€šçŸ¥é“ƒéŸ³
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          
          &lt;span class=&#34;c1&#34;&gt;// åŠ å…¥è‡ªå®šä¹‰ä¿¡æ¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;addCustomDictionary&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;carryOrderId&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;121212121212121212121212&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
 
		    &lt;span class=&#34;c1&#34;&gt;// æœåŠ¡å™¨ç«¯è®°å½•çš„DeviceToken
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceToken&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;************************************************&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;PushedNotifications&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;notifications&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Push&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; 	&lt;span class=&#34;c1&#34;&gt;// è‡ªå®šä¹‰payload
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;												          &lt;span class=&#34;s&#34;&gt;&amp;#34;Push.p12&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// å‰é¢ç”Ÿæˆçš„è¯ä¹¦
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;												          &lt;span class=&#34;s&#34;&gt;&amp;#34;111111111&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; 	&lt;span class=&#34;c1&#34;&gt;// è¯ä¹¦å¯¼å‡ºæ—¶çš„å¯†ç 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;												          &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;		&lt;span class=&#34;c1&#34;&gt;// æ˜¯å¦å‘é€åˆ°å‘å¸ƒåœ°å€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;												          &lt;span class=&#34;n&#34;&gt;deviceToken&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// å®¢æˆ·ç«¯DeviceToken
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numOfFailedNotifications&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;notifications&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getFailedNotifications&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numOfSuccessfulNotificatios&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;notifications&lt;/span&gt;
                    &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getSuccessfulNotifications&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;
                    &lt;span class=&#34;s&#34;&gt;&amp;#34;Successful Send: %d, Failed Send: %d&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;numOfSuccessfulNotificatios&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numOfFailedNotifications&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;

        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; 
        &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;printStackTrace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“å‰è¿™é‡Œåªæ˜¯å‘é€ä¸€æ¡ï¼Œå¦‚æœéœ€è¦æ‰¹é‡å‘é€ï¼Œè²Œä¼¼Javapnsæ”¯æŒçš„ä¸æ˜¯å¤ªå¥½ã€‚è¿™é‡Œä½¿ç”¨çš„è¯ä¹¦å°±æ˜¯ä¸Šé¢æˆ‘ä»¬å¯¼å‡ºçš„.p12æ ¼å¼è¯ä¹¦ï¼ˆ&lt;strong&gt;Windowså¹³å°ä½¿ç”¨æ²¡é—®é¢˜ã€‚æœ‰äº›æ•™ç¨‹è¯´æ˜¯Winç³»ç»Ÿä¸è¯†åˆ«æ˜¯ä¸æ­£ç¡®çš„&lt;/strong&gt;ï¼‰ï¼Œæ¥ä¸‹æ¥è¿˜æœ‰ä¸€ä»½PHPå†™çš„ä»£ç ï¼Œä¾›å¤§å®¶æŸ¥é˜…ã€‚ä½†æ˜¯è¿™å…¶ä¸­éœ€è¦å°†æˆ‘ä»¬çš„p12æ ¼å¼è¯ä¹¦è½¬æ¢æˆpemæ ¼å¼è¯ä¹¦ã€‚å…·ä½“æ•™ç¨‹å¦‚ä¸‹ï¼š
-  å°†æˆ‘ä»¬ä¹‹å‰ç”Ÿæˆçš„æ¨é€è¯ä¹¦aps_developement.ceræ–‡ä»¶ä»¥åŠPush.p12æ–‡ä»¶æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹ï¼›
-  åœ¨Terminalä¸­åˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤å°†aps_developement.ceræ–‡ä»¶è½¬æ¢æˆpemæ ¼å¼æ–‡ä»¶ï¼Œä¹‹åä¼šåœ¨æœ¬ç›®å½•ä¸‹ç”ŸæˆPushCert.pemæ–‡ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;openssl x509 -in aps_development.cer -inform der -out PushCert.pem&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ç´§æ¥ç€æ‰§è¡Œå‘½ä»¤å°†Push.p12æ–‡ä»¶è½¬æ¢æˆpemæ ¼å¼æ–‡ä»¶ï¼Œä¹‹ååœ¨æœ¬ç›®å½•ä¸‹ç”ŸæˆPushKey.pemæ–‡ä»¶ï¼Œå…¶ä¸­ä¼šæç¤ºä½ å…ˆè¾“å…¥ä¹‹å‰ç”ŸæˆPush.p12æ–‡ä»¶çš„æ—¶å€™çš„å¯†ç ï¼Œç„¶åéœ€è¦ä¸ºæ–°ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶æ·»åŠ å¯†ç ï¼Œè¿™ä¸ªå¯†ç æ˜¯è¦æä¾›ç»™æœåŠ¡ç«¯ä½¿ç”¨çš„ï¼›&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;openssl pkcs12 -nocerts -out Pushkey.pem -in Push.p12 &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç„¶åå°†è¿™ä¸¤ä¸ªpemæ–‡ä»¶åˆæˆæˆä¸€ä¸ªpemæ–‡ä»¶ï¼ŒPush.pem&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;cat PushCert.pem PushKey.pem &amp;gt; Push.pem&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushXCode9.png&#34; alt=&#34;pemæ–‡ä»¶ç”Ÿæˆè¿‡ç¨‹&#34; /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¯ä¹¦ç”Ÿæˆå®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨äº†ã€‚
å¦‚ä¸‹ä¸ºPHPå†™çš„æ¨é€é€šçŸ¥æœåŠ¡ã€‚ä»£ç å¾ˆç®€å•ï¼Œä¸»è¦æ˜¯æ³¨æ„å…¶ä¸­è¯ä¹¦ä¸ºä¸Šä¸€æ­¥ç”Ÿæˆçš„Push.pemï¼Œå¯†ç å°±æ˜¯ç”Ÿæˆæ—¶è¾“å…¥çš„å¯†ç ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// DeviceToken ä¸åŒ…å«ç©ºæ ¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$deviceToken&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;********************************************************&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// è¯ä¹¦å¯†ç 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$passphrase&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;1111111111&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// é€šçŸ¥ä¸»ä½“å†…å®¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$alert&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;è¿™æ˜¯ä¸€æ¡æ¨é€é€šçŸ¥!&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;////////////////////////////////////////////////////////////////////////////////
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ctx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stream_context_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;stream_context_set_option&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ssl&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;local_cert&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Push.pem&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;		&lt;span class=&#34;c1&#34;&gt;// ck.pemè¯ä¹¦ä¸Šæœ‰æåŠ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stream_context_set_option&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ssl&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;passphrase&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$passphrase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Open a connection to the APNS server
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$fp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stream_socket_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
		&lt;span class=&#34;s1&#34;&gt;&amp;#39;ssl://gateway.sandbox.push.apple.com:2195&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 			&lt;span class=&#34;c1&#34;&gt;// è¿œç«¯æµ‹è¯•åœ°å€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nv&#34;&gt;$err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;													
		&lt;span class=&#34;nv&#34;&gt;$errstr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
		&lt;span class=&#34;mi&#34;&gt;60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 													&lt;span class=&#34;c1&#34;&gt;// è¶…æ—¶æ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;STREAM_CLIENT_CONNECT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;STREAM_CLIENT_PERSISTENT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nv&#34;&gt;$ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$fp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Failed to connect: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$err&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$errstr&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PHP_EOL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Connected to APNS&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PHP_EOL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å»ºç«‹å­—å…¸æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;aps&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s1&#34;&gt;&amp;#39;alert&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$alert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;s1&#34;&gt;&amp;#39;sound&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;s1&#34;&gt;&amp;#39;badge&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;66&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å°†å­—å…¸æ•°æ®è½¬æ¢æˆJSON
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$payload&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;json_encode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// ç»„ç»‡äºŒè¿›åˆ¶æ•°æ®æ ¼å¼ï¼Œå…·ä½“æ ¼å¼å‚ç…§appleå®˜æ–¹æ–‡æ¡£ï¼Œæœ¬æ–‡ä¸­ä¹Ÿæœ‰æåŠã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Command + Token length + deviceToken + Payload length + payload
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$msg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;chr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;H*&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$deviceToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// å‘é€ç»„æˆçš„æ•°æ®ç»™APNs
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fwrite&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$fp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$msg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Fail to delivery Notification&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PHP_EOL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Delivery Notification successfully&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PHP_EOL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;fclose&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$fp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿è¡Œä¸‹ä¸‹æµ‹è¯•ï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/iosPushResult.png&#34; alt=&#34;æœ€ç»ˆæµ‹è¯•æ•ˆæœ&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å‚è€ƒï¼š
[1]. &lt;a href=&#34;https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1&#34;&gt;https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1&lt;/a&gt;
[2]. &lt;a href=&#34;https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/&#34;&gt;https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/&lt;/a&gt;
[3]. &lt;a href=&#34;http://blog.csdn.net/shenjie12345678/article/details/41120637&#34;&gt;http://blog.csdn.net/shenjie12345678/article/details/41120637&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äºå•é“¾è¡¨çš„é‚£äº›äº‹å„¿</title>
      <link>https://hechen.xyz/post/%E5%85%B3%E4%BA%8E%E5%8D%95%E9%93%BE%E8%A1%A8%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/</link>
      <pubDate>Thu, 07 May 2015 13:59:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/%E5%85%B3%E4%BA%8E%E5%8D%95%E9%93%BE%E8%A1%A8%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/</guid>
      
        <description>

&lt;p&gt;å…³äºæœ‰ç¯å•é“¾è¡¨ï¼Œå³å•é“¾è¡¨ä¸­å­˜åœ¨ç¯è·¯ï¼Œè¯¥é—®é¢˜è¡ç”Ÿå‡ºå¾ˆå¤šé¢è¯•é¢˜ï¼Œç‰¹åœ¨æ­¤æ±‡æ€»ï¼Œæ–¹ä¾¿æŸ¥é˜…ä¹Ÿå¸®åŠ©è‡ªå·±æ¢³ç†ä¸‹æ€è·¯ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;å¦‚ä¸‹å›¾1æ‰€ç¤ºä¸ºæœ‰ç¯å•é“¾è¡¨ï¼Œå‡è®¾å¤´ç»“ç‚¹ä¸ºHï¼Œ ç¯çš„å…¥å£ç‚¹ä¸ºAã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/%E6%9C%89%E7%8E%AF%E5%8D%95%E9%93%BE%E8%A1%A8_1.jpg&#34; alt=&#34;æœ‰ç¯å•é“¾è¡¨ç¤ºä¾‹&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;å…³äºæœ‰ç¯å•é“¾è¡¨ç›¸å…³çš„é—®é¢˜&#34;&gt;å…³äºæœ‰ç¯å•é“¾è¡¨ç›¸å…³çš„é—®é¢˜ï¼š&lt;/h1&gt;

&lt;ol&gt;
&lt;li&gt;è¯¥å•é“¾è¡¨ä¸­æ˜¯å¦çœŸæœ‰ç¯å­˜åœ¨ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚ä½•æ±‚å‡ºç¯çŠ¶çš„å…¥å£ç‚¹ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚ä½•æ±‚å‡ºç¯çŠ¶çš„é•¿åº¦ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æ±‚è§£æ•´æ¡é“¾è¡¨çš„é•¿åº¦ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«é’ˆå¯¹è¿™å‡ ä¸ªé—®é¢˜è¿›è¡Œåˆ†æå’Œè§£ç­”ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åˆ¤æ–­ä¸€ä¸ªå•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯&#34;&gt;åˆ¤æ–­ä¸€ä¸ªå•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯&lt;/h2&gt;

&lt;p&gt;ã€€ã€€é¦–å…ˆï¼Œå…³äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•ç¡®å®šä¸€æ¡é“¾è¡¨ä¸­ç¡®å®å­˜åœ¨ç¯ï¼Œå…³äºç¯çŠ¶çš„æ£€æµ‹ä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼Œé“¾è¡¨ç¯çŠ¶æ£€æµ‹ä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼šå¤–éƒ¨è®°å½•æ³•ï¼Œå†…éƒ¨è®°å½•æ³•ä»¥åŠè¿½èµ¶æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€å†…éƒ¨æ ‡è®°æ³•å’Œå¤–éƒ¨æ ‡è®°æ³•å…¶å®æ˜¯ä¸€ä¸ªé“ç†ï¼Œä¸è¿‡å°±æ˜¯è¾…åŠ©å˜é‡ä¸€ä¸ªæ˜¯åœ¨é“¾è¡¨èŠ‚ç‚¹å†…ï¼Œä¸€ä¸ªæ˜¯å€ŸåŠ©è¾…åŠ©æ•°ç»„æˆ–è€…hashæˆ–è€…AVLï¼Œçº¢é»‘æ ‘ç­‰ æŠŠå·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹åœ°å€å­˜èµ·æ¥ï¼Œæ¯æ¬¡è®¿é—®ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™è¿›è¡ŒæŸ¥è¯¢çœ‹æ˜¯å¦å·²ç»å‡ºç°è¿‡ã€‚è¿™é‡Œä¸å†èµ˜è¿°ã€‚ä¸»è¦çœ‹è¿½èµ¶æ³•ï¼Œä¹Ÿç§°å¿«æ»¡æŒ‡é’ˆæ³•ï¼Œè€Œè¿½èµ¶æ³•å¤§å®¶ä¸€å®šéƒ½å·²ç»çƒ‚ç†Ÿäºå¿ƒäº†ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€è¿½èµ¶æ³•ä¸»è¦åˆ©ç”¨æœ€å¤§å…¬å€æ•°åŸç†ï¼Œç”¨2ä¸ªæ¸¸æ ‡ï¼Œå¯¹é“¾è¡¨è¿›è¡Œè®¿é—®ï¼Œä¾‹å¦‚:pSlowï¼Œ pFastã€‚ pSlowè®¿é—®æ¯æ­¥å‘å‰è¿›1ä¸ªèŠ‚ç‚¹ï¼Œè€ŒpFaståˆ™æ¯æ¬¡å‘å‰å‰è¿›2ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæœ‰ç¯åˆ™pSlowå’ŒpFastå¿…ä¼šç›¸é‡ï¼Œå¦‚æœpFastæœ€ç»ˆæŒ‡å‘äº†NULLï¼Œåˆ™è¯´æ˜è¯¥é“¾è¡¨ä¸å­˜åœ¨ç¯è·¯ã€‚å› ä¸ºä¸¤ä¸ªæŒ‡é’ˆæ­¥å­è¿ˆçš„ä¸ä¸€æ ·ï¼Œå› ä¸ºè¢«ç§°ä½œå¿«æ…¢æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// Definition for singly - linked list.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

	&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;isLoopList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	
	        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;ç¡®å®šè¯¥æœ‰ç¯å•é“¾è¡¨çš„ç¯çš„å…¥å£&#34;&gt;ç¡®å®šè¯¥æœ‰ç¯å•é“¾è¡¨çš„ç¯çš„å…¥å£&lt;/h2&gt;

&lt;p&gt;ã€€ã€€å…³äºè¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è¯æ˜å½“pSlowå’ŒpFastç¬¬ä¸€æ¬¡ç›¸é‡çš„æ—¶å€™ï¼ŒpSlowå¹¶æœªèµ°å®Œæ•´ä¸ªé“¾è¡¨æˆ–è€…æ°å¥½åˆ°è¾¾ç¯å…¥å£ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/%E6%9C%89%E7%8E%AF%E5%8D%95%E9%93%BE%E8%A1%A8_2.jpg&#34; alt=&#34;æœ‰ç¯å•é“¾è¡¨&#34; /&gt;&lt;/p&gt;

&lt;p&gt;çœ‹ä¸Šå›¾ï¼ˆç”»çš„æ¯”è¾ƒç²—ç³™ï¼‰ï¼Œå‡è®¾ pSlow åˆ°è¾¾ç¯çŠ¶å…¥å£ç‚¹Açš„æ—¶å€™ï¼ŒpFaståœ¨ç¯ä¸ŠæŸä¸€ç‚¹Bï¼Œå‡è®¾Bé€†æ—¶é’ˆæ–¹å‘ç¦» A ç‚¹è·ç¦»ä¸º y ï¼Œå¹¶ä¸”æ•´ä¸ªç¯çŠ¶çš„é•¿åº¦ä¸ºRï¼Œæˆ‘ä»¬çŸ¥é“y &amp;lt;= Rã€‚ä»Aç‚¹å¼€å§‹ï¼ŒpSlowå‘å‰èµ°yæ­¥ï¼Œæ­¤æ—¶pFastä»ç‚¹Bå¾€å‰åˆ™èµ° 2 * y æ­¥ å¹¶ä¸ pSlow ç›¸é‡äºç‚¹ Dï¼Œæ­¤æ—¶pSlowè¿˜éœ€R - y æ‰èƒ½åˆ°è¾¾é“¾è¡¨å°¾ç«¯ï¼Œä¹Ÿå³Aç‚¹ã€‚å› ä¸ºy &amp;lt;= Rï¼Œå› æ­¤R - y &amp;gt;= 0ã€‚å¾—è¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/%E6%9C%89%E7%8E%AF%E5%8D%95%E9%93%BE%E8%A1%A8_3.jpg&#34; alt=&#34;æœ‰ç¯å•é“¾è¡¨&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€æ­¤æ—¶æˆ‘ä»¬å‡è®¾ç›¸é‡çš„æ—¶å€™pSlowèµ°äº†sæ­¥ï¼Œé‚£pFastèµ°2 * sæ­¥ï¼Œè€ŒpFastå¤šèµ°çš„è‚¯å®šæ˜¯åœ¨ç¯å†…ç»•åœˆï¼Œå¾ˆè‡ªç„¶æˆ‘ä»¬æœ‰&lt;/p&gt;

&lt;p&gt;ã€€ã€€2 * s = s + n * R ;   (n &amp;gt;= 1)&lt;/p&gt;

&lt;p&gt;ã€€ã€€æœ‰ï¼š s = n * R (n &amp;gt;= 1).&lt;/p&gt;

&lt;p&gt;ã€€ã€€è®¾æ•´ä¸ªé“¾è¡¨çš„é•¿åº¦ä¸ºLï¼Œ HAçš„é•¿åº¦ä¸ºa ï¼Œç¬¬ä¸€æ¬¡ç›¸é‡ç‚¹Bä¸Açš„è·ç¦»ä¸ºxï¼Œåˆ™æœ‰&lt;/p&gt;

&lt;p&gt;ã€€ã€€a + x = s = n * R;&lt;/p&gt;

&lt;p&gt;ã€€ã€€a + x = (n - 1 + 1 ) * R = (n - 1) * R + R =  (n - 1) * R + L - a;&lt;/p&gt;

&lt;p&gt;ã€€ã€€æœ‰ a = (n - 1) * R + (L - a - x);ã€€ã€€æœ‰å‰é¢æˆ‘ä»¬è¯æ˜çŸ¥ï¼ŒL - a - x ä¸ºæˆ‘ä»¬æ‰€è®¾å˜é‡yã€‚ å› æ­¤a = (n - 1) * R + y; (n &amp;gt;= 1).&lt;/p&gt;

&lt;p&gt;ã€€ã€€è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·ï¼Œç›¸é‡ç‚¹è®¾ç½®ä¸€ä¸ªæŒ‡é’ˆï¼Œé“¾è¡¨å¤´éƒ¨è®¾ç½®ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶æŒ‰ç…§ä¸€æ­¥ä¸€ä¸ªèŠ‚ç‚¹å‰è¿›ï¼Œç¬¬ä¸€æ¬¡ç›¸é‡çš„æ—¶å€™å¿…å®šæ˜¯ç›¸é‡ç‚¹æŒ‡é’ˆèµ°y + (n - 1)*Rçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯å…¥å£ç‚¹Açš„ä½ç½®ã€‚å¾—è¯ï¼Œå› æ­¤è·å–å…¥å£ç‚¹çš„å®ç°å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;loopJoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// æ­¤æ—¶è°ƒæ•´ä¸¤ä¸ªæŒ‡é’ˆä¸ºæ™®é€šæŒ‡é’ˆï¼Œä¸€æ¬¡ä¸€æ­¥ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªæŒ‡é’ˆä»å¤´éƒ¨å¼€å§‹ï¼Œç¬¬ä¸€æ¬¡ç›¸é‡ç‚¹ä¸€å®šæ˜¯ç¯çš„å…¥å£ç‚¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;æ±‚å‡ºè¯¥æœ‰ç¯å•é“¾è¡¨ä¸­ç¯çš„é•¿åº¦&#34;&gt;æ±‚å‡ºè¯¥æœ‰ç¯å•é“¾è¡¨ä¸­ç¯çš„é•¿åº¦&lt;/h2&gt;

&lt;p&gt;æœ‰äº†ä»¥ä¸Šçš„åŸºç¡€ï¼Œç¯çŠ¶çš„é•¿åº¦å°±å¾ˆæ˜æ˜¾äº†ï¼Œå…¥å£ç‚¹å·²çŸ¥ï¼Œæ²¿ç€ç¯çŠ¶èµ°ä¸€åœˆå³å¾—ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ±‚å‡ºè¯¥æœ‰ç¯å•é“¾è¡¨é•¿åº¦&#34;&gt;æ±‚å‡ºè¯¥æœ‰ç¯å•é“¾è¡¨é•¿åº¦&lt;/h2&gt;

&lt;p&gt;åŒç†ï¼Œå½“Rå·²çŸ¥ï¼Œè€Œé—®é¢˜2ä¸­å…¶ä¸­æŒ‡å‘å¤´éƒ¨çš„æŒ‡é’ˆåˆ°è¾¾ç¯çŠ¶å…¥å£ç‚¹çš„æ—¶å€™HAå·²çŸ¥ï¼Œå› æ­¤å•é“¾è¡¨çš„é•¿åº¦ç­‰äº L =  R + a;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>[002] Reverse Words in a String</title>
      <link>https://hechen.xyz/post/leetcode-002-reverse-words-in-a-string/</link>
      <pubDate>Fri, 01 May 2015 09:29:09 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/leetcode-002-reverse-words-in-a-string/</guid>
      
        <description>

&lt;h3 id=&#34;é¢˜ç›®-reverse-words-in-a-string&#34;&gt;é¢˜ç›®ï¼šReverse Words in a String&lt;/h3&gt;

&lt;p&gt;Given an input string s, reverse the string word by word.
For example, given s = &amp;ldquo;the sky is blue&amp;rdquo;, return &amp;ldquo;blue is sky the&amp;rdquo;.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;é¢˜æ„&#34;&gt;é¢˜æ„ï¼š&lt;/h3&gt;

&lt;p&gt;é¢˜æ„å¾ˆæ˜ç¡®ï¼Œå°†å­—ç¬¦ä¸²ä¸­çš„å•è¯è¿›è¡Œç¿»è½¬ï¼Œå½¢æˆæ–°çš„å­—ç¬¦ä¸²ã€‚ä½†æ˜¯è¿™å…¶ä¸­æœ‰å‡ ä¸ªé—®é¢˜æˆ‘ä»¬éœ€è¦æ€è€ƒï¼ˆå‚è€ƒleetCodeå®˜æ–¹CleanCodeBookï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;Q: What constitutes a word?
A: A sequence of non-space characters constitutes a word.&lt;/p&gt;

&lt;p&gt;Q: Does tab or newline character count as space characters?
A: Assume the input does not contain any tabs or newline characters.&lt;/p&gt;

&lt;p&gt;Q: Could the input string contain leading or trailing spaces?
A: Yes. However, your reversed string should not contain leading or trailing spaces.&lt;/p&gt;

&lt;p&gt;Q: How about multiple spaces between two words?
A: Reduce them to a single space in the reversed string.&lt;/p&gt;

&lt;h4 id=&#34;è§£æ³•&#34;&gt;è§£æ³•ï¼š&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
	&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reverseWords&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;		
	    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reversed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
		&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

		&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
				&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reversed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reversed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				&lt;span class=&#34;n&#34;&gt;reversed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;substr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reversed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCodeçš„OJç³»ç»Ÿè¯„åˆ¤ç»“æœï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode_ReverseWordsInAString_C++.png&#34; alt=&#34;leetCode C++  Solution3&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>[003] Two Sum</title>
      <link>https://hechen.xyz/post/leetcode-003-two-sum/</link>
      <pubDate>Wed, 29 Apr 2015 13:15:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/leetcode-003-two-sum/</guid>
      
        <description>

&lt;p&gt;æœ¬æ–‡ä¸»è¦åŒ…æ‹¬leetCodeé¢˜é›†é‡Œçš„ä¸¤ä¸ªé¢˜ç›®ï¼ŒTwo Sum1 å’Œ Two Sum2&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;é¢˜ç›®1-two-sum-1&#34;&gt;é¢˜ç›®1ï¼š Two Sum 1&lt;/h3&gt;

&lt;p&gt;Given an array of integers, find two numbers such that they add up to a specific target number.&lt;/p&gt;

&lt;p&gt;The function twoSum should return indices of the two numbers such that they add up to the target,
where index1 must be less than index2. Please note that your returned answers (both index1 and index2) are not zero-based.&lt;/p&gt;

&lt;p&gt;You may assume that each input would have exactly one solution.&lt;/p&gt;

&lt;p&gt;ã€€ã€€ã€€ã€€Input: numbers={2, 7, 11, 15}, target=9
ã€€ã€€ã€€ã€€Output: index1=1, index2=2&lt;/p&gt;

&lt;h4 id=&#34;é¢˜æ„&#34;&gt;é¢˜æ„ï¼š&lt;/h4&gt;

&lt;p&gt;é¢˜ç›®ä¸­è¦æ±‚è¾“å…¥ä¸€ä¸ªæ•´å½¢æ•°ç»„ä»¥åŠä¸€ä¸ªtargetï¼Œæ‰¾å‡ºè¯¥æ•´å‹æ•°ç»„ä¸­è¿™æ ·ä¸¤ä¸ªå…ƒç´ ï¼Œä½¿å¾—è¿™ä¸¤ä¸ªå…ƒç´ ä¹‹å’Œç­‰äºæŒ‡å®štargetçš„å€¼ã€‚ é¢˜ç›®ä¸­å‡è®¾è¯¥ä¸¤ä¸ªå…ƒç´ å¿…ç„¶å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯åªæœ‰ä¸€ç»„ï¼ˆæ‰€ä»¥ç›¸å¯¹ç®€å•ï¼‰ï¼Œè¿”å›çš„æ˜¯è¿™ä¸¤ä¸ªå…ƒç´ çš„indexå€¼ï¼ˆæ•°ç»„Indexä»1å¼€å§‹ï¼‰ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å…³é”®ç‚¹&#34;&gt;å…³é”®ç‚¹ï¼š&lt;/h4&gt;

&lt;p&gt;æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ç©ºé—´æ¢å–æ—¶é—´çš„æ–¹æ³•æ¥è·å–è¾ƒå°çš„æ—¶é—´å¤æ‚åº¦ã€‚å› æ­¤å¢åŠ å¿…è¦çš„æ•°æ®ç»“æ„æ¥å‡å°‘æ—¶é—´å¤æ‚åº¦ã€‚è¿™é“é¢˜ç›®ä¸€æ ·ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªmapç»“æ„ï¼Œkeyä¸ºæ•°ç»„å…ƒç´ å€¼ï¼Œvalueä¸ºå…¶åœ¨æ•°ç»„ä¸­å¯¹åº”çš„indexã€‚æ¯æ¬¡éå†åˆ°æ•°ç»„å…ƒç´ ä¾¿å»mapç»“æ„ä¸­æŸ¥æ‰¾å¯¹åº”çš„è¡¥æ•°ï¼Œå¦‚æœå­˜åœ¨ï¼Œé‚£å°±è¯´æ˜æ‰¾åˆ°äº†ã€‚å¦‚æœæ²¡å­˜åœ¨å°±è®°å½•å½“å‰å…ƒç´ ä»¥åŠå…¶indexï¼Œç›´åˆ°ç»“æŸã€‚&lt;/p&gt;

&lt;p&gt;ä»£ç å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt; 
&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
	     &lt;span class=&#34;c1&#34;&gt;// O(n) runtime, O(n) space
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	     &lt;span class=&#34;c1&#34;&gt;// We could reduce the runtime complexity of looking up a value to O(1) using a hash map that maps a value to its index.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;twoSum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])){&lt;/span&gt;
	                &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nIndex&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]];&lt;/span&gt;
	                &lt;span class=&#34;c1&#34;&gt;// å½“å‰å­˜å‚¨çš„Indexè‚¯å®šæ¯”iè¦å°ï¼Œæ³¨æ„è¦æ’é™¤i
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nIndex&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                    &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nIndex&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	                    &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	                    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;mapIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// twoSum
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCodeçš„OJç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode003C++.png&#34; alt=&#34;leetCode Two Sum 1 C++&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ¬åœ°è¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode003Run1.jpg&#34; alt=&#34;leetCode Two Sum 1 C++  Run&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;é¢˜ç›®2-two-sum-2&#34;&gt;é¢˜ç›®2ï¼šTwo Sum 2&lt;/h3&gt;

&lt;p&gt;Given an array of integers, find two numbers such that they add up to a specific target number.&lt;/p&gt;

&lt;p&gt;The function twoSum should return indices of the two numbers such that they add up to the target, where index1 must be less than index2. Please note that your returned answers (both index1 and index2) are not zero-based.&lt;/p&gt;

&lt;p&gt;You may assume that each input would have exactly one solution.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Input&lt;/strong&gt;: numbers={2, 7, 11, 15}, target=9
&lt;strong&gt;Output&lt;/strong&gt;: index1=1, index2=2&lt;/p&gt;

&lt;h4 id=&#34;é¢˜æ„-1&#34;&gt;é¢˜æ„ï¼š&lt;/h4&gt;

&lt;p&gt;å’Œä¸Šé¢˜ä¸­Two Sum1 æ¯”è¾ƒï¼Œå¤§å®¶å‘ç°ä»€ä¹ˆå¼‚åŒäº†æ²¡ï¼ˆæ²¡å‘ç°çš„ç«¥é‹é¢å£å»ï¼‰ï¼Œè¿™é“é¢˜ç›®ä»…ä»…æ›´æ”¹äº†è¾“å…¥æ¡ä»¶ï¼ŒInputçš„æ•°ç»„ä¸ºå·²ç»æ’åºçš„æ•°ç»„ï¼Œå¹¶ä¸”å‘ˆç°å‡åºã€‚è¾“å…¥æ¡ä»¶å˜ä¸¥æ ¼ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ä½¿ç”¨å‰ä¸€ç¯‡é—®ä¸ˆå¤«ä¸­çš„æ–¹æ³•è¿›è¡Œã€‚é‚£è¿™é‡Œæ—¢ç„¶ä¸ºå‡åºï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ä¸ä½¿ç”¨å‰ä¸€ç§æ–¹æ³•è€Œåˆèƒ½å¤Ÿè¾¾åˆ°Oï¼ˆnï¼‰æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å¿…ç„¶çš„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å…³é”®ç‚¹-1&#34;&gt;å…³é”®ç‚¹ï¼š&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;æ•°ç»„æ—¢ç„¶æ’åºï¼Œå…ƒç´ ä¹‹å‰çš„å¤§å°å…³ç³»ç›¸å¯¹ç¡®å®šï¼Œå­˜åœ¨çš„è¿™ä¸€å¯¹å…ƒç´ å¿…ç„¶å¤„äºç›¸å¯¹å›ºå®šçš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ¸¸æ ‡ï¼Œä¸€ä¸ªä»å¤´éƒ¨éå†ï¼Œä¸€ä¸ªä»å°¾éƒ¨éå†ï¼Œä¸¤è€…æ‰€æŒ‡å…ƒç´ ä¹‹å’Œå¦‚æœåå¤§ï¼Œè°ƒæ•´åé¢çš„æ¸¸æ ‡ï¼Œç›¸ååˆ™è°ƒæ•´å‰é¢çš„æ¸¸æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºä¸¤ä¸ªintä¹‹å’Œæœ‰å¯èƒ½å‡ºç°INT_MAXçš„æƒ…å†µï¼Œæ‰€ä»¥å¦‚æœè¾“å…¥ç±»å‹ç»™å®šintï¼Œåˆ™æˆ‘ä»¬éœ€è¦ä½¿ç”¨long longç±»å‹æ¥è¡¨ç¤ºæ‰èƒ½é¿å…å‡ºç°æº¢å‡ºçš„æƒ…å†µã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;twoSum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nLeft&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nRight&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	
	        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nLeft&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nRight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;c1&#34;&gt;// å°å¿ƒä¸¤ä¸ªintä¹‹å’Œæº¢å‡ºï¼Œä½¿ç”¨long longç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	            &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nAdd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nLeft&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nRight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
	            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nAdd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nLeft&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nRight&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	
	                &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	            &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nAdd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;nRight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	            &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nAdd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;nLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vecRet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; 
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ç”±äºTwo Sum2 é¢˜ç›®æ˜¯æ”¶è´¹çš„ï¼Œå› æ­¤æœ¨æœ‰è¿›è¡ŒleetCodeçš„OJè¯„åˆ¤ï¼Œç›´æ¥ä¸Šæœ¬åœ°è¿è¡Œæˆªå›¾å§ï¼Œsign~&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode003Run2.jpg&#34; alt=&#34;leetCode Two Sum 2  Run&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>[002] Intersection of Two Linked lists</title>
      <link>https://hechen.xyz/post/leetcode-003-intersection-of-two-linked-lists/</link>
      <pubDate>Wed, 29 Apr 2015 12:28:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/leetcode-003-intersection-of-two-linked-lists/</guid>
      
        <description>

&lt;h3 id=&#34;é¢˜ç›®-intersection-of-two-linked-lists&#34;&gt;é¢˜ç›®ï¼šIntersection of Two Linked lists&lt;/h3&gt;

&lt;p&gt;Write a program to find the node at which the intersection of two
singly linked lists begins.&lt;/p&gt;

&lt;p&gt;ã€€ã€€ã€€ã€€For example, the following two linked lists:&lt;/p&gt;

&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€A: a1 â†’ a2
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€â†˜
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€   c1 â†’ c2 â†’ c3
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€   â†— ã€€ã€€ã€€
      B: b1 â†’ b2 â†’ b3 ã€€ã€€
    ã€€begin to intersect at node c1.&lt;/p&gt;

&lt;p&gt;ã€€ã€€Notes:
ã€€ã€€ã€€ã€€1. If the two linked lists have no intersection at all, return null.
ã€€ã€€ã€€ã€€2. The linked lists must retain their original structure after the function returns.
ã€€ã€€ã€€ã€€3. You may assume there are no cycles anywhere in the entire linked structure.
ã€€ã€€ã€€ã€€4. Your code should preferably run in O(n) time and use only O(1) memory&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;é¢˜æ„&#34;&gt;é¢˜æ„ï¼š&lt;/h3&gt;

&lt;p&gt;è¾“å…¥ä¸¤ä¸ªå•é“¾è¡¨ï¼Œåˆ¤æ–­è¿™ä¸¤ä¸ªå•é“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼Œè¿”å›ç›¸äº¤ç‚¹ã€‚è¿™é‡Œæœ‰å‡ ç§æ–¹æ³•ä¾›å¤§å®¶å‚è€ƒã€‚ æœ¬æ–‡ä¸­æ‰€æœ‰ä»£ç å‡ä¸ºC++å®ç°ï¼Œå…¶ä»–è¯­è¨€ä»£ç ç¨åæˆ‘ä¼šè¡¥ä¸Šã€‚&lt;/p&gt;

&lt;h4 id=&#34;è§£æ³•1&#34;&gt;è§£æ³•1ï¼š&lt;/h4&gt;

&lt;p&gt;ã€Šç¼–ç¨‹ä¹‹ç¾ã€‹ä¸€ä¹¦ä¸­æœ‰è®²åˆ°è¯¥é—®é¢˜ï¼Œå¦‚ä½•åˆ¤æ–­è¿™ä¸¤ä¸ªé“¾è¡¨ç›¸äº¤ï¼Œå¯ä»¥è®²å…¶ä¸­ä¸€ä¸ªé“¾è¡¨çš„å¤´å°¾ç›¸è¿ï¼Œç„¶åä»å¦ä¸€ä¸ªé“¾è¡¨çš„è§’åº¦æ¥åˆ¤æ–­æ—¶å€™æœ‰ç¯çŠ¶é“¾è¡¨å­˜åœ¨å³å¯ã€‚ç›¸å½“äºå°†é—®é¢˜è½¬æ¢æˆå¦‚ä½•æ±‚æœ‰ç¯å•é“¾è¡¨çš„ç¯çŠ¶å…¥å£ç‚¹ï¼Ÿè¯¦ç»†æ–¹æ¡ˆè§æˆ‘çš„å¦ä¸€ç¯‡ä¸“é—¨è®²ç¯çŠ¶å•é“¾è¡¨çš„æ–‡ç«  ã€Šå…³äºæœ‰ç¯å•é“¾è¡¨çš„é‚£äº›äº‹å„¿ã€‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½æ”¹å˜åŸæœ‰é“¾è¡¨çš„ç»“æ„ï¼Œå› æ­¤æ–¹æ³•è¿”å›çš„æ—¶å€™éœ€è¦æ¢å¤åŸçŠ¶ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€1. å°†é“¾è¡¨Bçš„å°¾èŠ‚ç‚¹æŒ‡å‘å…¶å¤´èŠ‚ç‚¹HeadBï¼Œå› æ­¤é“¾è¡¨Bå½¢æˆç¯çŠ¶ï¼Œé“¾è¡¨Aæˆä¸ºæœ‰ç¯å•é“¾è¡¨ï¼›
ã€€ã€€2. æ­¤æ—¶é—®é¢˜è½¬æ¢æˆæ±‚é“¾è¡¨Aä¸Šç¯çŠ¶å…¥å£ç‚¹ï¼›
ã€€ã€€3. æ¢å¤é“¾è¡¨Bçš„ç»“æ„ï¼›&lt;/p&gt;

&lt;p&gt;ã€€ã€€ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *	 Definition for singly-linked list.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * struct ListNode {
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     int val;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     ListNode *next;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     ListNode(int x) : val(x), next(NULL) {}
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * };
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 */&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
			    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getIntersectionNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
					            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

				        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
				            &lt;span class=&#34;n&#34;&gt;pNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		        
				        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pRear&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
				        &lt;span class=&#34;n&#34;&gt;pNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

				        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pJoint&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loopJoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
				        &lt;span class=&#34;n&#34;&gt;pRear&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// æ¢å¤
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
				        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pJoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	    
		&lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;    
			    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loopJoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
		        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
		            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

		        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
		            &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		            &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

		            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
		                &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

		        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
		            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

		        &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pHead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
			    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
		            &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pFast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		            &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

		        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pSlow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCodeçš„OJç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹ï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode002C++1.png&#34; alt=&#34;leetCode C++ Solution1&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;è§£æ³•2&#34;&gt;è§£æ³•2ï¼š&lt;/h4&gt;

&lt;p&gt;ã€€ã€€ã€Šå‰‘æŒ‡Offerã€‹ä¸€ä¹¦ä¸­æåˆ°çš„è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœä¸¤ä¸ªæ²¡æœ‰ç¯çš„é“¾è¡¨ç›¸äº¤äºæŸä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªèŠ‚ç‚¹ä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ä¸¤ä¸ªé“¾è¡¨æ‰€å…±æœ‰çš„ã€‚å› æ­¤ä¸¤ä¸ªé“¾è¡¨ä»äº¤ç»‡ç‚¹ä¹‹å‰çš„éƒ¨åˆ†é•¿åº¦å·®å³ä¸ºæ•´æ¡é“¾è¡¨çš„é•¿åº¦å·®ï¼Œæˆ‘ä»¬åªè¦è®©ä¸¤æ¡é“¾è¡¨ä»ç¦»äº¤ç»‡ç‚¹ç›¸åŒè·ç¦»çš„ä½ç½®å¼€å§‹å‰è¿›ï¼Œç»è¿‡Oï¼ˆnï¼‰æ­¥ï¼Œä¸€å®šèƒ½å¤Ÿæ‰¾åˆ°äº¤ç»‡ç‚¹ã€‚
ã€€ã€€
ã€€ã€€1. éå†é“¾è¡¨Aï¼Œè®°å½•å…¶é•¿åº¦len1ï¼Œéå†é“¾è¡¨Bï¼Œè®°å½•å…¶é•¿åº¦len2ã€‚
ã€€ã€€
ã€€ã€€2.  æŒ‰å°¾éƒ¨å¯¹é½ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ä¸ç›¸åŒï¼Œè®©é•¿åº¦æ›´é•¿çš„é‚£ä¸ªé“¾è¡¨ä»å¤´èŠ‚ç‚¹å…ˆéå†abs(len1-en2),è¿™æ ·ä¸¤ä¸ªé“¾è¡¨æŒ‡é’ˆæŒ‡å‘å¯¹é½çš„ä½ç½®ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€3. ç„¶åä¸¤ä¸ªé“¾è¡¨é½å¤´å¹¶è¿›ï¼Œå½“å®ƒä»¬ç›¸ç­‰æ—¶ï¼Œå°±æ˜¯äº¤é›†çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€æ—¶é—´å¤æ‚åº¦O(n+m)ï¼Œç©ºé—´å¤æ‚åº¦O(1)&lt;/p&gt;

&lt;p&gt;ã€€ã€€ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;	   &lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;				 * Definition for singly-linked list.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;				 * struct ListNode {
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;				 *     int val;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;				 *     ListNode *next;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;				 *     ListNode(int x) : val(x), next(NULL) {}
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;				 * };
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		  */&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getIntersectionNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nLongLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nShortLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

	        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nLongLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nShortLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nShortLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nLongLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

	            &lt;span class=&#34;c1&#34;&gt;// æ ¡æ­£
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	            &lt;span class=&#34;n&#34;&gt;nLongLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;^=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nShortLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;nShortLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;^=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nLongLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;nLongLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;^=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nShortLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nLongLength&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nShortLength&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pShortList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pLongList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCodeçš„OJç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode002C++2.png&#34; alt=&#34;leetCode C++ Solution 2&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;è§£æ³•3&#34;&gt;è§£æ³•3ï¼š&lt;/h4&gt;

&lt;p&gt;ã€€è¿˜æœ‰ä¸€ç§è§£æ³•ï¼Œå®é™…ä¸Šè¿˜æ˜¯åˆ©ç”¨æ­¥å·®æ¥å®ç°çš„ï¼Œå…·ä½“è¯æ˜è¿˜ç±³æœ‰ææ‡‚ï¼Œæ€è€ƒä¸­ã€‚å…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€1. ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆpAå’ŒpBï¼Œåˆå§‹åˆ†åˆ«æŒ‡å‘é“¾è¡¨Aå’Œé“¾è¡¨Bã€‚ç„¶åè®©å®ƒä»¬åˆ†åˆ«éå†æ•´ä¸ªé“¾è¡¨ï¼Œæ¯æ­¥ä¸€ä¸ªèŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€2. å½“pAåˆ°è¾¾é“¾è¡¨æœ«å°¾æ—¶ï¼Œè®©å®ƒæŒ‡å‘Bçš„å¤´èŠ‚ç‚¹ï¼›ç±»ä¼¼çš„å½“pBåˆ°è¾¾é“¾è¡¨æœ«å°¾æ—¶ï¼Œé‡æ–°æŒ‡å‘Açš„å¤´èŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€3. å½“pAå’ŒpBç›¸é‡æ—¶ä¹Ÿå³ä¸ºäº¤ç»‡ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¾ç„¶ä¸ºOï¼ˆm + nï¼‰,æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚&lt;/p&gt;

&lt;p&gt;å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * Definition for singly-linked list.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * struct ListNode {
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     int val;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     ListNode *next;
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 *     ListNode(int x) : val(x), next(NULL) {}
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;		 * };
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;	 */&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		    &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getIntersectionNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
		            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	
	            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;nodeB&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nodeA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCodeçš„OJç³»ç»Ÿè¯„åˆ¤ç»“æœï¼š
&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode002C++3.png&#34; alt=&#34;leetCode C++  Solution3&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>å…³äºLambdaçš„ä¸€ç‚¹æ¢³ç†</title>
      <link>https://hechen.xyz/post/%E5%85%B3%E4%BA%8Elambda%E7%9A%84%E4%B8%80%E7%82%B9%E6%A2%B3%E7%90%86/</link>
      <pubDate>Wed, 29 Apr 2015 11:57:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/%E5%85%B3%E4%BA%8Elambda%E7%9A%84%E4%B8%80%E7%82%B9%E6%A2%B3%E7%90%86/</guid>
      
        <description>

&lt;p&gt;å…³äºC++11çš„æ–°ç‰¹æ€§ï¼Œæœ€è¿‘æ¥è§¦æ¯”è¾ƒå¤šçš„å°±æ˜¯å…³äºthreadçš„éƒ¨åˆ†ï¼Œè¿˜æœ‰å°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œä»Šå¤©ä¸»è¦é’ˆå¯¹Lambdaçš„ç”¨æ³•è¿›è¡Œä¸€å®šçš„é˜è¿°å’Œæ±‡æ€»ï¼ˆå‚è€ƒé“¾æ¥åœ¨æ–‡ç« ä¸‹æ–¹ï¼Œå‘å¤§å¸ˆè‡´æ•¬ï¼ï¼‰ï¼ŒåŒæ—¶ç»™è‡ªå·±æ¢³ç†ä¸‹çŸ¥è¯†ç‚¹ï¼ŒåŠ æ·±å°è±¡ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;åŸºæœ¬çš„Lambdaè¡¨è¾¾å¼å¦‚ä¸‹æ‰€ç¤ºï¼Œè¯¥è¡¨è¾¾å¼è®¡ç®—ä¸€ä¸ªæ•´å‹æ•°æ®çš„å¹³æ–¹å€¼å¹¶è¿”å›ï¼Œå¹¶ä¸”è¯¥è¡¨è¾¾å¼èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ï¼Œæ˜¯ä¸æ˜¯ç‰¹åˆ«æ–¹ä¾¿ï¼Ÿä¸å†éœ€è¦å°†ç±»æœ¬èº«å’Œå‡½æ•°å®šä¹‰åˆ†å‰²å¼€æ¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚æœä½ éœ€è¦é‡ç”¨è¯¥æ®µä»£ç ç‰‡æ®µï¼Œå¯ä»¥å°†è¯¥å‡½æ•°ä¿å­˜ä¸ºæœ¬åœ°å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªèƒ½å¤Ÿè®¡ç®—æµ®ç‚¹ç±»å‹çš„Lambdaè¡¨è¾¾å¼æ€ä¹ˆåŠï¼Ÿ æˆ–è€…æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿè®¡ç®—å¤æ•°ï¼ˆcomplex numberï¼‰æ€ä¹ˆåŠï¼Ÿ æˆ‘ä»¬éœ€è¦çš„å°±åƒä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// int çš„å¹³æ–¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// doubleçš„å¹³æ–¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.1415&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// å¤æ•°çš„å¹³æ–¹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;complex&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å¦‚ä½•è®©ä»£ç å¤ç”¨èµ·æ¥ï¼Ÿ å½“ç„¶æ˜¯ å‡½æ•°æ¨¡æ¿ï¼ˆfunction templateï¼‰äº†ã€‚ å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;k&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
         &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä½†æ˜¯å‡½æ•°æ¨¡æ¿å¹¶ä¸æ˜¯é‚£ç¯‡æ–‡ç« æ‰€è¿½æ±‚çš„ï¼Œä»¥ä¸Šçš„è¿™æ®µä»£ç è¢«ç§°ä½œæ˜¯ a named global function. è€Œåœ¨æœ€æ–°çš„é€šè¿‡çš„C++14æ ‡å‡†ä¸­å¼•å…¥äº† generalized lambdaçš„æ¦‚å¿µã€‚æˆ‘ä»¬å…è®¸lambdaè¡¨è¾¾å¼çš„ä¼ å‚ç±»å‹ä¸ºautoç±»å‹ï¼ˆçœ‹æ¥C++æ˜¯è¦å¼ºåŒ–ç±»å‹è‡ªåŠ¨æ¨å¯¼å•Šï¼Œautoå…³é”®å­—èƒ½å¤Ÿä½¿ç”¨çš„åœ°æ–¹è¶Šæ¥è¶Šå¤šäº†ã€‚ï¼‰ï¼Œå¦‚ä¸‹æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨æ›´çŸ­ï¼Œæ›´ä¼˜é›…çš„ä»£ç å®ç°ä»¥ä¸Šéœ€æ±‚ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;     &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;complex&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Store a generalized lambda, that squares a number, in a variable
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  
        &lt;span class=&#34;c1&#34;&gt;// Usage examples:
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// square of an int
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
        &lt;span class=&#34;c1&#34;&gt;// square of a double
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;2.345&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
        &lt;span class=&#34;c1&#34;&gt;// square of a complex number
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;complex&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
     &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶å®lambdaè¡¨è¾¾å¼å’ŒSTLåœ¨ä¸€èµ·ä½¿ç”¨èƒ½å¤Ÿå‘æŒ¥å¾ˆå¤§çš„ä½œç”¨ï¼Œå‡è®¾ä½ è¦æ’åºä¸€ä¸ªvectorè®©å…¶é™åºï¼Œä½¿ç”¨generic lambdaï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼Œå¯¹ä¸€ä¸ªåŒ…å«10ä¸ªæ•´å‹æ•°æ®çš„vectorè¿›è¡Œæ’åºï¼Œä½¿ä¹‹é™åºã€‚ç»“åˆSTLå’ŒGeneric Lambdaï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;     &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;vector&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;numeric&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;     &lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;algorithm&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;	    
	 &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      
        &lt;span class=&#34;c1&#34;&gt;// Use std::iota to create a sequence of integers 0, 1, ...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iota&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
     
        &lt;span class=&#34;c1&#34;&gt;// Print the unsorted data using std::for_each and a lambda
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Original data&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;for_each&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
        &lt;span class=&#34;c1&#34;&gt;// Sort the data using std::sort and a lambda
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
     
        &lt;span class=&#34;c1&#34;&gt;// Print the sorted data using std::for_each and a lambda
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Sorted data&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;for_each&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼›&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­å…³äºlambdaè¡¨è¾¾å¼å‰é¢çš„[], ä½œè€…åªå­—æœªæï¼Œ[]æ˜¯æ•è·åˆ—è¡¨ï¼ˆcapture listï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†lambdaè¡¨è¾¾å¼å¤–å›´å®šä¹‰çš„å˜é‡æ•è·ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿåœ¨lambdaè¡¨è¾¾å¼å†…éƒ¨ä½¿ç”¨ã€‚ä¸é€šä¿—çš„è¯´capture listæŒ‡å®šäº†åœ¨å¯è§åŸŸèŒƒå›´å†…lambdaè¡¨è¾¾å¼çš„ä»£ç å†…å¯è§çš„å¤–éƒ¨å˜é‡çš„åˆ—è¡¨ï¼Œå…·ä½“æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š
1. [a, &amp;amp;b] aå˜é‡ä¼ å€¼æ•è·ï¼Œbå¼•ç”¨æ•è·ï¼Œè¿™å’Œæ™®é€šå‡½æ•°ä¼ å‚ç›¸ç±»ä¼¼ï¼›
2. [this] ä»¥å€¼çš„æ–¹å¼æ•è·thisæŒ‡é’ˆ
3. [&amp;amp;]ä»¥å¼•ç”¨çš„æ–¹å¼æ•è·å¤–éƒ¨è‡ªåŠ¨å˜é‡
4. [=] ä»¥å€¼çš„æ–¹å¼æ•è·å¤–éƒ¨è‡ªåŠ¨å˜é‡
5. [] ä¸æ•è·ä»»ä½•å¤–éƒ¨å˜é‡ï¼Œ ä»¥ä¸Šæ‰€æœ‰ä»£ç å‡å±äºæ­¤ç§ã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒæ–‡ç« ä¸­ä½œè€…åœ¨å›ç­”è¯»è€…æå‡ºçš„ä¸ºä»€ä¹ˆä¸è®²è§£[]çš„åŸå› æ˜¯å›ç­”åˆ°ï¼šä½¿ç”¨æ•è·åˆ—è¡¨ä¼šä½¿ä½ çš„ä»£ç å˜å¾—bad~,å› æ­¤ä»–ä¸é¼“åŠ±ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒï¼š&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://solarianprogrammer.com/2014/08/28/cpp-14-lambda-tutorial/&#34;&gt;https://solarianprogrammer.com/2014/08/28/cpp-14-lambda-tutorial/&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>[001] Maximum Product Subarray</title>
      <link>https://hechen.xyz/post/leetcode-001-maximum-product-subarray/</link>
      <pubDate>Wed, 29 Apr 2015 11:30:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/leetcode-001-maximum-product-subarray/</guid>
      
        <description>

&lt;h3 id=&#34;é¢˜ç›®&#34;&gt;é¢˜ç›®ï¼š&lt;/h3&gt;

&lt;p&gt;Find the contiguous subarray within an array (containing at least one number) which has the largest product.
         For example, given the array [2,3,-2,4], the contiguous subarray [2,3] has the largest product = 6.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h3 id=&#34;é¢˜æ„&#34;&gt;é¢˜æ„ï¼š&lt;/h3&gt;

&lt;p&gt;é¢˜ç›®ä¸­ç»™å‡ºä¸€ä¸ªï¼ˆè‡³å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰æ•´å½¢æ•°ç»„ï¼Œæ±‚ä¸€ä¸ªå­æ•°ç»„ï¼ˆå…ƒç´ è¿ç»­ï¼‰ï¼Œä½¿å¾—å…¶å…ƒç´ ä¹‹ç§¯æœ€å¤§ã€‚æœ€ç›´æ¥äº†å½“çš„æ–¹æ³•ï¼Œå½“ç„¶æ˜¯æš´åŠ›ç©·ä¸¾ï¼Œä½†æ˜¯å…¶O(n^2)æ˜¯æ— æ³•é€šè¿‡LeetCodeçš„OJçš„ï¼Œè€Œä¸”ä»è‡ªå·±å¹³æ—¶æ¥è§¦åˆ°å¾—é¢è¯•é¢˜è€Œè¨€ï¼Œç›´æˆªäº†å½“çš„æš´åŠ›è§£æ³•å¾€å¾€ä¸æ˜¯çœŸæ­£çš„è§£å†³æ€è·¯ã€‚&lt;/p&gt;

&lt;p&gt;Cè¯­è¨€å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;maxProduct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numsSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

            &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numsSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
                &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

                &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

                &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCode Ojç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode001C.png&#34; alt=&#34;leetCode C&#34; /&gt;&lt;/p&gt;

&lt;p&gt;C++å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;err&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
		    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;maxProduct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
	            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
	            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

	            &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	                &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	                &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

	                &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
	                &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

	                &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
		    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCodeçš„OJç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode001C++.png&#34; alt=&#34;leetCode C++&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Javaå®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
		 &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;maxProduct&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;];&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;];&lt;/span&gt;
            &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;];&lt;/span&gt;

            &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
                &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

                &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;((&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;];&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;min_tmp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;((&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;];&lt;/span&gt;

                &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_tmp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nMaxPro&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
	    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;leetCodeçš„OJç³»ç»Ÿè¯„åˆ¤ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xilk1.com1.z0.glb.clouddn.com/leetCode001Java.png&#34; alt=&#34;leetCode Java&#34; /&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>scala Day2</title>
      <link>https://hechen.xyz/post/scala%E7%AC%AC%E4%BA%8C%E5%A4%A9/</link>
      <pubDate>Thu, 16 Apr 2015 18:43:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/scala%E7%AC%AC%E4%BA%8C%E5%A4%A9/</guid>
      
        <description>

&lt;p&gt;å› ä¸ºè¿™å‡ å¤©åœ¨å­¦ä¹ Courseraå…¬å¼€è¯¾&lt;a href=&#34;https://class.coursera.org/reactive-002&#34;&gt;Principles of Reactive Programming&lt;/a&gt; ï¼Œå› ä¸ºä¹‹å‰æœ¨æœ‰æœ¨æœ‰æ³¨æ„åˆ°éœ€è¦å¯¹è‡³å°‘ä¸€é—¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€solid foundationï¼Œå› æ­¤åªèƒ½ä¸´æ—¶æŠ±ä½›è„šï¼Œæ°å¥½æ‰‹å¤´æœ‰ä¸€æœ¬ä¸ƒå‘¨ä¸ƒè¯­è¨€è¿™æœ¬ä¹¦ä¸€ç›´æœ¨æœ‰çœ‹ï¼Œå€Ÿç€è¿™ä¸ªè¯¾ç¨‹çš„ç£ä¿ƒæŠŠè¿™æœ¬ä¹¦ç¿»çœ‹ä¸‹ï¼Œå½“ç„¶å†…å®¹ä»…åŒ…æ‹¬Scalaè¿™ä¸€ç« ï¼Œä»Šå¤©çœ‹åˆ°ç¬¬äºŒå¤©çš„å†…å®¹ï¼Œé‡å¤´æˆæ˜¯Collectionã€‚è¿™ç¯‡blogä¸»è¦è®°å½•å…³äºè¿™æ¬¡è‡ªä¹ é¢˜çš„è§£ç­”ã€‚&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&#34;æ‰¾&#34;&gt;æ‰¾&lt;/h2&gt;

&lt;h3 id=&#34;å…³äºå¦‚ä½•ä½¿ç”¨scalaæ–‡ä»¶çš„è®¨è®º&#34;&gt;å…³äºå¦‚ä½•ä½¿ç”¨Scalaæ–‡ä»¶çš„è®¨è®º&lt;/h3&gt;

&lt;p&gt;æ—¢ç„¶Scalaå¯ä»¥ä½¿ç”¨Javaä¸­ä»»æ„çš„å¯¹è±¡ï¼ˆObjectsï¼‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨Javaä¸­é’ˆå¯¹æ–‡ä»¶çš„æ“ä½œï¼Œä¾‹å¦‚java.io.Fileå°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;java.io._&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;object&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Test&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;PrintWriter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;File&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;test.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello Scala&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä»æœ¬åœ°è¯»å–æ–‡ä»¶ï¼Œscalaåº“è‡ªå¸¦æ–‡ä»¶è¯»å–ï¼Œå¦‚ä¸‹æ‰€ç¤ºä»£ç ä¸ºä¸€æ®µç¤ºä¾‹ï¼Œå¯ä»¥è¯»å–æœ¬åœ°æ–‡ä»¶ä¸­å¾—å†…å®¹
è¯»å–æ–‡ä»¶å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scala.io.Source&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;object&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Test&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
   &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Following is the content read:&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

      &lt;span class=&#34;nc&#34;&gt;Source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromFile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;test.txt&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; 
         &lt;span class=&#34;n&#34;&gt;print&lt;/span&gt; 
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
   &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;é—­åŒ…-closure-å’Œä»£ç å—æœ‰ä½•ä¸åŒ&#34;&gt;é—­åŒ…(closure)å’Œä»£ç å—æœ‰ä½•ä¸åŒ&lt;/h3&gt;

&lt;p&gt;å…³äºé—­åŒ…çš„æ¦‚å¿µï¼Œåªèƒ½ä»ç½‘è·¯ä¸ŠæŸ¥æ‰¾èµ„æ–™åŠ ä¸Šè‡ªå·±ç†è§£å†™&lt;/p&gt;

&lt;h5 id=&#34;é—­åŒ…-closure&#34;&gt;é—­åŒ…ï¼ˆclosureï¼‰&lt;/h5&gt;

&lt;blockquote&gt;
&lt;p&gt;é—­åŒ…æ˜¯å¯ä»¥åŒ…å«è‡ªç”±ï¼ˆæœªç»‘å®šåˆ°ç‰¹å®šå¯¹è±¡ï¼‰å˜é‡çš„ä»£ç å—ï¼›è¿™äº›å˜é‡ä¸æ˜¯åœ¨è¿™ä¸ªä»£ç å—å†…æˆ–è€…ä»»ä½•å…¨å±€ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„ï¼Œè€Œæ˜¯åœ¨å®šä¹‰ä»£ç å—çš„ç¯å¢ƒä¸­å®šä¹‰ï¼ˆå±€éƒ¨å˜é‡ï¼‰ã€‚â€œé—­åŒ…â€ ä¸€è¯æ¥æºäºä»¥ä¸‹ä¸¤è€…çš„ç»“åˆï¼šè¦æ‰§è¡Œçš„ä»£ç å—ï¼ˆç”±äºè‡ªç”±å˜é‡è¢«åŒ…å«åœ¨ä»£ç å—ä¸­ï¼Œè¿™äº›è‡ªç”±å˜é‡ä»¥åŠå®ƒä»¬å¼•ç”¨çš„å¯¹è±¡æ²¡æœ‰è¢«é‡Šæ”¾ï¼‰å’Œä¸ºè‡ªç”±å˜é‡æä¾›ç»‘å®šçš„è®¡ç®—ç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰ã€‚åœ¨ Scalaã€Schemeã€Common Lispã€Smalltalkã€Groovyã€JavaScriptã€Rubyã€ Pythonã€Goã€Luaã€objective c ä»¥åŠJavaï¼ˆJava8åŠä»¥ä¸Šï¼‰ç­‰è¯­è¨€ä¸­éƒ½èƒ½æ‰¾åˆ°å¯¹é—­åŒ…ä¸åŒç¨‹åº¦çš„æ”¯æŒã€‚    â€”â€” &lt;a href=&#34;http://baike.baidu.com/link?url=vlR71k-FJO5znXeaUghn2u7BXXLi9B4K0_l1i345azAKmXmU-q8TgLxPYxqQJHQaDQgnd8RvjImY1nS7rSH5g_&#34;&gt;ç™¾åº¦ç™¾ç§‘&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h5 id=&#34;ä»£ç å—-block&#34;&gt;ä»£ç å—ï¼ˆBlockï¼‰&lt;/h5&gt;

&lt;p&gt;è€Œä»£ç å—æ˜¯è¯­æ³•ä¸Šç”±ä¸€äº›é€»è¾‘æ€§è¯­å¥ç»„æˆçš„ä¸€ä¸ªä¸€ä¸ªå•å…ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// one Block
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// another Block
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&#34;åš&#34;&gt;åš&lt;/h2&gt;

&lt;h3 id=&#34;ä½¿ç”¨foldleftæ–¹æ³•è®¡ç®—ä¸€ä¸ªåˆ—è¡¨ä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„é•¿åº¦&#34;&gt;ä½¿ç”¨foldLeftæ–¹æ³•è®¡ç®—ä¸€ä¸ªåˆ—è¡¨ä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„é•¿åº¦&lt;/h3&gt;

&lt;h4 id=&#34;å…³äºfoldleftå’Œfoldright&#34;&gt;å…³äºfoldLeftå’ŒfoldRight&lt;/h4&gt;

&lt;h5 id=&#34;foldleft&#34;&gt;foldLeft&lt;/h5&gt;

&lt;p&gt;Scalaä¸­foldLeftæ–¹æ³•å®šä¹‰åœ¨&lt;a href=&#34;https://github.com/scala/scala/blob/v2.11.6/src/library/scala/collection/GenTraversableOnce.scala#L1&#34;&gt;GenTraversableOnce.scala&lt;/a&gt;æ–‡ä»¶ä¸­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/** Applies a binary operator to a start value and all elements of this $coll,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  going left to right.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  $willNotTerminateInf
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  $orderDependentFold
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  @param   z    the start value.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  @param   op   the binary operator.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  @tparam  B    the result type of the binary operator.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *  @return  the result of inserting `op` between consecutive elements of this $coll,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *           going left to right with the start value `z` on the left:
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *           {{{
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *             op(...op(z, x_1), x_2, ..., x_n)
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *           }}}
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *           where `x,,1,,, ..., x,,n,,` are the elements of this $coll.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;*/&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foldLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å®ç°åœ¨&lt;a href=&#34;https://github.com/scala/scala/blob/v2.11.6/src/library/scala/collection/TraversableOnce.scala#L1&#34;&gt;TraversableOnce.scala&lt;/a&gt;é‡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;  &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foldLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œz å’Œ opï¼Œ å…¶ä¸­zæ˜¯Bç±»å‹ï¼Œopæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºBç±»å‹çš„æ–¹æ³•ã€‚å…¶å®è¯¥æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªç‰ˆæœ¬éœ€è¦ç”¨åˆ°:/æ“ä½œç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt; &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/:[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foldLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¯¥æ–¹æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨äº†foldLeftæ–¹æ³•ã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt; &lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

 &lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foldLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;res6&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Int&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;foldLeftæ–¹æ³•è¢«ä¼ å…¥ä¸€ä¸ªåˆå§‹å€¼å’Œä¸€ä¸ªä»£ç å—ï¼Œè¿™ä¸ªä»£ç å—æœ‰ä¸¤ä¸ªå‚æ•°sum å’Œ valueï¼ŒfoldLeftå°†sumåˆå§‹åŒ–ä¸º0ï¼Œè€Œvalueé€šè¿‡listéå†å°†listä¸­æ¯ä¸ªå…ƒç´ ç´¯åŠ åˆ°sumä¸Šï¼Œå› æ­¤è¯¥è¡Œä»£ç å®ç°äº†å¯¹listä¸­å…ƒç´ çš„ç´¯åŠ ã€‚&lt;/p&gt;

&lt;h5 id=&#34;foldright&#34;&gt;foldRight&lt;/h5&gt;

&lt;p&gt;foldRightçš„å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;   &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foldRight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

   &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foldRight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
   &lt;span class=&#34;n&#34;&gt;reversed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foldLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°foleRightå†…éƒ¨è¿˜æ˜¯è°ƒç”¨çš„foldLeftæ–¹æ³•ï¼Œä¸è¿‡å¤šäº†ä¸€ä¸ªreversedï¼Œå®ƒå…¶å®æ˜¯è¯¥traitå®šä¹‰çš„å†…éƒ¨æ–¹æ³•ï¼Œå®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// @tparam A    the element type of the collection
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// for internal use
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;protected&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reversed&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Nil&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;çœ‹æ¥foldRightä½¿ç”¨listçš„é€†åºé›†åˆç„¶åå†è¿›è¡ŒfoldLeftï¼Œéœ€è¦æ³¨æ„çš„æ˜¯foldRightæ–¹æ³•ä¸­éœ€è¦ä¼ å…¥çš„block&lt;strong&gt;å‚æ•°é¡ºåº&lt;/strong&gt;å‘ç”Ÿäº†å˜åŒ–ï¼Œå‰è€…æ˜¯åˆ—è¡¨å‚æ•°ï¼ˆè‡ªå·±ç†è§£ï¼Œä¸çŸ¥æ‰€ä»¥ï¼‰ã€‚è¿™æ ·çš„è¯ï¼ŒfoldRightç›¸å¯¹foldLeftæ¥è®²æ•ˆç‡è‚¯å®šå°±å·®ä¸€ç‚¹äº†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foldRight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;res10&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Int&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;85&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;å›å½’æ­£é¢˜&lt;/strong&gt;
  é¢˜ç›®ä¸­è¦æ±‚è®¡ç®—ä¸€ä¸ªåˆ—è¡¨ä¸­å­—ç¬¦ä¸²çš„é•¿åº¦ä¹‹å’Œä¹Ÿå°±è¿åˆƒè€Œè§£ï¼Œå…³é”®æ˜¯æ˜ç™½foldLeftæ–¹æ³•çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt; &lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;one&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;two&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;three&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;one&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;two&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;three&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

 &lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Int&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;

 &lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foldLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
 &lt;span class=&#34;n&#34;&gt;length2&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Int&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿ç®—ç¬¦ /: å’ŒfoldLeftæ–¹æ³•å‡èƒ½å®ç°éœ€æ±‚ï¼ˆæœ¬è´¨ä¸Šä¸€æ ·ä¸€æ ·çš„ï¼‰&lt;/p&gt;

&lt;p&gt;###ç¼–å†™ä¸€ä¸ªCensor traitï¼ŒåŒ…å«ä¸€ä¸ªå¯å°†Puckyå’ŒBeansæ›¿æ¢ä¸ºShootå’ŒDarnçš„æ–¹æ³•ã€‚ä½¿ç”¨æ˜ å°„å­˜å‚¨è„è¯å’Œä»–ä»¬çš„æ›¿ä»£å“&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scala.collection.mutable.Map&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Censor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;curseWords&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Pucky&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Shoot&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Beans&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Darn&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
 
  &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;censor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;curseWords&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foldLeft&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;curr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;prev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;replaceAll&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;curr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;curr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Censor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;origin&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;words&lt;/span&gt;
 
  &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transform&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;censor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
 
&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Pucky &amp;amp;&amp;amp; Beans&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Original String: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;origin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Replaced String: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;transform&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;è¾“å‡ºç»“æœ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼š&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scala&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Censor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; 
&lt;span class=&#34;nc&#34;&gt;Original&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Pucky&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Beans&lt;/span&gt;
&lt;span class=&#34;nc&#34;&gt;Replaced&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Shoot&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Darn&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;###ä»ä¸€ä¸ªæ–‡ä»¶ä¸­åŠ è½½è„è¯æˆ–è€…å®ƒä»¬çš„æ›¿ä»£å“
é€šè¿‡é’ˆå¯¹scalaå¯¹æ–‡ä»¶è¯»å†™çš„è®¨è®ºï¼Œå°±å¯ä»¥å¾ˆè½»æ¾çš„å†™å‡ºè¿™é“é¢˜çš„ç­”æ¡ˆï¼Œä¸»è¦æ˜¯éœ€è¦å°†mapä¸­å­˜å‚¨çš„æ˜ å°„å…³ç³»å­˜å‚¨ä¸‹æ¥è¿›è¡Œè¯»å–ã€‚é¦–å…ˆè¯»å–ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scala.collection.mutable.Map&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;fileRead&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;curseWords&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;String&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]()&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fromFile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;./files/censor.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getLines&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;subWords&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;curseWords&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subWords&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;subWords&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;After Read, curseWords are&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;curseWords&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;gt;&amp;gt;&amp;gt; key=&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;, value=&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;lt;&amp;lt;&amp;lt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;tryFile&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fileRead&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fileObj&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tryFile&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å†™å…¥æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;scala.collection.mutable.Map&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;java.io._&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;fileWrite&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;curseWords&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Pucky&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Shoot&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Beans&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Darn&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;writeMapToFile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Start to write map to file&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;PrintWriter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;File&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;./files/curseToWrite.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;curseWords&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end to write map to file&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;tryFile&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fileWrite&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fileObj&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tryFile&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;fileObj&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;writeMapToFile&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;That&amp;rsquo;s all! å…³äºé—­åŒ…çš„ç¤ºä¾‹æ™šä¸Šå›å®¶è¡¥ä¸Š~~~ å·¥ä½œé¸Ÿ&lt;/p&gt;

&lt;p&gt;å‚è€ƒé“¾æ¥ï¼š
&lt;a href=&#34;http://www.tutorialspoint.com/scala/scala_file_io.htm&#34;&gt;http://www.tutorialspoint.com/scala/scala_file_io.htm&lt;/a&gt;
&lt;a href=&#34;http://blog.csdn.net/oopsoom/article/details/23447317&#34;&gt;http://blog.csdn.net/oopsoom/article/details/23447317&lt;/a&gt;
&lt;a href=&#34;http://zhangjunhd.github.io/2013/12/22/scala-note7-file.html&#34;&gt;http://zhangjunhd.github.io/2013/12/22/scala-note7-file.html&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>åšå®¢ä¹‹æ—…</title>
      <link>https://hechen.xyz/post/myfirstpost/</link>
      <pubDate>Wed, 15 Apr 2015 16:14:00 +0000</pubDate>
      
      <guid>https://hechen.xyz/post/myfirstpost/</guid>
      
        <description>&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä½ ä¸ç»™è‡ªå·±çƒ¦æ¼ï¼Œåˆ«äººä¹Ÿæ°¸è¿œä¸å¯èƒ½ç»™ä½ çƒ¦æ¼ï¼Œå› ä¸ºä½ è‡ªå·±çš„å†…å¿ƒï¼Œä½ æ”¾ä¸ä¸‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å…¶å®å†™åšå®¢ä¸€ç›´åœ¨æˆ‘çš„ToDoListä¸Šï¼Œä¸è¿‡æ”¾çš„æ—¶é—´æœ‰ç‚¹ä¹…ã€‚æˆ‘å°±æ˜¯è¿™æ ·ä¸€ä¸ªäººï¼Œæƒ³å¹²çš„å¤ªå¤šï¼Œåšåˆ°çš„å´ç›¸å½“å°‘ã€‚å› æ­¤å†™è¿™ä¸ªåšå®¢çš„ç›®çš„ä¹Ÿæ˜¯æƒ³ç£ä¿ƒè‡ªå·±å‰è¡Œï¼Œè®°å½•ç”Ÿæ´»ç‚¹æ»´çš„åŒæ—¶ä¹Ÿèƒ½å¤Ÿè®©è‡ªå·±å¯¹ç”Ÿæ´»æœ‰ä¸€äº›æ„Ÿæ‚Ÿã€‚å‘Šè¯‰è‡ªå·±ï¼Œä¸–ç•Œå¾ˆå¤§ï¼Œåƒä¸‡ä¸è¦å±€é™åœ¨è‡ªå·±çš„å°åœˆåœˆé‡Œæ— æ³•è‡ªæ‹”ï¼&lt;/p&gt;
</description>
      
    </item>
    
  </channel>
</rss>